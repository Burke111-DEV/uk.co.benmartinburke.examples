"use strict";(self.webpackChunksecret_santa_v1=self.webpackChunksecret_santa_v1||[]).push([[179],{2011:(Ct,Oe,H)=>{H.d(Oe,{Dh:()=>be,GT:()=>ye,cc:()=>Fe,hO:()=>$e,on:()=>Y,pX:()=>fe,xv:()=>Ce});var o=H(4650),z=H(9260),N=H(4976);Ct=H.hmd(Ct);const ae=["ngOnDestroy"],fe=(ve,wt,yt,Ae={})=>new Proxy(ve,{get:(Ie,ke)=>yt.runOutsideAngular(()=>{var qe;if(ve[ke])return!(null===(qe=Ae?.spy)||void 0===qe)&&qe.get&&Ae.spy.get(ke,ve[ke]),ve[ke];if(ae.indexOf(ke)>-1)return()=>{};const Ze=wt.toPromise().then(he=>{const Je=he&&he[ke];return"function"==typeof Je?Je.bind(he):Je&&Je.then?Je.then(kt=>yt.run(()=>kt)):yt.run(()=>Je)});return new Proxy(()=>{},{get:(he,Je)=>Ze[Je],apply:(he,Je,kt)=>Ze.then(vt=>{var Zt;const ht=vt&&vt(...kt);return!(null===(Zt=Ae?.spy)||void 0===Zt)&&Zt.apply&&Ae.spy.apply(ke,kt,ht),ht})})})}),ye=(ve,wt)=>{wt.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(Ae=>{Object.defineProperty(ve.prototype,Ae,Object.getOwnPropertyDescriptor(yt.prototype||yt,Ae))})})};class se{constructor(wt){return wt}}const be=new o.OlP("angularfire2.app.options"),Ce=new o.OlP("angularfire2.app.name");function Y(ve,wt,yt){const Ie="object"==typeof yt&&yt||{};Ie.name=Ie.name||"string"==typeof yt&&yt||"[DEFAULT]";const qe=z.Z.apps.filter(Ze=>Ze&&Ze.name===Ie.name)[0]||wt.runOutsideAngular(()=>z.Z.initializeApp(ve,Ie));try{JSON.stringify(ve)!==JSON.stringify(qe.options)&&Z("error",`${qe.name} Firebase App already initialized with different options${Ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new se(qe)}const Z=(ve,...wt)=>{(0,o.X6Q)()&&typeof console<"u"&&console[ve](...wt)},ne={provide:se,useFactory:Y,deps:[be,o.R0b,[new o.FiY,Ce]]};let $e=(()=>{class ve{constructor(yt){z.Z.registerVersion("angularfire",N.q4.full,"core"),z.Z.registerVersion("angularfire",N.q4.full,"app-compat"),z.Z.registerVersion("angular",o.q4F.full,yt.toString())}static initializeApp(yt,Ae){return{ngModule:ve,providers:[{provide:be,useValue:yt},{provide:Ce,useValue:Ae}]}}}return ve.\u0275fac=function(yt){return new(yt||ve)(o.LFG(o.Lbi))},ve.\u0275mod=o.oAB({type:ve}),ve.\u0275inj=o.cJS({providers:[ne]}),ve})();function Fe(ve,wt,yt,Ae,Ie){const[,ke,qe]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===ve)||[];if(ke)return function xe(ve,wt){try{return ve.toString()===wt.toString()}catch{return ve===wt}}(Ie,qe)||(Ee("error",`${wt} was already initialized on the ${yt} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Ie,was:qe})),ke;{const Ze=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ve,Ze,Ie]),Ze}}const rt=!!Ct.hot,Ee=(ve,...wt)=>{(0,o.X6Q)()&&typeof console<"u"&&console[ve](...wt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Ct,Oe,H)=>{H.d(Oe,{q4:()=>kl,iC:()=>Fl,fc:()=>Nl,HU:()=>b_,vb:()=>Pl,JM:()=>v_});var o=H(4650),z=H(259),N=H(5861),ae=H(6881),fe=H(2090),ye=H(4859),se=H(1877);let Ce,Y;const $e=new WeakMap,Fe=new WeakMap,xe=new WeakMap,rt=new WeakMap,Ee=new WeakMap;let yt={get(C,S,A){if(C instanceof IDBTransaction){if("done"===S)return Fe.get(C);if("objectStoreNames"===S)return C.objectStoreNames||xe.get(C);if("store"===S)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return qe(C[S])},set:(C,S,A)=>(C[S]=A,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function ke(C){return"function"==typeof C?function Ie(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(Ze(this),S),qe($e.get(this))}:function(...S){return qe(C.apply(Ze(this),S))}:function(S,...A){const j=C.call(Ze(this),S,...A);return xe.set(j,S.sort?S.sort():[S]),qe(j)}}(C):(C instanceof IDBTransaction&&function wt(C){if(Fe.has(C))return;const S=new Promise((A,j)=>{const K=()=>{C.removeEventListener("complete",te),C.removeEventListener("error",_e),C.removeEventListener("abort",_e)},te=()=>{A(),K()},_e=()=>{j(C.error||new DOMException("AbortError","AbortError")),K()};C.addEventListener("complete",te),C.addEventListener("error",_e),C.addEventListener("abort",_e)});Fe.set(C,S)}(C),((C,S)=>S.some(A=>C instanceof A))(C,function Z(){return Ce||(Ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,yt):C)}function qe(C){if(C instanceof IDBRequest)return function ve(C){const S=new Promise((A,j)=>{const K=()=>{C.removeEventListener("success",te),C.removeEventListener("error",_e)},te=()=>{A(qe(C.result)),K()},_e=()=>{j(C.error),K()};C.addEventListener("success",te),C.addEventListener("error",_e)});return S.then(A=>{A instanceof IDBCursor&&$e.set(A,C)}).catch(()=>{}),Ee.set(S,C),S}(C);if(rt.has(C))return rt.get(C);const S=ke(C);return S!==C&&(rt.set(C,S),Ee.set(S,C)),S}const Ze=C=>Ee.get(C),kt=["get","getKey","getAll","getAllKeys","count"],vt=["put","add","delete","clear"],Zt=new Map;function ht(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(Zt.get(S))return Zt.get(S);const A=S.replace(/FromIndex$/,""),j=S!==A,K=vt.includes(A);if(!(A in(j?IDBIndex:IDBObjectStore).prototype)||!K&&!kt.includes(A))return;const te=function(){var _e=(0,N.Z)(function*(Xe,...Ke){const gt=this.transaction(Xe,K?"readwrite":"readonly");let _t=gt.store;return j&&(_t=_t.index(Ke.shift())),(yield Promise.all([_t[A](...Ke),K&&gt.done]))[0]});return function(Ke){return _e.apply(this,arguments)}}();return Zt.set(S,te),te}!function Ae(C){yt=C(yt)}(C=>({...C,get:(S,A,j)=>ht(S,A)||C.get(S,A,j),has:(S,A)=>!!ht(S,A)||C.has(S,A)}));const Os="@firebase/installations",Ps="w:0.6.4",ce="FIS_v2",ut=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Mt(C){return C instanceof fe.ZR&&C.code.includes("request-failed")}function en({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Rt(C){return{token:C.token,requestStatus:2,expiresIn:Di(C.expiresIn),creationTime:Date.now()}}function un(C,S){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,N.Z)(function*(C,S){const j=(yield S.json()).error;return ut.create("request-failed",{requestName:C,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function vn({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function oi(C,{refreshToken:S}){const A=vn(C);return A.append("Authorization",function Gr(C){return`${ce} ${C}`}(S)),A}function Pn(C){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,N.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function Di(C){return Number(C.replace("s","000"))}function at(C,S){return Li.apply(this,arguments)}function Li(){return(Li=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:S},{fid:A}){const j=en(C),K=vn(C),te=S.getImmediate({optional:!0});if(te){const gt=yield te.getHeartbeatsHeader();gt&&K.append("x-firebase-client",gt)}const Xe={method:"POST",headers:K,body:JSON.stringify({fid:A,authVersion:ce,appId:C.appId,sdkVersion:Ps})},Ke=yield Pn(()=>fetch(j,Xe));if(Ke.ok){const gt=yield Ke.json();return{fid:gt.fid||A,registrationStatus:2,refreshToken:gt.refreshToken,authToken:Rt(gt.authToken)}}throw yield un("Create Installation",Ke)})).apply(this,arguments)}function mi(C){return new Promise(S=>{setTimeout(S,C)})}const fs=/^[cdef][\w-]{21}$/;function Zn(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const A=function Nn(C){return function ai(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return fs.test(A)?A:""}catch{return""}}function Yt(C){return`${C.appName}!${C.appId}`}const ft=new Map;function It(C,S){const A=Yt(C);Ii(A,S),function gi(C,S){const A=function ei(){return!Ot&&"BroadcastChannel"in self&&(Ot=new BroadcastChannel("[Firebase] FID Change"),Ot.onmessage=C=>{Ii(C.data.key,C.data.fid)}),Ot}();A&&A.postMessage({key:C,fid:S}),function Wt(){0===ft.size&&Ot&&(Ot.close(),Ot=null)}()}(A,S)}function Ii(C,S){const A=ft.get(C);if(A)for(const j of A)j(S)}let Ot=null;const ti="firebase-installations-store";let xn=null;function _i(){return xn||(xn=function he(C,S,{blocked:A,upgrade:j,blocking:K,terminated:te}={}){const _e=indexedDB.open(C,S),Xe=qe(_e);return j&&_e.addEventListener("upgradeneeded",Ke=>{j(qe(_e.result),Ke.oldVersion,Ke.newVersion,qe(_e.transaction))}),A&&_e.addEventListener("blocked",()=>A()),Xe.then(Ke=>{te&&Ke.addEventListener("close",()=>te()),K&&Ke.addEventListener("versionchange",()=>K())}).catch(()=>{}),Xe}("firebase-installations-database",1,{upgrade:(C,S)=>{0===S&&C.createObjectStore(ti)}})),xn}function jn(C,S){return vr.apply(this,arguments)}function vr(){return(vr=(0,N.Z)(function*(C,S){const A=Yt(C),K=(yield _i()).transaction(ti,"readwrite"),te=K.objectStore(ti),_e=yield te.get(A);return yield te.put(S,A),yield K.done,(!_e||_e.fid!==S.fid)&&It(C,S.fid),S})).apply(this,arguments)}function yi(C){return zr.apply(this,arguments)}function zr(){return(zr=(0,N.Z)(function*(C){const S=Yt(C),j=(yield _i()).transaction(ti,"readwrite");yield j.objectStore(ti).delete(S),yield j.done})).apply(this,arguments)}function Bi(C,S){return ar.apply(this,arguments)}function ar(){return(ar=(0,N.Z)(function*(C,S){const A=Yt(C),K=(yield _i()).transaction(ti,"readwrite"),te=K.objectStore(ti),_e=yield te.get(A),Xe=S(_e);return void 0===Xe?yield te.delete(A):yield te.put(Xe,A),yield K.done,Xe&&(!_e||_e.fid!==Xe.fid)&&It(C,Xe.fid),Xe})).apply(this,arguments)}function W(C){return $.apply(this,arguments)}function $(){return($=(0,N.Z)(function*(C){let S;const A=yield Bi(C.appConfig,j=>{const K=B(j),te=L(C,K);return S=te.registrationPromise,te.installationEntry});return""===A.fid?{installationEntry:yield S}:{installationEntry:A,registrationPromise:S}})).apply(this,arguments)}function B(C){return De(C||{fid:Zn(),registrationStatus:0})}function L(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ut.create("app-offline"))};const A={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function O(C,S){return ee.apply(this,arguments)}(C,A);return{installationEntry:A,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Te(C)}:{installationEntry:S}}function ee(){return(ee=(0,N.Z)(function*(C,S){try{const A=yield at(C,S);return jn(C.appConfig,A)}catch(A){throw Mt(A)&&409===A.customData.serverCode?yield yi(C.appConfig):yield jn(C.appConfig,{fid:S.fid,registrationStatus:0}),A}})).apply(this,arguments)}function Te(C){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,N.Z)(function*(C){let S=yield bt(C.appConfig);for(;1===S.registrationStatus;)yield mi(100),S=yield bt(C.appConfig);if(0===S.registrationStatus){const{installationEntry:A,registrationPromise:j}=yield W(C);return j||A}return S})).apply(this,arguments)}function bt(C){return Bi(C,S=>{if(!S)throw ut.create("installation-not-found");return De(S)})}function De(C){return function nt(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function lt(C,S){return tn.apply(this,arguments)}function tn(){return(tn=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:S},A){const j=Lt(C,A),K=oi(C,A),te=S.getImmediate({optional:!0});if(te){const gt=yield te.getHeartbeatsHeader();gt&&K.append("x-firebase-client",gt)}const Xe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Ps,appId:C.appId}})},Ke=yield Pn(()=>fetch(j,Xe));if(Ke.ok)return Rt(yield Ke.json());throw yield un("Generate Auth Token",Ke)})).apply(this,arguments)}function Lt(C,{fid:S}){return`${en(C)}/${S}/authTokens:generate`}function dn(C){return lr.apply(this,arguments)}function lr(){return(lr=(0,N.Z)(function*(C,S=!1){let A;const j=yield Bi(C.appConfig,te=>{if(!$t(te))throw ut.create("not-registered");const _e=te.authToken;if(!S&&bn(_e))return te;if(1===_e.requestStatus)return A=ue(C,S),te;{if(!navigator.onLine)throw ut.create("app-offline");const Xe=nn(te);return A=Ue(C,Xe),Xe}});return A?yield A:j.authToken})).apply(this,arguments)}function ue(C,S){return oe.apply(this,arguments)}function oe(){return(oe=(0,N.Z)(function*(C,S){let A=yield Ve(C.appConfig);for(;1===A.authToken.requestStatus;)yield mi(100),A=yield Ve(C.appConfig);const j=A.authToken;return 0===j.requestStatus?dn(C,S):j})).apply(this,arguments)}function Ve(C){return Bi(C,S=>{if(!$t(S))throw ut.create("not-registered");return function cr(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ue(C,S){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,N.Z)(function*(C,S){try{const A=yield lt(C,S),j=Object.assign(Object.assign({},S),{authToken:A});return yield jn(C.appConfig,j),A}catch(A){if(!Mt(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield jn(C.appConfig,j)}else yield yi(C.appConfig);throw A}})).apply(this,arguments)}function $t(C){return void 0!==C&&2===C.registrationStatus}function bn(C){return 2===C.requestStatus&&!function ni(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+36e5}(C)}function nn(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}function Sr(){return(Sr=(0,N.Z)(function*(C){const S=C,{installationEntry:A,registrationPromise:j}=yield W(S);return j?j.catch(console.error):dn(S).catch(console.error),A.fid})).apply(this,arguments)}function ya(){return(ya=(0,N.Z)(function*(C,S=!1){const A=C;return yield fn(A),(yield dn(A,S)).token})).apply(this,arguments)}function fn(C){return il.apply(this,arguments)}function il(){return(il=(0,N.Z)(function*(C){const{registrationPromise:S}=yield W(C);S&&(yield S)})).apply(this,arguments)}function $i(C){return ut.create("missing-app-config-values",{valueName:C})}const ur="installations",gs=C=>{const S=C.getProvider("app").getImmediate(),A=function sh(C){if(!C||!C.options)throw $i("App Configuration");if(!C.name)throw $i("App Name");const S=["projectId","apiKey","appId"];for(const A of S)if(!C.options[A])throw $i(A);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S);return{app:S,appConfig:A,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},ba=C=>{const S=C.getProvider("app").getImmediate(),A=(0,ae._getProvider)(S,ur).getImmediate();return{getId:()=>function ms(C){return Sr.apply(this,arguments)}(A),getToken:K=>function nl(C){return ya.apply(this,arguments)}(A,K)}};(function qr(){(0,ae._registerComponent)(new ye.wA(ur,gs,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("installations-internal",ba,"PRIVATE"))})(),(0,ae.registerVersion)(Os,"0.6.4"),(0,ae.registerVersion)(Os,"0.6.4","esm2017");const rl="@firebase/remote-config",Un=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Pu{constructor(S,A,j,K){this.client=S,this.storage=A,this.storageCache=j,this.logger=K}isCachedDataFresh(S,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-A,K=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${K}.`),K}fetch(S){var A=this;return(0,N.Z)(function*(){const[j,K]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(K&&A.isCachedDataFresh(S.cacheMaxAgeMillis,j))return K;S.eTag=K&&K.eTag;const te=yield A.client.fetch(S),_e=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&_e.push(A.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(_e),te})()}}function _c(C=navigator){return C.languages&&C.languages[0]||C.language}class Nu{constructor(S,A,j,K,te,_e){this.firebaseInstallations=S,this.sdkVersion=A,this.namespace=j,this.projectId=K,this.apiKey=te,this.appId=_e}fetch(S){var A=this;return(0,N.Z)(function*(){const[j,K]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Ke={sdk_version:A.sdkVersion,app_instance_id:j,app_instance_id_token:K,app_id:A.appId,language_code:_c()},gt={method:"POST",headers:Xe,body:JSON.stringify(Ke)},_t=fetch(_e,gt),Bt=new Promise((Jr,Ls)=>{S.signal.addEventListener(()=>{const Ao=new Error("The operation was aborted.");Ao.name="AbortError",Ls(Ao)})});let Tr;try{yield Promise.race([_t,Bt]),Tr=yield _t}catch(Jr){let Ls="fetch-client-network";throw"AbortError"===Jr?.name&&(Ls="fetch-timeout"),Un.create(Ls,{originalErrorMessage:Jr?.message})}let si=Tr.status;const ui=Tr.headers.get("ETag")||void 0;let so,ia;if(200===Tr.status){let Jr;try{Jr=yield Tr.json()}catch(Ls){throw Un.create("fetch-client-parse",{originalErrorMessage:Ls?.message})}so=Jr.entries,ia=Jr.state}if("INSTANCE_STATE_UNSPECIFIED"===ia?si=500:"NO_CHANGE"===ia?si=304:("NO_TEMPLATE"===ia||"EMPTY_CONFIG"===ia)&&(so={}),304!==si&&200!==si)throw Un.create("fetch-status",{httpStatus:si});return{status:si,eTag:ui,config:so}})()}}class Fu{constructor(S,A){this.client=S,this.storage=A}fetch(S){var A=this;return(0,N.Z)(function*(){const j=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:A,backoffCount:j}){var K=this;return(0,N.Z)(function*(){yield function ol(C,S){return new Promise((A,j)=>{const K=Math.max(S-Date.now(),0),te=setTimeout(A,K);C.addEventListener(()=>{clearTimeout(te),j(Un.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,A);try{const te=yield K.client.fetch(S);return yield K.storage.deleteThrottleMetadata(),te}catch(te){if(!function dh(C){if(!(C instanceof fe.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(te))throw te;const _e={throttleEndTimeMillis:Date.now()+(0,fe.$s)(j),backoffCount:j+1};return yield K.storage.setThrottleMetadata(_e),K.attemptFetch(S,_e)}})()}}class Lu{constructor(S,A,j,K,te){this.app=S,this._client=A,this._storageCache=j,this._storage=K,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function li(C,S){const A=C.target.error||void 0;return Un.create(S,{originalErrorMessage:A&&A?.message})}const eo="app_namespace_store";class Np{constructor(S,A,j,K=function Gv(){return new Promise((C,S)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=j=>{S(li(j,"storage-open"))},A.onsuccess=j=>{C(j.target.result)},A.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore(eo,{keyPath:"compositeKey"})}}catch(A){S(Un.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=S,this.appName=A,this.namespace=j,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var A=this;return(0,N.Z)(function*(){const j=yield A.openDbPromise;return new Promise((K,te)=>{const Xe=j.transaction([eo],"readonly").objectStore(eo),Ke=A.createCompositeKey(S);try{const gt=Xe.get(Ke);gt.onerror=_t=>{te(li(_t,"storage-get"))},gt.onsuccess=_t=>{const Bt=_t.target.result;K(Bt?Bt.value:void 0)}}catch(gt){te(Un.create("storage-get",{originalErrorMessage:gt?.message}))}})})()}set(S,A){var j=this;return(0,N.Z)(function*(){const K=yield j.openDbPromise;return new Promise((te,_e)=>{const Ke=K.transaction([eo],"readwrite").objectStore(eo),gt=j.createCompositeKey(S);try{const _t=Ke.put({compositeKey:gt,value:A});_t.onerror=Bt=>{_e(li(Bt,"storage-set"))},_t.onsuccess=()=>{te()}}catch(_t){_e(Un.create("storage-set",{originalErrorMessage:_t?.message}))}})})()}delete(S){var A=this;return(0,N.Z)(function*(){const j=yield A.openDbPromise;return new Promise((K,te)=>{const Xe=j.transaction([eo],"readwrite").objectStore(eo),Ke=A.createCompositeKey(S);try{const gt=Xe.delete(Ke);gt.onerror=_t=>{te(li(_t,"storage-delete"))},gt.onsuccess=()=>{K()}}catch(gt){te(Un.create("storage-delete",{originalErrorMessage:gt?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Rn{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,N.Z)(function*(){const A=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),K=S.storage.getActiveConfig(),te=yield A;te&&(S.lastFetchStatus=te);const _e=yield j;_e&&(S.lastSuccessfulFetchTimestampMillis=_e);const Xe=yield K;Xe&&(S.activeConfig=Xe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function xr(){return hh.apply(this,arguments)}function hh(){return(hh=(0,N.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}let ys,tr;!function wa(){(0,ae._registerComponent)(new ye.wA("remote-config",function C(S,{instanceIdentifier:A}){const j=S.getProvider("app").getImmediate(),K=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Un.create("registration-window");if(!(0,fe.hl)())throw Un.create("indexed-db-unavailable");const{projectId:te,apiKey:_e,appId:Xe}=j.options;if(!te)throw Un.create("registration-project-id");if(!_e)throw Un.create("registration-api-key");if(!Xe)throw Un.create("registration-app-id");const Ke=new Np(Xe,j.name,A=A||"firebase"),gt=new Rn(Ke),_t=new se.Yd(rl);_t.logLevel=se.in.ERROR;const Bt=new Nu(K,ae.SDK_VERSION,A,te,_e,Xe),Tr=new Fu(Bt,Ke),si=new Pu(Tr,Ke,gt,_t),ui=new Lu(j,si,gt,Ke,_t);return function uh(C){const S=(0,fe.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ui),ui},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(rl,"0.4.4"),(0,ae.registerVersion)(rl,"0.4.4","esm2017")}();const al=new WeakMap,Zr=new WeakMap,qi=new WeakMap,Ca=new WeakMap,Ft=new WeakMap;let Hu={get(C,S,A){if(C instanceof IDBTransaction){if("done"===S)return Zr.get(C);if("objectStoreNames"===S)return C.objectStoreNames||qi.get(C);if("store"===S)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return vs(C[S])},set:(C,S,A)=>(C[S]=A,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function Cc(C){return"function"==typeof C?function Fp(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function bc(){return tr||(tr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(Ec(this),S),vs(al.get(this))}:function(...S){return vs(C.apply(Ec(this),S))}:function(S,...A){const j=C.call(Ec(this),S,...A);return qi.set(j,S.sort?S.sort():[S]),vs(j)}}(C):(C instanceof IDBTransaction&&function Uu(C){if(Zr.has(C))return;const S=new Promise((A,j)=>{const K=()=>{C.removeEventListener("complete",te),C.removeEventListener("error",_e),C.removeEventListener("abort",_e)},te=()=>{A(),K()},_e=()=>{j(C.error||new DOMException("AbortError","AbortError")),K()};C.addEventListener("complete",te),C.addEventListener("error",_e),C.addEventListener("abort",_e)});Zr.set(C,S)}(C),((C,S)=>S.some(A=>C instanceof A))(C,function Vu(){return ys||(ys=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Hu):C)}function vs(C){if(C instanceof IDBRequest)return function wc(C){const S=new Promise((A,j)=>{const K=()=>{C.removeEventListener("success",te),C.removeEventListener("error",_e)},te=()=>{A(vs(C.result)),K()},_e=()=>{j(C.error),K()};C.addEventListener("success",te),C.addEventListener("error",_e)});return S.then(A=>{A instanceof IDBCursor&&al.set(A,C)}).catch(()=>{}),Ft.set(S,C),S}(C);if(Ca.has(C))return Ca.get(C);const S=Cc(C);return S!==C&&(Ca.set(C,S),Ft.set(S,C)),S}const Ec=C=>Ft.get(C);function Pe(C,S,{blocked:A,upgrade:j,blocking:K,terminated:te}={}){const _e=indexedDB.open(C,S),Xe=vs(_e);return j&&_e.addEventListener("upgradeneeded",Ke=>{j(vs(_e.result),Ke.oldVersion,Ke.newVersion,vs(_e.transaction))}),A&&_e.addEventListener("blocked",()=>A()),Xe.then(Ke=>{te&&Ke.addEventListener("close",()=>te()),K&&Ke.addEventListener("versionchange",()=>K())}).catch(()=>{}),Xe}function rn(C,{blocked:S}={}){const A=indexedDB.deleteDatabase(C);return S&&A.addEventListener("blocked",()=>S()),vs(A).then(()=>{})}const ju=["get","getKey","getAll","getAllKeys","count"],Tc=["put","add","delete","clear"],ci=new Map;function ll(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(ci.get(S))return ci.get(S);const A=S.replace(/FromIndex$/,""),j=S!==A,K=Tc.includes(A);if(!(A in(j?IDBIndex:IDBObjectStore).prototype)||!K&&!ju.includes(A))return;const te=function(){var _e=(0,N.Z)(function*(Xe,...Ke){const gt=this.transaction(Xe,K?"readwrite":"readonly");let _t=gt.store;return j&&(_t=_t.index(Ke.shift())),(yield Promise.all([_t[A](...Ke),K&&gt.done]))[0]});return function(Ke){return _e.apply(this,arguments)}}();return ci.set(S,te),te}!function fh(C){Hu=C(Hu)}(C=>({...C,get:(S,A,j)=>ll(S,A)||C.get(S,A,j),has:(S,A)=>!!ll(S,A)||C.has(S,A)}));const bo="/firebase-messaging-sw.js",Yr="/firebase-cloud-messaging-push-scope",cl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ph="google.c.a.c_id",Yn="google.c.a.c_l",zv="google.c.a.ts",Gu="google.c.a.e";var dr=(()=>{return(C=dr||(dr={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",dr;var C})();function Ar(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yo(C){const A=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(A),K=new Uint8Array(j.length);for(let te=0;te<j.length;++te)K[te]=j.charCodeAt(te);return K}const kr="fcm_token_details_db",mh="fcm_token_object_Store";function gh(C){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(kr))return null;let S=null;return(yield Pe(kr,5,{upgrade:(j=(0,N.Z)(function*(K,te,_e,Xe){var Ke;if(te<2||!K.objectStoreNames.contains(mh))return;const gt=Xe.objectStore(mh),_t=yield gt.index("fcmSenderId").get(C);if(yield gt.clear(),_t)if(2===te){const Bt=_t;if(!Bt.auth||!Bt.p256dh||!Bt.endpoint)return;S={token:Bt.fcmToken,createTime:null!==(Ke=Bt.createTime)&&void 0!==Ke?Ke:Date.now(),subscriptionOptions:{auth:Bt.auth,p256dh:Bt.p256dh,endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:"string"==typeof Bt.vapidKey?Bt.vapidKey:Ar(Bt.vapidKey)}}}else if(3===te){const Bt=_t;S={token:Bt.fcmToken,createTime:Bt.createTime,subscriptionOptions:{auth:Ar(Bt.auth),p256dh:Ar(Bt.p256dh),endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:Ar(Bt.vapidKey)}}}else if(4===te){const Bt=_t;S={token:Bt.fcmToken,createTime:Bt.createTime,subscriptionOptions:{auth:Ar(Bt.auth),p256dh:Ar(Bt.p256dh),endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:Ar(Bt.vapidKey)}}}}),function(te,_e,Xe,Ke){return j.apply(this,arguments)})})).close(),yield rn(kr),yield rn("fcm_vapid_details_db"),yield rn("undefined"),dl(S)?S:null;var j}),Ic.apply(this,arguments)}function dl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const br="firebase-messaging-store";let Sc=null;function $u(){return Sc||(Sc=Pe("firebase-messaging-database",1,{upgrade:(C,S)=>{0===S&&C.createObjectStore(br)}})),Sc}function Ko(C){return hl.apply(this,arguments)}function hl(){return(hl=(0,N.Z)(function*(C){const S=yh(C),j=yield(yield $u()).transaction(br).objectStore(br).get(S);if(j)return j;{const K=yield gh(C.appConfig.senderId);if(K)return yield fl(C,K),K}})).apply(this,arguments)}function fl(C,S){return qu.apply(this,arguments)}function qu(){return(qu=(0,N.Z)(function*(C,S){const A=yh(C),K=(yield $u()).transaction(br,"readwrite");return yield K.objectStore(br).put(S,A),yield K.done,S})).apply(this,arguments)}function _h(C){return wo.apply(this,arguments)}function wo(){return(wo=(0,N.Z)(function*(C){const S=yh(C),j=(yield $u()).transaction(br,"readwrite");yield j.objectStore(br).delete(S),yield j.done})).apply(this,arguments)}function yh({appConfig:C}){return C.appId}const _n=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qo(C,S){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,N.Z)(function*(C,S){const A=yield pl(C),j=Jo(S),K={method:"POST",headers:A,body:JSON.stringify(j)};let te;try{te=yield(yield fetch(bh(C.appConfig),K)).json()}catch(_e){throw _n.create("token-subscribe-failed",{errorInfo:_e?.toString()})}if(te.error)throw _n.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw _n.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Lp(C,S){return xc.apply(this,arguments)}function xc(){return(xc=(0,N.Z)(function*(C,S){const A=yield pl(C),j=Jo(S.subscriptionOptions),K={method:"PATCH",headers:A,body:JSON.stringify(j)};let te;try{te=yield(yield fetch(`${bh(C.appConfig)}/${S.token}`,K)).json()}catch(_e){throw _n.create("token-update-failed",{errorInfo:_e?.toString()})}if(te.error)throw _n.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw _n.create("token-update-no-token");return te.token})).apply(this,arguments)}function vh(C,S){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,N.Z)(function*(C,S){const j={method:"DELETE",headers:yield pl(C)};try{const te=yield(yield fetch(`${bh(C.appConfig)}/${S}`,j)).json();if(te.error)throw _n.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(K){throw _n.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function bh({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function pl(C){return ml.apply(this,arguments)}function ml(){return(ml=(0,N.Z)(function*({appConfig:C,installations:S}){const A=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Jo({p256dh:C,auth:S,endpoint:A,vapidKey:j}){const K={web:{endpoint:A,auth:S,p256dh:C}};return j!==cl&&(K.web.applicationPubKey=j),K}const Ac=6048e5;function kc(C){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,N.Z)(function*(C){const S=yield Ch(C.swRegistration,C.vapidKey),A={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:Ar(S.getKey("auth")),p256dh:Ar(S.getKey("p256dh"))},j=yield Ko(C.firebaseDependencies);if(j){if(Vp(j.subscriptionOptions,A))return Date.now()>=j.createTime+Ac?Ta(C,{token:j.token,createTime:Date.now(),subscriptionOptions:A}):j.token;try{yield vh(C.firebaseDependencies,j.token)}catch(K){console.warn(K)}return Da(C.firebaseDependencies,A)}return Da(C.firebaseDependencies,A)})).apply(this,arguments)}function Bp(C){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,N.Z)(function*(C){const S=yield Ko(C.firebaseDependencies);S&&(yield vh(C.firebaseDependencies,S.token),yield _h(C.firebaseDependencies));const A=yield C.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()})).apply(this,arguments)}function Ta(C,S){return wh.apply(this,arguments)}function wh(){return(wh=(0,N.Z)(function*(C,S){try{const A=yield Lp(C.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:A,createTime:Date.now()});return yield fl(C.firebaseDependencies,j),A}catch(A){throw yield Bp(C),A}})).apply(this,arguments)}function Da(C,S){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,N.Z)(function*(C,S){const j={token:yield Qo(C,S),createTime:Date.now(),subscriptionOptions:S};return yield fl(C,j),j.token})).apply(this,arguments)}function Ch(C,S){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,N.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yo(S)})})).apply(this,arguments)}function Vp(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}function Zu(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Rc(C,S){if(!S.notification)return;C.notification={};const A=S.notification.title;A&&(C.notification.title=A);const j=S.notification.body;j&&(C.notification.body=j);const K=S.notification.image;K&&(C.notification.image=K);const te=S.notification.icon;te&&(C.notification.icon=te)}(S,C),function Yu(C,S){!S.data||(C.data=S.data)}(S,C),function Oc(C,S){var A,j,K,te,_e;if(!(S.fcmOptions||null!==(A=S.notification)&&void 0!==A&&A.click_action))return;C.fcmOptions={};const Xe=null!==(K=null===(j=S.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==K?K:null===(te=S.notification)||void 0===te?void 0:te.click_action;Xe&&(C.fcmOptions.link=Xe);const Ke=null===(_e=S.fcmOptions)||void 0===_e?void 0:_e.analytics_label;Ke&&(C.fcmOptions.analyticsLabel=Ke)}(S,C),S}function Th(C){return"object"==typeof C&&!!C&&ph in C}function Ia(C,S){const A=[];for(let j=0;j<C.length;j++)A.push(C.charAt(j)),j<S.length&&A.push(S.charAt(j));return A.join("")}function Ku(C){return _n.create("missing-app-config-values",{valueName:C})}Ia("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ia("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gl{constructor(S,A,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Up(C){if(!C||!C.options)throw Ku("App Configuration Object");if(!C.name)throw Ku("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:A}=C;for(const j of S)if(!A[j])throw Ku(j);return{appName:C.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:K,installations:A,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Hp(C){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,N.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(bo,{scope:Yr}),C.swRegistration.update().catch(()=>{})}catch(S){throw _n.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function Co(C,S){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,N.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield Hp(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw _n.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function Qu(C,S){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,N.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=cl)})).apply(this,arguments)}function _l(){return(_l=(0,N.Z)(function*(C,S){if(!navigator)throw _n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _n.create("permission-blocked");return yield Qu(C,S?.vapidKey),yield Co(C,S?.serviceWorkerRegistration),kc(C)})).apply(this,arguments)}function bs(C,S,A){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,N.Z)(function*(C,S,A){const j=Sa(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:A[ph],message_name:A[Yn],message_time:A[zv],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sa(C){switch(C){case dr.NOTIFICATION_CLICKED:return"notification_open";case dr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ea(){return(ea=(0,N.Z)(function*(C,S){const A=S.data;if(!A.isFirebaseMessaging)return;C.onMessageHandler&&A.messageType===dr.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Zu(A)):C.onMessageHandler.next(Zu(A)));const j=A.data;Th(j)&&"1"===j[Gu]&&(yield bs(C,A.messageType,j))})).apply(this,arguments)}const vl="@firebase/messaging",bl=C=>{const S=new gl(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function yl(C,S){return ea.apply(this,arguments)}(S,A)),S},Ju=C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:j=>function Pc(C,S){return _l.apply(this,arguments)}(S,j)}};function xa(){return wl.apply(this,arguments)}function wl(){return(wl=(0,N.Z)(function*(){try{yield(0,fe.eu)()}catch{return!1}return typeof window<"u"&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function jp(){(0,ae._registerComponent)(new ye.wA("messaging",bl,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("messaging-internal",Ju,"PRIVATE")),(0,ae.registerVersion)(vl,"0.12.4"),(0,ae.registerVersion)(vl,"0.12.4","esm2017")}();const Cl="analytics",El="firebase_id",Ih="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",to="https://www.googletagmanager.com/gtag/js",Kn=new se.Yd("@firebase/analytics"),xi=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Fc(C){if(!C.startsWith(to)){const S=xi.create("invalid-gtag-resource",{gtagURL:C});return Kn.warn(S.message),""}return C}function Kr(C){return Promise.all(C.map(S=>S.catch(A=>A)))}function Sh(C,S){const A=function td(C,S){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(C,S)),A}("firebase-js-sdk-policy",{createScriptURL:Fc}),j=document.createElement("script"),K=`${to}?l=${C}&id=${S}`;j.src=A?A?.createScriptURL(K):K,j.async=!0,document.head.appendChild(j)}function xh(C,S,A,j,K,te){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,N.Z)(function*(C,S,A,j,K,te){const _e=j[K];try{if(_e)yield S[_e];else{const Ke=(yield Kr(A)).find(gt=>gt.measurementId===K);Ke&&(yield S[Ke.appId])}}catch(Xe){Kn.error(Xe)}C("config",K,te)})).apply(this,arguments)}function $v(C,S,A,j,K){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,N.Z)(function*(C,S,A,j,K){try{let te=[];if(K&&K.send_to){let _e=K.send_to;Array.isArray(_e)||(_e=[_e]);const Xe=yield Kr(A);for(const Ke of _e){const gt=Xe.find(Bt=>Bt.measurementId===Ke),_t=gt&&S[gt.appId];if(!_t){te=[];break}te.push(_t)}}0===te.length&&(te=Object.values(S)),yield Promise.all(te),C("event",j,K||{})}catch(te){Kn.error(te)}})).apply(this,arguments)}function zp(C){const S=window.document.getElementsByTagName("script");for(const A of Object.values(S))if(A.src&&A.src.includes(to)&&A.src.includes(C))return A;return null}const Mi=new class qv{constructor(S={},A=1e3){this.throttleMetadata=S,this.intervalMillis=A}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,A){this.throttleMetadata[S]=A}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Vc(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Qr(C){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,N.Z)(function*(C){var S;const{appId:A,apiKey:j}=C,K={method:"GET",headers:Vc(j)},te=Ih.replace("{app-id}",A),_e=yield fetch(te,K);if(200!==_e.status&&304!==_e.status){let Xe="";try{const Ke=yield _e.json();null!==(S=Ke.error)&&void 0!==S&&S.message&&(Xe=Ke.error.message)}catch{}throw xi.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:Xe})}return _e.json()})).apply(this,arguments)}function Uc(C){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,N.Z)(function*(C,S=Mi,A){const{appId:j,apiKey:K,measurementId:te}=C.options;if(!j)throw xi.create("no-app-id");if(!K){if(te)return{measurementId:te,appId:j};throw xi.create("no-api-key")}const _e=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new Ah;return setTimeout((0,N.Z)(function*(){Xe.abort()}),void 0!==A?A:6e4),ws({appId:j,apiKey:K,measurementId:te},_e,Xe,S)})).apply(this,arguments)}function ws(C,S,A){return nd.apply(this,arguments)}function nd(){return(nd=(0,N.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:A},j,K=Mi){var te;const{appId:_e,measurementId:Xe}=C;try{yield Dl(j,S)}catch(Ke){if(Xe)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${Ke?.message}]`),{appId:_e,measurementId:Xe};throw Ke}try{const Ke=yield Qr(C);return K.deleteThrottleMetadata(_e),Ke}catch(Ke){const gt=Ke;if(!Hc(gt)){if(K.deleteThrottleMetadata(_e),Xe)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${gt?.message}]`),{appId:_e,measurementId:Xe};throw Ke}const _t=503===Number(null===(te=gt?.customData)||void 0===te?void 0:te.httpStatus)?(0,fe.$s)(A,K.intervalMillis,30):(0,fe.$s)(A,K.intervalMillis),Bt={throttleEndTimeMillis:Date.now()+_t,backoffCount:A+1};return K.setThrottleMetadata(_e,Bt),Kn.debug(`Calling attemptFetch again in ${_t} millis`),ws(C,Bt,j,K)}})).apply(this,arguments)}function Dl(C,S){return new Promise((A,j)=>{const K=Math.max(S-Date.now(),0),te=setTimeout(A,K);C.addEventListener(()=>{clearTimeout(te),j(xi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Hc(C){if(!(C instanceof fe.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Ah{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let kh,Sl;function qp(){return(qp=(0,N.Z)(function*(C,S,A,j,K){if(K&&K.global)C("event",A,j);else{const te=yield S;C("event",A,Object.assign(Object.assign({},j),{send_to:te}))}})).apply(this,arguments)}function Ra(C){Sl=C}function sd(C){kh=C}function Gc(){return So.apply(this,arguments)}function So(){return(So=(0,N.Z)(function*(){if(!(0,fe.hl)())return Kn.warn(xi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(C){return Kn.warn(xi.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function Gn(){return(Gn=(0,N.Z)(function*(C,S,A,j,K,te,_e){var Xe;const Ke=Uc(C);Ke.then(si=>{A[si.measurementId]=si.appId,C.options.measurementId&&si.measurementId!==C.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${si.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(si=>Kn.error(si)),S.push(Ke);const gt=Gc().then(si=>{if(si)return j.getId()}),[_t,Bt]=yield Promise.all([Ke,gt]);zp(te)||Sh(te,_t.measurementId),Sl&&(K("consent","default",Sl),Ra(void 0)),K("js",new Date);const Tr=null!==(Xe=_e?.config)&&void 0!==Xe?Xe:{};return Tr.origin="firebase",Tr.update=!0,null!=Bt&&(Tr[El]=Bt),K("config",_t.measurementId,Tr),kh&&(K("set",kh),sd(void 0)),_t.measurementId})).apply(this,arguments)}class ri{constructor(S){this.app=S}_delete(){return delete wr[this.app.options.appId],Promise.resolve()}}let wr={},od=[];const Jt={};let zn,Cr,Tn="dataLayer",na=!1;function Zp(C,S,A){!function Oa(){const C=[];if((0,fe.ru)()&&C.push("This is a browser extension environment."),(0,fe.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((j,K)=>`(${K+1}) ${j}`).join(" "),A=xi.create("invalid-analytics-context",{errorInfo:S});Kn.warn(A.message)}}();const j=C.options.appId;if(!j)throw xi.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw xi.create("no-api-key");Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wr[j])throw xi.create("already-exists",{id:j});if(!na){!function En(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(Tn);const{wrappedGtag:te,gtagCore:_e}=function f_(C,S,A,j,K){let te=function(..._e){window[j].push(arguments)};return window[K]&&"function"==typeof window[K]&&(te=window[K]),window[K]=function h_(C,S,A,j){function te(){return(te=(0,N.Z)(function*(_e,...Xe){try{if("event"===_e){const[Ke,gt]=Xe;yield $v(C,S,A,Ke,gt)}else if("config"===_e){const[Ke,gt]=Xe;yield xh(C,S,A,j,Ke,gt)}else if("consent"===_e){const[Ke]=Xe;C("consent","update",Ke)}else if("get"===_e){const[Ke,gt,_t]=Xe;C("get",Ke,gt,_t)}else if("set"===_e){const[Ke]=Xe;C("set",Ke)}else C(_e,...Xe)}catch(Ke){Kn.error(Ke)}})).apply(this,arguments)}return function K(_e){return te.apply(this,arguments)}}(te,C,S,A),{gtagCore:te,wrappedGtag:window[K]}}(wr,od,Jt,Tn,"gtag");Cr=te,zn=_e,na=!0}return wr[j]=function xo(C,S,A,j,K,te,_e){return Gn.apply(this,arguments)}(C,od,Jt,S,zn,Tn,A),new ri(C)}function Ph(){return no.apply(this,arguments)}function no(){return(no=(0,N.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}const cd="@firebase/analytics";!function ud(){(0,ae._registerComponent)(new ye.wA(Cl,(S,{options:A})=>Zp(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,ae._registerComponent)(new ye.wA("analytics-internal",function C(S){try{const A=S.getProvider(Cl).getImmediate();return{logEvent:(j,K,te)=>function Na(C,S,A,j){C=(0,fe.m9)(C),function p_(C,S,A,j,K){return qp.apply(this,arguments)}(Cr,wr[C.app.options.appId],S,A,j).catch(K=>Kn.error(K))}(A,j,K,te)}}catch(A){throw xi.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,ae.registerVersion)(cd,"0.10.0"),(0,ae.registerVersion)(cd,"0.10.0","esm2017")}();var Ml=H(4408),dd=H(7565);const Lh=new class __ extends dd.v{}(class Al extends Ml.o{constructor(S,A){super(S,A),this.scheduler=S,this.work=A}schedule(S,A=0){return A>0?super.schedule(S,A):(this.delay=A,this.state=S,this.scheduler.flush(this),this)}execute(S,A){return A>0||this.closed?super.execute(S,A):this._execute(S,A)}requestAsyncId(S,A,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,A,j):(S.flush(this),0)}});var y_=H(4986),hd=H(8505),qc=H(5363),fd=H(9468);const kl=new o.GfV("7.4.0"),Fa="__angularfire_symbol__analyticsIsSupportedValue",pd="__angularfire_symbol__analyticsIsSupported",Rl="__angularfire_symbol__remoteConfigIsSupportedValue",md="__angularfire_symbol__remoteConfigIsSupported",Ol="__angularfire_symbol__messagingIsSupportedValue",Vh="__angularfire_symbol__messagingIsSupported";function v_(C,S,A){if(S){if(1===S.length)return S[0];const te=S.filter(_e=>_e.app===A);if(1===te.length)return te[0]}return A.container.getProvider(C).getImmediate({optional:!0})}globalThis[pd]||(globalThis[pd]=Ph().then(C=>globalThis[Fa]=C).catch(()=>globalThis[Fa]=!1)),globalThis[Vh]||(globalThis[Vh]=xa().then(C=>globalThis[Ol]=C).catch(()=>globalThis[Ol]=!1)),globalThis[md]||(globalThis[md]=xr().then(C=>globalThis[Rl]=C).catch(()=>globalThis[Rl]=!1));const Pl=(C,S)=>{const A=S?[S]:(0,z.C6)(),j=[];return A.forEach(K=>{K.container.getProvider(C).instances.forEach(_e=>{j.includes(_e)||j.push(_e)})}),j};function Zc(){}class Yp{constructor(S,A=Lh){this.zone=S,this.delegate=A}now(){return this.delegate.now()}schedule(S,A,j){const K=this.zone;return this.delegate.schedule(function(_e){K.runGuarded(()=>{S.apply(this,[_e])})},A,j)}}class Kp{constructor(S){this.zone=S,this.task=null}call(S,A){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zc,{},Zc,Zc)),A.pipe((0,hd.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let b_=(()=>{class C{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Yp(Zone.current)),this.insideAngular=A.run(()=>new Yp(Zone.current,y_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(A){return new(A||C)(o.LFG(o.R0b))},C.\u0275prov=o.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Es(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Nl(C){return C.pipe((0,qc.Q)(Es().outsideAngular))}function Fl(C){return Es(),function Er(C){return function(A){return(A=A.lift(new Kp(C.ngZone))).pipe((0,fd.R)(C.outsideAngular),(0,qc.Q)(C.insideAngular))}}(Es())(C)}},1389:(Ct,Oe,H)=>{H.d(Oe,{$:()=>bo,A:()=>Z,D:()=>Fe,I:()=>Cn,J:()=>gs,L:()=>_s,N:()=>Bi,P:()=>xo,Q:()=>Np,R:()=>Or,U:()=>Zo,V:()=>xr,W:()=>hh,X:()=>Bu,Y:()=>Vu,Z:()=>bc,_:()=>Ft,a:()=>Do,a0:()=>cl,a1:()=>ph,a2:()=>Mr,a3:()=>mh,a4:()=>Ic,a5:()=>zu,a6:()=>br,a7:()=>$u,a8:()=>hl,a9:()=>qu,aA:()=>he,aB:()=>Rl,aC:()=>yi,aD:()=>ar,aE:()=>qc,aF:()=>Nh,aG:()=>g_,aH:()=>ii,aL:()=>Io,aO:()=>ys,aa:()=>_h,ab:()=>yh,ac:()=>u_,ad:()=>Lp,ae:()=>vh,af:()=>bh,ai:()=>Ac,aj:()=>Wu,ak:()=>Bp,an:()=>Fp,ao:()=>Rc,aq:()=>Eo,ar:()=>vl,as:()=>kt,at:()=>De,au:()=>Te,av:()=>Ae,aw:()=>Tr,ax:()=>Wc,ay:()=>nt,az:()=>Ie,b:()=>Dh,c:()=>Cr,d:()=>Zp,e:()=>Vi,f:()=>cd,g:()=>__,h:()=>Ml,i:()=>$p,j:()=>y_,k:()=>Jr,l:()=>Rh,m:()=>Gh,o:()=>Wh,p:()=>be,r:()=>Il,s:()=>Wp,u:()=>Gc});var o=H(5861),z=H(2090),N=H(6881),ae=H(7582),fe=H(1877),ye=H(4859);const be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},xe=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new fe.Yd("@firebase/auth");function yt(w,...m){ve.logLevel<=fe.in.ERROR&&ve.error(`Auth (${N.SDK_VERSION}): ${w}`,...m)}function Ae(w,...m){throw Ze(w,...m)}function Ie(w,...m){return Ze(w,...m)}function ke(w,m,y){const E=Object.assign(Object.assign({},xe()),{[m]:y});return new z.LL("auth","Firebase",E).create(m,{appName:w.name})}function qe(w,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&Ae(w,"argument-error"),ke(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(w,...m){if("string"!=typeof w){const y=m[0],E=[...m.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return rt.create(w,...m)}function he(w,m,...y){if(!w)throw Ze(m,...y)}function Je(w){const m="INTERNAL ASSERTION FAILED: "+w;throw yt(m),new Error(m)}function kt(w,m){w||Je(m)}function vt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Zt(){return"http:"===ht()||"https:"===ht()}function ht(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class gr{constructor(m,y){this.shortDelay=m,this.longDelay=y,kt(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function Os(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zt()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ps(w,m){kt(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class ce{static initialize(m,y,E){this.fetchImpl=m,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Me=new gr(3e4,6e4);function me(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function Ne(w,m,y,E){return Re.apply(this,arguments)}function Re(){return(Re=(0,o.Z)(function*(w,m,y,E,k={}){return ut(w,k,(0,o.Z)(function*(){let F={},X={};E&&("GET"===m?X=E:F={body:JSON.stringify(E)});const pe=(0,z.xO)(Object.assign({key:w.config.apiKey},X)).slice(1),We=yield w._getAdditionalHeaders();return We["Content-Type"]="application/json",w.languageCode&&(We["X-Firebase-Locale"]=w.languageCode),ce.fetch()(un(w,w.config.apiHost,y,pe),Object.assign({method:m,headers:We,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function ut(w,m,y){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,o.Z)(function*(w,m,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},ie),m);try{const k=new Hn(w),F=yield Promise.race([y(),k.promise]);k.clearNetworkTimeout();const X=yield F.json();if("needConfirmation"in X)throw vn(w,"account-exists-with-different-credential",X);if(F.ok&&!("errorMessage"in X))return X;{const pe=F.ok?X.errorMessage:X.error.message,[We,tt]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===We)throw vn(w,"credential-already-in-use",X);if("EMAIL_EXISTS"===We)throw vn(w,"email-already-in-use",X);if("USER_DISABLED"===We)throw vn(w,"user-disabled",X);const Tt=E[We]||We.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw ke(w,Tt,tt);Ae(w,Tt)}}catch(k){if(k instanceof z.ZR)throw k;Ae(w,"network-request-failed",{message:String(k)})}})).apply(this,arguments)}function en(w,m,y,E){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,o.Z)(function*(w,m,y,E,k={}){const F=yield Ne(w,m,y,E,k);return"mfaPendingCredential"in F&&Ae(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function un(w,m,y,E){const k=`${m}${y}?${E}`;return w.config.emulator?Ps(w.config,k):`${w.config.apiScheme}://${k}`}class Hn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Ie(this.auth,"network-request-failed")),Me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vn(w,m,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const k=Ie(w,m,E);return k.customData._tokenResponse=y,k}function Pn(){return(Pn=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Xn(w,m){return Di.apply(this,arguments)}function Di(){return(Di=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Gr(w,m){return at.apply(this,arguments)}function at(){return(at=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Li(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function fs(){return(fs=(0,o.Z)(function*(w,m=!1){const y=(0,z.m9)(w),E=yield y.getIdToken(m),k=Zn(E);he(k&&k.exp&&k.auth_time&&k.iat,y.auth,"internal-error");const F="object"==typeof k.firebase?k.firebase:void 0,X=F?.sign_in_provider;return{claims:k,token:E,authTime:Li(_r(k.auth_time)),issuedAtTime:Li(_r(k.iat)),expirationTime:Li(_r(k.exp)),signInProvider:X||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function _r(w){return 1e3*Number(w)}function Zn(w){const[m,y,E]=w.split(".");if(void 0===m||void 0===y||void 0===E)return yt("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,z.tV)(y);return k?JSON.parse(k):(yt("Failed to decode base64 JWT payload"),null)}catch(k){return yt("Caught error parsing JWT payload as JSON",k?.toString()),null}}function Yt(w,m){return ft.apply(this,arguments)}function ft(){return(ft=(0,o.Z)(function*(w,m,y=!1){if(y)return m;try{return yield m}catch(E){throw E instanceof z.ZR&&It(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function It({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class on{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(m);this.timerId=setTimeout((0,o.Z)(function*(){yield y.iteration()}),E)}iteration(){var m=this;return(0,o.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&m.schedule(!0))}m.schedule()})()}}class yr{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Li(this.lastLoginAt),this.creationTime=Li(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ii(w){return gi.apply(this,arguments)}function gi(){return(gi=(0,o.Z)(function*(w){var m;const y=w.auth,E=yield w.getIdToken(),k=yield Yt(w,Gr(y,{idToken:E}));he(k?.users.length,y,"internal-error");const F=k.users[0];w._notifyReloadListener(F);const X=null!==(m=F.providerUserInfo)&&void 0!==m&&m.length?ps(F.providerUserInfo):[],pe=Wt(w.providerData,X),Tt=!!w.isAnonymous&&!(w.email&&F.passwordHash||pe?.length),hn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:pe,metadata:new yr(F.createdAt,F.lastLoginAt),isAnonymous:Tt};Object.assign(w,hn)})).apply(this,arguments)}function ei(){return(ei=(0,o.Z)(function*(w){const m=(0,z.m9)(w);yield Ii(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Wt(w,m){return[...w.filter(E=>!m.some(k=>k.providerId===E.providerId)),...m]}function ps(w){return w.map(m=>{var{providerId:y}=m,E=(0,ae._T)(m,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ti(){return(ti=(0,o.Z)(function*(w,m){const y=yield ut(w,{},(0,o.Z)(function*(){const E=(0,z.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:k,apiKey:F}=w.config,X=un(w,k,"/v1/token",`key=${F}`),pe=yield w._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",ce.fetch()(X,{method:"POST",headers:pe,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class xn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){he(m.idToken,"internal-error"),he(typeof m.idToken<"u","internal-error"),he(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Nn(w){const m=Zn(w);return he(m,"internal-error"),he(typeof m.exp<"u","internal-error"),he(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var E=this;return(0,o.Z)(function*(){return he(!E.accessToken||E.refreshToken,m,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(m,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var E=this;return(0,o.Z)(function*(){const{accessToken:k,refreshToken:F,expiresIn:X}=yield function an(w,m){return ti.apply(this,arguments)}(m,y);E.updateTokensAndExpiration(k,F,Number(X))})()}updateTokensAndExpiration(m,y,E){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(m,y){const{refreshToken:E,accessToken:k,expirationTime:F}=y,X=new xn;return E&&(he("string"==typeof E,"internal-error",{appName:m}),X.refreshToken=E),k&&(he("string"==typeof k,"internal-error",{appName:m}),X.accessToken=k),F&&(he("number"==typeof F,"internal-error",{appName:m}),X.expirationTime=F),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new xn,this.toJSON())}_performRefresh(){return Je("not implemented")}}function _i(w,m){he("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class jn{constructor(m){var{uid:y,auth:E,stsTokenManager:k}=m,F=(0,ae._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new on(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new yr(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,o.Z)(function*(){const E=yield Yt(y,y.stsTokenManager.getToken(y.auth,m));return he(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(m){return function ai(w){return fs.apply(this,arguments)}(this,m)}reload(){return function Ot(w){return ei.apply(this,arguments)}(this)}_assign(m){this!==m&&(he(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const y=new jn(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(m){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var E=this;return(0,o.Z)(function*(){let k=!1;m.idToken&&m.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(m),k=!0),y&&(yield Ii(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var m=this;return(0,o.Z)(function*(){const y=yield m.getIdToken();return yield Yt(m,function oi(w,m){return Pn.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var E,k,F,X,pe,We,tt,Tt;const hn=null!==(E=y.displayName)&&void 0!==E?E:void 0,Xr=null!==(k=y.email)&&void 0!==k?k:void 0,Ui=null!==(F=y.phoneNumber)&&void 0!==F?F:void 0,Kc=null!==(X=y.photoURL)&&void 0!==X?X:void 0,Bl=null!==(pe=y.tenantId)&&void 0!==pe?pe:void 0,Vl=null!==(We=y._redirectEventId)&&void 0!==We?We:void 0,Zh=null!==(tt=y.createdAt)&&void 0!==tt?tt:void 0,C_=null!==(Tt=y.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:Xp,emailVerified:E_,isAnonymous:T_,providerData:Vs,stsTokenManager:em}=y;he(Xp&&em,m,"internal-error");const D_=xn.fromJSON(this.name,em);he("string"==typeof Xp,m,"internal-error"),_i(hn,m.name),_i(Xr,m.name),he("boolean"==typeof E_,m,"internal-error"),he("boolean"==typeof T_,m,"internal-error"),_i(Ui,m.name),_i(Kc,m.name),_i(Bl,m.name),_i(Vl,m.name),_i(Zh,m.name),_i(C_,m.name);const tm=new jn({uid:Xp,auth:m,email:Xr,emailVerified:E_,displayName:hn,isAnonymous:T_,photoURL:Kc,phoneNumber:Ui,tenantId:Bl,stsTokenManager:D_,createdAt:Zh,lastLoginAt:C_});return Vs&&Array.isArray(Vs)&&(tm.providerData=Vs.map(nm=>Object.assign({},nm))),Vl&&(tm._redirectEventId=Vl),tm}static _fromIdTokenResponse(m,y,E=!1){return(0,o.Z)(function*(){const k=new xn;k.updateFromServerResponse(y);const F=new jn({uid:y.localId,auth:m,stsTokenManager:k,isAnonymous:E});return yield Ii(F),F})()}}const vr=new Map;function yi(w){kt(w instanceof Function,"Expected a class definition");let m=vr.get(w);return m?(kt(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,vr.set(w,m),m)}const Bi=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(y,E){var k=this;return(0,o.Z)(function*(){k.storage[y]=E})()}_get(y){var E=this;return(0,o.Z)(function*(){const k=E.storage[y];return void 0===k?null:k})()}_remove(y){var E=this;return(0,o.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function ar(w,m,y){return`firebase:${w}:${m}:${y}`}class W{constructor(m,y,E){this.persistence=m,this.auth=y,this.userKey=E;const{config:k,name:F}=this.auth;this.fullUserKey=ar(this.userKey,k.apiKey,F),this.fullPersistenceKey=ar("persistence",k.apiKey,F),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,o.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?jn._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,o.Z)(function*(){if(y.persistence===m)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,E="authUser"){return(0,o.Z)(function*(){if(!y.length)return new W(yi(Bi),m,E);const k=(yield Promise.all(y.map(function(){var tt=(0,o.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let F=k[0]||yi(Bi);const X=ar(E,m.config.apiKey,m.name);let pe=null;for(const tt of y)try{const Tt=yield tt._get(X);if(Tt){const hn=jn._fromJSON(m,Tt);tt!==F&&(pe=hn),F=tt;break}}catch{}const We=k.filter(tt=>tt._shouldAllowMigration);return F._shouldAllowMigration&&We.length?(F=We[0],pe&&(yield F._set(X,pe.toJSON())),yield Promise.all(y.map(function(){var tt=(0,o.Z)(function*(Tt){if(Tt!==F)try{yield Tt._remove(X)}catch{}});return function(Tt){return tt.apply(this,arguments)}}())),new W(F,m,E)):new W(F,m,E)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(ee(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(B(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Qe(m))return"Blackberry";if(bt(m))return"Webos";if(L(m))return"Safari";if((m.includes("chrome/")||O(m))&&!m.includes("edge/"))return"Chrome";if(Te(m))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function B(w=(0,z.z$)()){return/firefox\//i.test(w)}function L(w=(0,z.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function O(w=(0,z.z$)()){return/crios\//i.test(w)}function ee(w=(0,z.z$)()){return/iemobile/i.test(w)}function Te(w=(0,z.z$)()){return/android/i.test(w)}function Qe(w=(0,z.z$)()){return/blackberry/i.test(w)}function bt(w=(0,z.z$)()){return/webos/i.test(w)}function De(w=(0,z.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function nt(w=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Lt(w=(0,z.z$)()){return De(w)||Te(w)||bt(w)||Qe(w)||/windows phone/i.test(w)||ee(w)}function lr(w,m=[]){let y;switch(w){case"Browser":y=$((0,z.z$)());break;case"Worker":y=`${$((0,z.z$)())}-${w}`;break;default:y=w}const E=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${N.SDK_VERSION}/${E}`}function oe(){return(oe=(0,o.Z)(function*(w){return(yield Ne(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ve(w,m){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,o.Z)(function*(w,m){return Ne(w,"GET","/v2/recaptchaConfig",me(w,m))})).apply(this,arguments)}function Pt(w){return void 0!==w&&void 0!==w.getResponse}function $t(w){return void 0!==w&&void 0!==w.enterprise}class bn{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function nn(w){return new Promise((m,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=m,E.onerror=k=>{const F=Ie("internal-error");F.customData=k,y(F)},E.type="text/javascript",E.charset="UTF-8",function ni(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(E)})}function cr(w){return`__${w}${Math.floor(1e6*Math.random())}`}class ya{constructor(m){this.type="recaptcha-enterprise",this.auth=ii(m)}verify(m="verify",y=!1){var E=this;return(0,o.Z)(function*(){function F(){return F=(0,o.Z)(function*(pe){if(!y){if(null==pe.tenantId&&null!=pe._agentRecaptchaConfig)return pe._agentRecaptchaConfig.siteKey;if(null!=pe.tenantId&&void 0!==pe._tenantRecaptchaConfigs[pe.tenantId])return pe._tenantRecaptchaConfigs[pe.tenantId].siteKey}return new Promise(function(){var We=(0,o.Z)(function*(tt,Tt){Ve(pe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(hn=>{if(void 0!==hn.recaptchaKey){const Xr=new bn(hn);return null==pe.tenantId?pe._agentRecaptchaConfig=Xr:pe._tenantRecaptchaConfigs[pe.tenantId]=Xr,tt(Xr.siteKey)}Tt(new Error("recaptcha Enterprise site key undefined"))}).catch(hn=>{Tt(hn)})});return function(tt,Tt){return We.apply(this,arguments)}}())}),F.apply(this,arguments)}function X(pe,We,tt){const Tt=window.grecaptcha;$t(Tt)?Tt.enterprise.ready(()=>{Tt.enterprise.execute(pe,{action:m}).then(hn=>{We(hn)}).catch(()=>{We("NO_RECAPTCHA")})}):tt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((pe,We)=>{(function k(pe){return F.apply(this,arguments)})(E.auth).then(tt=>{if(!y&&$t(window.grecaptcha))X(tt,pe,We);else{if(typeof window>"u")return void We(new Error("RecaptchaVerifier is only supported in browser"));nn("https://www.google.com/recaptcha/enterprise.js?render="+tt).then(()=>{X(tt,pe,We)}).catch(Tt=>{We(Tt)})}}).catch(tt=>{We(tt)})})})()}}function fn(w,m,y){return il.apply(this,arguments)}function il(){return(il=(0,o.Z)(function*(w,m,y,E=!1){const k=new ya(w);let F;try{F=yield k.verify(y)}catch{F=yield k.verify(y,!0)}const X=Object.assign({},m);return Object.assign(X,E?{captchaResp:F}:{captchaResponse:F}),Object.assign(X,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(X,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),X})).apply(this,arguments)}class rh{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const E=F=>new Promise((X,pe)=>{try{X(m(F))}catch(We){pe(We)}});E.onAbort=y,this.queue.push(E);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,o.Z)(function*(){if(y.auth.currentUser===m)return;const E=[];try{for(const k of y.queue)yield k(m),k.onAbort&&E.push(k.onAbort)}catch(k){E.reverse();for(const F of E)try{F()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}class Go{constructor(m,y,E,k){this.app=m,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=E,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.beforeStateQueue=new rh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(m,y){var E=this;return y&&(this._popupRedirectResolver=yi(y)),this._initializationPromise=this.queue((0,o.Z)(function*(){var k,F;if(!E._deleted&&(E.persistenceManager=yield W.create(E,m),!E._deleted)){if(null!==(k=E._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(F=E.currentUser)||void 0===F?void 0:F.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,o.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,o.Z)(function*(){var E;const k=yield y.assertedPersistence.getCurrentUser();let F=k,X=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const pe=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,We=F?._redirectEventId,tt=yield y.tryRedirectSignIn(m);(!pe||pe===We)&&tt?.user&&(F=tt.user,X=!0)}if(!F)return y.directlySetCurrentUser(null);if(!F._redirectEventId){if(X)try{yield y.beforeStateQueue.runMiddleware(F)}catch(pe){F=k,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(pe))}return F?y.reloadAndSetCurrentUserOrClear(F):y.directlySetCurrentUser(null)}return he(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===F._redirectEventId?y.directlySetCurrentUser(F):y.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var y=this;return(0,o.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,o.Z)(function*(){try{yield Ii(m)}catch(E){if("auth/network-request-failed"!==E?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Fi(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,o.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,o.Z)(function*(){const E=m?(0,z.m9)(m):null;return E&&he(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(m,y=!1){var E=this;return(0,o.Z)(function*(){if(!E._deleted)return m&&he(E.tenantId===m.tenantId,E,"tenant-id-mismatch"),y||(yield E.beforeStateQueue.runMiddleware(m)),E.queue((0,o.Z)(function*(){yield E.directlySetCurrentUser(m),E.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,o.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,o.Z)(function*(){yield y.assertedPersistence.setPersistence(yi(m))}))}initializeRecaptchaConfig(){var m=this;return(0,o.Z)(function*(){const y=yield Ve(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new bn(y);null==m.tenantId?m._agentRecaptchaConfig=E:m._tenantRecaptchaConfigs[m.tenantId]=E,E.emailPasswordEnabled&&new ya(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new z.LL("auth","Firebase",m())}onAuthStateChanged(m,y,E){return this.registerStateListener(this.authStateSubscription,m,y,E)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,E){return this.registerStateListener(this.idTokenSubscription,m,y,E)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var E=this;return(0,o.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(y);return null===m?k.removeCurrentUser():k.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,o.Z)(function*(){if(!y.redirectPersistenceManager){const E=m&&yi(m)||y._popupRedirectResolver;he(E,y,"argument-error"),y.redirectPersistenceManager=yield W.create(y,[yi(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,o.Z)(function*(){var E,k;return y._isInitialized&&(yield y.queue((0,o.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===m?y._currentUser:(null===(k=y.redirectUser)||void 0===k?void 0:k._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,o.Z)(function*(){if(m===y.currentUser)return y.queue((0,o.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,E,k){if(this._deleted)return()=>{};const F="function"==typeof y?y:y.next.bind(y),X=this._isInitialized?Promise.resolve():this._initializationPromise;return he(X,this,"internal-error"),X.then(()=>F(this.currentUser)),"function"==typeof y?m.addObserver(y,E,k):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,o.Z)(function*(){y.currentUser&&y.currentUser!==m&&y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh(),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=lr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,o.Z)(function*(){var y;const E={"X-Client-Version":m.clientVersion};m.app.options.appId&&(E["X-Firebase-gmpid"]=m.app.options.appId);const k=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();k&&(E["X-Firebase-Client"]=k);const F=yield m._getAppCheckToken();return F&&(E["X-Firebase-AppCheck"]=F),E})()}_getAppCheckToken(){var m=this;return(0,o.Z)(function*(){var y;const E=yield null===(y=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return E?.error&&function wt(w,...m){ve.logLevel<=fe.in.WARN&&ve.warn(`Auth (${N.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function ii(w){return(0,z.m9)(w)}class $r{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,z.ne)(y=>this.observer=y)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Cn(w,m,y){const E=ii(w);he(E._canInitEmulator,E,"emulator-config-failed"),he(/^https?:\/\//.test(m),E,"invalid-emulator-scheme");const k=!!y?.disableWarnings,F=sh(m),{host:X,port:pe}=function $i(w){const m=sh(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const F=k[1];return{host:F,port:ur(E.substr(F.length+1))}}{const[F,X]=E.split(":");return{host:F,port:ur(X)}}}(m);E.config.emulator={url:`${F}//${X}${null===pe?"":`:${pe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:X,port:pe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function $o(){function w(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function sh(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function ur(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class gs{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return Je("not implemented")}_getIdTokenResponse(m){return Je("not implemented")}_linkToIdToken(m,y){return Je("not implemented")}_getReauthenticationResolver(m){return Je("not implemented")}}function ba(w,m){return qr.apply(this,arguments)}function qr(){return(qr=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:resetPassword",me(w,m))})).apply(this,arguments)}function rl(w,m){return Au.apply(this,arguments)}function Au(){return(Au=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ap(w,m){return fc.apply(this,arguments)}function fc(){return(fc=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:update",me(w,m))})).apply(this,arguments)}function kp(w,m){return Un.apply(this,arguments)}function Un(){return(Un=(0,o.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPassword",me(w,m))})).apply(this,arguments)}function ku(w,m){return oh.apply(this,arguments)}function oh(){return(oh=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:sendOobCode",me(w,m))})).apply(this,arguments)}function l_(w,m){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,o.Z)(function*(w,m){return ku(w,m)})).apply(this,arguments)}function ah(w,m){return pc.apply(this,arguments)}function pc(){return(pc=(0,o.Z)(function*(w,m){return ku(w,m)})).apply(this,arguments)}function Rp(w,m){return lh.apply(this,arguments)}function lh(){return(lh=(0,o.Z)(function*(w,m){return ku(w,m)})).apply(this,arguments)}function ch(w,m){return uh.apply(this,arguments)}function uh(){return(uh=(0,o.Z)(function*(w,m){return ku(w,m)})).apply(this,arguments)}function mc(){return(mc=(0,o.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithEmailLink",me(w,m))})).apply(this,arguments)}function gc(){return(gc=(0,o.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithEmailLink",me(w,m))})).apply(this,arguments)}class Ou extends gs{constructor(m,y,E,k=null){super("password",E),this._email=m,this._password=y,this._tenantId=k}static _fromEmailAndPassword(m,y){return new Ou(m,y,"password")}static _fromEmailAndCode(m,y,E=null){return new Ou(m,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,o.Z)(function*(){var E;switch(y.signInMethod){case"password":const k={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=m._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const F=yield fn(m,k,"signInWithPassword");return kp(m,F)}return kp(m,k).catch(function(){var F=(0,o.Z)(function*(X){if("auth/missing-recaptcha-token"===X.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const pe=yield fn(m,k,"signInWithPassword");return kp(m,pe)}return Promise.reject(X)});return function(X){return F.apply(this,arguments)}}());case"emailLink":return function c_(w,m){return mc.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:Ae(m,"internal-error")}})()}_linkToIdToken(m,y){var E=this;return(0,o.Z)(function*(){switch(E.signInMethod){case"password":return rl(m,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Op(w,m){return gc.apply(this,arguments)}(m,{idToken:y,email:E._email,oobCode:E._password});default:Ae(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function qo(w,m){return sl.apply(this,arguments)}function sl(){return(sl=(0,o.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithIdp",me(w,m))})).apply(this,arguments)}class _s extends gs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new _s(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):Ae("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:k}=y,F=(0,ae._T)(y,["providerId","signInMethod"]);if(!E||!k)return null;const X=new _s(E,k);return X.idToken=F.idToken||void 0,X.accessToken=F.accessToken||void 0,X.secret=F.secret,X.nonce=F.nonce,X.pendingToken=F.pendingToken||null,X}_getIdTokenResponse(m){return qo(m,this.buildRequest())}_linkToIdToken(m,y){const E=this.buildRequest();return E.idToken=y,qo(m,E)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,qo(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,z.xO)(y)}return m}}function Pu(w,m){return _c.apply(this,arguments)}function _c(){return(_c=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:sendVerificationCode",me(w,m))})).apply(this,arguments)}function ol(){return(ol=(0,o.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPhoneNumber",me(w,m))})).apply(this,arguments)}function Fu(){return(Fu=(0,o.Z)(function*(w,m){const y=yield en(w,"POST","/v1/accounts:signInWithPhoneNumber",me(w,m));if(y.temporaryProof)throw vn(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Wr={USER_NOT_FOUND:"user-not-found"};function Lu(){return(Lu=(0,o.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPhoneNumber",me(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Wr)})).apply(this,arguments)}class li extends gs{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new li({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new li({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function Nu(w,m){return ol.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function dh(w,m){return Fu.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function yc(w,m){return Lu.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:E,verificationCode:k}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:E,code:k}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:E,phoneNumber:k,temporaryProof:F}=m;return E||y||k||F?new li({verificationId:y,verificationCode:E,phoneNumber:k,temporaryProof:F}):null}}class vo{constructor(m){var y,E,k,F,X,pe;const We=(0,z.zd)((0,z.pd)(m)),tt=null!==(y=We.apiKey)&&void 0!==y?y:null,Tt=null!==(E=We.oobCode)&&void 0!==E?E:null,hn=function eo(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=We.mode)&&void 0!==k?k:null);he(tt&&Tt&&hn,"argument-error"),this.apiKey=tt,this.operation=hn,this.code=Tt,this.continueUrl=null!==(F=We.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(X=We.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(pe=We.tenantId)&&void 0!==pe?pe:null}static parseLink(m){const y=function Pp(w){const m=(0,z.zd)((0,z.pd)(w)).link,y=m?(0,z.zd)((0,z.pd)(m)).deep_link_id:null,E=(0,z.zd)((0,z.pd)(w)).deep_link_id;return(E?(0,z.zd)((0,z.pd)(E)).link:null)||E||y||m||w}(m);try{return new vo(y)}catch{return null}}}let Np=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return Ou._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const k=vo.parseLink(E);return he(k,"argument-error"),Ou._fromEmailAndCode(y,k.code,k.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Rn{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class wa extends Rn{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Bu extends wa{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return he("providerId"in y&&"signInMethod"in y,"argument-error"),_s._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return he(m.idToken||m.accessToken,"argument-error"),_s._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Bu.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Bu.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:F,nonce:X,providerId:pe}=m;if(!E&&!k&&!y&&!F||!pe)return null;try{return new Bu(pe)._credential({idToken:y,accessToken:E,nonce:X,pendingToken:F})}catch{return null}}}let Zo=(()=>{class w extends wa{constructor(){super("facebook.com")}static credential(y){return _s._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),xr=(()=>{class w extends wa{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return _s._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:k}=y;if(!E&&!k)return null;try{return w.credential(E,k)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),hh=(()=>{class w extends wa{constructor(){super("github.com")}static credential(y){return _s._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class ys extends gs{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return qo(m,this.buildRequest())}_linkToIdToken(m,y){const E=this.buildRequest();return E.idToken=y,qo(m,E)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,qo(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:k,pendingToken:F}=y;return E&&k&&F&&E===k?new ys(E,F):null}static _create(m,y){return new ys(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vu extends Rn{constructor(m){he(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Vu.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Vu.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=ys.fromJSON(m);return he(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:E}=m;if(!y||!E)return null;try{return ys._create(E,y)}catch{return null}}}let bc=(()=>{class w extends wa{constructor(){super("twitter.com")}static credential(y,E){return _s._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=y;if(!E||!k)return null;try{return w.credential(E,k)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function al(w,m){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,o.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signUp",me(w,m))})).apply(this,arguments)}class qi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,E,k=!1){return(0,o.Z)(function*(){const F=yield jn._fromIdTokenResponse(m,E,k),X=Ca(E);return new qi({user:F,providerId:X,_tokenResponse:E,operationType:y})})()}static _forOperation(m,y,E){return(0,o.Z)(function*(){yield m._updateTokensIfNecessary(E,!0);const k=Ca(E);return new qi({user:m,providerId:k,_tokenResponse:E,operationType:y})})()}}function Ca(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Ft(w){return wc.apply(this,arguments)}function wc(){return(wc=(0,o.Z)(function*(w){var m;const y=ii(w);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new qi({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield al(y,{returnSecureToken:!0}),k=yield qi._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(k.user),k})).apply(this,arguments)}class Uu extends z.ZR{constructor(m,y,E,k){var F;super(y.code,y.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,Uu.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(m,y,E,k){return new Uu(m,y,E,k)}}function Hu(w,m,y,E){return("reauthenticate"===m?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Uu._fromErrorAndOperation(w,F,m,E):F})}function fh(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Fp(w,m){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,o.Z)(function*(w,m){const y=(0,z.m9)(w);yield Pe(!0,y,m);const{providerUserInfo:E}=yield Xn(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),k=fh(E||[]);return y.providerData=y.providerData.filter(F=>k.has(F.providerId)),k.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function vs(w,m){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,o.Z)(function*(w,m,y=!1){const E=yield Yt(w,m._linkToIdToken(w.auth,yield w.getIdToken()),y);return qi._forOperation(w,"link",E)})).apply(this,arguments)}function Pe(w,m,y){return rn.apply(this,arguments)}function rn(){return(rn=(0,o.Z)(function*(w,m,y){yield Ii(m);const k=!1===w?"provider-already-linked":"no-such-provider";he(fh(m.providerData).has(y)===w,m.auth,k)})).apply(this,arguments)}function ju(w,m){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,o.Z)(function*(w,m,y=!1){const{auth:E}=w,k="reauthenticate";try{const F=yield Yt(w,Hu(E,k,m,w),y);he(F.idToken,E,"internal-error");const X=Zn(F.idToken);he(X,E,"internal-error");const{sub:pe}=X;return he(w.uid===pe,E,"user-mismatch"),qi._forOperation(w,k,F)}catch(F){throw"auth/user-not-found"===F?.code&&Ae(E,"user-mismatch"),F}})).apply(this,arguments)}function ci(w,m){return ll.apply(this,arguments)}function ll(){return(ll=(0,o.Z)(function*(w,m,y=!1){const E="signIn",k=yield Hu(w,E,m),F=yield qi._fromIdTokenResponse(w,E,k);return y||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function bo(w,m){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,o.Z)(function*(w,m){return ci(ii(w),m)})).apply(this,arguments)}function cl(w,m){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,o.Z)(function*(w,m){const y=(0,z.m9)(w);return yield Pe(!1,y,m.providerId),vs(y,m)})).apply(this,arguments)}function ph(w,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,o.Z)(function*(w,m){return ju((0,z.m9)(w),m)})).apply(this,arguments)}function zv(w,m){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,o.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithCustomToken",me(w,m))})).apply(this,arguments)}function Mr(w,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,o.Z)(function*(w,m){const y=ii(w),E=yield zv(y,{token:m,returnSecureToken:!0}),k=yield qi._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(k.user),k})).apply(this,arguments)}class Ar{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Yo._fromServerResponse(m,y):"totpInfo"in y?kr._fromServerResponse(m,y):Ae(m,"internal-error")}}class Yo extends Ar{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Yo(y)}}class kr extends Ar{constructor(m){super("totp",m)}static _fromServerResponse(m,y){return new kr(y)}}function ul(w,m,y){var E;he((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),he(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(he(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(he(y.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function mh(w,m,y){return gh.apply(this,arguments)}function gh(){return gh=(0,o.Z)(function*(w,m,y){var E;const k=ii(w),F={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const X=yield fn(k,F,"getOobCode",!0);y&&ul(k,X,y),yield ah(k,X)}else y&&ul(k,F,y),yield ah(k,F).catch(function(){var X=(0,o.Z)(function*(pe){if("auth/missing-recaptcha-token"!==pe.code)return Promise.reject(pe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const We=yield fn(k,F,"getOobCode",!0);y&&ul(k,We,y),yield ah(k,We)}});return function(pe){return X.apply(this,arguments)}}())}),gh.apply(this,arguments)}function Ic(w,m,y){return dl.apply(this,arguments)}function dl(){return(dl=(0,o.Z)(function*(w,m,y){yield ba((0,z.m9)(w),{oobCode:m,newPassword:y})})).apply(this,arguments)}function zu(w,m){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,o.Z)(function*(w,m){yield Ap((0,z.m9)(w),{oobCode:m})})).apply(this,arguments)}function br(w,m){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,o.Z)(function*(w,m){const y=(0,z.m9)(w),E=yield ba(y,{oobCode:m}),k=E.requestType;switch(he(k,y,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(E.mfaInfo,y,"internal-error");default:he(E.email,y,"internal-error")}let F=null;return E.mfaInfo&&(F=Ar._fromServerResponse(ii(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:F},operation:k}})).apply(this,arguments)}function $u(w,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,o.Z)(function*(w,m){const{data:y}=yield br((0,z.m9)(w),m);return y.email})).apply(this,arguments)}function hl(w,m,y){return fl.apply(this,arguments)}function fl(){return fl=(0,o.Z)(function*(w,m,y){var E;const k=ii(w),F={returnSecureToken:!0,email:m,password:y,clientType:"CLIENT_TYPE_WEB"};let X;if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const tt=yield fn(k,F,"signUpPassword");X=al(k,tt)}else X=al(k,F).catch(function(){var tt=(0,o.Z)(function*(Tt){if("auth/missing-recaptcha-token"===Tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const hn=yield fn(k,F,"signUpPassword");return al(k,hn)}return Promise.reject(Tt)});return function(Tt){return tt.apply(this,arguments)}}());const pe=yield X.catch(tt=>Promise.reject(tt)),We=yield qi._fromIdTokenResponse(k,"signIn",pe);return yield k._updateCurrentUser(We.user),We}),fl.apply(this,arguments)}function qu(w,m,y){return bo((0,z.m9)(w),Np.credential(m,y))}function _h(w,m,y){return wo.apply(this,arguments)}function wo(){return wo=(0,o.Z)(function*(w,m,y){var E;const k=ii(w),F={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function X(pe,We){he(We.handleCodeInApp,k,"argument-error"),We&&ul(k,pe,We)}if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const pe=yield fn(k,F,"getOobCode",!0);X(pe,y),yield Rp(k,pe)}else X(F,y),yield Rp(k,F).catch(function(){var pe=(0,o.Z)(function*(We){if("auth/missing-recaptcha-token"!==We.code)return Promise.reject(We);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const tt=yield fn(k,F,"getOobCode",!0);X(tt,y),yield Rp(k,tt)}});return function(We){return pe.apply(this,arguments)}}())}),wo.apply(this,arguments)}function yh(w,m){return"EMAIL_SIGNIN"===vo.parseLink(m)?.operation}function u_(w,m,y){return _n.apply(this,arguments)}function _n(){return(_n=(0,o.Z)(function*(w,m,y){const E=(0,z.m9)(w),k=Np.credentialWithLink(m,y||vt());return he(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),bo(E,k)})).apply(this,arguments)}function Qo(w,m){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:createAuthUri",me(w,m))})).apply(this,arguments)}function Lp(w,m){return xc.apply(this,arguments)}function xc(){return(xc=(0,o.Z)(function*(w,m){const E={identifier:m,continueUri:Zt()?vt():"http://localhost"},{signinMethods:k}=yield Qo((0,z.m9)(w),E);return k||[]})).apply(this,arguments)}function vh(w,m){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,o.Z)(function*(w,m){const y=(0,z.m9)(w),k={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&ul(y.auth,k,m);const{email:F}=yield l_(y.auth,k);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function bh(w,m,y){return pl.apply(this,arguments)}function pl(){return(pl=(0,o.Z)(function*(w,m,y){const E=(0,z.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};y&&ul(E.auth,F,y);const{email:X}=yield ch(E.auth,F);X!==w.email&&(yield w.reload())})).apply(this,arguments)}function ml(w,m){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,o.Z)(function*(w,m){return Ne(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ac(w,m){return kc.apply(this,arguments)}function kc(){return(kc=(0,o.Z)(function*(w,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const E=(0,z.m9)(w),F={idToken:yield E.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},X=yield Yt(E,ml(E.auth,F));E.displayName=X.displayName||null,E.photoURL=X.photoUrl||null;const pe=E.providerData.find(({providerId:We})=>"password"===We);pe&&(pe.displayName=E.displayName,pe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(X)})).apply(this,arguments)}function Wu(w,m){return Ns((0,z.m9)(w),m,null)}function Bp(w,m){return Ns((0,z.m9)(w),null,m)}function Ns(w,m,y){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,o.Z)(function*(w,m,y){const{auth:E}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(F.email=m),y&&(F.password=y);const X=yield Yt(w,rl(E,F));yield w._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class Da{constructor(m,y,E={}){this.isNewUser=m,this.providerId=y,this.profile=E}}class Xo extends Da{constructor(m,y,E,k){super(m,y,E),this.username=k}}class Ch extends Da{constructor(m,y){super(m,"facebook.com",y)}}class Eh extends Xo{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Vp extends Da{constructor(m,y){super(m,"google.com",y)}}class Zu extends Xo{constructor(m,y,E){super(m,"twitter.com",y,E)}}function Rc(w){const{user:m,_tokenResponse:y}=w;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function wh(w){var m,y;if(!w)return null;const{providerId:E}=w,k=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const X=null===(y=null===(m=Zn(w.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(X)return new Da(F,"anonymous"!==X&&"custom"!==X?X:null)}if(!E)return null;switch(E){case"facebook.com":return new Ch(F,k);case"github.com":return new Eh(F,k);case"google.com":return new Vp(F,k);case"twitter.com":return new Zu(F,k,w.screenName||null);case"custom":case"anonymous":return new Da(F,null);default:return new Da(F,E,k)}}(y)}class Rr{constructor(m,y,E){this.type=m,this.credential=y,this.auth=E}static _fromIdtoken(m,y){return new Rr("enroll",m,y)}static _fromMfaPendingCredential(m){return new Rr("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,E;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Rr._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(E=m.multiFactorSession)&&void 0!==E&&E.idToken)return Rr._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Qu{constructor(m,y,E){this.session=m,this.hints=y,this.signInResolver=E}static _fromError(m,y){const E=ii(m),k=y.customData._serverResponse,F=(k.mfaInfo||[]).map(pe=>Ar._fromServerResponse(E,pe));he(k.mfaPendingCredential,E,"internal-error");const X=Rr._fromMfaPendingCredential(k.mfaPendingCredential);return new Qu(X,F,function(){var pe=(0,o.Z)(function*(We){const tt=yield We._process(E,X);delete k.mfaInfo,delete k.mfaPendingCredential;const Tt=Object.assign(Object.assign({},k),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(y.operationType){case"signIn":const hn=yield qi._fromIdTokenResponse(E,y.operationType,Tt);return yield E._updateCurrentUser(hn.user),hn;case"reauthenticate":return he(y.user,E,"internal-error"),qi._forOperation(y.user,y.operationType,Tt);default:Ae(E,"internal-error")}});return function(We){return pe.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,o.Z)(function*(){return y.signInResolver(m)})()}}function Eo(w,m){var y;const E=(0,z.m9)(w),k=m;return he(m.customData.operationType,E,"argument-error"),he(null===(y=k.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Qu._fromError(E,k)}function Pc(w,m){return Ne(w,"POST","/v2/accounts/mfaEnrollment:start",me(w,m))}class yl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>Ar._fromServerResponse(m.auth,E)))})}static _fromUser(m){return new yl(m)}getSession(){var m=this;return(0,o.Z)(function*(){return Rr._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,y){var E=this;return(0,o.Z)(function*(){const k=m,F=yield E.getSession(),X=yield Yt(E.user,k._process(E.user.auth,F,y));return yield E.user._updateTokensIfNecessary(X),E.user.reload()})()}unenroll(m){var y=this;return(0,o.Z)(function*(){const E="string"==typeof m?m:m.uid,k=yield y.user.getIdToken();try{const F=yield Yt(y.user,function Sa(w,m){return Ne(w,"POST","/v2/accounts/mfaEnrollment:withdraw",me(w,m))}(y.user.auth,{idToken:k,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:X})=>X!==E),yield y.user._updateTokensIfNecessary(F),yield y.user.reload()}catch(F){throw F}})()}}const ea=new WeakMap;function vl(w){const m=(0,z.m9)(w);return ea.has(m)||ea.set(m,yl._fromUser(m)),ea.get(m)}const To="__sak";class bl{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(To,"1"),this.storage.removeItem(To),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dh=(()=>{class w extends bl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ju(){const w=(0,z.z$)();return L(w)||De(w)}()&&function dn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Lt(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),F=this.localCache[E];k!==F&&y(E,F,k)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((pe,We,tt)=>{this.notifyListeners(pe,tt)});const k=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(k);if(y.newValue!==pe)null!==y.newValue?this.storage.setItem(k,y.newValue):this.storage.removeItem(k);else if(this.localCache[k]===y.newValue&&!E)return}const F=()=>{const pe=this.storage.getItem(k);!E&&this.localCache[k]===pe||this.notifyListeners(k,pe)},X=this.storage.getItem(k);!function tn(){return(0,z.w1)()&&10===document.documentMode}()||X===y.newValue||y.newValue===y.oldValue?F():setTimeout(F,10)}notifyListeners(y,E){this.localCache[y]=E;const k=this.listeners[y];if(k)for(const F of Array.from(k))F(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var k=()=>super._set,F=this;return(0,o.Z)(function*(){yield k().call(F,y,E),F.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,k=this;return(0,o.Z)(function*(){const F=yield E().call(k,y);return k.localCache[y]=JSON.stringify(F),F})()}_remove(y){var E=()=>super._remove,k=this;return(0,o.Z)(function*(){yield E().call(k,y),delete k.localCache[y]})()}}return w.type="LOCAL",w})(),Do=(()=>{class w extends bl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let Gp=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(F=>F.isListeningto(y));if(E)return E;const k=new w(y);return this.receivers.push(k),k}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,o.Z)(function*(){const k=y,{eventId:F,eventType:X,data:pe}=k.data,We=E.handlersMap[X];if(!We?.size)return;k.ports[0].postMessage({status:"ack",eventId:F,eventType:X});const tt=Array.from(We).map(function(){var hn=(0,o.Z)(function*(Xr){return Xr(k.origin,pe)});return function(Xr){return hn.apply(this,arguments)}}()),Tt=yield function d_(w){return Promise.all(w.map(function(){var m=(0,o.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return m.apply(this,arguments)}}()))}(tt);k.ports[0].postMessage({status:"done",eventId:F,eventType:X,response:Tt})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Io(w="",m=10){let y="";for(let E=0;E<m;E++)y+=Math.floor(10*Math.random());return w+y}class Aa{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,E=50){var k=this;return(0,o.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let X,pe;return new Promise((We,tt)=>{const Tt=Io("",20);F.port1.start();const hn=setTimeout(()=>{tt(new Error("unsupported_event"))},E);pe={messageChannel:F,onMessage(Xr){const Ui=Xr;if(Ui.data.eventId===Tt)switch(Ui.data.status){case"ack":clearTimeout(hn),X=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),We(Ui.data.response);break;default:clearTimeout(hn),clearTimeout(X),tt(new Error("invalid_response"))}}},k.handlers.add(pe),F.port1.addEventListener("message",pe.onMessage),k.target.postMessage({eventType:m,eventId:Tt,data:y},[F.port2])}).finally(()=>{pe&&k.removeMessageHandler(pe)})})()}}function Si(){return window}function El(){return typeof Si().WorkerGlobalScope<"u"&&"function"==typeof Si().importScripts}function ed(){return(ed=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Kn="firebaseLocalStorageDb",xi="firebaseLocalStorage",Fc="fbase_key";class Kr{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function td(w,m){return w.transaction([xi],m?"readwrite":"readonly").objectStore(xi)}function En(){const w=indexedDB.open(Kn,1);return new Promise((m,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(xi,{keyPath:Fc})}catch(k){y(k)}}),w.addEventListener("success",(0,o.Z)(function*(){const E=w.result;E.objectStoreNames.contains(xi)?m(E):(E.close(),yield function Sh(){const w=indexedDB.deleteDatabase(Kn);return new Kr(w).toPromise()}(),m(yield En()))}))})}function xh(w,m,y){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,o.Z)(function*(w,m,y){const E=td(w,!0).put({[Fc]:m,value:y});return new Kr(E).toPromise()})).apply(this,arguments)}function Lc(){return(Lc=(0,o.Z)(function*(w,m){const y=td(w,!1).get(m),E=yield new Kr(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function h_(w,m){const y=td(w,!0).delete(m);return new Kr(y).toPromise()}const $p=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,o.Z)(function*(){return y.db||(y.db=yield En()),y.db})()}_withRetries(y){var E=this;return(0,o.Z)(function*(){let k=0;for(;;)try{const F=yield E._openDb();return yield y(F)}catch(F){if(k++>3)throw F;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,o.Z)(function*(){return El()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,o.Z)(function*(){y.receiver=Gp._getInstance(function to(){return El()?self:null}()),y.receiver._subscribe("keyChanged",function(){var E=(0,o.Z)(function*(k,F){return{keyProcessed:(yield y._poll()).includes(F.key)}});return function(k,F){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,o.Z)(function*(k,F){return["keyChanged"]});return function(k,F){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,o.Z)(function*(){var E,k;if(y.activeServiceWorker=yield function Xu(){return ed.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Aa(y.activeServiceWorker);const F=yield y.sender._send("ping",{},800);!F||(null===(E=F[0])||void 0===E?void 0:E.fulfilled)&&(null===(k=F[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,o.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ih(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const y=yield En();return yield xh(y,To,"1"),yield h_(y,To),!0}catch{}return!1})()}_withPendingWrite(y){var E=this;return(0,o.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var k=this;return(0,o.Z)(function*(){return k._withPendingWrite((0,o.Z)(function*(){return yield k._withRetries(F=>xh(F,y,E)),k.localCache[y]=E,k.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,o.Z)(function*(){const k=yield E._withRetries(F=>function $v(w,m){return Lc.apply(this,arguments)}(F,y));return E.localCache[y]=k,k})()}_remove(y){var E=this;return(0,o.Z)(function*(){return E._withPendingWrite((0,o.Z)(function*(){return yield E._withRetries(k=>h_(k,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,o.Z)(function*(){const E=yield y._withRetries(X=>{const pe=td(X,!1).getAll();return new Kr(pe).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const k=[],F=new Set;for(const{fbase_key:X,value:pe}of E)F.add(X),JSON.stringify(y.localCache[X])!==JSON.stringify(pe)&&(y.notifyListeners(X,pe),k.push(X));for(const X of Object.keys(y.localCache))y.localCache[X]&&!F.has(X)&&(y.notifyListeners(X,null),k.push(X));return k})()}notifyListeners(y,E){this.localCache[y]=E;const k=this.listeners[y];if(k)for(const F of Array.from(k))F(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function qv(w,m){return Ne(w,"POST","/v2/accounts/mfaSignIn:start",me(w,m))}const Uc=1e12;class Wi{constructor(m){this.auth=m,this.counter=Uc,this._widgets=new Map}render(m,y){const E=this.counter;return this._widgets.set(E,new ws(m,this.auth.name,y||{})),this.counter++,E}reset(m){var y;const E=m||Uc;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(m){var y;return(null===(y=this._widgets.get(m||Uc))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,o.Z)(function*(){var E;return null===(E=y._widgets.get(m||Uc))||void 0===E||E.execute(),""})()}}class ws{constructor(m,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof m?document.getElementById(m):m;he(k,"argument-error",{appName:y}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nd(w){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Dl=cr("rcb"),Hc=new gr(3e4,6e4);class kh{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Si().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return he(function p_(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),m,"argument-error"),this.shouldResolveImmediately(y)&&Pt(Si().grecaptcha)?Promise.resolve(Si().grecaptcha):new Promise((E,k)=>{const F=Si().setTimeout(()=>{k(Ie(m,"network-request-failed"))},Hc.get());Si()[Dl]=()=>{Si().clearTimeout(F),delete Si()[Dl];const pe=Si().grecaptcha;if(!pe||!Pt(pe))return void k(Ie(m,"internal-error"));const We=pe.render;pe.render=(tt,Tt)=>{const hn=We(tt,Tt);return this.counter++,hn},this.hostLanguage=y,E(pe)},nn(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:Dl,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(F),k(Ie(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=Si().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qp{load(m){return(0,o.Z)(function*(){return new Wi(m)})()}clearedOneInstance(){}}const m_="recaptcha",id={theme:"light",type:"image"};class Or{constructor(m,y=Object.assign({},id),E){this.parameters=y,this.type=m_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ii(E),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof m?document.getElementById(m):m;he(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qp:new kh,this.validateStartingState()}verify(){var m=this;return(0,o.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),E=m.getAssertedRecaptcha();return E.getResponse(y)||new Promise(F=>{const X=pe=>{!pe||(m.tokenChangeListeners.delete(X),F(pe))};m.tokenChangeListeners.add(X),m.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof m)m(y);else if("string"==typeof m){const E=Si()[m];"function"==typeof E&&E(y)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,o.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,o.Z)(function*(){he(Zt()&&!El(),m.auth,"internal-error"),yield function jc(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function ue(w){return oe.apply(this,arguments)}(m.auth);he(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ta{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=li._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function Wp(w,m,y){return rd.apply(this,arguments)}function rd(){return(rd=(0,o.Z)(function*(w,m,y){const E=ii(w),k=yield Ra(E,m,(0,z.m9)(y));return new ta(k,F=>bo(E,F))})).apply(this,arguments)}function Rh(w,m,y){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,o.Z)(function*(w,m,y){const E=(0,z.m9)(w);yield Pe(!1,E,"phone");const k=yield Ra(E.auth,m,(0,z.m9)(y));return new ta(k,F=>cl(E,F))})).apply(this,arguments)}function Il(w,m,y){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,o.Z)(function*(w,m,y){const E=(0,z.m9)(w),k=yield Ra(E.auth,m,(0,z.m9)(y));return new ta(k,F=>ph(E,F))})).apply(this,arguments)}function Ra(w,m,y){return sd.apply(this,arguments)}function sd(){return(sd=(0,o.Z)(function*(w,m,y){var E;const k=yield y.verify();try{let F;if(he("string"==typeof k,w,"argument-error"),he(y.type===m_,w,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const X=F.session;if("phoneNumber"in F)return he("enroll"===X.type,w,"internal-error"),(yield Pc(w,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{he("signin"===X.type,w,"internal-error");const pe=(null===(E=F.multiFactorHint)||void 0===E?void 0:E.uid)||F.multiFactorUid;return he(pe,w,"missing-multi-factor-info"),(yield qv(w,{mfaPendingCredential:X.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield Pu(w,{phoneNumber:F.phoneNumber,recaptchaToken:k});return X}}finally{y._reset()}})).apply(this,arguments)}function Gc(w,m){return So.apply(this,arguments)}function So(){return(So=(0,o.Z)(function*(w,m){yield vs((0,z.m9)(w),m)})).apply(this,arguments)}let xo=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=ii(y)}verifyPhoneNumber(y,E){return Ra(this.auth,y,(0,z.m9)(E))}static credential(y,E){return li._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:k}=y;return E&&k?li._fromTokenResponse(E,k):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Gn(w,m){return m?yi(m):(he(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ri extends gs{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return qo(m,this._buildIdpRequest())}_linkToIdToken(m,y){return qo(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return qo(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function wr(w){return ci(w.auth,new ri(w),w.bypassAuthState)}function od(w){const{auth:m,user:y}=w;return he(y,m,"internal-error"),ju(y,new ri(w),w.bypassAuthState)}function Jt(w){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,o.Z)(function*(w){const{auth:m,user:y}=w;return he(y,m,"internal-error"),vs(y,new ri(w),w.bypassAuthState)})).apply(this,arguments)}class zc{constructor(m,y,E,k,F=!1){this.auth=m,this.resolver=E,this.user=k,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,o.Z)(function*(E,k){m.pendingPromise={resolve:E,reject:k};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(E,k){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,o.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:F,tenantId:X,error:pe,type:We}=m;if(pe)return void y.reject(pe);const tt={auth:y.auth,requestUri:E,sessionId:k,tenantId:X||void 0,postBody:F||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(We)(tt))}catch(Tt){y.reject(Tt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return wr;case"linkViaPopup":case"linkViaRedirect":return Jt;case"reauthViaPopup":case"reauthViaRedirect":return od;default:Ae(this.auth,"internal-error")}}resolve(m){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zn=new gr(2e3,1e4);function Cr(w,m,y){return na.apply(this,arguments)}function na(){return(na=(0,o.Z)(function*(w,m,y){const E=ii(w);qe(w,m,Rn);const k=Gn(E,y);return new Cs(E,"signInViaPopup",m,k).executeNotNull()})).apply(this,arguments)}function Vi(w,m,y){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,o.Z)(function*(w,m,y){const E=(0,z.m9)(w);qe(E.auth,m,Rn);const k=Gn(E.auth,y);return new Cs(E.auth,"reauthViaPopup",m,k,E).executeNotNull()})).apply(this,arguments)}function Zp(w,m,y){return xl.apply(this,arguments)}function xl(){return(xl=(0,o.Z)(function*(w,m,y){const E=(0,z.m9)(w);qe(E.auth,m,Rn);const k=Gn(E.auth,y);return new Cs(E.auth,"linkViaPopup",m,k,E).executeNotNull()})).apply(this,arguments)}let Cs=(()=>{class w extends zc{constructor(y,E,k,F,X){super(y,E,F,X),this.provider=k,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,o.Z)(function*(){const E=yield y.execute();return he(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,o.Z)(function*(){kt(1===y.filter.length,"Popup operations only handle one event");const E=Io();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(k=>{y.reject(k)}),y.resolver._isIframeWebStorageSupported(y.auth,k=>{k||y.reject(Ie(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,k;this.pollId=null!==(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,zn.get())};y()}}return w.currentPopupAction=null,w})();const no=new Map;class Wv extends zc{constructor(m,y,E=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,o.Z)(function*(){let E=no.get(y.auth._key());if(!E){try{const F=(yield function ad(w,m){return io.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;E=()=>Promise.resolve(F)}catch(k){E=()=>Promise.reject(k)}no.set(y.auth._key(),E)}return y.bypassAuthState||no.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,E=this;return(0,o.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(E,m);if("unknown"!==m.type){if(m.eventId){const k=yield E.auth._redirectUserForId(m.eventId);if(k)return E.user=k,y().call(E,m);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function io(){return(io=(0,o.Z)(function*(w,m){const y=$c(m),E=Na(w);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(y));return yield E._remove(y),k})).apply(this,arguments)}function ld(w,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,o.Z)(function*(w,m){return Na(w)._set($c(m),"true")})).apply(this,arguments)}function g_(){no.clear()}function Nh(w,m){no.set(w._key(),m)}function Na(w){return yi(w._redirectPersistence)}function $c(w){return ar("pendingRedirect",w.config.apiKey,w.name)}function cd(w,m,y){return function Fh(w,m,y){return ud.apply(this,arguments)}(w,m,y)}function ud(){return(ud=(0,o.Z)(function*(w,m,y){const E=ii(w);qe(w,m,Rn),yield E._initializationPromise;const k=Gn(E,y);return yield ld(k,E),k._openRedirect(E,m,"signInViaRedirect")})).apply(this,arguments)}function Ml(w,m,y){return function Al(w,m,y){return dd.apply(this,arguments)}(w,m,y)}function dd(){return(dd=(0,o.Z)(function*(w,m,y){const E=(0,z.m9)(w);qe(E.auth,m,Rn),yield E.auth._initializationPromise;const k=Gn(E.auth,y);yield ld(k,E.auth);const F=yield kl(E);return k._openRedirect(E.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function __(w,m,y){return function Lh(w,m,y){return Bh.apply(this,arguments)}(w,m,y)}function Bh(){return(Bh=(0,o.Z)(function*(w,m,y){const E=(0,z.m9)(w);qe(E.auth,m,Rn),yield E.auth._initializationPromise;const k=Gn(E.auth,y);yield Pe(!1,E,m.providerId),yield ld(k,E.auth);const F=yield kl(E);return k._openRedirect(E.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function y_(w,m){return hd.apply(this,arguments)}function hd(){return(hd=(0,o.Z)(function*(w,m){return yield ii(w)._initializationPromise,qc(w,m,!1)})).apply(this,arguments)}function qc(w,m){return fd.apply(this,arguments)}function fd(){return(fd=(0,o.Z)(function*(w,m,y=!1){const E=ii(w),k=Gn(E,m),X=yield new Wv(E,k,y).execute();return X&&!y&&(delete X.user._redirectEventId,yield E._persistUserIfCurrent(X.user),yield E._setRedirectUser(null,m)),X})).apply(this,arguments)}function kl(w){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,o.Z)(function*(w){const m=Io(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Rl{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(m,E)&&(y=!0,this.sendToConsumer(m,E),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Vh(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ol(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var E;if(m.error&&!Ol(m)){const k=(null===(E=m.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Ie(this.auth,k))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const E=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&E}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(md(m))}saveEventToCache(m){this.cachedEventUids.add(md(m)),this.lastProcessedEventTime=Date.now()}}function md(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Ol({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Wc(w){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,o.Z)(function*(w,m={}){return Ne(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Hh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zv=/^https?/;function Pl(){return(Pl=(0,o.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Wc(w);for(const y of m)try{if(Zc(y))return}catch{}Ae(w,"unauthorized-domain")})).apply(this,arguments)}function Zc(w){const m=vt(),{protocol:y,hostname:E}=new URL(m);if(w.startsWith("chrome-extension://")){const X=new URL(w);return""===X.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&X.hostname===E}if(!Zv.test(y))return!1;if(Hh.test(w))return E===w;const k=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const Yp=new gr(3e4,6e4);function Kp(){const w=Si().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Es=null;function Mo(w){return Es=Es||function b_(w){return new Promise((m,y)=>{var E,k,F;function X(){Kp(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Kp(),y(Ie(w,"network-request-failed"))},timeout:Yp.get()})}if(null!==(k=null===(E=Si().gapi)||void 0===E?void 0:E.iframes)&&void 0!==k&&k.Iframe)m(gapi.iframes.getContext());else{if(null===(F=Si().gapi)||void 0===F||!F.load){const pe=cr("iframefcb");return Si()[pe]=()=>{gapi.load?X():y(Ie(w,"network-request-failed"))},nn(`https://apis.google.com/js/api.js?onload=${pe}`).catch(We=>y(We))}X()}}).catch(m=>{throw Es=null,m})}(w),Es}const ro=new gr(5e3,15e3),Fl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Er=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ts(w){const m=w.config;he(m.authDomain,w,"auth-domain-config-required");const y=m.emulator?Ps(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:m.apiKey,appName:w.name,v:N.SDK_VERSION},k=Er.get(w.config.apiHost);k&&(E.eid=k);const F=w._getFrameworks();return F.length&&(E.fw=F.join(",")),`${y}?${(0,z.xO)(E).slice(1)}`}function C(){return C=(0,o.Z)(function*(w){const m=yield Mo(w),y=Si().gapi;return he(y,w,"internal-error"),m.open({where:document.body,url:Ts(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fl,dontclear:!0},E=>new Promise(function(){var k=(0,o.Z)(function*(F,X){yield E.restyle({setHideOnLeave:!1});const pe=Ie(w,"network-request-failed"),We=Si().setTimeout(()=>{X(pe)},ro.get());function tt(){Si().clearTimeout(We),F(E)}E.ping(tt).then(tt,()=>{X(pe)})});return function(F,X){return k.apply(this,arguments)}}()))}),C.apply(this,arguments)}const S={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _e{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Bt=encodeURIComponent("fac");function Tr(w,m,y,E,k,F){return si.apply(this,arguments)}function si(){return(si=(0,o.Z)(function*(w,m,y,E,k,F){he(w.config.authDomain,w,"auth-domain-config-required"),he(w.config.apiKey,w,"invalid-api-key");const X={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:N.SDK_VERSION,eventId:k};if(m instanceof Rn){m.setDefaultLanguage(w.languageCode),X.providerId=m.providerId||"",(0,z.xb)(m.getCustomParameters())||(X.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Tt,hn]of Object.entries(F||{}))X[Tt]=hn}if(m instanceof wa){const Tt=m.getScopes().filter(hn=>""!==hn);Tt.length>0&&(X.scopes=Tt.join(","))}w.tenantId&&(X.tid=w.tenantId);const pe=X;for(const Tt of Object.keys(pe))void 0===pe[Tt]&&delete pe[Tt];const We=yield w._getAppCheckToken(),tt=We?`#${Bt}=${encodeURIComponent(We)}`:"";return`${ui(w)}?${(0,z.xO)(pe).slice(1)}${tt}`})).apply(this,arguments)}function ui({config:w}){return w.emulator?Ps(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}const so="webStorageSupport",Jr=class ia{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Do,this._completeRedirectFn=qc,this._overrideRedirectResult=Nh}_openPopup(m,y,E,k){var F=this;return(0,o.Z)(function*(){var X;kt(null===(X=F.eventManagers[m._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const pe=yield Tr(m,y,E,vt(),k);return function Xe(w,m,y,E=500,k=600){const F=Math.max((window.screen.availHeight-k)/2,0).toString(),X=Math.max((window.screen.availWidth-E)/2,0).toString();let pe="";const We=Object.assign(Object.assign({},S),{width:E.toString(),height:k.toString(),top:F,left:X}),tt=(0,z.z$)().toLowerCase();y&&(pe=O(tt)?"_blank":y),B(tt)&&(m=m||"http://localhost",We.scrollbars="yes");const Tt=Object.entries(We).reduce((Xr,[Ui,Kc])=>`${Xr}${Ui}=${Kc},`,"");if(function lt(w=(0,z.z$)()){var m;return De(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(tt)&&"_self"!==pe)return function Ke(w,m){const y=document.createElement("a");y.href=w,y.target=m;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(m||"",pe),new _e(null);const hn=window.open(m||"",pe,Tt);he(hn,w,"popup-blocked");try{hn.focus()}catch{}return new _e(hn)}(m,pe,Io())})()}_openRedirect(m,y,E,k){var F=this;return(0,o.Z)(function*(){return yield F._originValidation(m),function Cl(w){Si().location.href=w}(yield Tr(m,y,E,vt(),k)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:k,promise:F}=this.eventManagers[y];return k?Promise.resolve(k):(kt(F,"If manager is not set, promise should be"),F)}const E=this.initAndGetManager(m);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(m){var y=this;return(0,o.Z)(function*(){const E=yield function jh(w){return C.apply(this,arguments)}(m),k=new Rl(m);return E.register("authEvent",F=>(he(F?.authEvent,m,"invalid-auth-event"),{status:k.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:k},y.iframes[m._key()]=E,k})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(so,{type:so},k=>{var F;const X=null===(F=k?.[0])||void 0===F?void 0:F[so];void 0!==X&&y(!!X),Ae(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function v_(w){return Pl.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return Lt()||L()||De()}};class Ao extends class Ls{constructor(m){this.factorId=m}_process(m,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,E);case"signin":return this._finalizeSignIn(m,y.credential);default:return Je("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Ao(m)}_finalizeEnroll(m,y,E){return function _l(w,m){return Ne(w,"POST","/v2/accounts/mfaEnrollment:finalize",me(w,m))}(m,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function Mi(w,m){return Ne(w,"POST","/v2/accounts/mfaSignIn:finalize",me(w,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Gh=(()=>{class w{constructor(){}static assertion(y){return Ao._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var qh="@firebase/auth";class Qp{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,o.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(E=>{m(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Yc=(0,z.Pz)("authIdTokenMaxAge")||300;let ra=null;const w_=w=>function(){var m=(0,o.Z)(function*(y){const E=y&&(yield y.getIdTokenResult()),k=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(k&&k>Yc)return;const F=E?.token;ra!==F&&(ra=F,yield fetch(w,{method:F?"POST":"DELETE",headers:F?{Authorization:`Bearer ${F}`}:{}}))});return function(y){return m.apply(this,arguments)}}();function Wh(w=(0,N.getApp)()){const m=(0,N._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const y=function zo(w,m){const y=(0,N._getProvider)(w,"auth");if(y.isInitialized()){const k=y.getImmediate(),F=y.getOptions();if((0,z.vZ)(F,m??{}))return k;Ae(k,"already-initialized")}return y.initialize({options:m})}(w,{popupRedirectResolver:Jr,persistence:[$p,Dh,Do]}),E=(0,z.Pz)("authTokenSyncURL");if(E){const F=w_(E);(function Ia(w,m,y){(0,z.m9)(w).beforeAuthStateChanged(m,y)})(y,F,()=>F(y.currentUser)),function Th(w,m,y,E){(0,z.m9)(w).onIdTokenChanged(m,y,E)}(y,X=>F(X))}const k=(0,z.q4)("auth");return k&&Cn(y,`http://${k}`),y}!function Jp(w){(0,N._registerComponent)(new ye.wA("auth",(m,{options:y})=>{const E=m.getProvider("app").getImmediate(),k=m.getProvider("heartbeat"),F=m.getProvider("app-check-internal"),{apiKey:X,authDomain:pe}=E.options;he(X&&!X.includes(":"),"invalid-api-key",{appName:E.name});const We={apiKey:X,authDomain:pe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lr(w)},tt=new Go(E,k,F,We);return function va(w,m){const y=m?.persistence||[],E=(Array.isArray(y)?y:[y]).map(yi);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(E,m?.popupRedirectResolver)}(tt,y),tt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,E)=>{m.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",m=>{const y=ii(m.getProvider("auth").getImmediate());return new Qp(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(qh,"0.23.2",function yd(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(qh,"0.23.2","esm2017")}("Browser")},2090:(Ct,Oe,H)=>{H.d(Oe,{$s:()=>yi,BH:()=>ke,DV:()=>Di,Dv:()=>Ii,G6:()=>Ps,GJ:()=>Pn,L:()=>Ce,LL:()=>Re,P0:()=>yt,Pz:()=>Ie,Sg:()=>qe,UG:()=>Je,UI:()=>at,US:()=>ye,Wj:()=>ei,Wl:()=>Rt,Yr:()=>gr,ZB:()=>ne,ZR:()=>Ne,aH:()=>Ae,b$:()=>Zt,cI:()=>en,dS:()=>ps,eu:()=>ie,g5:()=>N,gK:()=>gi,gQ:()=>Nn,h$:()=>be,hl:()=>ce,hu:()=>z,jU:()=>kt,lb:()=>Wt,m9:()=>ar,ne:()=>Yt,p$:()=>Z,pd:()=>Zn,q4:()=>wt,r3:()=>Xn,ru:()=>vt,tV:()=>Y,uI:()=>he,ug:()=>an,vZ:()=>Li,w1:()=>Os,w9:()=>oi,xO:()=>fs,xb:()=>Gr,z$:()=>Ze,zI:()=>Me,zd:()=>_r});const z=function(W,$){if(!W)throw N($)},N=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},ae=function(W){const $=[];let B=0;for(let L=0;L<W.length;L++){let O=W.charCodeAt(L);O<128?$[B++]=O:O<2048?($[B++]=O>>6|192,$[B++]=63&O|128):55296==(64512&O)&&L+1<W.length&&56320==(64512&W.charCodeAt(L+1))?(O=65536+((1023&O)<<10)+(1023&W.charCodeAt(++L)),$[B++]=O>>18|240,$[B++]=O>>12&63|128,$[B++]=O>>6&63|128,$[B++]=63&O|128):($[B++]=O>>12|224,$[B++]=O>>6&63|128,$[B++]=63&O|128)}return $},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,$){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,L=[];for(let O=0;O<W.length;O+=3){const ee=W[O],Te=O+1<W.length,Qe=Te?W[O+1]:0,bt=O+2<W.length,De=bt?W[O+2]:0;let tn=(15&Qe)<<2|De>>6,Lt=63&De;bt||(Lt=64,Te||(tn=64)),L.push(B[ee>>2],B[(3&ee)<<4|Qe>>4],B[tn],B[Lt])}return L.join("")},encodeString(W,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(W):this.encodeByteArray(ae(W),$)},decodeString(W,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(W):function(W){const $=[];let B=0,L=0;for(;B<W.length;){const O=W[B++];if(O<128)$[L++]=String.fromCharCode(O);else if(O>191&&O<224){const ee=W[B++];$[L++]=String.fromCharCode((31&O)<<6|63&ee)}else if(O>239&&O<365){const bt=((7&O)<<18|(63&W[B++])<<12|(63&W[B++])<<6|63&W[B++])-65536;$[L++]=String.fromCharCode(55296+(bt>>10)),$[L++]=String.fromCharCode(56320+(1023&bt))}else{const ee=W[B++],Te=W[B++];$[L++]=String.fromCharCode((15&O)<<12|(63&ee)<<6|63&Te)}}return $.join("")}(this.decodeStringToByteArray(W,$))},decodeStringToByteArray(W,$){this.init_();const B=$?this.charToByteMapWebSafe_:this.charToByteMap_,L=[];for(let O=0;O<W.length;){const ee=B[W.charAt(O++)],Qe=O<W.length?B[W.charAt(O)]:0;++O;const De=O<W.length?B[W.charAt(O)]:64;++O;const lt=O<W.length?B[W.charAt(O)]:64;if(++O,null==ee||null==Qe||null==De||null==lt)throw new se;L.push(ee<<2|Qe>>4),64!==De&&(L.push(Qe<<4&240|De>>2),64!==lt&&L.push(De<<6&192|lt))}return L},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const be=function(W){const $=ae(W);return ye.encodeByteArray($,!0)},Ce=function(W){return be(W).replace(/\./g,"")},Y=function(W){try{return ye.decodeString(W,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function Z(W){return ne(void 0,W)}function ne(W,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return $}for(const B in $)!$.hasOwnProperty(B)||!$e(B)||(W[B]=ne(W[B],$[B]));return W}function $e(W){return"__proto__"!==W}const ve=()=>{try{return function Fe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=W&&Y(W[1]);return $&&JSON.parse($)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},wt=W=>{var $,B;return null===(B=null===($=ve())||void 0===$?void 0:$.emulatorHosts)||void 0===B?void 0:B[W]},yt=W=>{const $=wt(W);if(!$)return;const B=$.lastIndexOf(":");if(B<=0||B+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const L=parseInt($.substring(B+1),10);return"["===$[0]?[$.substring(1,B-1),L]:[$.substring(0,B),L]},Ae=()=>{var W;return null===(W=ve())||void 0===W?void 0:W.config},Ie=W=>{var $;return null===($=ve())||void 0===$?void 0:$[`_${W}`]};class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,B)=>{this.resolve=$,this.reject=B})}wrapCallback($){return(B,L)=>{B?this.reject(B):this.resolve(L),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(B):$(B,L))}}}function qe(W,$){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const L=$||"demo-project",O=W.iat||0,ee=W.sub||W.user_id;if(!ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Te=Object.assign({iss:`https://securetoken.google.com/${L}`,aud:L,iat:O,exp:O+3600,auth_time:O,sub:ee,user_id:ee,firebase:{sign_in_provider:"custom",identities:{}}},W);return[Ce(JSON.stringify({alg:"none",type:"JWT"})),Ce(JSON.stringify(Te)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Je(){var W;const $=null===(W=ve())||void 0===W?void 0:W.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function kt(){return"object"==typeof self&&self.self===self}function vt(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Os(){const W=Ze();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function gr(){return!1}function Ps(){return!Je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ce(){try{return"object"==typeof indexedDB}catch{return!1}}function ie(){return new Promise((W,$)=>{try{let B=!0;const L="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(L);O.onsuccess=()=>{O.result.close(),B||self.indexedDB.deleteDatabase(L),W(!0)},O.onupgradeneeded=()=>{B=!1},O.onerror=()=>{var ee;$((null===(ee=O.error)||void 0===ee?void 0:ee.message)||"")}}catch(B){$(B)}})}function Me(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ne extends Error{constructor($,B,L){super(B),this.code=$,this.customData=L,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Re.prototype.create)}}class Re{constructor($,B,L){this.service=$,this.serviceName=B,this.errors=L}create($,...B){const L=B[0]||{},O=`${this.service}/${$}`,ee=this.errors[$],Te=ee?function ut(W,$){return W.replace(Mt,(B,L)=>{const O=$[L];return null!=O?String(O):`<${L}?>`})}(ee,L):"Error";return new Ne(O,`${this.serviceName}: ${Te} (${O}).`,L)}}const Mt=/\{\$([^}]+)}/g;function en(W){return JSON.parse(W)}function Rt(W){return JSON.stringify(W)}const un=function(W){let $={},B={},L={},O="";try{const ee=W.split(".");$=en(Y(ee[0])||""),B=en(Y(ee[1])||""),O=ee[2],L=B.d||{},delete B.d}catch{}return{header:$,claims:B,data:L,signature:O}},oi=function(W){const B=un(W).claims;return!!B&&"object"==typeof B&&B.hasOwnProperty("iat")},Pn=function(W){const $=un(W).claims;return"object"==typeof $&&!0===$.admin};function Xn(W,$){return Object.prototype.hasOwnProperty.call(W,$)}function Di(W,$){if(Object.prototype.hasOwnProperty.call(W,$))return W[$]}function Gr(W){for(const $ in W)if(Object.prototype.hasOwnProperty.call(W,$))return!1;return!0}function at(W,$,B){const L={};for(const O in W)Object.prototype.hasOwnProperty.call(W,O)&&(L[O]=$.call(B,W[O],O,W));return L}function Li(W,$){if(W===$)return!0;const B=Object.keys(W),L=Object.keys($);for(const O of B){if(!L.includes(O))return!1;const ee=W[O],Te=$[O];if(mi(ee)&&mi(Te)){if(!Li(ee,Te))return!1}else if(ee!==Te)return!1}for(const O of L)if(!B.includes(O))return!1;return!0}function mi(W){return null!==W&&"object"==typeof W}function fs(W){const $=[];for(const[B,L]of Object.entries(W))Array.isArray(L)?L.forEach(O=>{$.push(encodeURIComponent(B)+"="+encodeURIComponent(O))}):$.push(encodeURIComponent(B)+"="+encodeURIComponent(L));return $.length?"&"+$.join("&"):""}function _r(W){const $={};return W.replace(/^\?/,"").split("&").forEach(L=>{if(L){const[O,ee]=L.split("=");$[decodeURIComponent(O)]=decodeURIComponent(ee)}}),$}function Zn(W){const $=W.indexOf("?");if(!$)return"";const B=W.indexOf("#",$);return W.substring($,B>0?B:void 0)}class Nn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,B){B||(B=0);const L=this.W_;if("string"==typeof $)for(let lt=0;lt<16;lt++)L[lt]=$.charCodeAt(B)<<24|$.charCodeAt(B+1)<<16|$.charCodeAt(B+2)<<8|$.charCodeAt(B+3),B+=4;else for(let lt=0;lt<16;lt++)L[lt]=$[B]<<24|$[B+1]<<16|$[B+2]<<8|$[B+3],B+=4;for(let lt=16;lt<80;lt++){const tn=L[lt-3]^L[lt-8]^L[lt-14]^L[lt-16];L[lt]=4294967295&(tn<<1|tn>>>31)}let De,nt,O=this.chain_[0],ee=this.chain_[1],Te=this.chain_[2],Qe=this.chain_[3],bt=this.chain_[4];for(let lt=0;lt<80;lt++){lt<40?lt<20?(De=Qe^ee&(Te^Qe),nt=1518500249):(De=ee^Te^Qe,nt=1859775393):lt<60?(De=ee&Te|Qe&(ee|Te),nt=2400959708):(De=ee^Te^Qe,nt=3395469782);const tn=(O<<5|O>>>27)+De+bt+nt+L[lt]&4294967295;bt=Qe,Qe=Te,Te=4294967295&(ee<<30|ee>>>2),ee=O,O=tn}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+ee&4294967295,this.chain_[2]=this.chain_[2]+Te&4294967295,this.chain_[3]=this.chain_[3]+Qe&4294967295,this.chain_[4]=this.chain_[4]+bt&4294967295}update($,B){if(null==$)return;void 0===B&&(B=$.length);const L=B-this.blockSize;let O=0;const ee=this.buf_;let Te=this.inbuf_;for(;O<B;){if(0===Te)for(;O<=L;)this.compress_($,O),O+=this.blockSize;if("string"==typeof $){for(;O<B;)if(ee[Te]=$.charCodeAt(O),++Te,++O,Te===this.blockSize){this.compress_(ee),Te=0;break}}else for(;O<B;)if(ee[Te]=$[O],++Te,++O,Te===this.blockSize){this.compress_(ee),Te=0;break}}this.inbuf_=Te,this.total_+=B}digest(){const $=[];let B=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&B,B/=256;this.compress_(this.buf_);let L=0;for(let O=0;O<5;O++)for(let ee=24;ee>=0;ee-=8)$[L]=this.chain_[O]>>ee&255,++L;return $}}function Yt(W,$){const B=new ft(W,$);return B.subscribe.bind(B)}class ft{constructor($,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{$(this)}).catch(L=>{this.error(L)})}next($){this.forEachObserver(B=>{B.next($)})}error($){this.forEachObserver(B=>{B.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,B,L){let O;if(void 0===$&&void 0===B&&void 0===L)throw new Error("Missing Observer.");O=function on(W,$){if("object"!=typeof W||null===W)return!1;for(const B of $)if(B in W&&"function"==typeof W[B])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:B,complete:L},void 0===O.next&&(O.next=yr),void 0===O.error&&(O.error=yr),void 0===O.complete&&(O.complete=yr);const ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),ee}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,$)}sendOne($,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{B(this.observers[$])}catch(L){typeof console<"u"&&console.error&&console.error(L)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yr(){}const Ii=function(W,$,B,L){let O;if(L<$?O="at least "+$:L>B&&(O=0===B?"none":"no more than "+B),O)throw new Error(W+" failed: Was called with "+L+(1===L?" argument.":" arguments.")+" Expects "+O+".")};function gi(W,$){return`${W} failed: ${$} argument `}function ei(W,$,B,L){if((!L||B)&&"function"!=typeof B)throw new Error(gi(W,$)+"must be a valid function.")}function Wt(W,$,B,L){if((!L||B)&&("object"!=typeof B||null===B))throw new Error(gi(W,$)+"must be a valid context object.")}const ps=function(W){const $=[];let B=0;for(let L=0;L<W.length;L++){let O=W.charCodeAt(L);if(O>=55296&&O<=56319){const ee=O-55296;L++,z(L<W.length,"Surrogate pair missing trail surrogate."),O=65536+(ee<<10)+(W.charCodeAt(L)-56320)}O<128?$[B++]=O:O<2048?($[B++]=O>>6|192,$[B++]=63&O|128):O<65536?($[B++]=O>>12|224,$[B++]=O>>6&63|128,$[B++]=63&O|128):($[B++]=O>>18|240,$[B++]=O>>12&63|128,$[B++]=O>>6&63|128,$[B++]=63&O|128)}return $},an=function(W){let $=0;for(let B=0;B<W.length;B++){const L=W.charCodeAt(B);L<128?$++:L<2048?$+=2:L>=55296&&L<=56319?($+=4,B++):$+=3}return $};function yi(W,$=1e3,B=2){const L=$*Math.pow(B,W),O=Math.round(.5*L*(Math.random()-.5)*2);return Math.min(144e5,L+O)}function ar(W){return W&&W._delegate?W._delegate:W}},8718:(Ct,Oe,H)=>{var o=H(4650);let z=null;function N(){return z}const se=new o.OlP("DocumentToken");let be=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ce(){return(0,o.LFG)(Z)}()},providedIn:"platform"}),n})();const Y=new o.OlP("Location Initialized");let Z=(()=>{class n extends be{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ne()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ne()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function $e(){return new Z((0,o.LFG)(se))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Fe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function xe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(wt)},providedIn:"root"}),n})();const ve=new o.OlP("appBaseHref");let wt=(()=>{class n extends Ee{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Fe(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+rt(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+rt(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+rt(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(be),o.LFG(ve,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yt=(()=>{class n extends Ee{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Fe(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+rt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+rt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(be),o.LFG(ve,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(e){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=xe(qe(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+rt(i))}normalize(e){return n.stripTrailingSlash(function ke(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,qe(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+rt(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+rt(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Fe,n.stripTrailingSlash=xe,n.\u0275fac=function(e){return new(e||n)(o.LFG(Ee))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ie(){return new Ae((0,o.LFG)(Ee))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}var he=(()=>((he=he||{})[he.Decimal=0]="Decimal",he[he.Percent=1]="Percent",he[he.Currency=2]="Currency",he[he.Scientific=3]="Scientific",he))(),ht=(()=>((ht=ht||{})[ht.Decimal=0]="Decimal",ht[ht.Group=1]="Group",ht[ht.List=2]="List",ht[ht.PercentSign=3]="PercentSign",ht[ht.PlusSign=4]="PlusSign",ht[ht.MinusSign=5]="MinusSign",ht[ht.Exponential=6]="Exponential",ht[ht.SuperscriptingExponent=7]="SuperscriptingExponent",ht[ht.PerMille=8]="PerMille",ht[ht.Infinity=9]="Infinity",ht[ht.NaN=10]="NaN",ht[ht.TimeSeparator=11]="TimeSeparator",ht[ht.CurrencyDecimal=12]="CurrencyDecimal",ht[ht.CurrencyGroup=13]="CurrencyGroup",ht))();function Mt(n,t){const e=(0,o.cg1)(n),i=e[o.wAp.NumberSymbols][t];if(typeof i>"u"){if(t===ht.CurrencyDecimal)return e[o.wAp.NumberSymbols][ht.Decimal];if(t===ht.CurrencyGroup)return e[o.wAp.NumberSymbols][ht.Group]}return i}const Qe=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function nn(n){const t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}function ya(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let fn=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,o.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,o.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ii{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $r=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ii(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),zo(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{zo(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function zo(n,t){n.context.$implicit=t.item}let Cn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new sh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){$i("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){$i("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class sh{constructor(){this.$implicit=null,this.ngIf=null}}function $i(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}class ur{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let $o=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),gs=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new ur(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36($o,9))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),ba=(()=>{class n{constructor(e,i,r){r._addDefault(new ur(e,i))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36($o,9))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})();let _s=(()=>{class n{constructor(e){this._locale=e}transform(e,i,r){if(!function Nu(n){return!(null==n||""===n||n!=n)}(e))return null;r=r||this._locale;try{return function Ue(n,t,e){return function ue(n,t,e,i,r,s,c=!1){let d="",f=!1;if(isFinite(n)){let _=function bn(n){let i,r,s,c,d,t=Math.abs(n)+"",e=0;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;"0"===t.charAt(s);s++);if(s===(d=t.length))i=[0],r=1;else{for(d--;"0"===t.charAt(d);)d--;for(r-=s,i=[],c=0;s<=d;s++,c++)i[c]=Number(t.charAt(s))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(n);c&&(_=function $t(n){if(0===n.digits[0])return n;const t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===t?n.digits.push(0,0):1===t&&n.digits.push(0),n.integerLen+=2),n}(_));let b=t.minInt,D=t.minFrac,M=t.maxFrac;if(s){const He=s.match(Qe);if(null===He)throw new Error(`${s} is not a valid digit info`);const Ge=He[1],Ye=He[3],Ut=He[5];null!=Ge&&(b=nn(Ge)),null!=Ye&&(D=nn(Ye)),null!=Ut?M=nn(Ut):null!=Ye&&D>M&&(M=D)}!function ni(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let i=n.digits,r=i.length-n.integerLen;const s=Math.min(Math.max(t,r),e);let c=s+n.integerLen,d=i[c];if(c>0){i.splice(Math.max(n.integerLen,c));for(let D=c;D<i.length;D++)i[D]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,c=s+1),i[0]=0;for(let D=1;D<c;D++)i[D]=0}if(d>=5)if(c-1<0){for(let D=0;D>c;D--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[c-1]++;for(;r<Math.max(0,s);r++)i.push(0);let f=0!==s;const _=t+n.integerLen,b=i.reduceRight(function(D,M,R,U){return U[R]=(M+=D)<10?M:M-10,f&&(0===U[R]&&R>=_?U.pop():f=!1),M>=10?1:0},0);b&&(i.unshift(b),n.integerLen++)}(_,D,M);let R=_.digits,U=_.integerLen;const q=_.exponent;let J=[];for(f=R.every(He=>!He);U<b;U++)R.unshift(0);for(;U<0;U++)R.unshift(0);U>0?J=R.splice(U,R.length):(J=R,R=[0]);const we=[];for(R.length>=t.lgSize&&we.unshift(R.splice(-t.lgSize,R.length).join(""));R.length>t.gSize;)we.unshift(R.splice(-t.gSize,R.length).join(""));R.length&&we.unshift(R.join("")),d=we.join(Mt(e,i)),J.length&&(d+=Mt(e,r)+J.join("")),q&&(d+=Mt(e,ht.Exponential)+"+"+q)}else d=Mt(e,ht.Infinity);return d=n<0&&!f?t.negPre+d+t.negSuf:t.posPre+d+t.posSuf,d}(n,function Pt(n,t="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(";"),r=i[0],s=i[1],c=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],d=c[0],f=c[1]||"";e.posPre=d.substring(0,d.indexOf("#"));for(let b=0;b<f.length;b++){const D=f.charAt(b);"0"===D?e.minFrac=e.maxFrac=b+1:"#"===D?e.maxFrac=b+1:e.posSuf+=D}const _=d.split(",");if(e.gSize=_[1]?_[1].length:0,e.lgSize=_[2]||_[1]?(_[2]||_[1]).length:0,s){const b=r.length-e.posPre.length-e.posSuf.length,D=s.indexOf("#");e.negPre=s.substring(0,D).replace(/'/g,""),e.negSuf=s.slice(D+b).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}(function en(n,t){return(0,o.cg1)(n)[o.wAp.NumberFormats][t]}(t,he.Decimal),Mt(t,ht.MinusSign)),t,ht.Group,ht.Decimal,e)}(function ol(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(e),r,i)}catch(s){throw function Un(n,t){return new o.vHH(2100,!1)}()}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.soG,16))},n.\u0275pipe=o.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let Wr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const yc="browser";function vo(n){return"server"===n}let wa=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new Bu((0,o.LFG)(se),window)}),n})();class Bu{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function xr(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Zo(this.window.history)||Zo(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Zo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class vc{}class Zu extends class Vp extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fe(n){z||(z=n)}(new Zu)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Yu(){return Rc=Rc||document.querySelector("base"),Rc?Rc.getAttribute("href"):null}();return null==e?null:function Th(n){Oc=Oc||document.createElement("a"),Oc.setAttribute("href",n);const t=Oc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Rc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ya(document.cookie,t)}}let Oc,Rc=null;const Ia=new o.OlP("TRANSITION_ID"),Ku=[{provide:o.ip1,useFactory:function Up(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=N(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ia,se,o.zs3],multi:!0}];let Hp=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Fs=new o.OlP("EventManagerPlugins");let Co=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Fs),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Rr{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=N().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Qu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Eo=(()=>{class n extends Qu{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Pc),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Pc))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Pc(n){N().remove(n)}const _l={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bs=/%COMP%/g;function bl(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?bl(n,r,e):(r=r.replace(bs,n),e.push(r))}return e}function Ju(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let xa=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new wl(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new d_(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new Gp(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=bl(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Co),o.LFG(Eo),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class wl{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(_l[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Do(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Do(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=_l[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=_l[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ju(i)):this.eventManager.addEventListener(t,e,Ju(i))}}function Do(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class d_ extends wl{constructor(t,e,i,r){super(t),this.component=i;const s=bl(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function vl(n){return"_ngcontent-%COMP%".replace(bs,n)}(r+"-"+i.id),this.hostAttr=function To(n){return"_nghost-%COMP%".replace(bs,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Gp extends wl{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=bl(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Io=(()=>{class n extends Rr{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Aa=["alt","control","meta","shift"],Si={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let El=(()=>{class n extends Rr{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),c="code."),Aa.forEach(_=>{const b=i.indexOf(_);b>-1&&(i.splice(b,1),c+=_+".")}),c+=s,0!=i.length||0===s.length)return null;const f={};return f.domEventName=r,f.fullKey=c,f}static matchEventFullKeyCode(e,i){let r=Si[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Aa.forEach(c=>{c!==r&&(0,Cl[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const td=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:yc},{provide:o.g9A,useValue:function ka(){Zu.makeCurrent()},multi:!0},{provide:se,useFactory:function Fc(){return(0,o.RDi)(document),document},deps:[]}]),Sh=new o.OlP(""),En=[{provide:o.rWj,useClass:class gl{addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(f){c=c||f,s--,0==s&&i(c)};r.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?N().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],xh=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function xi(){return new o.qLn},deps:[]},{provide:Fs,useClass:Io,multi:!0,deps:[se,o.R0b,o.Lbi]},{provide:Fs,useClass:El,multi:!0,deps:[se]},{provide:xa,useClass:xa,deps:[Co,Eo,o.AFp]},{provide:o.FYo,useExisting:xa},{provide:Qu,useExisting:Eo},{provide:Eo,useClass:Eo,deps:[se]},{provide:Co,useClass:Co,deps:[Fs,o.R0b]},{provide:vc,useClass:Hp,deps:[]},[]];let Tl=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:Ia,useExisting:o.AFp},Ku]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Sh,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...xh,...En],imports:[Wr,o.hGG]}),n})(),zp=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function f_(){return new zp((0,o.LFG)(se))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let Il=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):o.LFG(Ra),i},providedIn:"root"}),n})(),Ra=(()=>{class n extends Il{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case o.q3G.NONE:return i;case o.q3G.HTML:return(0,o.qzn)(i,"HTML")?(0,o.z3N)(i):(0,o.EiD)(this._doc,String(i)).toString();case o.q3G.STYLE:return(0,o.qzn)(i,"Style")?(0,o.z3N)(i):i;case o.q3G.SCRIPT:if((0,o.qzn)(i,"Script"))return(0,o.z3N)(i);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.qzn)(i,"URL")?(0,o.z3N)(i):(0,o.mCW)(String(i));case o.q3G.RESOURCE_URL:if((0,o.qzn)(i,"ResourceURL"))return(0,o.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,o.JVY)(e)}bypassSecurityTrustStyle(e){return(0,o.L6k)(e)}bypassSecurityTrustScript(e){return(0,o.eBb)(e)}bypassSecurityTrustUrl(e){return(0,o.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,o.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Sl(n){return new Ra(n.get(se))}(o.LFG(o.zs3)),i},providedIn:"root"}),n})();class Gc{}const xo="*";function Gn(n,t){return{type:7,name:n,definitions:t,options:{}}}function ri(n,t=null){return{type:4,styles:t,timings:n}}function wr(n,t=null){return{type:3,steps:n,options:t}}function od(n,t=null){return{type:2,steps:n,options:t}}function Jt(n){return{type:6,styles:n,offset:null}}function Tn(n,t,e){return{type:0,name:n,styles:t,options:e}}function zn(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function na(n=null){return{type:9,options:n}}function Oa(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function xl(n){Promise.resolve().then(n)}class Cs{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){xl(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Ph{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?xl(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function ad(n){return new o.vHH(3e3,!1)}function b_(){return typeof window<"u"&&typeof window.document<"u"}function Es(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Mo(n){switch(n.length){case 0:return new Cs;case 1:return n[0];default:return new Ph(n)}}function ro(n,t,e,i,r=new Map,s=new Map){const c=[],d=[];let f=-1,_=null;if(i.forEach(b=>{const D=b.get("offset"),M=D==f,R=M&&_||new Map;b.forEach((U,q)=>{let J=q,we=U;if("offset"!==q)switch(J=t.normalizePropertyName(J,c),we){case"!":we=r.get(q);break;case xo:we=s.get(q);break;default:we=t.normalizeStyleValue(q,J,we,c)}R.set(J,we)}),M||d.push(R),_=R,f=D}),c.length)throw function Rl(n){return new o.vHH(3502,!1)}();return d}function Nl(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&gd(e,"start",n)));break;case"done":n.onDone(()=>i(e&&gd(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&gd(e,"destroy",n)))}}function gd(n,t,e){const s=Fl(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function Fl(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function Er(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function Ts(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let jh=(n,t)=>!1,C=(n,t,e)=>[],S=null;function A(n){const t=n.parentNode||n.host;return t===S?null:t}(Es()||typeof Element<"u")&&(b_()?(S=(()=>document.documentElement)(),jh=(n,t)=>{for(;t;){if(t===n)return!0;t=A(t)}return!1}):jh=(n,t)=>n.contains(t),C=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let te=null,_e=!1;const _t=jh,Bt=C;let si=(()=>{class n{validateStyleProperty(e){return function Xe(n){te||(te=function gt(){return typeof document<"u"?document.body:null}()||{},_e=!!te.style&&"WebkitAppearance"in te.style);let t=!0;return te.style&&!function K(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in te.style,!t&&_e&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in te.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return _t(e,i)}getParentElement(e){return A(e)}query(e,i,r){return Bt(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],f){return new Cs(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ui=(()=>{class n{}return n.NOOP=new si,n})();const Ls="ng-enter",Ao="ng-leave",Gh="ng-trigger",zh=".ng-trigger",$h="ng-animating",_d=".ng-animating";function Bs(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:qh(parseFloat(t[1]),t[2])}function qh(n,t){return"s"===t?1e3*n:n}function Ll(n,t,e){return n.hasOwnProperty("duration")?n:function Qp(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(ad()),{duration:0,delay:0,easing:""};r=qh(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(s=qh(parseFloat(f),d[4]));const _=d[5];_&&(c=_)}else r=n;if(!e){let d=!1,f=t.length;r<0&&(t.push(function io(){return new o.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function ld(){return new o.vHH(3101,!1)}()),d=!0),d&&t.splice(f,0,ad())}return{duration:r,delay:s,easing:c}}(n,t,e)}function yd(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Jp(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function ra(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function w_(n,t,e){return e?t+":"+e+";":""}function Wh(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=w_(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=w_(0,Tt(e),n.style[e]));n.setAttribute("style",t)}function w(n,t,e){n.style&&(t.forEach((i,r)=>{const s=tt(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),Es()&&Wh(n))}function m(n,t){n.style&&(t.forEach((e,i)=>{const r=tt(i);n.style[r]=""}),Es()&&Wh(n))}function y(n){return Array.isArray(n)?1==n.length?n[0]:od(n):n}const k=new RegExp("{{\\s*(.+?)\\s*}}","g");function F(n){let t=[];if("string"==typeof n){let e;for(;e=k.exec(n);)t.push(e[1]);k.lastIndex=0}return t}function X(n,t,e){const i=n.toString(),r=i.replace(k,(s,c)=>{let d=t[c];return null==d&&(e.push(function g_(n){return new o.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function pe(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const We=/-+([a-z0-9])/g;function tt(n){return n.replace(We,(...t)=>t[1].toUpperCase())}function Tt(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ui(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Nh(n){return new o.vHH(3004,!1)}()}}function Kc(n,t){return window.getComputedStyle(n)[t]}function em(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function D_(n,t,e){if(":"==n[0]){const f=function tm(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function fd(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof f)return void t.push(f);n=f}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function qc(n){return new o.vHH(3015,!1)}()),t;const r=i[1],s=i[2],c=i[3];t.push(fE(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(fE(c,r))}(i,e,t)):e.push(n),e}const nm=new Set(["true","1"]),vd=new Set(["false","0"]);function fE(n,t){const e=nm.has(n)||vd.has(n),i=nm.has(t)||vd.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?nm.has(n):vd.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?nm.has(t):vd.has(t)),c&&d}}const pE=new RegExp("s*:selfs*,?","g");function I_(n,t,e,i){return new mE(n).build(t,e,i)}class mE{constructor(t){this._driver=t}build(t,e,i){const r=new gE(e);return this._resetContextStyleTimingState(r),Ui(this,y(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function $c(){return new o.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const f=d,_=f.name;_.toString().split(/\s*,\s*/).forEach(b=>{f.name=b,s.push(this.visitState(f,e))}),f.name=_}else if(1==d.type){const f=this.visitTransition(d,e);i+=f.queryCount,r+=f.depCount,c.push(f)}else e.errors.push(function cd(){return new o.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{F(f).forEach(_=>{c.hasOwnProperty(_)||s.add(_)})})}),s.size&&(pe(s.values()),e.errors.push(function Fh(n,t){return new o.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Ui(this,y(t.animation),e);return{type:1,matchers:em(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Ul(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Ui(this,i,e)),options:Ul(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=Ui(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:Ul(t.options)}}visitAnimate(t,e){const i=function Jv(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return bd(Ll(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=bd(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=Ll(e,t);return bd(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:Jt({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const _={};i.easing&&(_.easing=i.easing),c=Jt(_)}e.currentTime+=i.duration+i.delay;const f=this.visitStyle(c,e);f.isEmptyStep=d,r=f}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===xo?i.push(d):e.errors.push(new o.vHH(3002,!1)):i.push(Jp(d));let s=!1,c=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let f of d.values())if(f.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:c,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,f)=>{const _=e.collectedStyles.get(e.currentQuerySelector),b=_.get(f);let D=!0;b&&(s!=r&&s>=b.startTime&&r<=b.endTime&&(e.errors.push(function Al(n,t,e,i,r){return new o.vHH(3010,!1)}()),D=!1),s=b.startTime),D&&_.set(f,{startTime:s,endTime:r}),e.options&&function E(n,t,e){const i=t.params||{},r=F(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function Pa(n){return new o.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function dd(){return new o.vHH(3011,!1)}()),i;let s=0;const c=[];let d=!1,f=!1,_=0;const b=t.steps.map(we=>{const He=this._makeStyleAst(we,e);let Ge=null!=He.offset?He.offset:function Qv(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(He.styles),Ye=0;return null!=Ge&&(s++,Ye=He.offset=Ge),f=f||Ye<0||Ye>1,d=d||Ye<_,_=Ye,c.push(Ye),He});f&&e.errors.push(function __(){return new o.vHH(3012,!1)}()),d&&e.errors.push(function Lh(){return new o.vHH(3200,!1)}());const D=t.steps.length;let M=0;s>0&&s<D?e.errors.push(function Bh(){return new o.vHH(3202,!1)}()):0==s&&(M=1/(D-1));const R=D-1,U=e.currentTime,q=e.currentAnimateTimings,J=q.duration;return b.forEach((we,He)=>{const Ge=M>0?He==R?1:M*He:c[He],Ye=Ge*J;e.currentTime=U+q.delay+Ye,q.duration=Ye,this._validateStyleAst(we,e),we.offset=Ge,i.styles.push(we)}),i}visitReference(t,e){return{type:8,animation:Ui(this,y(t.animation),e),options:Ul(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ul(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ul(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function x_(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(pE,"")),n=n.replace(/@\*/g,zh).replace(/@\w+/g,e=>zh+"-"+e.slice(1)).replace(/:animating/g,_d),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Er(e.collectedStyles,e.currentQuerySelector,new Map);const d=Ui(this,y(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:Ul(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function y_(){return new o.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:Ll(t.timings,e.errors,!0);return{type:12,animation:Ui(this,y(t.animation),e),timings:i,options:null}}}class gE{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ul(n){return n?(n=yd(n)).params&&(n.params=function M_(n){return n?yd(n):null}(n.params)):n={},n}function bd(n,t,e){return{duration:n,delay:t,easing:e}}function Xv(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class im{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const _E=new RegExp(":enter","g"),A_=new RegExp(":leave","g");function rm(n,t,e,i,r,s=new Map,c=new Map,d,f,_=[]){return(new wd).buildKeyframes(n,t,e,i,r,s,c,d,f,_)}class wd{buildKeyframes(t,e,i,r,s,c,d,f,_,b=[]){_=_||new im;const D=new tb(t,e,_,r,s,b,[]);D.options=f;const M=f.delay?Bs(f.delay):0;D.currentTimeline.delayNextStep(M),D.currentTimeline.setStyles([c],null,D.errors,f),Ui(this,i,D);const R=D.timelines.filter(U=>U.containsAnimation());if(R.length&&d.size){let U;for(let q=R.length-1;q>=0;q--){const J=R[q];if(J.element===e){U=J;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([d],null,D.errors,f)}return R.length?R.map(U=>U.buildKeyframes()):[Xv(e,[],[],[],0,M,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const c="number"==typeof s?s:Bs(X(s,r?.params??{},e.errors));i.delayNextStep(c)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?Bs(i.duration):null,d=null!=i.delay?Bs(i.delay):null;return 0!==c&&t.forEach(f=>{const _=e.appendInstructionToTimeline(f,c,d);s=Math.max(s,_.duration+_.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Ui(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=k_);const c=Bs(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>Ui(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Bs(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),Ui(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return Ll(e.params?X(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(f=>{d.forwardTime((f.offset||0)*s),d.setStyles(f.styles,f.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Bs(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=k_);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let f=null;d.forEach((_,b)=>{e.currentQueryIndex=b;const D=e.createSubContext(t.options,_);s&&D.delayNextStep(s),_===e.element&&(f=D.currentTimeline),Ui(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let f=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime}const b=e.currentTimeline;f&&b.delayNextStep(f);const D=b.currentTime;Ui(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const k_={};class tb{constructor(t,e,i,r,s,c,d,f){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=k_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new nb(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Bs(i.duration)),null!=i.delay&&(r.delay=Bs(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=X(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new tb(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=k_,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new DM(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(_E,"."+this._enterClassName)).replace(A_,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),d.push(..._)}return!s&&0==d.length&&c.push(function hd(n){return new o.vHH(3014,!1)}()),d}}class nb{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new nb(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||xo),this._currentKeyframe.set(e,xo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},c=function IM(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,xo)}else ra(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,f]of c){const _=X(f,s,i);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??xo),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,f)=>{const _=ra(d,new Map,this._backFill);_.forEach((b,D)=>{"!"===b?t.add(D):b===xo&&e.add(D)}),i||_.set("offset",f/this.duration),r.push(_)});const s=t.size?pe(t.values()):[],c=e.size?pe(e.values()):[];if(i){const d=r[0],f=new Map(d);d.set("offset",0),f.set("offset",1),r=[d,f]}return Xv(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class DM extends nb{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,f=ra(t[0]);f.set("offset",0),s.push(f);const _=ra(t[0]);_.set("offset",R_(d)),s.push(_);const b=t.length-1;for(let D=1;D<=b;D++){let M=ra(t[D]);const R=M.get("offset");M.set("offset",R_((e+R*i)/c)),s.push(M)}i=c,e=0,r="",t=s}return Xv(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function R_(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Yh{}const vE=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class bE extends Yh{normalizePropertyName(t,e){return tt(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(vE.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function Na(n,t){return new o.vHH(3005,!1)}())}return c+s}}function ib(n,t,e,i,r,s,c,d,f,_,b,D,M){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:f,preStyleProps:_,postStyleProps:b,totalTime:D,errors:M}}const Hl={};class wE{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function xM(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,c,d,f,_,b){const D=[],M=this.ast.options&&this.ast.options.params||Hl,U=this.buildStyles(i,d&&d.params||Hl,D),q=f&&f.params||Hl,J=this.buildStyles(r,q,D),we=new Set,He=new Map,Ge=new Map,Ye="void"===r,Ut={params:MM(q,M),delay:this.ast.options?.delay},Ht=b?[]:rm(t,e,this.ast.animation,s,c,U,J,Ut,_,D);let Sn=0;if(Ht.forEach(Js=>{Sn=Math.max(Js.duration+Js.delay,Sn)}),D.length)return ib(e,this._triggerName,i,r,Ye,U,J,[],[],He,Ge,Sn,D);Ht.forEach(Js=>{const ih=Js.element,z5=Er(He,ih,new Set);Js.preStyleProps.forEach(o_=>z5.add(o_));const hE=Er(Ge,ih,new Set);Js.postStyleProps.forEach(o_=>hE.add(o_)),ih!==e&&we.add(ih)});const Xi=pe(we.values());return ib(e,this._triggerName,i,r,Ye,U,J,Ht,Xi,He,Ge,Sn)}}function MM(n,t){const e=yd(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class AM{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=yd(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!==c&&(r[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=X(c,r,e));const f=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,f,c,e),i.set(f,c)})}),i}}class Kh{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new AM(r.style,r.options&&r.options.params||{},i))}),CE(this.states,"true","1"),CE(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new wE(t,r,this.states))}),this.fallbackTransition=function kM(n,t,e){return new wE(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function CE(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const RM=new im;class OM{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=I_(this._driver,e,i,[]);if(i.length)throw function md(n){return new o.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=ro(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let c;const d=new Map;if(s?(c=rm(this._driver,e,s,Ls,Ao,new Map,new Map,i,RM,r),c.forEach(b=>{const D=Er(d,b.element,new Map);b.postStyleProps.forEach(M=>D.set(M,null))})):(r.push(function Ol(){return new o.vHH(3300,!1)}()),c=[]),r.length)throw function Vh(n){return new o.vHH(3504,!1)}();d.forEach((b,D)=>{b.forEach((M,R)=>{b.set(R,this._driver.computeStyle(D,R,xo))})});const _=Mo(c.map(b=>{const D=d.get(b.element);return this._buildPlayer(b,new Map,D)}));return this._playersById.set(t,_),_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Wc(n){return new o.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=Fl(e,"","","");return Nl(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const EE="ng-animate-queued",O_="ng-animate-disabled",BM=[],sm={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Gl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},es="__ng_removed";class P_{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function sb(n){return n??null}(i?t.value:t),i){const s=yd(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Qh="void",N_=new P_(Qh);class V2{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ko(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function Uh(n,t){return new o.vHH(3302,!1)}();if(null==i||0==i.length)throw function Hh(n){return new o.vHH(3303,!1)}();if(!function H2(n){return"start"==n||"done"==n}(i))throw function Zv(n,t){return new o.vHH(3400,!1)}();const s=Er(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=Er(this._engine.statesByElement,t,new Map);return d.has(e)||(ko(t,Gh),ko(t,Gh+"-"+e),d.set(e,N_)),()=>{this._engine.afterFlush(()=>{const f=s.indexOf(c);f>=0&&s.splice(f,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function v_(n){return new o.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new TE(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(ko(t,Gh),ko(t,Gh+"-"+e),this._engine.statesByElement.set(t,d=new Map));let f=d.get(e);const _=new P_(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&_.absorbOptions(f.options),d.set(e,_),f||(f=N_),_.value!==Qh&&f.value===_.value){if(!function cb(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(f.params,_.params)){const q=[],J=s.matchStyles(f.value,f.params,q),we=s.matchStyles(_.value,_.params,q);q.length?this._engine.reportError(q):this._engine.afterFlush(()=>{m(t,J),w(t,we)})}return}const M=Er(this._engine.playersByElement,t,[]);M.forEach(q=>{q.namespaceId==this.id&&q.triggerName==e&&q.queued&&q.destroy()});let R=s.matchTransition(f.value,_.value,t,_.params),U=!1;if(!R){if(!r)return;R=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:R,fromState:f,toState:_,player:c,isFallbackTransition:U}),U||(ko(t,EE),c.onStart(()=>{Jh(t,EE)})),c.onDone(()=>{let q=this.players.indexOf(c);q>=0&&this.players.splice(q,1);const J=this._engine.playersByElement.get(t);if(J){let we=J.indexOf(c);we>=0&&J.splice(we,1)}}),this.players.push(c),M.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,zh,!0);i.forEach(r=>{if(r[es])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(s.forEach((f,_)=>{if(c.set(_,f.value),this._triggers.has(_)){const b=this.trigger(t,_,Qh,r);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&Mo(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const f=this._triggers.get(c).fallbackTransition,_=i.get(c)||N_,b=new P_(Qh),D=new TE(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:f,fromState:_,toState:b,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[es];(!s||s===sm)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){ko(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const f=Fl(s,i.triggerName,i.fromState.value,i.toState.value);f._data=t,Nl(i.player,d.phase,f,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class U2{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new V2(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const f=r.get(d);if(f){const _=i.indexOf(f);i.splice(_+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(ob(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!ob(e))return;const s=e[es];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ko(t,O_)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Jh(t,O_))}removeNode(t,e,i,r){if(ob(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[es]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return ob(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,zh,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,_d,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Mo(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[es];if(e&&e.setForRemoval){if(t[es]=sm,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(O_)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ko(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Mo(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function Pl(n){return new o.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new im,r=[],s=new Map,c=[],d=new Map,f=new Map,_=new Map,b=new Set;this.disabledNodes.forEach(Dt=>{b.add(Dt);const jt=this.driver.query(Dt,".ng-animate-queued",!0);for(let qt=0;qt<jt.length;qt++)b.add(jt[qt])});const D=this.bodyNode,M=Array.from(this.statesByElement.keys()),R=IE(M,this.collectedEnterElements),U=new Map;let q=0;R.forEach((Dt,jt)=>{const qt=Ls+q++;U.set(jt,qt),Dt.forEach(On=>ko(On,qt))});const J=[],we=new Set,He=new Set;for(let Dt=0;Dt<this.collectedLeaveElements.length;Dt++){const jt=this.collectedLeaveElements[Dt],qt=jt[es];qt&&qt.setForRemoval&&(J.push(jt),we.add(jt),qt.hasAnimation?this.driver.query(jt,".ng-star-inserted",!0).forEach(On=>we.add(On)):He.add(jt))}const Ge=new Map,Ye=IE(M,Array.from(we));Ye.forEach((Dt,jt)=>{const qt=Ao+q++;Ge.set(jt,qt),Dt.forEach(On=>ko(On,qt))}),t.push(()=>{R.forEach((Dt,jt)=>{const qt=U.get(jt);Dt.forEach(On=>Jh(On,qt))}),Ye.forEach((Dt,jt)=>{const qt=Ge.get(jt);Dt.forEach(On=>Jh(On,qt))}),J.forEach(Dt=>{this.processLeaveNode(Dt)})});const Ut=[],Ht=[];for(let Dt=this._namespaceList.length-1;Dt>=0;Dt--)this._namespaceList[Dt].drainQueuedTransitions(e).forEach(qt=>{const On=qt.player,hs=qt.element;if(Ut.push(On),this.collectedEnterElements.length){const Xs=hs[es];if(Xs&&Xs.setForMove){if(Xs.previousTriggersValues&&Xs.previousTriggersValues.has(qt.triggerName)){const a_=Xs.previousTriggersValues.get(qt.triggerName),tl=this.statesByElement.get(qt.element);if(tl&&tl.has(qt.triggerName)){const CM=tl.get(qt.triggerName);CM.value=a_,tl.set(qt.triggerName,CM)}}return void On.destroy()}}const Mu=!D||!this.driver.containsElement(D,hs),_a=Ge.get(hs),Mp=U.get(hs),er=this._buildInstruction(qt,i,Mp,_a,Mu);if(er.errors&&er.errors.length)return void Ht.push(er);if(Mu)return On.onStart(()=>m(hs,er.fromStyles)),On.onDestroy(()=>w(hs,er.toStyles)),void r.push(On);if(qt.isFallbackTransition)return On.onStart(()=>m(hs,er.fromStyles)),On.onDestroy(()=>w(hs,er.toStyles)),void r.push(On);const W5=[];er.timelines.forEach(Xs=>{Xs.stretchStartingKeyframe=!0,this.disabledNodes.has(Xs.element)||W5.push(Xs)}),er.timelines=W5,i.append(hs,er.timelines),c.push({instruction:er,player:On,element:hs}),er.queriedElements.forEach(Xs=>Er(d,Xs,[]).push(On)),er.preStyleProps.forEach((Xs,a_)=>{if(Xs.size){let tl=f.get(a_);tl||f.set(a_,tl=new Set),Xs.forEach((CM,L2)=>tl.add(L2))}}),er.postStyleProps.forEach((Xs,a_)=>{let tl=_.get(a_);tl||_.set(a_,tl=new Set),Xs.forEach((CM,L2)=>tl.add(L2))})});if(Ht.length){const Dt=[];Ht.forEach(jt=>{Dt.push(function Yp(n,t){return new o.vHH(3505,!1)}())}),Ut.forEach(jt=>jt.destroy()),this.reportError(Dt)}const Sn=new Map,Xi=new Map;c.forEach(Dt=>{const jt=Dt.element;i.has(jt)&&(Xi.set(jt,jt),this._beforeAnimationBuild(Dt.player.namespaceId,Dt.instruction,Sn))}),r.forEach(Dt=>{const jt=Dt.element;this._getPreviousPlayers(jt,!1,Dt.namespaceId,Dt.triggerName,null).forEach(On=>{Er(Sn,jt,[]).push(On),On.destroy()})});const Js=J.filter(Dt=>xE(Dt,f,_)),ih=new Map;DE(ih,this.driver,He,_,xo).forEach(Dt=>{xE(Dt,f,_)&&Js.push(Dt)});const hE=new Map;R.forEach((Dt,jt)=>{DE(hE,this.driver,new Set(Dt),f,"!")}),Js.forEach(Dt=>{const jt=ih.get(Dt),qt=hE.get(Dt);ih.set(Dt,new Map([...Array.from(jt?.entries()??[]),...Array.from(qt?.entries()??[])]))});const o_=[],$5=[],q5={};c.forEach(Dt=>{const{element:jt,player:qt,instruction:On}=Dt;if(i.has(jt)){if(b.has(jt))return qt.onDestroy(()=>w(jt,On.toStyles)),qt.disabled=!0,qt.overrideTotalTime(On.totalTime),void r.push(qt);let hs=q5;if(Xi.size>1){let _a=jt;const Mp=[];for(;_a=_a.parentNode;){const er=Xi.get(_a);if(er){hs=er;break}Mp.push(_a)}Mp.forEach(er=>Xi.set(er,hs))}const Mu=this._buildAnimation(qt.namespaceId,On,Sn,s,hE,ih);if(qt.setRealPlayer(Mu),hs===q5)o_.push(qt);else{const _a=this.playersByElement.get(hs);_a&&_a.length&&(qt.parentPlayer=Mo(_a)),r.push(qt)}}else m(jt,On.fromStyles),qt.onDestroy(()=>w(jt,On.toStyles)),$5.push(qt),b.has(jt)&&r.push(qt)}),$5.forEach(Dt=>{const jt=s.get(Dt.element);if(jt&&jt.length){const qt=Mo(jt);Dt.setRealPlayer(qt)}}),r.forEach(Dt=>{Dt.parentPlayer?Dt.syncPlayerEvents(Dt.parentPlayer):Dt.destroy()});for(let Dt=0;Dt<J.length;Dt++){const jt=J[Dt],qt=jt[es];if(Jh(jt,Ao),qt&&qt.hasAnimation)continue;let On=[];if(d.size){let Mu=d.get(jt);Mu&&Mu.length&&On.push(...Mu);let _a=this.driver.query(jt,_d,!0);for(let Mp=0;Mp<_a.length;Mp++){let er=d.get(_a[Mp]);er&&er.length&&On.push(...er)}}const hs=On.filter(Mu=>!Mu.destroyed);hs.length?SE(this,jt,hs):this.processLeaveNode(jt)}return J.length=0,o_.forEach(Dt=>{this.players.push(Dt),Dt.onDone(()=>{Dt.destroy();const jt=this.players.indexOf(Dt);this.players.splice(jt,1)}),Dt.play()}),o_}elementContainsData(t,e){let i=!1;const r=e[es];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const f=!s||s==Qh;d.forEach(_=>{_.queued||!f&&_.triggerName!=r||c.push(_)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const _=f.element,b=_!==s,D=Er(i,_,[]);this._getPreviousPlayers(_,b,c,d,e.toState).forEach(R=>{const U=R.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),R.destroy(),D.push(R)})}m(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,f=e.element,_=[],b=new Set,D=new Set,M=e.timelines.map(U=>{const q=U.element;b.add(q);const J=q[es];if(J&&J.removedBeforeQueried)return new Cs(U.duration,U.delay);const we=q!==f,He=function F_(n){const t=[];return lb(n,t),t}((i.get(q)||BM).map(Sn=>Sn.getRealPlayer())).filter(Sn=>!!Sn.element&&Sn.element===q),Ge=s.get(q),Ye=c.get(q),Ut=ro(0,this._normalizer,0,U.keyframes,Ge,Ye),Ht=this._buildPlayer(U,Ut,He);if(U.subTimeline&&r&&D.add(q),we){const Sn=new TE(t,d,q);Sn.setRealPlayer(Ht),_.push(Sn)}return Ht});_.forEach(U=>{Er(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function rb(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,U.element,U))}),b.forEach(U=>ko(U,$h));const R=Mo(M);return R.onDestroy(()=>{b.forEach(U=>Jh(U,$h)),w(f,e.toStyles)}),D.forEach(U=>{Er(r,U,[]).push(R)}),R}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Cs(t.duration,t.delay)}}class TE{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Cs,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>Nl(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Er(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ob(n){return n&&1===n.nodeType}function ab(n,t){const e=n.style.display;return n.style.display=t??"none",e}function DE(n,t,e,i,r){const s=[];e.forEach(f=>s.push(ab(f)));const c=[];i.forEach((f,_)=>{const b=new Map;f.forEach(D=>{const M=t.computeStyle(_,D,r);b.set(D,M),(!M||0==M.length)&&(_[es]=Gl,c.push(_))}),n.set(_,b)});let d=0;return e.forEach(f=>ab(f,s[d++])),c}function IE(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let f=s.get(d);if(f)return f;const _=d.parentNode;return f=e.has(_)?_:r.has(_)?1:c(_),s.set(d,f),f}return t.forEach(d=>{const f=c(d);1!==f&&e.get(f).push(d)}),e}function ko(n,t){n.classList?.add(t)}function Jh(n,t){n.classList?.remove(t)}function SE(n,t,e){Mo(e).onDone(()=>n.processLeaveNode(t))}function lb(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof Ph?lb(i.players,t):t.push(i)}}function xE(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class vi{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new U2(t,e,i),this._timelineEngine=new OM(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const f=[],b=I_(this._driver,s,f,[]);if(f.length)throw function pd(n,t){return new o.vHH(3404,!1)}();d=function jl(n,t,e){return new Kh(n,t,e)}(r,b,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=Ts(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=Ts(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let UM=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&w(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(w(this._element,this._initialStyles),this._endStyles&&(w(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(m(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(m(this._element,this._endStyles),this._endStyles=null),w(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function om(n){let t=null;return n.forEach((e,i)=>{(function ME(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class AE{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:Kc(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class HM{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return _t(t,e)}getParentElement(t){return A(t)}query(t,e,i){return Bt(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const f={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(f.easing=s);const _=new Map,b=c.filter(R=>R instanceof AE);(function hn(n,t){return 0===n||0===t})(i,r)&&b.forEach(R=>{R.currentSnapshot.forEach((U,q)=>_.set(q,U))});let D=function Yv(n){return n.length?n[0]instanceof Map?n:n.map(t=>Jp(t)):[]}(e).map(R=>ra(R));D=function Xr(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,c)=>{i.has(c)||r.push(c),i.set(c,s)}),r.length)for(let s=1;s<t.length;s++){let c=t[s];r.forEach(d=>c.set(d,Kc(n,d)))}}return t}(t,D,_);const M=function VM(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=om(t[0]),t.length>1&&(i=om(t[t.length-1]))):t instanceof Map&&(e=om(t)),e||i?new UM(n,e,i):null}(t,D);return new AE(t,D,f,M)}}let jM=(()=>{class n extends Gc{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?od(e):e;return $M(this._renderer,null,i,"register",[r]),new GM(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class GM extends class So{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new zM(this._id,t,e||{},this._renderer)}}class zM{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return $M(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function $M(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const Xh="@.disabled";let db=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new hb("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,b)),b}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const f=b=>{Array.isArray(b)?b.forEach(f):this.engine.registerTrigger(c,d,e,b.name,b)};return i.data.animation.forEach(f),new kE(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(vi),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class hb{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==Xh?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class kE extends hb{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Xh?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function RE(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function qM(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let OE=(()=>{class n extends vi{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se),o.LFG(ui),o.LFG(Yh),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const WM=[{provide:Gc,useClass:jM},{provide:Yh,useFactory:function PE(){return new bE}},{provide:vi,useClass:OE},{provide:o.FYo,useFactory:function fb(n,t,e){return new db(n,t,e)},deps:[xa,vi,o.R0b]}],pb=[{provide:ui,useFactory:()=>new HM},{provide:o.QbO,useValue:"BrowserAnimations"},...WM],L_=[{provide:ui,useClass:si},{provide:o.QbO,useValue:"NoopAnimations"},...WM];let NE=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?L_:pb}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:pb,imports:[Tl]}),n})();var Mn=H(8996),La=H(3269);function ct(...n){const t=(0,La.yG)(n);return(0,Mn.D)(n,t)}var Et=H(7579);class ts extends Et.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const am=(0,H(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var nr=H(9751);const{isArray:YM}=Array,{getPrototypeOf:KM,prototype:FE,keys:tf}=Object;function LE(n){if(1===n.length){const t=n[0];if(YM(t))return{args:t,keys:null};if(function QM(n){return n&&"object"==typeof n&&KM(n)===FE}(t)){const e=tf(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var nf=H(4671),pt=H(4004);const{isArray:mb}=Array;function B_(n){return(0,pt.U)(t=>function JM(n,t){return mb(t)?n(...t):n(t)}(n,t))}function BE(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var bi=H(5403),G2=H(9672);function gb(...n){const t=(0,La.yG)(n),e=(0,La.jO)(n),{args:i,keys:r}=LE(n);if(0===i.length)return(0,Mn.D)([],t);const s=new nr.y(function lm(n,t,e=nf.y){return i=>{VE(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let f=0;f<r;f++)VE(t,()=>{const _=(0,Mn.D)(n[f],t);let b=!1;_.subscribe((0,bi.x)(i,D=>{s[f]=D,b||(b=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>BE(r,c):nf.y));return e?s.pipe(B_(e)):s}function VE(n,t,e){n?(0,G2.f)(e,n,t):t()}var Ba=H(8189);function V_(...n){return function cm(){return(0,Ba.J)(1)}()((0,Mn.D)(n,(0,La.yG)(n)))}var Ed=H(8421);function rf(n){return new nr.y(t=>{(0,Ed.Xf)(n()).subscribe(t)})}var XM=H(9635),Ro=H(576);function sf(n,t){const e=(0,Ro.m)(n)?n:()=>n,i=r=>r.error(e());return new nr.y(t?r=>t.schedule(i,0,r):i)}var Va=H(515),Us=H(727),Hi=H(4482);function um(){return(0,Hi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,bi.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class _b extends nr.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Hi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Us.w0;const e=this.getSubject();t.add(this.source.subscribe((0,bi.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Us.w0.EMPTY)}return t}refCount(){return um()(this)}}function di(n,t){return(0,Hi.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,bi.x)(i,f=>{r?.unsubscribe();let _=0;const b=s++;(0,Ed.Xf)(n(f,b)).subscribe(r=(0,bi.x)(i,D=>i.next(t?t(f,D,b,_++):D),()=>{r=null,d()}))},()=>{c=!0,d()}))})}function hi(n){return n<=0?()=>Va.E:(0,Hi.e)((t,e)=>{let i=0;t.subscribe((0,bi.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Pr(...n){const t=(0,La.yG)(n);return(0,Hi.e)((e,i)=>{(t?V_(n,e,t):V_(n,e)).subscribe(i)})}function fi(n,t){return(0,Hi.e)((e,i)=>{let r=0;e.subscribe((0,bi.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var ns=H(5577);function U_(n){return(0,Hi.e)((t,e)=>{let i=!1;t.subscribe((0,bi.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function UE(n=eA){return(0,Hi.e)((t,e)=>{let i=!1;t.subscribe((0,bi.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function eA(){return new am}function zl(n,t){const e=arguments.length>=2;return i=>i.pipe(n?fi((r,s)=>n(r,s,i)):nf.y,hi(1),e?U_(t):UE(()=>new am))}function oo(n,t){return(0,Ro.m)(t)?(0,ns.z)(n,t,1):(0,ns.z)(n,1)}var $n=H(8505);function $l(n){return(0,Hi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,bi.x)(e,void 0,void 0,c=>{s=(0,Ed.Xf)(n(c,$l(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function tA(n,t,e,i,r){return(s,c)=>{let d=e,f=t,_=0;s.subscribe((0,bi.x)(c,b=>{const D=_++;f=d?n(f,b,D):(d=!0,b),i&&c.next(f)},r&&(()=>{d&&c.next(f),c.complete()})))}}function af(n,t){return(0,Hi.e)(tA(n,t,arguments.length>=2,!0))}function HE(n){return n<=0?()=>Va.E:(0,Hi.e)((t,e)=>{let i=[];t.subscribe((0,bi.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function yb(n,t){const e=arguments.length>=2;return i=>i.pipe(n?fi((r,s)=>n(r,s,i)):nf.y,HE(1),e?U_(t):UE(()=>new am))}function nA(n,t=!1){return(0,Hi.e)((e,i)=>{let r=0;e.subscribe((0,bi.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}function vb(n){return(0,Hi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const ln="primary",dm=Symbol("RouteTitle");class GE{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function lf(n){return new GE(n)}function iA(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ua(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!bb(n[r],t[r]))return!1;return!0}function bb(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function zE(n){return Array.prototype.concat.apply([],n)}function $E(n){return n.length>0?n[n.length-1]:null}function Nr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function ql(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,Mn.D)(Promise.resolve(n)):ct(n)}const sA={exact:function Eb(n,t,e){if(!Jc(n.segments,t.segments)||!H_(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Eb(n.children[i],t.children[i],e))return!1;return!0},subset:WE},Kt={exact:function qE(n,t){return Ua(n,t)},subset:function oA(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>bb(n[e],t[e]))},ignored:()=>!0};function Cb(n,t,e){return sA[e.paths](n.root,t.root,e.matrixParams)&&Kt[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function WE(n,t,e){return Tb(n,t,t.segments,e)}function Tb(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Jc(r,e)||t.hasChildren()||!H_(r,e,i))}if(n.segments.length===e.length){if(!Jc(n.segments,e)||!H_(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!WE(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Jc(n.segments,r)&&H_(n.segments,r,i)&&n.children[ln])&&Tb(n.children[ln],t,s,i)}}function H_(n,t,e){return t.every((i,r)=>Kt[e](n[r].parameters,i.parameters))}class Qc{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lf(this.queryParams)),this._queryParamMap}toString(){return Ib.serialize(this)}}class pn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Nr(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cf(this)}}class hm{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=lf(this.parameters)),this._parameterMap}toString(){return YE(this)}}function Jc(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let Xc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new Db},providedIn:"root"}),n})();class Db{parse(t){const e=new fA(t);return new Qc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${fm(t.root,!0)}`,i=function cA(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Sb(e)}=${Sb(r)}`).join("&"):`${Sb(e)}=${Sb(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function q2(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Ib=new Db;function cf(n){return n.segments.map(t=>YE(t)).join("/")}function fm(n,t){if(!n.hasChildren())return cf(n);if(t){const e=n.children[ln]?fm(n.children[ln],!1):"",i=[];return Nr(n.children,(r,s)=>{s!==ln&&i.push(`${s}:${fm(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function ZE(n,t){let e=[];return Nr(n.children,(i,r)=>{r===ln&&(e=e.concat(t(i,r)))}),Nr(n.children,(i,r)=>{r!==ln&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===ln?[fm(n.children[ln],!1)]:[`${r}:${fm(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ln]?`${cf(n)}/${e[0]}`:`${cf(n)}/(${e.join("//")})`}}function aA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sb(n){return aA(n).replace(/%3B/gi,";")}function xb(n){return aA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pm(n){return decodeURIComponent(n)}function lA(n){return pm(n.replace(/\+/g,"%20"))}function YE(n){return`${xb(n.path)}${function uf(n){return Object.keys(n).map(t=>`;${xb(t)}=${xb(n[t])}`).join("")}(n.parameters)}`}const KE=/^[^\/()?;=#]+/;function Td(n){const t=n.match(KE);return t?t[0]:""}const uA=/^[^=?&#]+/,dA=/^[^&#]+/;class fA{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[ln]=new pn(t,e)),i}parseSegment(){const t=Td(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new o.vHH(4009,!1);return this.capture(t),new hm(pm(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Td(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Td(this.remaining);r&&(i=r,this.capture(i))}t[pm(e)]=pm(i)}parseQueryParam(t){const e=function QE(n){const t=n.match(uA);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function hA(n){const t=n.match(dA);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=lA(e),s=lA(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Td(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new o.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=ln);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[ln]:new pn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new o.vHH(4011,!1)}}function Mb(n){return n.segments.length>0?new pn([],{[ln]:n}):n}function j_(n){const t={};for(const i of Object.keys(n.children)){const s=j_(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function JE(n){if(1===n.numberOfChildren&&n.children[ln]){const t=n.children[ln];return new pn(n.segments.concat(t.segments),t.children)}return n}(new pn(n.segments,t))}function Dd(n){return n instanceof Qc}function kb(n,t,e,i,r){if(0===e.length)return oa(t.root,t.root,t.root,i,r);const s=function gm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ob(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Nr(s.outlets,(f,_)=>{d[_]="string"==typeof f?f.split("/"):f}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new Ob(e,t,i)}(e);return s.toRoot()?oa(t.root,t.root,new pn([],{}),i,r):function c(f){const _=function mA(n,t,e,i){if(n.isAbsolute)return new is(t.root,!0,0);if(-1===i)return new is(e,e===t.root,0);return function $_(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new o.vHH(4005,!1);r=i.segments.length}return new is(i,!1,r-s)}(e,i+(mm(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,f),b=_.processChildren?df(_.segmentGroup,_.index,s.commands):_m(_.segmentGroup,_.index,s.commands);return oa(t.root,_.segmentGroup,b,i,r)}(n.snapshot?._lastPathIndex)}function mm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function z_(n){return"object"==typeof n&&null!=n&&n.outlets}function oa(n,t,e,i,r){let c,s={};i&&Nr(i,(f,_)=>{s[_]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),c=n===t?e:Rb(n,t,e);const d=Mb(j_(c));return new Qc(d,s,r)}function Rb(n,t,e){const i={};return Nr(n.children,(r,s)=>{i[s]=r===t?e:Rb(r,t,e)}),new pn(n.segments,i)}class Ob{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&mm(i[0]))throw new o.vHH(4003,!1);const r=i.find(z_);if(r&&r!==$E(i))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class is{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function _m(n,t,e){if(n||(n=new pn([],{})),0===n.segments.length&&n.hasChildren())return df(n,t,e);const i=function Pb(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(z_(d))break;const f=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===f)break;if(f&&_&&"object"==typeof _&&void 0===_.outlets){if(!ym(f,_,c))return s;i+=2}else{if(!ym(f,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new pn(n.segments.slice(0,i.pathIndex),{});return s.children[ln]=new pn(n.segments.slice(i.pathIndex),n.children),df(s,0,r)}return i.match&&0===r.length?new pn(n.segments,{}):i.match&&!n.hasChildren()?eT(n,t,e):i.match?df(n,0,r):eT(n,t,e)}function df(n,t,e){if(0===e.length)return new pn(n.segments,{});{const i=function Wl(n){return z_(n[0])?n[0].outlets:{[ln]:n}}(e),r={};return Nr(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=_m(n.children[c],t,s))}),Nr(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new pn(n.segments,r)}}function eT(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(z_(s)){const f=tT(s.outlets);return new pn(i,f)}if(0===r&&mm(e[0])){i.push(new hm(n.segments[t].path,gA(e[0]))),r++;continue}const c=z_(s)?s.outlets[ln]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&mm(d)?(i.push(new hm(c,gA(d))),r+=2):(i.push(new hm(c,{})),r++)}return new pn(i,{})}function tT(n){const t={};return Nr(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=eT(new pn([],{}),0,e))}),t}function gA(n){const t={};return Nr(n,(e,i)=>t[i]=`${e}`),t}function ym(n,t,e){return n==e.path&&Ua(t,e.parameters)}class Oo{constructor(t,e){this.id=t,this.url=e}}class vm extends Oo{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zl extends Oo{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hf extends Oo{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _A extends Oo{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yA extends Oo{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vA extends Oo{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bA extends Oo{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wA extends Oo{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nT extends Oo{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z2{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class CA{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Y2{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iT{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rT{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EA{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q_{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class TA{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=sT(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=sT(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=oT(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return oT(t,this._root).map(e=>e.value)}}function sT(n,t){if(n===t.value)return t;for(const e of t.children){const i=sT(n,e);if(i)return i}return null}function oT(n,t){if(n===t.value)return[t];for(const e of t.children){const i=oT(n,e);if(i.length)return i.unshift(t),i}return[]}class eu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function bm(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class DA extends TA{constructor(t,e){super(t),this.snapshot=e,wm(this,t)}toString(){return this.snapshot.toString()}}function IA(n,t){const e=function Q2(n,t){const c=new W_([],{},{},"",{},ln,t,null,n.root,-1,{});return new Fb("",new eu(c,[]))}(n,t),i=new ts([new hm("",{})]),r=new ts({}),s=new ts({}),c=new ts({}),d=new ts(""),f=new Id(i,r,c,d,s,ln,t,e.root);return f.snapshot=e.root,new DA(new eu(f,[]),e)}class Id{constructor(t,e,i,r,s,c,d,f){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,pt.U)(_=>_[dm]))??ct(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(t=>lf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(t=>lf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yl(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Nb(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class W_{constructor(t,e,i,r,s,c,d,f,_,b,D,M){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.[dm],this.routeConfig=f,this._urlSegment=_,this._lastPathIndex=b,this._correctedLastPathIndex=M??b,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fb extends TA{constructor(t,e){super(e),this.url=t,wm(this,e)}toString(){return Lb(this._root)}}function wm(n,t){t.value._routerState=n,t.children.forEach(e=>wm(n,e))}function Lb(n){const t=n.children.length>0?` { ${n.children.map(Lb).join(", ")} } `:"";return`${n.value}${t}`}function Cm(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ua(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Ua(t.params,e.params)||n.params.next(e.params),function sa(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ua(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Ua(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bb(n,t){const e=Ua(n.params,t.params)&&function $2(n,t){return Jc(n,t)&&n.every((e,i)=>Ua(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Bb(n.parent,t.parent))}function ff(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function SA(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ff(n,i,r);return ff(n,i)})}(n,t,e);return new eu(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>ff(n,d)),c}}const i=function xA(n){return new Id(new ts(n.url),new ts(n.params),new ts(n.queryParams),new ts(n.fragment),new ts(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>ff(n,s));return new eu(i,r)}}const Z_="ngNavigationCancelingError";function aT(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Dd(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=lT(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function lT(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[Z_]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Em(n){return Sd(n)&&Dd(n.url)}function Sd(n){return n&&n[Z_]}class Vb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ha,this.attachRef=null}}let Ha=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Vb,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pf=!1;let mf=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=r||ln,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,pf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,pf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,pf);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new o.vHH(4013,pf);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new cT(e,d,r.injector);if(i&&function uT(n){return!!n.resolveComponentFactory}(i)){const _=i.resolveComponentFactory(c);this.activated=r.createComponent(_,r.length,f)}else this.activated=r.createComponent(c,{index:r.length,injector:f,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ha),o.Y36(o.s_b),o.$8M("name"),o.Y36(o.sBO),o.Y36(o.lqb))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class cT{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Id?this.route:t===Ha?this.childContexts:this.parent.get(t,e)}}let Tm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[mf],encapsulation:2}),n})();function Y_(n,t){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function K_(n){const t=n.children&&n.children.map(K_),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ln&&(e.component=Tm),e}function Po(n){return n.outlet||ln}function Hs(n,t){const e=n.filter(i=>Po(i)===t);return e.push(...n.filter(i=>Po(i)!==t)),e}function gf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class X2{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Cm(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=bm(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),Nr(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=bm(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=bm(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=bm(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new EA(s.value.snapshot))}),t.children.length&&this.forwardEvent(new iT(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(Cm(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),Cm(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=gf(r.snapshot),f=d?.get(o._Vd)??null;c.attachRef=null,c.route=r,c.resolver=f,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class pT{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class _f{constructor(t,e){this.component=t,this.route=e}}function mT(n,t,e){const i=n._root;return Dm(i,t?t._root:null,e,[i.value])}function yf(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,o.Z0I)(n)?t.get(n):n:i}function Dm(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=bm(t);return n.children.forEach(c=>{(function gT(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const f=function OA(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Jc(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Jc(n.url,t.url)||!Ua(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bb(n,t)||!Ua(n.queryParams,t.queryParams);default:return!Bb(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);f?r.canActivateChecks.push(new pT(i)):(s.data=c.data,s._resolvedData=c._resolvedData),Dm(n,t,s.component?d?d.children:null:e,i,r),f&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new _f(d.outlet.component,c))}else c&&vf(t,d,r),r.canActivateChecks.push(new pT(i)),Dm(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),Nr(s,(c,d)=>vf(c,e.getContext(d),r)),r}function vf(n,t,e){const i=bm(n),r=n.value;Nr(i,(s,c)=>{vf(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new _f(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Im(n){return"function"==typeof n}function vT(n){return n instanceof am||"EmptyError"===n?.name}const Sm=Symbol("INITIAL_VALUE");function bf(){return di(n=>gb(n.map(t=>t.pipe(hi(1),Pr(Sm)))).pipe((0,pt.U)(t=>{for(const e of t)if(!0!==e){if(e===Sm)return Sm;if(!1===e||e instanceof Qc)return e}return!0}),fi(t=>t!==Sm),hi(1)))}function X_(n){return(0,XM.z)((0,$n.b)(t=>{if(Dd(t))throw aT(0,t)}),(0,pt.U)(t=>!0===t))}const ey={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zb(n,t,e,i,r){const s=ty(n,t,e);return s.matched?function nB(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?ct(r.map(c=>{const d=yf(c,n);return ql(function Hb(n){return n&&Im(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(bf(),X_()):ct(!0)}(i=Y_(t,i),t,e).pipe((0,pt.U)(c=>!0===c?s:{...ey})):ct(s)}function ty(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...ey}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||iA)(e,n,t);if(!r)return{...ey};const s={};Nr(r.posParams,(d,f)=>{s[f]=d.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function xm(n,t,e,i,r="corrected"){if(e.length>0&&function ny(n,t,e){return e.some(i=>nu(n,t,i)&&Po(i)!==ln)}(n,e,i)){const c=new pn(t,function Kl(n,t,e,i){const r={};r[ln]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Po(s)!==ln){const c=new pn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[Po(s)]=c}return r}(n,t,i,new pn(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function iy(n,t,e){return e.some(i=>nu(n,t,i))}(n,e,i)){const c=new pn(n.segments,function $b(n,t,e,i,r,s){const c={};for(const d of i)if(nu(n,e,d)&&!r[Po(d)]){const f=new pn([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[Po(d)]=f}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new pn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function nu(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function bT(n,t,e,i){return!!(Po(n)===i||i!==ln&&nu(t,e,n))&&("**"===n.path||ty(t,n,e).matched)}function ry(n,t,e){return 0===t.length&&!n.children[e]}const Mm=!1;class sy{constructor(t){this.segmentGroup=t||null}}class wT{constructor(t){this.urlTree=t}}function Ql(n){return sf(new sy(n))}function CT(n){return sf(new wT(n))}class jA{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=xm(this.urlTree.root,[],[],this.config).segmentGroup,e=new pn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,ln).pipe((0,pt.U)(s=>this.createUrlTree(j_(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe($l(s=>{if(s instanceof wT)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof sy?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,ln).pipe((0,pt.U)(r=>this.createUrlTree(j_(r),t.queryParams,t.fragment))).pipe($l(r=>{throw r instanceof sy?this.noMatchError(r):r}))}noMatchError(t){return new o.vHH(4002,Mm)}createUrlTree(t,e,i){const r=Mb(t);return new Qc(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,pt.U)(s=>new pn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Mn.D)(r).pipe(oo(s=>{const c=i.children[s],d=Hs(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,pt.U)(f=>({segment:f,outlet:s})))}),af((s,c)=>(s[c.outlet]=c.segment,s),{}),yb())}expandSegment(t,e,i,r,s,c){return(0,Mn.D)(i).pipe(oo(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe($l(_=>{if(_ instanceof sy)return ct(null);throw _}))),zl(d=>!!d),$l((d,f)=>{if(vT(d))return ry(e,r,s)?ct(new pn([],{})):Ql(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return bT(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):Ql(e):Ql(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?CT(s):this.lineralizeSegments(i,s).pipe((0,ns.z)(c=>{const d=new pn(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:f,remainingSegments:_,positionalParamSegments:b}=ty(e,r,s);if(!d)return Ql(e);const D=this.applyRedirectCommands(f,r.redirectTo,b);return r.redirectTo.startsWith("/")?CT(D):this.lineralizeSegments(r,D).pipe((0,ns.z)(M=>this.expandSegment(t,e,i,M.concat(_),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=Y_(i,t),i.loadChildren?(i._loadedRoutes?ct({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,pt.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new pn(r,{})))):ct(new pn(r,{}))):zb(e,i,r,t).pipe(di(({matched:c,consumedSegments:d,remainingSegments:f})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,ns.z)(b=>{const D=b.injector??t,M=b.routes,{segmentGroup:R,slicedSegments:U}=xm(e,d,f,M),q=new pn(R.segments,R.children);if(0===U.length&&q.hasChildren())return this.expandChildren(D,M,q).pipe((0,pt.U)(Ge=>new pn(d,Ge)));if(0===M.length&&0===U.length)return ct(new pn(d,{}));const J=Po(i)===s;return this.expandSegment(D,q,M,U,J?ln:s,!0).pipe((0,pt.U)(He=>new pn(d.concat(He.segments),He.children)))})):Ql(e)))}getChildConfig(t,e,i){return e.children?ct({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ct({routes:e._loadedRoutes,injector:e._loadedInjector}):function tB(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?ct(!0):ct(r.map(c=>{const d=yf(c,n);return ql(function _T(n){return n&&Im(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(bf(),X_())}(t,e,i).pipe((0,ns.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,$n.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function HA(n){return sf(lT(Mm,3))}())):ct({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ct(i);if(r.numberOfChildren>1||!r.children[ln])return sf(new o.vHH(4e3,Mm));r=r.children[ln]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Qc(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Nr(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return Nr(e.children,(d,f)=>{c[f]=this.createSegmentGroup(t,d,i,r)}),new pn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new o.vHH(4001,Mm);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class ET{}class Wb{constructor(t,e,i,r,s,c,d,f){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d,this.urlSerializer=f}recognize(){const t=xm(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,ln).pipe((0,pt.U)(e=>{if(null===e)return null;const i=new W_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new eu(i,e),s=new Fb(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=Yl(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,Mn.D)(Object.keys(i.children)).pipe(oo(r=>{const s=i.children[r],c=Hs(e,r);return this.processSegmentGroup(t,c,s,r)}),af((r,s)=>r&&s?(r.push(...s),r):null),nA(r=>null!==r),U_(null),yb(),(0,pt.U)(r=>{if(null===r)return null;const s=TT(r);return function $A(n){n.sort((t,e)=>t.value.outlet===ln?-1:e.value.outlet===ln?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,Mn.D)(e).pipe(oo(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),zl(c=>!!c),$l(c=>{if(vT(c))return ry(i,r,s)?ct([]):ct(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!bT(e,i,r,s))return ct(null);let c;if("**"===e.path){const d=r.length>0?$E(r).parameters:{},f=Am(i)+r.length;c=ct({snapshot:new W_(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YA(e),Po(e),e.component??e._loadedComponent??null,e,DT(i),f,wf(e),f),consumedSegments:[],remainingSegments:[]})}else c=zb(i,e,r,t).pipe((0,pt.U)(({matched:d,consumedSegments:f,remainingSegments:_,parameters:b})=>{if(!d)return null;const D=Am(i)+f.length;return{snapshot:new W_(f,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YA(e),Po(e),e.component??e._loadedComponent??null,e,DT(i),D,wf(e),D),consumedSegments:f,remainingSegments:_}}));return c.pipe(di(d=>{if(null===d)return ct(null);const{snapshot:f,consumedSegments:_,remainingSegments:b}=d;t=e._injector??t;const D=e._loadedInjector??t,M=function qA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:R,slicedSegments:U}=xm(i,_,b,M.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===U.length&&R.hasChildren())return this.processChildren(D,M,R).pipe((0,pt.U)(J=>null===J?null:[new eu(f,J)]));if(0===M.length&&0===U.length)return ct([new eu(f,[])]);const q=Po(e)===s;return this.processSegment(D,M,R,U,q?ln:s).pipe((0,pt.U)(J=>null===J?null:[new eu(f,J)]))}))}}function WA(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function TT(n){const t=[],e=new Set;for(const i of n){if(!WA(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=TT(i.children);t.push(new eu(i.value,r))}return t.filter(i=>!e.has(i))}function DT(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Am(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function YA(n){return n.data||{}}function wf(n){return n.resolve||{}}function Fr(n){return"string"==typeof n.title||null===n.title}function Jl(n){return di(t=>{const e=n(t);return e?(0,Mn.D)(e).pipe((0,pt.U)(()=>t)):ct(t)})}let Rm=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ln);return i}getResolvedTitleForRoute(e){return e.data[dm]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(ao)},providedIn:"root"}),n})(),ao=(()=>{class n extends Rm{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Cf{}class Tf extends class Ef{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Xl=new o.OlP("",{providedIn:"root",factory:()=>({})}),ru=new o.OlP("ROUTES");let su=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ct(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=ql(e.loadComponent()).pipe((0,$n.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),vb(()=>{this.componentLoaders.delete(e)})),r=new _b(i,()=>new Et.x).pipe(um());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,pt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let f,_,b=!1;Array.isArray(d)?_=d:(f=d.create(e).injector,_=zE(f.get(ru,[],o.XFs.Self|o.XFs.Optional)));return{routes:_.map(K_),injector:f}}),vb(()=>{this.childrenLoaders.delete(i)})),c=new _b(s,()=>new Et.x).pipe(um());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return ql(e()).pipe((0,ns.z)(i=>i instanceof o.YKP||Array.isArray(i)?ct(i):(0,Mn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3),o.LFG(o.Sil))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class If{}class ST{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function xT(n){throw n}function MT(n,t,e){return t.parse("/")}const AT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Yb(){const n=(0,o.f3M)(Xc),t=(0,o.f3M)(Ha),e=(0,o.f3M)(Ae),i=(0,o.f3M)(o.zs3),r=(0,o.f3M)(o.Sil),s=(0,o.f3M)(ru,{optional:!0})??[],c=(0,o.f3M)(Xl,{optional:!0})??{},d=(0,o.f3M)(ao),f=(0,o.f3M)(Rm,{optional:!0}),_=(0,o.f3M)(If,{optional:!0}),b=(0,o.f3M)(Cf,{optional:!0}),D=new Zi(null,n,t,e,i,r,zE(s));return _&&(D.urlHandlingStrategy=_),b&&(D.routeReuseStrategy=b),D.titleStrategy=f??d,function RT(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,D),D}let Zi=(()=>{class n{constructor(e,i,r,s,c,d,f){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Et.x,this.errorHandler=xT,this.malformedUriErrorHandler=MT,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ct(void 0),this.urlHandlingStrategy=new ST,this.routeReuseStrategy=new Tf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(su),this.configLoader.onLoadEndListener=M=>this.triggerEvent(new CA(M)),this.configLoader.onLoadStartListener=M=>this.triggerEvent(new Z2(M)),this.ngModule=c.get(o.h0i),this.console=c.get(o.c2e);const D=c.get(o.R0b);this.isNgZoneEnabled=D instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function rA(){return new Qc(new pn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=IA(this.currentUrlTree,this.rootComponentType),this.transitions=new ts({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(fi(r=>0!==r.id),(0,pt.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),di(r=>{let s=!1,c=!1;return ct(r).pipe((0,$n.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),di(d=>{const f=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return OT(d.source)&&(this.browserUrlTree=d.extractedUrl),ct(d).pipe(di(D=>{const M=this.transitions.getValue();return i.next(new vm(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),M!==this.transitions.getValue()?Va.E:Promise.resolve(D)}),function GA(n,t,e,i){return di(r=>function rB(n,t,e,i,r){return new jA(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,pt.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$n.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},r.urlAfterRedirects=D.urlAfterRedirects}),function KA(n,t,e,i,r,s){return(0,ns.z)(c=>function zA(n,t,e,i,r,s,c="emptyOnly",d="legacy"){return new Wb(n,t,e,i,r,c,d,s).recognize().pipe(di(f=>null===f?function qb(n){return new nr.y(t=>t.error(n))}(new ET):ct(f)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,pt.U)(d=>({...c,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$n.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const R=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(R,D)}this.browserUrlTree=D.urlAfterRedirects}const M=new yA(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(M)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:R,source:U,restoredState:q,extras:J}=d,we=new vm(M,this.serializeUrl(R),U,q);i.next(we);const He=IA(R,this.rootComponentType).snapshot;return ct(r={...d,targetSnapshot:He,urlAfterRedirects:R,extras:{...J,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Va.E}),(0,$n.b)(d=>{const f=new vA(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(f)}),(0,pt.U)(d=>r={...d,guards:mT(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function LA(n,t){return(0,ns.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?ct({...e,guardsResult:!0}):function BA(n,t,e,i){return(0,Mn.D)(n).pipe((0,ns.z)(r=>function J_(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(d=>{const f=gf(t)??r,_=yf(d,f);return ql(function ja(n){return n&&Im(n.canDeactivate)}(_)?_.canDeactivate(n,t,e,i):f.runInContext(()=>_(n,t,e,i))).pipe(zl())})).pipe(bf()):ct(!0)}(r.component,r.route,e,t,i)),zl(r=>!0!==r,!0))}(c,i,r,n).pipe((0,ns.z)(d=>d&&function PA(n){return"boolean"==typeof n}(d)?function jb(n,t,e,i){return(0,Mn.D)(t).pipe(oo(r=>V_(function UA(n,t){return null!==n&&t&&t(new Y2(n)),ct(!0)}(r.route.parent,i),function VA(n,t){return null!==n&&t&&t(new rT(n)),ct(!0)}(r.route,i),function Gb(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function RA(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>rf(()=>ct(c.guards.map(f=>{const _=gf(c.node)??e,b=yf(f,_);return ql(function NA(n){return n&&Im(n.canActivateChild)}(b)?b.canActivateChild(i,n):_.runInContext(()=>b(i,n))).pipe(zl())})).pipe(bf())));return ct(s).pipe(bf())}(n,r.path,e),function Q_(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ct(!0);const r=i.map(s=>rf(()=>{const c=gf(t)??e,d=yf(s,c);return ql(function yT(n){return n&&Im(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(zl())}));return ct(r).pipe(bf())}(n,r.route,e))),zl(r=>!0!==r,!0))}(i,s,n,t):ct(d)),(0,pt.U)(d=>({...e,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,$n.b)(d=>{if(r.guardsResult=d.guardsResult,Dd(d.guardsResult))throw aT(0,d.guardsResult);const f=new bA(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(f)}),fi(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),Jl(d=>{if(d.guards.canActivateChecks.length)return ct(d).pipe((0,$n.b)(f=>{const _=new wA(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),di(f=>{let _=!1;return ct(f).pipe(function QA(n,t){return(0,ns.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ct(e);let s=0;return(0,Mn.D)(r).pipe(oo(c=>function Zb(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Fr(r)&&(s[dm]=r.title),function JA(n,t,e,i){const r=function Ga(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ct({});const s={};return(0,Mn.D)(r).pipe((0,ns.z)(c=>function km(n,t,e,i){const r=gf(t)??i,s=yf(n,r);return ql(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(zl(),(0,$n.b)(d=>{s[c]=d}))),HE(1),function jE(n){return(0,pt.U)(()=>n)}(s),$l(c=>vT(c)?Va.E:sf(c)))}(s,n,t,i).pipe((0,pt.U)(c=>(n._resolvedData=c,n.data=Yl(n,e).resolve,r&&Fr(r)&&(n.data[dm]=r.title),null)))}(c.route,i,n,t)),(0,$n.b)(()=>s++),HE(1),(0,ns.z)(c=>s===r.length?ct(e):Va.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$n.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,$n.b)(f=>{const _=new nT(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}))}),Jl(d=>{const f=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,$n.b)(D=>{_.component=D}),(0,pt.U)(()=>{})));for(const D of _.children)b.push(...f(D));return b};return gb(f(d.targetSnapshot.root)).pipe(U_(),hi(1))}),Jl(()=>this.afterPreactivation()),(0,pt.U)(d=>{const f=function tu(n,t,e){const i=ff(n,t._root,e?e._root:void 0);return new DA(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:f}}),(0,$n.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,pt.U)(i=>(new X2(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,$n.b)({next(){s=!0},complete(){s=!0}}),vb(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),$l(d=>{if(c=!0,Sd(d)){Em(d)||(this.navigated=!0,this.restoreHistory(r,!0));const f=new hf(r.id,this.serializeUrl(r.extractedUrl),d.message,d.cancellationCode);if(i.next(f),Em(d)){const _=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||OT(r.source)};this.scheduleNavigation(_,"imperative",null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const f=new _A(r.id,this.serializeUrl(r.extractedUrl),d,r.targetSnapshot??void 0);i.next(f);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return Va.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(r.state=d)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(K_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:f}=i,_=r||this.routerState.root,b=f?this.currentUrlTree.fragment:c;let D=null;switch(d){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),kb(_,this.currentUrlTree,e,D,b??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Dd(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function XA(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new o.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...AT}:!1===i?{...kT}:i,Dd(e))return Cb(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Cb(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Zl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,f,_;c?(d=c.resolve,f=c.reject,_=c.promise):_=new Promise((M,R)=>{d=M,f=R});const b=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),D=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:b,targetPageId:D,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:d,reject:f,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(M=>Promise.reject(M))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new hf(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:function(){return Yb()},providedIn:"root"}),n})();function OT(n){return"imperative"!==n}let Sf=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Et.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,o.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,o.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,o.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Zi),o.Y36(Id),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})(),Kb=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Et.x,this.subscription=e.events.subscribe(s=>{s instanceof Zl&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,o.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,o.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,o.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,c){return!!(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Zi),o.Y36(Id),o.Y36(Ee))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&o.uIk("target",i.target)("href",i.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})(),Qb=(()=>{class n{constructor(e,i,r,s,c,d){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=c,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new o.vpe,this.routerEventsSubscription=e.events.subscribe(f=>{f instanceof Zl&&this.update()})}ngAfterContentInit(){ct(this.links.changes,this.linksWithHrefs.changes,ct(null)).pipe((0,Ba.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,Mn.D)(e).pipe((0,Ba.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function Jb(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Zi),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(Sf,8),o.Y36(Kb,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,Sf,5),o.Suo(r,Kb,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.links=s),o.iGM(s=o.CRH())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[o.TTD]}),n})();class ay{}let ly=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(fi(e=>e instanceof Zl),oo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,o.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,Mn.D)(r).pipe((0,Ba.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ct(null);const s=r.pipe((0,ns.z)(c=>null===c?ct(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,Mn.D)([s,c]).pipe((0,Ba.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Zi),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(ay),o.LFG(su))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pm=new o.OlP("");let PT=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof vm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Zl&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof q_&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new q_(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Ad(n,t){return{\u0275kind:n,\u0275providers:t}}function Nm(n){return[{provide:ru,multi:!0,useValue:n}]}function t0(){const n=(0,o.f3M)(o.zs3);return t=>{const e=n.get(o.z2F);if(t!==e.components[0])return;const i=n.get(Zi),r=n.get(uy);1===n.get(Fm)&&i.initialNavigation(),n.get(n0,null,o.XFs.Optional)?.setUpPreloading(),n.get(Pm,null,o.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const uy=new o.OlP("",{factory:()=>new Et.x}),Fm=new o.OlP("",{providedIn:"root",factory:()=>1});const n0=new o.OlP("");function LT(n){return Ad(0,[{provide:n0,useExisting:ly},{provide:ay,useExisting:n}])}const r0=new o.OlP("ROUTER_FORROOT_GUARD"),s0=[Ae,{provide:Xc,useClass:Db},{provide:Zi,useFactory:Yb},Ha,{provide:Id,useFactory:function cy(n){return n.routerState.root},deps:[Zi]},su];function BT(){return new o.PXZ("Router",Zi)}let dy=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[s0,[],Nm(e),{provide:r0,useFactory:jT,deps:[[Zi,new o.FiY,new o.tp0]]},{provide:Xl,useValue:i||{}},i?.useHash?{provide:Ee,useClass:yt}:{provide:Ee,useClass:wt},{provide:Pm,useFactory:()=>{const n=(0,o.f3M)(Zi),t=(0,o.f3M)(wa),e=(0,o.f3M)(Xl);return e.scrollOffset&&t.setOffset(e.scrollOffset),new PT(n,t,e)}},i?.preloadingStrategy?LT(i.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:BT},i?.initialNavigation?GT(i):[],[{provide:o0,useFactory:t0},{provide:o.tb,multi:!0,useExisting:o0}]]}}static forChild(e){return{ngModule:n,providers:[Nm(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(r0,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Tm]}),n})();function jT(n){return"guarded"}function GT(n){return["disabled"===n.initialNavigation?Ad(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const t=(0,o.f3M)(Zi);return()=>{t.setUpLocationChangeListener()}}},{provide:Fm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ad(2,[{provide:Fm,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:t=>{const e=t.get(Y,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const c=t.get(Zi),d=t.get(uy);(function r(s){t.get(Zi).events.pipe(fi(d=>d instanceof Zl||d instanceof hf||d instanceof _A),(0,pt.U)(d=>d instanceof Zl||d instanceof hf&&(0===d.code||1===d.code)&&null),fi(d=>null!==d),hi(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),c.afterPreactivation=()=>(s(!0),i||d.closed?ct(void 0):d),c.initialNavigation()}))}}]).\u0275providers:[]]}const o0=new o.OlP("");var le=H(5861),hy=H(1389),V=H(2090),wn=H(6881),No=H(1877),aa=H(4859);let fy,la=(()=>{class n{constructor(){this.groups=[]}setAuthUser(e){this.authUser=e}getAuthUser(){return this.authUser}setUser(e){this.user=e}getUser(){return this.user}setGroups(e){this.groups=e}getGroups(){return this.groups}addLocalGroup(e){this.groups.push(e)}deleteLocalGroup(e){const i=this.groups.findIndex(r=>r.name===e);-1!==i?(this.groups.splice(i,1),console.log(`Group ${e} deleted locally.`)):console.log(`Group ${e} not found in the local groups.`)}getWishlists(){return this.user.wishlists}getUserWishlists(){return JSON.parse(JSON.stringify(this.user.wishlists))}getUserWishlistTemplates(){return JSON.parse(JSON.stringify(this.user.wishlistTemplates))}deleteWishlistFromUser(e){if(!this.user||!this.user.wishlists||0===this.user.wishlists.length)return;const i=this.user.wishlists.filter(s=>s.name!==e),r={...this.user,wishlists:i};this.user=r}addWishlistToUser(e){const i=this.user.wishlists.findIndex(r=>r.name===e.name);-1!==i?this.user.wishlists[i]=e:this.user.wishlists.push(e)}addUserWishlistTemplate(e){if(null==e.name||""===e.name)return;const i=this.user.wishlistTemplates.findIndex(r=>r.name===e.name);-1!==i?this.user.wishlistTemplates[i]=e:this.user.wishlistTemplates.push(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{fy=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fy=!1}let kd,Lr=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Pp(n){return n===yc}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fy)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.Lbi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rd=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function zT(){if(kd)return kd;if("object"!=typeof document||!document)return kd=new Set(Rd),kd;let n=document.createElement("input");return kd=new Set(Rd.filter(t=>(n.setAttribute("type",t),n.type===t))),kd}let Bm,Mf,Fo;function xf(n){return function $T(){if(null==Bm&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Bm=!0}))}finally{Bm=Bm||!1}return Bm}()?n:!!n.capture}function a0(){if(null==Mf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Mf=!1,Mf;if("scrollBehavior"in document.documentElement.style)Mf=!0;else{const n=Element.prototype.scrollTo;Mf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Mf}function Lo(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Br(n){return n.composedPath?n.composedPath()[0]:n.target}function lo(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Bo(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var zm=H(4986);function vy(n,t=zm.z){return(0,Hi.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function f(){const _=c+n,b=t.now();if(b<_)return r=this.schedule(void 0,_-b),void i.add(r);d()}e.subscribe((0,bi.x)(i,_=>{s=_,c=t.now(),r||(r=t.schedule(f,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function _0(n){return fi((t,e)=>n<=e)}function $m(n,t=nf.y){return n=n??Gk,(0,Hi.e)((e,i)=>{let r,s=!0;e.subscribe((0,bi.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function Gk(n,t){return n===t}var Pf=H(5032);function qn(n){return(0,Hi.e)((t,e)=>{(0,Ed.Xf)(n).subscribe((0,bi.x)(e,()=>e.complete(),Pf.Z)),!e.closed&&t.subscribe(e)})}function Gt(n){return null!=n&&"false"!=`${n}`}function y0(n,t=0){return function nD(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function by(n){return Array.isArray(n)?n:[n]}function Ki(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ec(n){return n instanceof o.SBq?n.nativeElement:n}let rD=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sD=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=ec(e);return new nr.y(r=>{const c=this._observeElement(i).subscribe(r);return()=>{c.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Et.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(rD))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wy=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new o.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Gt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=y0(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(vy(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(sD),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),qm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[rD]}),n})();const oD=new Set;let ou,zk=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):$k}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function aD(n){if(!oD.has(n))try{ou||(ou=document.createElement("style"),ou.setAttribute("type","text/css"),document.head.appendChild(ou)),ou.sheet&&(ou.sheet.insertRule(`@media ${n} {body{ }}`,0),oD.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $k(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let v0=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Et.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return lD(by(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=gb(lD(by(e)).map(c=>this._registerQuery(c).observable));return s=V_(s.pipe(hi(1)),s.pipe(_0(1),vy(0))),s.pipe((0,pt.U)(c=>{const d={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:_})=>{d.matches=d.matches||f,d.breakpoints[_]=f}),d}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new nr.y(c=>{const d=f=>this._zone.run(()=>c.next(f));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(Pr(i),(0,pt.U)(({matches:c})=>({query:e,matches:c})),qn(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zk),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lD(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class hD{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Et.x,this._typeaheadSubscription=Us.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Et.x,this.change=new Et.x,t instanceof o.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,$n.b)(e=>this._pressedLetters.push(e)),vy(t),fi(()=>this._pressedLetters.length>0),(0,pt.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,c=i[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Bo(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t);this._activeItem=e[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof o.n_E?this._items.toArray():this._items}}class b0 extends hD{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class Wm extends hD{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let Nf=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Jk(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function Qk(n){try{return n.frameElement}catch{return null}}(function tR(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===eR(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=eR(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function gD(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function C0(n){return!function Xk(n){return function Ff(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function w0(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function fD(n){return function pD(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||mD(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mD(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function eR(n){if(!mD(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class E0{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(hi(1)).subscribe(t)}}let T0=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new E0(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nf),o.LFG(o.R0b),o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yD(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function vD(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const aR=new o.OlP("cdk-input-modality-detector-options"),lR={ignoreKeys:[18,17,224,91,16]},Zm=xf({passive:!0,capture:!0});let bD=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new ts(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(d=>d===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Br(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(yD(c)?"keyboard":"mouse"),this._mostRecentTarget=Br(c))},this._onTouchstart=c=>{vD(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Br(c))},this._options={...lR,...s},this.modalityDetected=this._modality.pipe(_0(1)),this.modalityChanged=this.modalityDetected.pipe($m()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Zm),r.addEventListener("mousedown",this._onMousedown,Zm),r.addEventListener("touchstart",this._onTouchstart,Zm)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Zm),document.removeEventListener("mousedown",this._onMousedown,Zm),document.removeEventListener("touchstart",this._onTouchstart,Zm))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lr),o.LFG(o.R0b),o.LFG(se),o.LFG(aR,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cR=new o.OlP("liveAnnouncerElement",{providedIn:"root",factory:function uR(){return null}}),tV=new o.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let wD=(()=>{class n{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,c;return 1===i.length&&"number"==typeof i[0]?c=i[0]:[s,c]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==c&&r&&(c=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(cR,8),o.LFG(o.R0b),o.LFG(se),o.LFG(tV,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dR=new o.OlP("cdk-focus-monitor-default-options"),Ym=xf({passive:!0,capture:!0});let tc=(()=>{class n{constructor(e,i,r,s,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Et.x,this._rootNodeFocusAndBlurListener=d=>{for(let _=Br(d);_;_=_.parentElement)"focus"===d.type?this._onFocus(d,_):this._onBlur(d,_)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(e,i=!1){const r=ec(e);if(!this._platform.isBrowser||1!==r.nodeType)return ct(null);const s=function sk(n){if(function rk(){if(null==Fo){const n=typeof document<"u"?document.head:null;Fo=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Fo}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new Et.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=ec(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=ec(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,f])=>this._originChanged(d,i,f)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Br(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ym),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ym)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(qn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ym),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ym),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(i))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(Lr),o.LFG(bD),o.LFG(se,8),o.LFG(dR,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CD="cdk-high-contrast-black-on-white",ED="cdk-high-contrast-white-on-black",I0="cdk-high-contrast-active";let TD=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,o.f3M)(v0).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(I0,CD,ED),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(I0,CD):2===i&&e.add(I0,ED)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lr),o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cy=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(TD))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[qm]}),n})();var fR=H(1144);const pR=["addListener","removeListener"],Km=["addEventListener","removeEventListener"],DD=["on","off"];function Qm(n,t,e,i){if((0,Ro.m)(e)&&(i=e,e=void 0),i)return Qm(n,t,e).pipe(B_(i));const[r,s]=function xD(n){return(0,Ro.m)(n.addEventListener)&&(0,Ro.m)(n.removeEventListener)}(n)?Km.map(c=>d=>n[c](t,d,e)):function ID(n){return(0,Ro.m)(n.addListener)&&(0,Ro.m)(n.removeListener)}(n)?pR.map(S0(n,t)):function SD(n){return(0,Ro.m)(n.on)&&(0,Ro.m)(n.off)}(n)?DD.map(S0(n,t)):[];if(!r&&(0,fR.z)(n))return(0,ns.z)(c=>Qm(c,t,e))((0,Ed.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new nr.y(c=>{const d=(...f)=>c.next(1<f.length?f:f[0]);return r(d),()=>s(d)})}function S0(n,t){return e=>i=>n[e](t,i)}var MD=H(4408);const Ey={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Ey;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Us.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=Ey;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Ey;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var x0=H(7565);new class gR extends x0.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class mR extends MD.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Ey.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Ey.cancelAnimationFrame(e),t._scheduled=void 0)}});let M0,Jm=1;const Lf={};function ca(n){return n in Lf&&(delete Lf[n],!0)}const yR={setImmediate(n){const t=Jm++;return Lf[t]=!0,M0||(M0=Promise.resolve()),M0.then(()=>ca(t)&&n()),t},clearImmediate(n){ca(n)}},{setImmediate:Xm,clearImmediate:vR}=yR,Ty={setImmediate(...n){const{delegate:t}=Ty;return(t?.setImmediate||Xm)(...n)},clearImmediate(n){const{delegate:t}=Ty;return(t?.clearImmediate||vR)(n)},delegate:void 0};new class Dy extends x0.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class bR extends MD.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Ty.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Ty.clearImmediate(e),t._scheduled=void 0)}});var AD=H(3532);function R0(n,t=zm.z){return function wR(n){return(0,Hi.e)((t,e)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const _=r;r=null,e.next(_)}c&&e.complete()},f=()=>{s=null,c&&e.complete()};t.subscribe((0,bi.x)(e,_=>{i=!0,r=_,s||(0,Ed.Xf)(n(_)).subscribe(s=(0,bi.x)(e,d,f))},()=>{c=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>function k0(n=0,t,e=zm.P){let i=-1;return null!=t&&((0,AD.K)(t)?e=t:i=t),new nr.y(r=>{let s=function kD(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,t))}const CR=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function ER(){return(0,o.f3M)(se)}}),sV=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let za=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new o.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function O0(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?sV.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(CR,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),au=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),OD=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Et.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new nr.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(R0(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ct()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(fi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=ec(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Qm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(Lr),o.LFG(se,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eg=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new Et.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(R0(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lr),o.LFG(o.R0b),o.LFG(se,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),ND=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[au,Bf,au,Bf]}),n})();class N0{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Vf extends N0{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class ng extends N0{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class RR extends N0{constructor(t){super(),this.element=t instanceof o.SBq?t.nativeElement:t}}class xy{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Vf?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof ng?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof RR?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class BD extends xy{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,f=this._document.createComment("dom-portal");d.parentNode.insertBefore(f,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(d,f)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||o.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let ig=(()=>{class n extends xy{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new o.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o._Vd),o.Y36(o.s_b),o.Y36(se))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[o.qOj]}),n})(),lu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var hr=H(6451);const UD=a0();class HD{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ki(-this._previousScrollPosition.left),t.style.top=Ki(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),UD&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),UD&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class mV{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class GD{enable(){}disable(){}attach(){}}function zD(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function $D(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class FR{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();zD(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let LR=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new GD,this.close=c=>new mV(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new HD(this._viewportRuler,this._document),this.reposition=c=>new FR(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(OD),o.LFG(eg),o.LFG(o.R0b),o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rg{constructor(t){if(this.scrollStrategy=new GD,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class qD{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let WD=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZD=(()=>{class n extends WD{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UR=(()=>{class n extends WD{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Br(s)},this._clickListener=s=>{const c=Br(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let _=f.length-1;_>-1;_--){const b=f[_];if(b._outsidePointerEvents.observers.length<1||!b.hasAttached())continue;if(b.overlayElement.contains(c)||b.overlayElement.contains(d))break;const D=b._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se),o.LFG(Lr),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sg=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||lo()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),lo()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se),o.LFG(Lr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Uf{constructor(t,e,i,r,s,c,d,f,_,b=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=f,this._outsideClickDispatcher=_,this._animationsDisabled=b,this._backdropElement=null,this._backdropClick=new Et.x,this._attachments=new Et.x,this._detachments=new Et.x,this._locationChanges=Us.w0.EMPTY,this._backdropClickHandler=D=>this._backdropClick.next(D),this._backdropTransitionendHandler=D=>{this._disposeBackdrop(D.target)},this._keydownEvents=new Et.x,this._outsidePointerEvents=new Et.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(hi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Ki(this._config.width),t.height=Ki(this._config.height),t.minWidth=Ki(this._config.minWidth),t.minHeight=Ki(this._config.minHeight),t.maxWidth=Ki(this._config.maxWidth),t.maxHeight=Ki(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=by(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(qn((0,hr.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const L0="cdk-overlay-connected-position-bounding-box",YD=/([A-Za-z%]+)$/;class HR{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Et.x,this._resizeSubscription=Us.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(L0),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let f=this._getOriginPoint(t,r,d),_=this._getOverlayPoint(f,e,d),b=this._getOverlayFit(_,e,i,d);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,f);this._canFitWithFlexibleDimensions(b,_,i)?s.push({position:d,origin:f,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(f,d)}):(!c||c.overlayFit.visibleArea<b.visibleArea)&&(c={overlayFit:b,overlayPoint:_,originPoint:f,position:d,overlayRect:e})}if(s.length){let d=null,f=-1;for(const _ of s){const b=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);b>f&&(f=b,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Pd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(L0),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=B0(e);let{x:c,y:d}=t,f=this._getOffset(r,"x"),_=this._getOffset(r,"y");f&&(c+=f),_&&(d+=_);let M=0-d,R=d+s.height-i.height,U=this._subtractOverflows(s.width,0-c,c+s.width-i.width),q=this._subtractOverflows(s.height,M,R),J=U*q;return{visibleArea:J,isCompletelyWithinViewport:s.width*s.height===J,fitsInViewportVertically:q===s.height,fitsInViewportHorizontally:U==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,c=jR(this._overlayRef.getConfig().minHeight),d=jR(this._overlayRef.getConfig().minWidth),_=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=c&&c<=r)&&_}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=B0(e),s=this._viewportRect,c=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),f=Math.max(s.top-i.top-t.y,0),_=Math.max(s.left-i.left-t.x,0);let b=0,D=0;return b=r.width<=s.width?_||-c:t.x<this._viewportMargin?s.left-i.left-t.x:0,D=r.height<=s.height?f||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:b,y:D},{x:t.x+b,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new qD(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,c,d,b,D,M;if("top"===e.overlayY)c=t.y,s=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const R=Math.min(i.bottom-t.y+i.top,t.y),U=this._lastBoundingBoxSize.height;s=2*R,c=t.y-R,s>U&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-U/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)M=i.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)D=t.x,b=i.right-t.x;else{const R=Math.min(i.right-t.x+i.left,t.x),U=this._lastBoundingBoxSize.width;b=2*R,D=t.x-R,b>U&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-U/2)}return{top:c,left:D,bottom:d,right:M,width:b,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=Ki(i.height),r.top=Ki(i.top),r.bottom=Ki(i.bottom),r.width=Ki(i.width),r.left=Ki(i.left),r.right=Ki(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Ki(s)),c&&(r.maxWidth=Ki(c))}this._lastBoundingBoxSize=i,Pd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Pd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Pd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();Pd(i,this._getExactOverlayY(e,t,b)),Pd(i,this._getExactOverlayX(e,t,b))}else i.position="static";let d="",f=this._getOffset(e,"x"),_=this._getOffset(e,"y");f&&(d+=`translateX(${f}px) `),_&&(d+=`translateY(${_}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=Ki(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=Ki(c.maxWidth):s&&(i.maxWidth="")),Pd(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Ki(s.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Ki(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$D(t,i),isOriginOutsideView:zD(t,i),isOverlayClipped:$D(e,i),isOverlayOutsideView:zD(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&by(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof o.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Pd(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function jR(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(YD);return e&&"px"!==e?null:parseFloat(t)}return n||null}function B0(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const GR="cdk-global-overlay-wrapper";class yV{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(GR),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,f=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),_=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),b=this._xPosition,D=this._xOffset,M="rtl"===this._overlayRef.getConfig().direction;let R="",U="",q="";f?q="flex-start":"center"===b?(q="center",M?U=D:R=D):M?"left"===b||"end"===b?(q="flex-end",R=D):("right"===b||"start"===b)&&(q="flex-start",U=D):"left"===b||"start"===b?(q="flex-start",R=D):("right"===b||"end"===b)&&(q="flex-end",U=D),t.position=this._cssPosition,t.marginLeft=f?"0":R,t.marginTop=_?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=f?"0":U,e.justifyContent=q,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(GR),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let vV=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new yV}flexibleConnectedTo(e){return new HR(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(eg),o.LFG(se),o.LFG(Lr),o.LFG(sg))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bV=0,$a=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,D,M,R){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=f,this._document=_,this._directionality=b,this._location=D,this._outsideClickDispatcher=M,this._animationsModuleType=R}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new rg(e);return c.direction=c.direction||this._directionality.value,new Uf(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+bV++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(o.z2F)),new BD(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(LR),o.LFG(sg),o.LFG(o._Vd),o.LFG(vV),o.LFG(ZD),o.LFG(o.zs3),o.LFG(o.R0b),o.LFG(se),o.LFG(za),o.LFG(Ae),o.LFG(UR),o.LFG(o.QbO,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const wV=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],og=new o.OlP("cdk-connected-overlay-scroll-strategy");let zR=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),V0=(()=>{class n{constructor(e,i,r,s,c){this._overlay=e,this._dir=c,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Us.w0.EMPTY,this._attachSubscription=Us.w0.EMPTY,this._detachSubscription=Us.w0.EMPTY,this._positionSubscription=Us.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new o.vpe,this.positionChange=new o.vpe,this.attach=new o.vpe,this.detach=new o.vpe,this.overlayKeydown=new o.vpe,this.overlayOutsideClick=new o.vpe,this._templatePortal=new ng(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Gt(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Gt(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Gt(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Gt(e)}get push(){return this._push}set push(e){this._push=Gt(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=wV);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Bo(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new rg({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof zR?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(nA(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36($a),o.Y36(o.Rgc),o.Y36(o.s_b),o.Y36(og),o.Y36(za,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[o.TTD]}),n})();const KD={provide:og,deps:[$a],useFactory:function My(n){return()=>n.scrollStrategies.reposition()}};let Hf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[$a,KD],imports:[au,lu,ND,ND]}),n})();function U0(n,t){}class ag{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let H0=(()=>{class n extends xy{constructor(e,i,r,s,c,d,f,_){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=c,this._ngZone=d,this._overlayRef=f,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=b=>{this._portalOutlet.hasAttached();const D=this._portalOutlet.attachDomPortal(b);return this._contentAttached(),D},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=Lo(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=Lo();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Lo())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(T0),o.Y36(se,8),o.Y36(ag),o.Y36(Nf),o.Y36(o.R0b),o.Y36(Uf),o.Y36(tc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,i){if(1&e&&o.Gf(ig,7),2&e){let r;o.iGM(r=o.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,i){2&e&&o.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[o.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&o.YNc(0,U0,0,0,"ng-template",0)},dependencies:[ig],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class QD{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Et.x,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Bo(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const JD=new o.OlP("DialogScrollStrategy"),$R=new o.OlP("DialogData"),qR=new o.OlP("DefaultDialogConfig"),WR={provide:JD,deps:[$a],useFactory:function Ay(n){return()=>n.scrollStrategies.block()}};let EV=0,ZR=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Et.x,this._afterOpenedAtThisLevel=new Et.x,this._ariaHiddenElements=new Map,this.afterAllClosed=rf(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pr(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(e,i){(i={...this._defaultOptions||new ag,...i}).id=i.id||"cdk-dialog-"+EV++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),c=this._overlay.create(s),d=new QD(c,i),f=this._attachContainer(c,d,i);return d.containerInstance=f,this._attachDialogContent(e,d,f,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){XD(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){XD(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),XD(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new rg({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const s=r.injector||r.viewContainerRef?.injector,c=[{provide:ag,useValue:r},{provide:QD,useValue:i},{provide:Uf,useValue:e}];let d;r.container?"function"==typeof r.container?d=r.container:(d=r.container.type,c.push(...r.container.providers(r))):d=H0;const f=new Vf(d,r.viewContainerRef,o.zs3.create({parent:s||this._injector,providers:c}),r.componentFactoryResolver);return e.attach(f).instance}_attachDialogContent(e,i,r,s){if(e instanceof o.Rgc){const c=this._createInjector(s,i,r,void 0);let d={$implicit:s.data,dialogRef:i};s.templateContext&&(d={...d,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new ng(e,null,d,c))}else{const c=this._createInjector(s,i,r,this._injector),d=r.attachComponentPortal(new Vf(e,s.viewContainerRef,c,s.componentFactoryResolver));i.componentInstance=d.instance}}_createInjector(e,i,r,s){const c=e.injector||e.viewContainerRef?.injector,d=[{provide:$R,useValue:e.data},{provide:QD,useValue:i}];return e.providers&&("function"==typeof e.providers?d.push(...e.providers(i,e,r)):d.push(...e.providers)),e.direction&&(!c||!c.get(za,null,o.XFs.Optional))&&d.push({provide:za,useValue:{value:e.direction,change:ct()}}),o.zs3.create({parent:c||s,providers:d})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,c)=>{s?c.setAttribute("aria-hidden",s):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($a),o.LFG(o.zs3),o.LFG(qR,8),o.LFG(n,12),o.LFG(sg),o.LFG(JD))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function XD(n,t){let e=n.length;for(;e--;)t(n[e])}let YR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[ZR,WR],imports:[Hf,lu,Cy,lu]}),n})();function KR(n,t){if(1&n&&o._UZ(0,"mat-pseudo-checkbox",4),2&n){const e=o.oxw();o.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function tI(n,t){if(1&n&&(o.TgZ(0,"span",5),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij("(",e.group.label,")")}}const nI=["*"],JR=new o.OlP("mat-sanity-checks",{providedIn:"root",factory:function j0(){return!0}});let St=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!lo()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(TD),o.LFG(JR,8),o.LFG(se))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[au,au]}),n})();function lg(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Gt(t)}}}function cu(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Wa(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Gt(t)}}}function jf(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?y0(e):this.defaultTabIndex}}}function G0(n){return class extends n{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}let Gf=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function cg(n,t,e){n.nativeElement.classList.toggle(t,e)}let ug=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[St,St]}),n})();class AV{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const z0={enterDuration:225,exitDuration:150},ky=xf({passive:!0}),o1=["mousedown","touchstart"],Ry=["mouseup","mouseleave","touchend","touchcancel"];class $0{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ec(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...z0,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function lI(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,f=e-r.top,_=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=d-c+"px",b.style.top=f-c+"px",b.style.height=2*c+"px",b.style.width=2*c+"px",null!=i.color&&(b.style.backgroundColor=i.color),b.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(b);const D=window.getComputedStyle(b),R=D.transitionDuration,U="none"===D.transitionProperty||"0s"===R||"0s, 0s"===R,q=new AV(this,b,i,U);b.style.transform="scale3d(1, 1, 1)",q.state=0,i.persistent||(this._mostRecentTransientRipple=q);let J=null;return!U&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const we=()=>this._finishRippleTransition(q),He=()=>this._destroyRipple(q);b.addEventListener("transitionend",we),b.addEventListener("transitioncancel",He),J={onTransitionEnd:we,onTransitionCancel:He}}),this._activeRipples.set(q,J),(U||!_)&&this._finishRippleTransition(q),q}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...z0,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=ec(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(o1))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ry),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=yD(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!vD(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,ky)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(o1.forEach(t=>{this._triggerElement.removeEventListener(t,this,ky)}),this._pointerUpEventsRegistered&&Ry.forEach(t=>{this._triggerElement.removeEventListener(t,this,ky)}))}}const q0=new o.OlP("mat-ripple-global-options");let nc=(()=>{class n{constructor(e,i,r,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new $0(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Lr),o.Y36(q0,8),o.Y36(o.QbO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),du=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[St,St]}),n})(),dg=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,i){2&e&&o.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),n})(),zf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[St]}),n})();const W0=new o.OlP("MAT_OPTION_PARENT_COMPONENT"),cI=new o.OlP("MatOptgroup");let OV=0;class PV{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let uI=(()=>{class n{constructor(e,i,r,s){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+OV++,this.onSelectionChange=new o.vpe,this._stateChanges=new Et.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Gt(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Bo(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new PV(this,e))}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),hg=(()=>{class n extends uI{constructor(e,i,r,s){super(e,i,r,s)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(W0,8),o.Y36(cI,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&e&&(o.Ikx("id",i.id),o.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),o.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[o.qOj],ngContentSelectors:nI,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(o.F$t(),o.YNc(0,KR,1,2,"mat-pseudo-checkbox",0),o.TgZ(1,"span",1),o.Hsn(2),o.qZA(),o.YNc(3,tI,2,1,"span",2),o._UZ(4,"div",3)),2&e&&(o.Q6J("ngIf",i.multiple),o.xp6(3),o.Q6J("ngIf",i.group&&i.group._inert),o.xp6(1),o.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[nc,Cn,dg],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),n})();function dI(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),s=0;for(let c=0;c<n+1;c++)i[c].group&&i[c].group===r[s]&&s++;return s}return 0}let u1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[du,Wr,St,zf]}),n})();function NV(n,t){}const fg={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},FV={dialogContainer:Gn("dialogContainer",[Tn("void, exit",Jt({opacity:0,transform:"scale(0.7)"})),Tn("enter",Jt({transform:"none"})),zn("* => enter",wr([ri("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Jt({transform:"none",opacity:1})),Oa("@*",na(),{optional:!0})]),fg),zn("* => void, * => exit",wr([ri("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Jt({opacity:0})),Oa("@*",na(),{optional:!0})]),fg)])};class Z0{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=fg.params.enterAnimationDuration,this.exitAnimationDuration=fg.params.exitAnimationDuration}}let d1=(()=>{class n extends H0{constructor(e,i,r,s,c,d,f,_){super(e,i,r,s,c,d,f,_),this._animationStateChanged=new o.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(T0),o.Y36(se,8),o.Y36(Z0),o.Y36(Nf),o.Y36(o.R0b),o.Y36(Uf),o.Y36(tc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],features:[o.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),Oy=(()=>{class n extends d1{constructor(e,i,r,s,c,d,f,_,b){super(e,i,r,s,c,d,f,b),this._changeDetectorRef=_,this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?this._openAnimationDone(i):"exit"===e&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||fg.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||fg.params.exitAnimationDuration}}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(T0),o.Y36(se,8),o.Y36(Z0),o.Y36(Nf),o.Y36(o.R0b),o.Y36(Uf),o.Y36(o.sBO),o.Y36(tc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(e,i){1&e&&o.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(o.Ikx("id",i._config.id),o.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),o.d8E("@dialogContainer",i._getAnimationState()))},features:[o.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&o.YNc(0,NV,0,0,"ng-template",0)},dependencies:[ig],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[FV.dialogContainer]}}),n})();class Fd{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new Et.x,this._beforeClosed=new Et.x,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe(fi(r=>"opened"===r.state),hi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(fi(r=>"closed"===r.state),hi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,hr.T)(this.backdropClick(),this.keydownEvents().pipe(fi(r=>27===r.keyCode&&!this.disableClose&&!Bo(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function h1(n,t,e){n._closeInteractionType=t,n.close(e)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(fi(e=>"closing"===e.state),hi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const pg=new o.OlP("MatDialogData"),Ld=new o.OlP("mat-dialog-default-options"),Y0=new o.OlP("mat-dialog-scroll-strategy"),f1={provide:Y0,deps:[$a],useFactory:function K0(n){return()=>n.scrollStrategies.block()}};let Q0=0,J0=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,D){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=f,this._dialogContainerType=_,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Et.x,this._afterOpenedAtThisLevel=new Et.x,this._idPrefix="mat-dialog-",this.afterAllClosed=rf(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pr(void 0))),this._scrollStrategy=d,this._dialog=i.get(ZR)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){let r;(i={...this._defaultOptions||new Z0,...i}).id=i.id||`${this._idPrefix}${Q0++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Z0,useValue:i},{provide:ag,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(c,d,f)=>(r=new this._dialogRefConstructor(c,i,f),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:f},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const c=this.openDialogs.indexOf(r);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),hu=(()=>{class n extends J0{constructor(e,i,r,s,c,d,f,_){super(e,i,s,d,f,c,Fd,Oy,pg,_)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($a),o.LFG(o.zs3),o.LFG(Ae,8),o.LFG(Ld,8),o.LFG(Y0),o.LFG(n,12),o.LFG(sg),o.LFG(o.QbO,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),fI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[hu,f1],imports:[YR,Hf,lu,St,St]}),n})();const m1=["mat-button",""],g1=["*"],mI=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],y1=cu(lg(Wa(class{constructor(n){this._elementRef=n}})));let co=(()=>{class n extends y1{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of mI)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(tc),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&o.Gf(nc,5),2&e){let r;o.iGM(r=o.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(o.uIk("disabled",i.disabled||null),o.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[o.qOj],attrs:m1,ngContentSelectors:g1,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"span",0),o.Hsn(1),o.qZA(),o._UZ(2,"span",1)(3,"span",2)),2&e&&(o.xp6(2),o.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),o.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[nc],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),$f=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[du,St,St]}),n})();const BV=["connectionContainer"],gI=["inputContainer"],X0=["label"];function b1(n,t){1&n&&(o.ynx(0),o.TgZ(1,"div",14),o._UZ(2,"div",15)(3,"div",16)(4,"div",17),o.qZA(),o.TgZ(5,"div",18),o._UZ(6,"div",15)(7,"div",16)(8,"div",17),o.qZA(),o.BQk())}function w1(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",19),o.NdJ("cdkObserveContent",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.updateOutlineGap())}),o.Hsn(1,1),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function VV(n,t){if(1&n&&(o.ynx(0),o.Hsn(1,2),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.BQk()),2&n){const e=o.oxw(2);o.xp6(3),o.Oqu(e._control.placeholder)}}function UV(n,t){1&n&&o.Hsn(0,3,["*ngSwitchCase","true"])}function C1(n,t){1&n&&(o.TgZ(0,"span",23),o._uU(1," *"),o.qZA())}function E1(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"label",20,21),o.NdJ("cdkObserveContent",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.updateOutlineGap())}),o.YNc(2,VV,4,1,"ng-container",12),o.YNc(3,UV,1,0,"ng-content",12),o.YNc(4,C1,2,0,"span",22),o.qZA()}if(2&n){const e=o.oxw();o.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),o.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),o.uIk("for",e._control.id)("aria-owns",e._control.id),o.xp6(2),o.Q6J("ngSwitchCase",!1),o.xp6(1),o.Q6J("ngSwitchCase",!0),o.xp6(1),o.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function T1(n,t){1&n&&(o.TgZ(0,"div",24),o.Hsn(1,4),o.qZA())}function HV(n,t){if(1&n&&(o.TgZ(0,"div",25),o._UZ(1,"span",26),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function jV(n,t){if(1&n&&(o.TgZ(0,"div"),o.Hsn(1,5),o.qZA()),2&n){const e=o.oxw();o.Q6J("@transitionMessages",e._subscriptAnimationState)}}function GV(n,t){if(1&n&&(o.TgZ(0,"div",30),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.Q6J("id",e._hintLabelId),o.xp6(1),o.Oqu(e.hintLabel)}}function zV(n,t){if(1&n&&(o.TgZ(0,"div",27),o.YNc(1,GV,2,2,"div",28),o.Hsn(2,6),o._UZ(3,"div",29),o.Hsn(4,7),o.qZA()),2&n){const e=o.oxw();o.Q6J("@transitionMessages",e._subscriptAnimationState),o.xp6(1),o.Q6J("ngIf",e.hintLabel)}}const $V=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],D1=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],qV=new o.OlP("MatError"),WV={transitionMessages:Gn("transitionMessages",[Tn("enter",Jt({opacity:1,transform:"translateY(0%)"})),zn("void => enter",[Jt({opacity:0,transform:"translateY(-5px)"}),ri("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Py=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n}),n})(),u=0;const h=new o.OlP("MatHint");let p=(()=>{class n{constructor(){this.align="start",this.id="mat-hint-"+u++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,i){2&e&&(o.uIk("id",i.id)("align",null),o.ekj("mat-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"},features:[o._Bn([{provide:h,useExisting:n}])]}),n})(),g=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-label"]]}),n})(),v=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const T=new o.OlP("MatPrefix");let I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","matPrefix",""]],features:[o._Bn([{provide:T,useExisting:n}])]}),n})();const x=new o.OlP("MatSuffix");let G=0;const Se=cu(class{constructor(n){this._elementRef=n}},"primary"),ze=new o.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),et=new o.OlP("MatFormField");let dt=(()=>{class n extends Se{constructor(e,i,r,s,c,d,f){super(e),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Et.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+G++,this._labelId="mat-form-field-label-"+G++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==f,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Gt(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Pr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(qn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(qn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,hr.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Pr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Pr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(qn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Qm(this._label.nativeElement,"transitionend").pipe(hi(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const b=i.querySelectorAll(`${r}, ${s}`);for(let D=0;D<b.length;D++)b[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,d=0;const f=i.querySelectorAll(r),_=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const b=i.getBoundingClientRect();if(0===b.width&&0===b.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(b),M=e.children,R=this._getStartEnd(M[0].getBoundingClientRect());let U=0;for(let q=0;q<M.length;q++)U+=M[q].offsetWidth;c=Math.abs(R-D)-5,d=U>0?.75*U+10:0}for(let b=0;b<f.length;b++)f[b].style.width=`${c}px`;for(let b=0;b<_.length;b++)_[b].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(za,8),o.Y36(ze,8),o.Y36(Lr),o.Y36(o.R0b),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,Py,5),o.Suo(r,Py,7),o.Suo(r,g,5),o.Suo(r,g,7),o.Suo(r,v,5),o.Suo(r,qV,5),o.Suo(r,h,5),o.Suo(r,T,5),o.Suo(r,x,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._controlNonStatic=s.first),o.iGM(s=o.CRH())&&(i._controlStatic=s.first),o.iGM(s=o.CRH())&&(i._labelChildNonStatic=s.first),o.iGM(s=o.CRH())&&(i._labelChildStatic=s.first),o.iGM(s=o.CRH())&&(i._placeholderChild=s.first),o.iGM(s=o.CRH())&&(i._errorChildren=s),o.iGM(s=o.CRH())&&(i._hintChildren=s),o.iGM(s=o.CRH())&&(i._prefixChildren=s),o.iGM(s=o.CRH())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(BV,7),o.Gf(gI,5),o.Gf(X0,5)),2&e){let r;o.iGM(r=o.CRH())&&(i._connectionContainerRef=r.first),o.iGM(r=o.CRH())&&(i._inputContainerRef=r.first),o.iGM(r=o.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&o.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[o._Bn([{provide:et,useExisting:n}]),o.qOj],ngContentSelectors:D1,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(o.F$t($V),o.TgZ(0,"div",0)(1,"div",1,2),o.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),o.YNc(3,b1,9,0,"ng-container",3),o.YNc(4,w1,2,1,"div",4),o.TgZ(5,"div",5,6),o.Hsn(7),o.TgZ(8,"span",7),o.YNc(9,E1,5,16,"label",8),o.qZA()(),o.YNc(10,T1,2,0,"div",9),o.qZA(),o.YNc(11,HV,2,4,"div",10),o.TgZ(12,"div",11),o.YNc(13,jV,2,1,"div",12),o.YNc(14,zV,5,2,"div",13),o.qZA()()),2&e&&(o.xp6(3),o.Q6J("ngIf","outline"==i.appearance),o.xp6(1),o.Q6J("ngIf",i._prefixChildren.length),o.xp6(5),o.Q6J("ngIf",i._hasFloatingLabel()),o.xp6(1),o.Q6J("ngIf",i._suffixChildren.length),o.xp6(1),o.Q6J("ngIf","outline"!=i.appearance),o.xp6(1),o.Q6J("ngSwitch",i._getDisplayedMessages()),o.xp6(1),o.Q6J("ngSwitchCase","error"),o.xp6(1),o.Q6J("ngSwitchCase","hint"))},dependencies:[Cn,$o,gs,wy],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[WV.transitionMessages]},changeDetection:0}),n})(),Nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Wr,St,qm,St]}),n})();const Le=xf({passive:!0});let zt=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Va.E;const i=ec(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Et.x,c="cdk-text-field-autofilled",d=f=>{"cdk-text-field-autofill-start"!==f.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===f.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,Le),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,Le)}}),s}stopMonitoring(e){const i=ec(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lr),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function Ny(...n){const t=(0,La.jO)(n),{args:e,keys:i}=LE(n),r=new nr.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let f=c,_=c;for(let b=0;b<c;b++){let D=!1;(0,Ed.Xf)(e[b]).subscribe((0,bi.x)(s,M=>{D||(D=!0,_--),d[b]=M},()=>f--,void 0,()=>{(!f||!D)&&(_||s.next(i?BE(i,d):d),s.complete())}))}});return t?r.pipe(B_(t)):r}let Fy=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),ic=(()=>{class n extends Fy{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Ds=new o.OlP("NgValueAccessor"),tw={provide:Ds,useExisting:(0,o.Gpc)(()=>mg),multi:!0},iw=new o.OlP("CompositionEventMode");let mg=(()=>{class n extends Fy{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nw(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(iw,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([tw]),o.qOj]}),n})();function qf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function ZV(n){return null!=n&&"number"==typeof n.length}const rs=new o.OlP("NgValidators"),Wf=new o.OlP("NgAsyncValidators"),_W=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class I1{static min(t){return function YV(n){return t=>{if(qf(t.value)||qf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function KV(n){return t=>{if(qf(t.value)||qf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return QV(t)}static requiredTrue(t){return function JV(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function XV(n){return qf(n.value)||_W.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function eU(n){return t=>qf(t.value)||!ZV(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return tU(t)}static pattern(t){return function nU(n){if(!n)return _I;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(qf(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return lU(t)}static composeAsync(t){return cU(t)}}function QV(n){return qf(n.value)?{required:!0}:null}function tU(n){return t=>ZV(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function _I(n){return null}function iU(n){return null!=n}function rU(n){return(0,o.QGY)(n)?(0,Mn.D)(n):n}function sU(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function oU(n,t){return t.map(e=>e(n))}function aU(n){return n.map(t=>function yW(n){return!n.validate}(t)?t:e=>t.validate(e))}function lU(n){if(!n)return null;const t=n.filter(iU);return 0==t.length?null:function(e){return sU(oU(e,t))}}function S1(n){return null!=n?lU(aU(n)):null}function cU(n){if(!n)return null;const t=n.filter(iU);return 0==t.length?null:function(e){return Ny(oU(e,t).map(rU)).pipe((0,pt.U)(sU))}}function x1(n){return null!=n?cU(aU(n)):null}function uU(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function dU(n){return n._rawValidators}function hU(n){return n._rawAsyncValidators}function M1(n){return n?Array.isArray(n)?n:[n]:[]}function yI(n,t){return Array.isArray(n)?n.includes(t):n===t}function fU(n,t){const e=M1(t);return M1(n).forEach(r=>{yI(e,r)||e.push(r)}),e}function pU(n,t){return M1(t).filter(e=>!yI(n,e))}class mU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=S1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=x1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class uo extends mU{get formDirective(){return null}get path(){return null}}class rc extends mU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class gU{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let By=(()=>{class n extends gU{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(rc,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o.qOj]}),n})(),A1=(()=>{class n extends gU{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(uo,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[o.qOj]}),n})();const rw="VALID",bI="INVALID",Vy="PENDING",sw="DISABLED";function P1(n){return(wI(n)?n.validators:n)||null}function yU(n){return Array.isArray(n)?S1(n):n||null}function N1(n,t){return(wI(t)?t.asyncValidators:n)||null}function vU(n){return Array.isArray(n)?x1(n):n||null}function wI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class CU{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=yU(this._rawValidators),this._composedAsyncValidatorFn=vU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===rw}get invalid(){return this.status===bI}get pending(){return this.status==Vy}get disabled(){return this.status===sw}get enabled(){return this.status!==sw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=yU(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=vU(t)}addValidators(t){this.setValidators(fU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(fU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(pU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(pU(t,this._rawAsyncValidators))}hasValidator(t){return yI(this._rawValidators,t)}hasAsyncValidator(t){return yI(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Vy,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=sw,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=rw,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rw||this.status===Vy)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sw:rw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Vy,this._hasOwnPendingAsyncValidator=!0;const e=rU(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?sw:this.errors?bI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vy)?Vy:this._anyControlsHaveStatus(bI)?bI:rw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wI(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class F1 extends CU{constructor(t,e,i){super(P1(e),N1(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function wU(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new o.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function bU(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[e])throw new o.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function ow(n,t){L1(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function SW(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&EU(n,t)})}(n,t),function MW(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function xW(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&EU(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function IW(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function EI(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),DI(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function TI(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function L1(n,t){const e=dU(n);null!==t.validator?n.setValidators(uU(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=hU(n);null!==t.asyncValidator?n.setAsyncValidators(uU(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();TI(t._rawValidators,r),TI(t._rawAsyncValidators,r)}function DI(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=dU(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=hU(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return TI(t._rawValidators,i),TI(t._rawAsyncValidators,i),e}function EU(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TU(n,t){L1(n,t)}function IU(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const PW={provide:uo,useExisting:(0,o.Gpc)(()=>Zf)},aw=(()=>Promise.resolve())();let Zf=(()=>{class n extends uo{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new F1({},S1(e),x1(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){aw.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),ow(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){aw.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){aw.then(()=>{const i=this._findContainer(e.path),r=new F1({});TU(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){aw.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){aw.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,IU(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(rs,10),o.Y36(Wf,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([PW]),o.qOj]}),n})();function SU(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function xU(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const MU=class extends CU{constructor(t=null,e,i){super(P1(e),N1(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wI(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=xU(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){SU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){SU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){xU(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},LW={provide:rc,useExisting:(0,o.Gpc)(()=>gg)},RU=(()=>Promise.resolve())();let gg=(()=>{class n extends rc{constructor(e,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new MU,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function V1(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===mg?e=s:function RW(n){return Object.getPrototypeOf(n.constructor)===ic}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function B1(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ow(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){RU.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,o.D6c)(i);RU.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function CI(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(uo,9),o.Y36(rs,10),o.Y36(Wf,10),o.Y36(Ds,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([LW]),o.qOj,o.TTD]}),n})(),U1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const BW={provide:Ds,useExisting:(0,o.Gpc)(()=>H1),multi:!0};let H1=(()=>{class n extends ic{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[o._Bn([BW]),o.qOj]}),n})(),OU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const GW={provide:uo,useExisting:(0,o.Gpc)(()=>Uy)};let Uy=(()=>{class n extends uo{constructor(e,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(DI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return ow(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){EI(e.control||null,e,!1),function OW(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,IU(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(EI(i||null,e),(n=>n instanceof MU)(r)&&(ow(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);TU(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function AW(n,t){return DI(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){L1(this.form,this),this._oldForm&&DI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(rs,10),o.Y36(Wf,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([GW]),o.qOj,o.TTD]}),n})();let _g=(()=>{class n{constructor(){this._validator=_I}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):_I,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const t8={provide:rs,useExisting:(0,o.Gpc)(()=>yg),multi:!0};let yg=(()=>{class n extends _g{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=e=>QV}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([t8]),o.qOj]}),n})();const s8={provide:rs,useExisting:(0,o.Gpc)(()=>q1),multi:!0};let q1=(()=>{class n extends _g{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>function jU(n){return"number"==typeof n?n:parseInt(n,10)}(e),this.createValidator=e=>tU(e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[o._Bn([s8]),o.qOj]}),n})(),a8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[OU]}),n})(),l8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[a8]}),n})();const u8=new o.OlP("MAT_INPUT_VALUE_ACCESSOR"),d8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let h8=0;const f8=G0(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new Et.x}});let lw=(()=>{class n extends f8{constructor(e,i,r,s,c,d,f,_,b,D){super(d,s,c,r),this._elementRef=e,this._platform=i,this._autofillMonitor=_,this._formField=D,this._uid="mat-input-"+h8++,this.focused=!1,this.stateChanges=new Et.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>zT().has(U)),this._iOSKeyupListener=U=>{const q=U.target;!q.value&&0===q.selectionStart&&0===q.selectionEnd&&(q.setSelectionRange(1,1),q.setSelectionRange(0,0))};const M=this._elementRef.nativeElement,R=M.nodeName.toLowerCase();this._inputValueAccessor=f||M,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&b.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===R,this._isTextarea="textarea"===R,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=M.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Gt(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(I1.required)??!1}set required(e){this._required=Gt(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&zT().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Gt(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const e=this._formField,i=e&&"legacy"===e.appearance&&!e._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){d8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Lr),o.Y36(rc,10),o.Y36(Zf,8),o.Y36(Uy,8),o.Y36(Gf),o.Y36(u8,10),o.Y36(zt),o.Y36(o.R0b),o.Y36(et,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,i){1&e&&o.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(o.Ikx("disabled",i.disabled)("required",i.required),o.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),o.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[o._Bn([{provide:Py,useExisting:n}]),o.qOj,o.TTD]}),n})(),YU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Gf],imports:[fu,Nt,St,fu,Nt]}),n})();function p8(n,t){1&n&&(o.TgZ(0,"mat-hint",9),o._uU(1,"You must enter a name"),o.qZA())}let m8=(()=>{class n{constructor(e,i){this.session=e,this.dialogRef=i,this.userData={name:"",id:"",wishlists:[],wishlistTemplates:[],groups:[]}}ngOnInit(){this.userData.id=this.session.getAuthUser().uid}userCreated(){this.userData.name.length<1||this.dialogRef.close(this.userData)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Fd))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-create-user"]],decls:13,vars:3,consts:[[1,"new-user-container"],[1,"mat-h1"],[1,"register-form"],["registerForm","ngForm"],["appearance","outline",1,""],["matInput","","placeholder","","name","name",3,"required","ngModel","ngModelChange"],["nameInput","ngModel"],["align","end",4,"ngIf"],["mat-flat-button","","color","accent",1,"create-user-btn",3,"click"],["align","end"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2,"Create User"),o.qZA(),o.TgZ(3,"form",2,3)(5,"mat-form-field",4)(6,"mat-label"),o._uU(7,"Name"),o.qZA(),o.TgZ(8,"input",5,6),o.NdJ("ngModelChange",function(s){return i.userData.name=s}),o.qZA(),o.YNc(10,p8,2,0,"mat-hint",7),o.qZA()(),o.TgZ(11,"button",8),o.NdJ("click",function(){return i.userCreated()}),o._uU(12,"Create User"),o.qZA()()),2&e){const r=o.MAs(9);o.xp6(8),o.Q6J("required",!0)("ngModel",i.userData.name),o.xp6(2),o.Q6J("ngIf",r.dirty&&i.userData.name.length<1)}},dependencies:[Cn,co,dt,p,g,lw,U1,mg,By,A1,yg,gg,Zf],styles:[".new-user-container[_ngcontent-%COMP%]{width:100%;text-align:center;margin:2em 0}.create-user-btn[_ngcontent-%COMP%]{margin-top:2em}"]}),n})();var SI=H(5363),g8=H(6063);class _8 extends Et.x{constructor(t=1/0,e=1/0,i=g8.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let f=1;f<i.length&&i[f]<=c;f+=2)d=f;d&&i.splice(0,d+1)}}}var W1=H(3099);function KU(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,W1.B)({connector:()=>new _8(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function QU(n,t){return(0,Ro.m)(t)?di(()=>n,t):di(()=>n)}var Z1=H(9468),Bn=H(4976),Vr=H(2011);H(259);const K1=new Map,XU={activated:!1,tokenObservers:[]},C8={initialized:!1,enabled:!1};function ir(n){return K1.get(n)||Object.assign({},XU)}function MI(){return C8}class x8{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,le.Z)(function*(){e.stop();try{e.pending=new V.BH,yield function M8(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new V.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Is=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function J1(n){if(!ir(n).activated)throw Is.create("use-before-activation",{appName:n.name})}function RI(n,t){return eO.apply(this,arguments)}function eO(){return(eO=(0,le.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const D=yield r.getHeartbeatsHeader();D&&(i["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(t),headers:i};let c,d;try{c=yield fetch(n,s)}catch(D){throw Is.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==c.status)throw Is.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(D){throw Is.create("fetch-parse-error",{originalErrorMessage:D?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Is.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const _=1e3*Number(f[1]),b=Date.now();return{token:d.token,expireTimeMillis:b+_,issuedAtTimeMillis:b}})).apply(this,arguments)}function tH(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const cw="firebase-app-check-store";let OI=null;function iH(){return OI||(OI=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Is.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(cw,{keyPath:"compositeKey"})}}catch(e){t(Is.create("storage-open",{originalErrorMessage:e?.message}))}}),OI)}function tO(){return(tO=(0,le.Z)(function*(n,t){const i=(yield iH()).transaction(cw,"readwrite"),s=i.objectStore(cw).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=f=>{c()},i.onerror=f=>{var _;d(Is.create("storage-set",{originalErrorMessage:null===(_=f.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const uw=new No.Yd("@firebase/app-check");function rO(n,t){return(0,V.hl)()?function F8(n,t){return function rH(n,t){return tO.apply(this,arguments)}(function oH(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{uw.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function oO(){return MI().enabled}function aO(){return lO.apply(this,arguments)}function lO(){return(lO=(0,le.Z)(function*(){const n=MI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const j8={error:"UNKNOWN_ERROR"};function G8(n){return V.US.encodeString(JSON.stringify(n),!1)}function PI(n){return cO.apply(this,arguments)}function cO(){return(cO=(0,le.Z)(function*(n,t=!1){const e=n.app;J1(e);const i=ir(e);let s,r=i.token;if(r&&!Hy(r)&&(i.token=void 0,r=void 0),!r){const f=yield i.cachedTokenPromise;f&&(Hy(f)?r=f:yield rO(e,void 0))}if(!t&&r&&Hy(r))return{token:r.token};let d,c=!1;if(oO()){i.exchangeTokenPromise||(i.exchangeTokenPromise=RI(tH(e,yield aO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const f=yield i.exchangeTokenPromise;return yield rO(e,f),i.token=f,{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield ir(e).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?uw.warn(f.message):uw.error(f),s=f}return r?s?d=Hy(r)?{token:r.token,internalError:s}:uH(s):(d={token:r.token},i.token=r,yield rO(e,r)):d=uH(s),c&&cH(e,d),d})).apply(this,arguments)}function uO(){return(uO=(0,le.Z)(function*(n){const t=n.app;J1(t);const{provider:e}=ir(t);if(oO()){const i=yield aO(),{token:r}=yield RI(tH(t,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield e.getToken();return{token:i}}})).apply(this,arguments)}function hO(n,t){const e=ir(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function lH(n){const{app:t}=n,e=ir(t);let i=e.tokenRefresher;i||(i=function z8(n){const{app:t}=n;return new x8((0,le.Z)(function*(){let i;if(i=ir(t).token?yield PI(n,!0):yield PI(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=ir(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function cH(n,t){const e=ir(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function Hy(n){return n.expireTimeMillis-Date.now()>0}function uH(n){return{token:G8(j8),error:n}}class $8{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=ir(this.app);for(const e of t)hO(this.app,e.next);return Promise.resolve()}}const yH="app-check-internal";!function sZ(){(0,wn._registerComponent)(new aa.wA("app-check",n=>function q8(n,t){return new $8(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(yH).initialize()})),(0,wn._registerComponent)(new aa.wA(yH,n=>function W8(n){return{getToken:t=>PI(n,t),getLimitedUseToken:()=>function aH(n){return uO.apply(this,arguments)}(n),addTokenListener:t=>function dO(n,t,e,i){const{app:r}=n,s=ir(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&Hy(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),lH(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>lH(n))}(n,"INTERNAL",t),removeTokenListener:t=>hO(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wn.registerVersion)("@firebase/app-check","0.8.0")}();class dw{constructor(){return(0,Bn.vb)("app-check")}}typeof window<"u"&&window;var FI=H(9260);const _O=new o.OlP("angularfire2.auth.use-emulator"),yO=new o.OlP("angularfire2.auth.settings"),vO=new o.OlP("angularfire2.auth.tenant-id"),bO=new o.OlP("angularfire2.auth.langugage-code"),wO=new o.OlP("angularfire2.auth.use-device-language"),CO=new o.OlP("angularfire.auth.persistence"),EO=(n,t,e,i,r,s,c,d)=>(0,Vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=t.runOutsideAngular(()=>n.auth());if(e&&f.useEmulator(...e),i&&(f.tenantId=i),f.languageCode=r,s&&f.useDeviceLanguage(),c)for(const[_,b]of Object.entries(c))f.settings[_]=b;return d&&f.setPersistence(d),f},[e,i,r,s,c,d]);let hw=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,D,M,R){const U=new Et.x,q=ct(void 0).pipe((0,SI.Q)(c.outsideAngular),di(()=>s.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,9568)))),(0,pt.U)(()=>(0,Vr.on)(e,s,i)),(0,pt.U)(J=>EO(J,s,d,_,b,D,f,M)),KU({bufferSize:1,refCount:!1}));if(vo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{q.pipe(zl()).subscribe();const we=q.pipe(di(Ye=>Ye.getRedirectResult().then(Ut=>Ut,()=>null)),Bn.iC,KU({bufferSize:1,refCount:!1})),He=q.pipe(di(Ye=>new nr.y(Ut=>({unsubscribe:s.runOutsideAngular(()=>Ye.onAuthStateChanged(Ht=>Ut.next(Ht),Ht=>Ut.error(Ht),()=>Ut.complete()))})))),Ge=q.pipe(di(Ye=>new nr.y(Ut=>({unsubscribe:s.runOutsideAngular(()=>Ye.onIdTokenChanged(Ht=>Ut.next(Ht),Ht=>Ut.error(Ht),()=>Ut.complete()))}))));this.authState=we.pipe(QU(He),(0,Z1.R)(c.outsideAngular),(0,SI.Q)(c.insideAngular)),this.user=we.pipe(QU(Ge),(0,Z1.R)(c.outsideAngular),(0,SI.Q)(c.insideAngular)),this.idToken=this.user.pipe(di(Ye=>Ye?(0,Mn.D)(Ye.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(di(Ye=>Ye?(0,Mn.D)(Ye.getIdTokenResult()):ct(null))),this.credential=(0,hr.T)(we,U,this.authState.pipe(fi(Ye=>!Ye))).pipe((0,pt.U)(Ye=>Ye?.user?Ye:null),(0,Z1.R)(c.outsideAngular),(0,SI.Q)(c.insideAngular))}return(0,Vr.pX)(this,q,s,{spy:{apply:(J,we,He)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&He.then(Ge=>U.next(Ge))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Vr.Dh),o.LFG(Vr.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Bn.HU),o.LFG(_O,8),o.LFG(yO,8),o.LFG(vO,8),o.LFG(bO,8),o.LFG(wO,8),o.LFG(CO,8),o.LFG(dw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dZ=(()=>{class n{constructor(){FI.Z.registerVersion("angularfire",Bn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[hw]}),n})();var ot,hZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sc={},TO=TO||{},Xt=hZ||self;function LI(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function fw(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var DO="closure_uid_"+(1e9*Math.random()>>>0),pZ=0;function mZ(n,t,e){return n.call.apply(n.bind,arguments)}function gZ(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Gs(n,t,e){return(Gs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mZ:gZ).apply(null,arguments)}function BI(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function ss(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function Yf(){this.s=this.s,this.o=this.o}Yf.prototype.s=!1,Yf.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function fZ(n){Object.prototype.hasOwnProperty.call(n,DO)&&n[DO]||(n[DO]=++pZ)}(this)},Yf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bH=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function IO(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function wH(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(LI(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function zs(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}zs.prototype.h=function(){this.defaultPrevented=!0};var yZ=function(){if(!Xt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Xt.addEventListener("test",()=>{},t),Xt.removeEventListener("test",()=>{},t)}catch{}return n}();function pw(n){return/^[\s\xa0]*$/.test(n)}function VI(){var n=Xt.navigator;return n&&(n=n.userAgent)?n:""}function pu(n){return-1!=VI().indexOf(n)}function SO(n){return SO[" "](n),n}SO[" "]=function(){};var MO,n,bZ=pu("Opera"),jy=pu("Trident")||pu("MSIE"),CH=pu("Edge"),xO=CH||jy,EH=pu("Gecko")&&!(-1!=VI().toLowerCase().indexOf("webkit")&&!pu("Edge"))&&!(pu("Trident")||pu("MSIE"))&&!pu("Edge"),wZ=-1!=VI().toLowerCase().indexOf("webkit")&&!pu("Edge");function TH(){var n=Xt.document;return n?n.documentMode:void 0}e:{var AO="",kO=(n=VI(),EH?/rv:([^\);]+)(\)|;)/.exec(n):CH?/Edge\/([\d\.]+)/.exec(n):jy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):wZ?/WebKit\/(\S+)/.exec(n):bZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(kO&&(AO=kO?kO[1]:""),jy){var RO=TH();if(null!=RO&&RO>parseFloat(AO)){MO=String(RO);break e}}MO=AO}var CZ=Xt.document&&jy&&(TH()||parseInt(MO,10))||void 0;function mw(n,t){if(zs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(EH){e:{try{SO(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:EZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&mw.$.h.call(this)}}ss(mw,zs);var EZ={2:"touch",3:"pen",4:"mouse"};mw.prototype.h=function(){mw.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var gw="closure_listenable_"+(1e6*Math.random()|0),TZ=0;function DZ(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=r,this.key=++TZ,this.fa=this.ia=!1}function UI(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function PO(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function IH(n){const t={};for(const e in n)t[e]=n[e];return t}const SH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xH(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<SH.length;s++)e=SH[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function HI(n){this.src=n,this.g={},this.h=0}function NO(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=bH(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(UI(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function FO(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==t&&s.capture==!!e&&s.la==i)return r}return-1}HI.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=FO(n,t,i,r);return-1<c?(t=n[c],e||(t.ia=!1)):((t=new DZ(t,this.src,s,!!i,r)).ia=e,n.push(t)),t};var LO="closure_lm_"+(1e6*Math.random()|0),BO={};function MH(n,t,e,i,r){if(i&&i.once)return kH(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)MH(n,t[s],e,i,r);return null}return e=jO(e),n&&n[gw]?n.O(t,e,fw(i)?!!i.capture:!!i,r):AH(n,t,e,!1,i,r)}function AH(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=fw(r)?!!r.capture:!!r,d=UO(n);if(d||(n[LO]=d=new HI(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function SZ(){const t=xZ;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)yZ||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(OH(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function kH(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)kH(n,t[s],e,i,r);return null}return e=jO(e),n&&n[gw]?n.P(t,e,fw(i)?!!i.capture:!!i,r):AH(n,t,e,!0,i,r)}function RH(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)RH(n,t[s],e,i,r);else i=fw(i)?!!i.capture:!!i,e=jO(e),n&&n[gw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=FO(s=n.g[t],e,i,r))&&(UI(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=UO(n))&&(t=n.g[t.toString()],n=-1,t&&(n=FO(t,e,i,r)),(e=-1<n?t[n]:null)&&VO(e))}function VO(n){if("number"!=typeof n&&n&&!n.fa){var t=n.src;if(t&&t[gw])NO(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(OH(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=UO(t))?(NO(e,n),0==e.h&&(e.src=null,t[LO]=null)):UI(n)}}}function OH(n){return n in BO?BO[n]:BO[n]="on"+n}function xZ(n,t){if(n.fa)n=!0;else{t=new mw(t,this);var e=n.listener,i=n.la||n.src;n.ia&&VO(n),n=e.call(i,t)}return n}function UO(n){return(n=n[LO])instanceof HI?n:null}var HO="__closure_events_fn_"+(1e9*Math.random()>>>0);function jO(n){return"function"==typeof n?n:(n[HO]||(n[HO]=function(t){return n.handleEvent(t)}),n[HO])}function os(){Yf.call(this),this.i=new HI(this),this.S=this,this.J=null}function Ss(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,"string"==typeof t)t=new zs(t,n);else if(t instanceof zs)t.target=t.target||n;else{var r=t;xH(t=new zs(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=jI(c,i,!0,t)&&r}if(r=jI(c=t.g=n,i,!0,t)&&r,r=jI(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=jI(c=t.g=e[s],i,!1,t)&&r}function jI(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.fa&&c.capture==e){var d=c.listener,f=c.la||c.src;c.ia&&NO(n.i,c),r=!1!==d.call(f,i)&&r}}return r&&!i.defaultPrevented}ss(os,Yf),os.prototype[gw]=!0,os.prototype.removeEventListener=function(n,t,e,i){RH(this,n,t,e,i)},os.prototype.N=function(){if(os.$.N.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)UI(e[i]);delete n.g[t],n.h--}}this.J=null},os.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},os.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var GO=Xt.JSON.stringify;function AZ(){var n=zO;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var PH=new class MZ{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new RZ,n=>n.reset());class RZ{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function OZ(n){var t=1;n=n.split(":");const e=[];for(;0<t&&n.length;)e.push(n.shift()),t--;return n.length&&e.push(n.join(":")),e}function PZ(n){Xt.setTimeout(()=>{throw n},0)}let _w,yw=!1,zO=new class kZ{constructor(){this.h=this.g=null}add(t,e){const i=PH.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}},NH=()=>{const n=Xt.Promise.resolve(void 0);_w=()=>{n.then(NZ)}};var NZ=()=>{for(var n;n=AZ();){try{n.h.call(n.g)}catch(e){PZ(e)}var t=PH;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}yw=!1};function GI(n,t){os.call(this),this.h=n||1,this.g=t||Xt,this.j=Gs(this.qb,this),this.l=Date.now()}function $O(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function qO(n,t,e){if("function"==typeof n)e&&(n=Gs(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gs(n.handleEvent,n)}return 2147483647<Number(t)?-1:Xt.setTimeout(n,t||0)}function FH(n){n.g=qO(()=>{n.g=null,n.i&&(n.i=!1,FH(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}ss(GI,os),(ot=GI.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ss(this,"tick"),this.ga&&($O(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){GI.$.N.call(this),$O(this),delete this.g};class FZ extends Yf{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:FH(this)}N(){super.N(),this.g&&(Xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vw(n){Yf.call(this),this.h=n,this.g={}}ss(vw,Yf);var LH=[];function BH(n,t,e,i){Array.isArray(e)||(e&&(LH[0]=e.toString()),e=LH);for(var r=0;r<e.length;r++){var s=MH(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function VH(n){PO(n.g,function(t,e){this.g.hasOwnProperty(e)&&VO(t)},n),n.g={}}function zI(){this.g=!0}function Gy(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function UZ(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return GO(e)}catch{return t}}(n,e)+(i?" "+i:"")})}vw.prototype.N=function(){vw.$.N.call(this),VH(this)},vw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zI.prototype.Ea=function(){this.g=!1},zI.prototype.info=function(){};var vg={},UH=null;function $I(){return UH=UH||new os}function HH(n){zs.call(this,vg.Ta,n)}function bw(n){const t=$I();Ss(t,new HH(t))}function jH(n,t){zs.call(this,vg.STAT_EVENT,n),this.stat=t}function ho(n){const t=$I();Ss(t,new jH(t,n))}function GH(n,t){zs.call(this,vg.Ua,n),this.size=t}function ww(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Xt.setTimeout(function(){n()},t)}vg.Ta="serverreachability",ss(HH,zs),vg.STAT_EVENT="statevent",ss(jH,zs),vg.Ua="timingevent",ss(GH,zs);var qI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},zH={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function WO(){}function qH(){}WO.prototype.h=null;var KO,Cw={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ZO(){zs.call(this,"d")}function YO(){zs.call(this,"c")}function WI(){}function Ew(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new vw(this),this.P=HZ,this.V=new GI(n=xO?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new WH}function WH(){this.i=null,this.g="",this.h=!1}ss(ZO,zs),ss(YO,zs),ss(WI,WO),WI.prototype.g=function(){return new XMLHttpRequest},WI.prototype.i=function(){return{}},KO=new WI;var HZ=45e3,QO={},ZI={};function JO(n,t,e){n.L=1,n.v=JI(Bd(t)),n.s=e,n.S=!0,ZH(n,null)}function ZH(n,t){n.G=Date.now(),Tw(n),n.A=Bd(n.v);var e=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),rj(e.i,"t",i),n.C=0,e=n.l.J,n.h=new WH,n.g=xj(n.l,e?t:null,!n.s),0<n.O&&(n.M=new FZ(Gs(n.Pa,n,n.g),n.O)),BH(n.U,n.g,"readystatechange",n.nb),t=n.I?IH(n.I):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,t)):(n.u="GET",n.g.ha(n.A,n.u,null,t)),bw(),function LZ(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),f=0;f<d.length;f++){var _=d[f].split("=");if(1<_.length){var b=_[0];_=_[1];var D=b.split("_");c=2<=D.length&&"type"==D[1]?c+(b+"=")+_+"&":c+(b+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function YH(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function KH(n,t,e){let r,i=!0;for(;!n.J&&n.C<e.length;){if(r=jZ(n,e),r==ZI){4==t&&(n.o=4,ho(14),i=!1),Gy(n.j,n.m,null,"[Incomplete Response]");break}if(r==QO){n.o=4,ho(15),Gy(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Gy(n.j,n.m,r,null),XO(n,r)}YH(n)&&r!=ZI&&r!=QO&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,ho(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ba&&(n.ba=!0,(t=n.l).g==n&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),oP(t),t.M=!0,ho(11))):(Gy(n.j,n.m,e,"[Invalid Chunked Response]"),bg(n),Dw(n))}function jZ(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?ZI:(e=Number(t.substring(e,i)),isNaN(e)?QO:(i+=1)+e>t.length?ZI:(t=t.slice(i,i+e),n.C=i+e,t))}function Tw(n){n.Y=Date.now()+n.P,QH(n,n.P)}function QH(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ww(Gs(n.lb,n),t)}function YI(n){n.B&&(Xt.clearTimeout(n.B),n.B=null)}function Dw(n){0==n.l.H||n.J||Tj(n.l,n)}function bg(n){YI(n);var t=n.M;t&&"function"==typeof t.sa&&t.sa(),n.M=null,$O(n.V),VH(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.sa())}function XO(n,t){try{var e=n.l;if(0!=e.H&&(e.g==n||eP(e.i,n)))if(!n.K&&eP(e.i,n)&&3==e.H){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<n.G))break e;rS(e),nS(e)}sP(e),ho(18)}}else e.Fa=r[1],0<e.Fa-e.V&&37500>r[2]&&e.G&&0==e.A&&!e.v&&(e.v=ww(Gs(e.ib,e),6e3));if(1>=aj(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else Cg(e,11)}else if((n.K||e.g==n)&&rS(e),!pw(t))for(r=e.Ja.g.parse(t),t=0;t<r.length;t++){let _=r[t];if(e.V=_[0],_=_[1],2==e.H)if("c"==_[0]){e.K=_[1],e.pa=_[2];const b=_[3];null!=b&&(e.ra=b,e.l.info("VER="+e.ra));const D=_[4];null!=D&&(e.Ga=D,e.l.info("SVER="+e.Ga));const M=_[5];null!=M&&"number"==typeof M&&0<M&&(e.L=i=1.5*M,e.l.info("backChannelRequestTimeoutMs_="+i)),i=e;const R=n.g;if(R){const U=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=i.i;s.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(tP(s,s.h),s.h=null))}if(i.F){const q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;q&&(i.Da=q,ki(i.I,i.F,q))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-n.G,e.l.info("Handshake RTT: "+e.S+"ms"));var c=n;if((i=e).wa=Sj(i,i.J?i.pa:null,i.Y),c.K){lj(i.i,c);var d=c,f=i.L;f&&d.setTimeout(f),d.B&&(YI(d),Tw(d)),i.g=c}else Cj(i);0<e.j.length&&iS(e)}else"stop"!=_[0]&&"close"!=_[0]||Cg(e,7);else 3==e.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Cg(e,7):rP(e):"noop"!=_[0]&&e.h&&e.h.Aa(_),e.A=0)}bw()}catch{}}function JH(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(LI(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function zZ(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(LI(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function GZ(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(LI(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(ot=Ew.prototype).setTimeout=function(n){this.P=n},ot.nb=function(n){n=n.target;const t=this.M;t&&3==mu(n)?t.l():this.Pa(n)},ot.Pa=function(n){try{if(n==this.g)e:{const b=mu(this.g);var t=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||xO||this.g&&(this.h.h||this.g.ja()||gj(this.g)))){this.J||4!=b||7==t||bw(),YI(this);var e=this.g.da();this.ca=e;t:if(YH(this)){var i=gj(this.g);n="";var r=i.length,s=4==mu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bg(this),Dw(this);var c="";break t}this.h.i=new Xt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==e,function BZ(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.W,b,e),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pw(d)){var _=d;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,ho(12),bg(this),Dw(this);break e}Gy(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,XO(this,e)}this.S?(KH(this,b,c),xO&&this.i&&3==b&&(BH(this.U,this.V,"tick",this.mb),this.V.start())):(Gy(this.j,this.m,c,null),XO(this,c)),4==b&&bg(this),this.i&&!this.J&&(4==b?Tj(this.l,this):(this.i=!1,Tw(this)))}else(function l9(n){const t={};n=(n.g&&2<=mu(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(pw(n[i]))continue;var e=OZ(n[i]);const r=e[0];if("string"!=typeof(e=e[1]))continue;e=e.trim();const s=t[r]||[];t[r]=s,s.push(e)}!function IZ(n,t){for(const e in n)t.call(void 0,n[e],e,n)}(t,function(i){return i.join(", ")})})(this.g),400==e&&0<c.indexOf("Unknown SID")?(this.o=3,ho(12)):(this.o=0,ho(13)),bg(this),Dw(this)}}}catch{}},ot.mb=function(){if(this.g){var n=mu(this.g),t=this.g.ja();this.C<t.length&&(YI(this),KH(this,n,t),this.i&&4!=n&&Tw(this))}},ot.cancel=function(){this.J=!0,bg(this)},ot.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function VZ(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(bw(),ho(17)),bg(this),this.o=2,Dw(this)):QH(this,this.Y-n)};var XH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wg(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof wg){this.h=n.h,KI(this,n.j),this.s=n.s,this.g=n.g,QI(this,n.m),this.l=n.l;var t=n.i,e=new xw;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),ej(this,e),this.o=n.o}else n&&(t=String(n).match(XH))?(this.h=!1,KI(this,t[1]||"",!0),this.s=Iw(t[2]||""),this.g=Iw(t[3]||"",!0),QI(this,t[4]),this.l=Iw(t[5]||"",!0),ej(this,t[6]||"",!0),this.o=Iw(t[7]||"")):(this.h=!1,this.i=new xw(null,this.h))}function Bd(n){return new wg(n)}function KI(n,t,e){n.j=e?Iw(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function QI(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function ej(n,t,e){t instanceof xw?(n.i=t,function QZ(n,t){t&&!n.j&&(Kf(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(nj(this,i),rj(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=Sw(t,YZ)),n.i=new xw(t,n.h))}function ki(n,t,e){n.i.set(t,e)}function JI(n){return ki(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Iw(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Sw(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,qZ),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qZ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wg.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Sw(t,tj,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Sw(t,tj,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(Sw(e,"/"==e.charAt(0)?ZZ:WZ,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Sw(e,KZ)),n.join("")};var tj=/[#\/\?@]/g,WZ=/[#\?:]/g,ZZ=/[#\?]/g,YZ=/[#\?@]/g,KZ=/#/g;function xw(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Kf(n){n.g||(n.g=new Map,n.h=0,n.i&&function $Z(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function nj(n,t){Kf(n),t=zy(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function ij(n,t){return Kf(n),t=zy(n,t),n.g.has(t)}function rj(n,t,e){nj(n,t),0<e.length&&(n.i=null,n.g.set(zy(n,t),IO(e)),n.h+=e.length)}function zy(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function sj(n){this.l=n||XZ,n=Xt.PerformanceNavigationTiming?0<(n=Xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Xt.g&&Xt.g.Ka&&Xt.g.Ka()&&Xt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=xw.prototype).add=function(n,t){Kf(this),this.i=null,n=zy(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},ot.forEach=function(n,t){Kf(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},ot.ta=function(){Kf(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},ot.Z=function(n){Kf(this);let t=[];if("string"==typeof n)ij(this,n)&&(t=t.concat(this.g.get(zy(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},ot.set=function(n,t){return Kf(this),this.i=null,ij(this,n=zy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},ot.get=function(n,t){return n&&0<(n=this.Z(n)).length?String(n[0]):t},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.Z(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var XZ=10;function oj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function aj(n){return n.h?1:n.g?n.g.size:0}function eP(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function tP(n,t){n.g?n.g.add(t):n.h=t}function lj(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function cj(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.F);return t}return IO(n.i)}function t9(){this.g=new class{stringify(n){return Xt.JSON.stringify(n,void 0)}parse(n){return Xt.JSON.parse(n,void 0)}}}function n9(n,t,e){const i=e||"";try{JH(n,function(r,s){let c=r;fw(r)&&(c=GO(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function XI(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function Mw(n){this.l=n.fc||null,this.j=n.ob||!1}function eS(n,t){os.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=nP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sj.prototype.cancel=function(){if(this.i=cj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ss(Mw,WO),Mw.prototype.g=function(){return new eS(this.l,this.j)},Mw.prototype.i=function(n){return function(){return n}}({}),ss(eS,os);var nP=0;function uj(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Aw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kw(n)}function kw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=eS.prototype).open=function(n,t){if(this.readyState!=nP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,kw(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||Xt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Aw(this)),this.readyState=nP},ot.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kw(this)),this.g&&(this.readyState=3,kw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uj(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Aw(this):kw(this),3==this.readyState&&uj(this)}},ot.Za=function(n){this.g&&(this.response=this.responseText=n,Aw(this))},ot.Ya=function(n){this.g&&(this.response=n,Aw(this))},ot.ka=function(){this.g&&Aw(this)},ot.setRequestHeader=function(n,t){this.v.append(n,t)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(eS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var r9=Xt.JSON.parse;function rr(n){os.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dj,this.L=this.M=!1}ss(rr,os);var dj="",s9=/^https?$/i,o9=["POST","PUT"];function hj(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,fj(n),tS(n)}function fj(n){n.F||(n.F=!0,Ss(n,"complete"),Ss(n,"error"))}function pj(n){if(n.h&&typeof TO<"u"&&(!n.C[1]||4!=mu(n)||2!=n.da()))if(n.v&&4==mu(n))qO(n.La,0,n);else if(Ss(n,"readystatechange"),4==mu(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===c){var r=String(n.I).match(XH)[1]||null;!r&&Xt.self&&Xt.self.location&&(r=Xt.self.location.protocol.slice(0,-1)),i=!s9.test(r?r.toLowerCase():"")}e=i}if(e)Ss(n,"complete"),Ss(n,"success");else{n.m=6;try{var s=2<mu(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",fj(n)}}finally{tS(n)}}}function tS(n,t){if(n.g){mj(n);const e=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,t||Ss(n,"ready");try{e.onreadystatechange=i}catch{}}}function mj(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Xt.clearTimeout(n.A),n.A=null)}function mu(n){return n.g?n.g.readyState:0}function gj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case dj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function _j(n){let t="";return PO(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function iP(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=_j(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):ki(n,t,e))}function Rw(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function yj(n){this.Ga=0,this.j=[],this.l=new zI,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rw("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rw("baseRetryDelayMs",5e3,n),this.hb=Rw("retryDelaySeedMs",1e4,n),this.eb=Rw("forwardChannelMaxRetries",2,n),this.xa=Rw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new sj(n&&n.concurrentRequestLimit),this.Ja=new t9,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function rP(n){if(vj(n),3==n.H){var t=n.W++,e=Bd(n.I);if(ki(e,"SID",n.K),ki(e,"RID",t),ki(e,"TYPE","terminate"),Ow(n,e),(t=new Ew(n,n.l,t)).L=2,t.v=JI(Bd(e)),e=!1,Xt.navigator&&Xt.navigator.sendBeacon)try{e=Xt.navigator.sendBeacon(t.v.toString(),"")}catch{}!e&&Xt.Image&&((new Image).src=t.v,e=!0),e||(t.g=xj(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Tw(t)}Ij(n)}function nS(n){n.g&&(oP(n),n.g.cancel(),n.g=null)}function vj(n){nS(n),n.u&&(Xt.clearTimeout(n.u),n.u=null),rS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Xt.clearTimeout(n.m),n.m=null)}function iS(n){if(!oj(n.i)&&!n.m){n.m=!0;var t=n.Na;_w||NH(),yw||(_w(),yw=!0),zO.add(t,n),n.C=0}}function bj(n,t){var e;e=t?t.m:n.W++;const i=Bd(n.I);ki(i,"SID",n.K),ki(i,"RID",e),ki(i,"AID",n.V),Ow(n,i),n.o&&n.s&&iP(i,n.o,n.s),e=new Ew(n,n.l,e,n.C+1),null===n.o&&(e.I=n.s),t&&(n.j=t.F.concat(n.j)),t=wj(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),tP(n.i,e),JO(e,i,t)}function Ow(n,t){n.na&&PO(n.na,function(e,i){ki(t,i,e)}),n.h&&JH({},function(e,i){ki(t,i,e)})}function wj(n,t,e){e=Math.min(n.j.length,e);var i=n.h?Gs(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].g,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let f=0;f<e;f++){let _=r[f].g;const b=r[f].map;if(_-=s,0>_)s=Math.max(0,r[f].g-100),d=!1;else try{n9(b,c,"req"+_+"_")}catch{i&&i(b)}}if(d){i=c.join("&");break e}}}return n=n.j.splice(0,e),t.F=n,i}function Cj(n){if(!n.g&&!n.u){n.ba=1;var t=n.Ma;_w||NH(),yw||(_w(),yw=!0),zO.add(t,n),n.A=0}}function sP(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ww(Gs(n.Ma,n),Dj(n,n.A)),n.A++,0))}function oP(n){null!=n.B&&(Xt.clearTimeout(n.B),n.B=null)}function Ej(n){n.g=new Ew(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var t=Bd(n.wa);ki(t,"RID","rpc"),ki(t,"SID",n.K),ki(t,"AID",n.V),ki(t,"CI",n.G?"0":"1"),!n.G&&n.qa&&ki(t,"TO",n.qa),ki(t,"TYPE","xmlhttp"),Ow(n,t),n.o&&n.s&&iP(t,n.o,n.s),n.L&&n.g.setTimeout(n.L);var e=n.g;n=n.pa,e.L=1,e.v=JI(Bd(t)),e.s=null,e.S=!0,ZH(e,n)}function rS(n){null!=n.v&&(Xt.clearTimeout(n.v),n.v=null)}function Tj(n,t){var e=null;if(n.g==t){rS(n),oP(n),n.g=null;var i=2}else{if(!eP(n.i,t))return;e=t.F,lj(n.i,t),i=1}if(0!=n.H)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.G;var r=n.C;Ss(i=$I(),new GH(i,e)),iS(n)}else Cj(n);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function c9(n,t){return!(aj(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=t.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ww(Gs(n.Na,n,t),Dj(n,n.C)),n.C++,0)))}(n,t)||2==i&&sP(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:Cg(n,5);break;case 4:Cg(n,10);break;case 3:Cg(n,6);break;default:Cg(n,2)}}function Dj(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(e*=2),e*t}function Cg(n,t){if(n.l.info("Error code "+t),2==t){var e=null;n.h&&(e=null);var i=Gs(n.pb,n);e||(e=new wg("//www.google.com/images/cleardot.gif"),Xt.location&&"http"==Xt.location.protocol||KI(e,"https"),JI(e)),function i9(n,t){const e=new zI;if(Xt.Image){const i=new Image;i.onload=BI(XI,e,i,"TestLoadImage: loaded",!0,t),i.onerror=BI(XI,e,i,"TestLoadImage: error",!1,t),i.onabort=BI(XI,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=BI(XI,e,i,"TestLoadImage: timeout",!1,t),Xt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else ho(2);n.H=0,n.h&&n.h.za(t),Ij(n),vj(n)}function Ij(n){if(n.H=0,n.ma=[],n.h){const t=cj(n.i);(0!=t.length||0!=n.j.length)&&(wH(n.ma,t),wH(n.ma,n.j),n.i.i.length=0,IO(n.j),n.j.length=0),n.h.ya()}}function Sj(n,t,e){var i=e instanceof wg?Bd(e):new wg(e);if(""!=i.g)t&&(i.g=t+"."+i.g),QI(i,i.m);else{var r=Xt.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new wg(null);i&&KI(s,i),t&&(s.g=t),r&&QI(s,r),e&&(s.l=e),i=s}return t=n.Da,(e=n.F)&&t&&ki(i,e,t),ki(i,"VER",n.ra),Ow(n,i),i}function xj(n,t,e){if(t&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new rr(e&&n.Ha&&!n.va?new Mw({ob:!0}):n.va)).Oa(n.J),t}function Mj(){}function sS(){if(jy&&!(10<=Number(CZ)))throw Error("Environmental error: no available transport.")}function ua(n,t){os.call(this),this.g=new yj(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!pw(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!pw(t)&&(this.g.F=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new $y(this)}function Aj(n){ZO.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function kj(){YO.call(this),this.status=1}function $y(n){this.g=n}function oc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function aP(n,t,e){e||(e=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(r=0;16>r;++r)i[r]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var s=n.g[3],c=(t=n.g[0])+(s^(e=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;c=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=e+(c<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=t+(r^s&(e^r))+i[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=t+(e^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=t+(r^(e|~s))+i[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=t+(r^(e|~s))+i[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=t+(r^(e|~s))+i[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((s=(t=e+((c=t+(r^(e|~s))+i[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((r=s+((c=r+(t^(s|~e))+i[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(r+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Qn(n,t){this.h=t;for(var e=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==t||(e[r]=s,i=!1)}this.g=e}(ot=rr.prototype).Oa=function(n){this.M=n},ot.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():KO.g(),this.C=function $H(n){return n.h||(n.h=n.i())}(this.u?this.u:KO),this.g.onreadystatechange=Gs(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(s){return void hj(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=Xt.FormData&&n instanceof Xt.FormData,!(0<=bH(o9,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mj(this),0<this.B&&((this.L=function a9(n){return jy&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gs(this.ua,this)):this.A=qO(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){hj(this,s)}},ot.ua=function(){typeof TO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ss(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ss(this,"complete"),Ss(this,"abort"),tS(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tS(this,!0)),rr.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?pj(this):this.kb())},ot.kb=function(){pj(this)},ot.isActive=function(){return!!this.g},ot.da=function(){try{return 2<mu(this)?this.g.status:-1}catch{return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),r9(t)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=yj.prototype).ra=8,ot.H=1,ot.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Ew(this,this.l,n);let s=this.s;if(this.U&&(s?(s=IH(s),xH(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,e=0;e<this.j.length;e++){var i=this.j[e];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.j.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=wj(this,r,t),ki(e=Bd(this.I),"RID",n),ki(e,"CVER",22),this.F&&ki(e,"X-HTTP-Session-Id",this.F),Ow(this,e),s&&(this.O?t="headers="+encodeURIComponent(String(_j(s)))+"&"+t:this.o&&iP(e,this.o,s)),tP(this.i,r),this.bb&&ki(e,"TYPE","init"),this.P?(ki(e,"$req",t),ki(e,"SID","null"),r.aa=!0,JO(r,e,null)):JO(r,e,t),this.H=2}}else 3==this.H&&(n?bj(this,n):0==this.j.length||oj(this.i)||bj(this))},ot.Ma=function(){if(this.u=null,Ej(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ww(Gs(this.jb,this),n)}},ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ho(10),nS(this),Ej(this))},ot.ib=function(){null!=this.v&&(this.v=null,nS(this),sP(this),ho(19))},ot.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ho(2)):(this.l.info("Failed to ping google.com"),ho(1))},ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(ot=Mj.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.isActive=function(){return!0},ot.Va=function(){},sS.prototype.g=function(n,t){return new ua(n,t)},ss(ua,os),ua.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,t=this.l,e=this.h||void 0;ho(0),n.Y=t,n.na=e||{},n.G=n.aa,n.I=Sj(n,null,n.Y),iS(n)},ua.prototype.close=function(){rP(this.g)},ua.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=GO(n),n=e);t.j.push(new class{constructor(n,t){this.g=n,this.map=t}}(t.fb++,n)),3==t.H&&iS(t)},ua.prototype.N=function(){this.g.h=null,delete this.j,rP(this.g),delete this.g,ua.$.N.call(this)},ss(Aj,ZO),ss(kj,YO),ss($y,Mj),$y.prototype.Ba=function(){Ss(this.g,"a")},$y.prototype.Aa=function(n){Ss(this.g,new Aj(n))},$y.prototype.za=function(n){Ss(this.g,new kj)},$y.prototype.ya=function(){Ss(this.g,"b")},ss(oc,function u9(){this.blockSize=-1}),oc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},oc.prototype.j=function(n,t){void 0===t&&(t=n.length);for(var e=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=e;)aP(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<t;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){aP(this,i),r=0;break}}else for(;s<t;)if(i[r++]=n[s++],r==this.blockSize){aP(this,i),r=0;break}}this.h=r,this.i+=t},oc.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=255&e,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};var d9={};function lP(n){return-128<=n&&128>n?function vZ(n,t){var e=d9;return Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=t(n)}(n,function(t){return new Qn([0|t],0>t?-1:0)}):new Qn([0|n],0>n?-1:0)}function gu(n){if(isNaN(n)||!isFinite(n))return qy;if(0>n)return xs(gu(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=cP;return new Qn(t,0)}var cP=4294967296,qy=lP(0),uP=lP(1),Oj=lP(16777216);function Vd(n){if(0!=n.h)return!1;for(var t=0;t<n.g.length;t++)if(0!=n.g[t])return!1;return!0}function Za(n){return-1==n.h}function xs(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new Qn(e,~n.h).add(uP)}function oS(n,t){return n.add(xs(t))}function aS(n,t){for(;(65535&n[t])!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function Pw(n,t){this.g=n,this.h=t}function lS(n,t){if(Vd(t))throw Error("division by zero");if(Vd(n))return new Pw(qy,qy);if(Za(n))return t=lS(xs(n),t),new Pw(xs(t.g),xs(t.h));if(Za(t))return t=lS(n,xs(t)),new Pw(xs(t.g),t.h);if(30<n.g.length){if(Za(n)||Za(t))throw Error("slowDivide_ only works with positive integers.");for(var e=uP,i=t;0>=i.X(n);)e=Pj(e),i=Pj(i);var r=Wy(e,1),s=Wy(i,1);for(i=Wy(i,2),e=Wy(e,2);!Vd(i);){var c=s.add(i);0>=c.X(n)&&(r=r.add(e),s=c),i=Wy(i,1),e=Wy(e,1)}return t=oS(n,r.R(t)),new Pw(r,t)}for(r=qy;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),c=(s=gu(e)).R(t);Za(c)||0<c.X(n);)c=(s=gu(e-=i)).R(t);Vd(s)&&(s=uP),r=r.add(s),n=oS(n,c)}return new Pw(r,n)}function Pj(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Qn(e,n.h)}function Wy(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,r=[],s=0;s<i;s++)r[s]=0<t?n.D(s+e)>>>t|n.D(s+e+1)<<32-t:n.D(s+e);return new Qn(r,n.h)}(ot=Qn.prototype).ea=function(){if(Za(this))return-xs(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:cP+i)*t,t*=cP}return n},ot.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Vd(this))return"0";if(Za(this))return"-"+xs(this).toString(n);for(var t=gu(Math.pow(n,6)),e=this,i="";;){var r=lS(e,t).g,s=((0<(e=oS(e,r.R(t))).g.length?e.g[0]:e.h)>>>0).toString(n);if(Vd(e=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},ot.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ot.X=function(n){return Za(n=oS(this,n))?-1:Vd(n)?0:1},ot.abs=function(){return Za(this)?xs(this):this},ot.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),c=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=c>>>16,e[r]=(c&=65535)<<16|(s&=65535)}return new Qn(e,-2147483648&e[e.length-1]?-1:0)},ot.R=function(n){if(Vd(this)||Vd(n))return qy;if(Za(this))return Za(n)?xs(this).R(xs(n)):xs(xs(this).R(n));if(Za(n))return xs(this.R(xs(n)));if(0>this.X(Oj)&&0>n.X(Oj))return gu(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,c=65535&this.D(i),d=n.D(r)>>>16,f=65535&n.D(r);e[2*i+2*r]+=c*f,aS(e,2*i+2*r),e[2*i+2*r+1]+=s*f,aS(e,2*i+2*r+1),e[2*i+2*r+1]+=c*d,aS(e,2*i+2*r+1),e[2*i+2*r+2]+=s*d,aS(e,2*i+2*r+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new Qn(e,0)},ot.gb=function(n){return lS(this,n).h},ot.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new Qn(e,this.h&n.h)},ot.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new Qn(e,this.h|n.h)},ot.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new Qn(e,this.h^n.h)},sS.prototype.createWebChannel=sS.prototype.g,ua.prototype.send=ua.prototype.u,ua.prototype.open=ua.prototype.m,ua.prototype.close=ua.prototype.close,qI.NO_ERROR=0,qI.TIMEOUT=8,qI.HTTP_ERROR=6,zH.COMPLETE="complete",qH.EventType=Cw,Cw.OPEN="a",Cw.CLOSE="b",Cw.ERROR="c",Cw.MESSAGE="d",os.prototype.listen=os.prototype.O,rr.prototype.listenOnce=rr.prototype.P,rr.prototype.getLastError=rr.prototype.Sa,rr.prototype.getLastErrorCode=rr.prototype.Ia,rr.prototype.getStatus=rr.prototype.da,rr.prototype.getResponseJson=rr.prototype.Wa,rr.prototype.getResponseText=rr.prototype.ja,rr.prototype.send=rr.prototype.ha,rr.prototype.setWithCredentials=rr.prototype.Oa,oc.prototype.digest=oc.prototype.l,oc.prototype.reset=oc.prototype.reset,oc.prototype.update=oc.prototype.j,Qn.prototype.add=Qn.prototype.add,Qn.prototype.multiply=Qn.prototype.R,Qn.prototype.modulo=Qn.prototype.gb,Qn.prototype.compare=Qn.prototype.X,Qn.prototype.toNumber=Qn.prototype.ea,Qn.prototype.toString=Qn.prototype.toString,Qn.prototype.getBits=Qn.prototype.D,Qn.fromNumber=gu,Qn.fromString=function Rj(n,t){if(0==n.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==n.charAt(0))return xs(Rj(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=gu(Math.pow(t,8)),i=qy,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),c=parseInt(n.substring(r,r+s),t);8>s?(s=gu(Math.pow(t,s)),i=i.R(s).add(gu(c))):i=(i=i.R(e)).add(gu(c))}return i};var h9=sc.createWebChannelTransport=function(){return new sS},f9=sc.getStatEventTarget=function(){return $I()},dP=sc.ErrorCode=qI,p9=sc.EventType=zH,m9=sc.Event=vg,Nj=sc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},g9=sc.FetchXmlHttpFactory=Mw,cS=sc.WebChannel=qH,_9=sc.XhrIo=rr,y9=sc.Md5=oc,Zy=sc.Integer=Qn;const Fj="@firebase/firestore";class as{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");let Yy="9.23.0";const Qf=new No.Yd("@firebase/firestore");function hP(){return Qf.logLevel}function je(n,...t){if(Qf.logLevel<=No.in.DEBUG){const e=t.map(fP);Qf.debug(`Firestore (${Yy}): ${n}`,...e)}}function fr(n,...t){if(Qf.logLevel<=No.in.ERROR){const e=t.map(fP);Qf.error(`Firestore (${Yy}): ${n}`,...e)}}function Ya(n,...t){if(Qf.logLevel<=No.in.WARN){const e=t.map(fP);Qf.warn(`Firestore (${Yy}): ${n}`,...e)}}function fP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function mt(n="Unexpected state"){const t=`FIRESTORE (${Yy}) INTERNAL ASSERTION FAILED: `+n;throw fr(t),new Error(t)}function xt(n,t){n||mt()}function st(n,t){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends V.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Lj{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class w9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(as.UNAUTHENTICATED))}shutdown(){}}class C9{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class E9{constructor(t){this.t=t,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,e(_)):Promise.resolve();let c=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ur,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=c;t.enqueueRetryable((0,le.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},f=_=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>f(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?f(_):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ur)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xt("string"==typeof i.accessToken),new Lj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return xt(null===t||"string"==typeof t),new as(t)}}class T9{constructor(t,e,i){this.h=t,this.l=e,this.m=i,this.type="FirstParty",this.user=as.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class D9{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new T9(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(as.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bj{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I9{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const i=s=>{null!=s.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.T;return this.T=s.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(xt("string"==typeof e.token),this.T=e.token,new Bj(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function S9(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class Vj{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=S9(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Qt(n,t){return n<t?-1:n>t?1:0}function Ky(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function Uj(n){return n+"\0"}class ji{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ji.fromMillis(Date.now())}static fromDate(t){return ji.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new ji(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Qt(this.nanoseconds,t.nanoseconds):Qt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(t){this.timestamp=t}static fromTimestamp(t){return new At(t)}static min(){return new At(new ji(0,0))}static max(){return new At(new ji(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Nw{constructor(t,e,i){void 0===e?e=0:e>t.length&&mt(),void 0===i?i=t.length-e:i>t.length-e&&mt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===Nw.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Nw?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class An extends Nw{construct(t,e,i){return new An(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new An(e)}static emptyPath(){return new An([])}}const x9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends Nw{construct(t,e,i){return new sr(t,e,i)}static isValidIdentifier(t){return x9.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sr(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Be(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Be(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Be(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sr(e)}static emptyPath(){return new sr([])}}class it{constructor(t){this.path=t}static fromPath(t){return new it(An.fromString(t))}static fromName(t){return new it(An.fromString(t).popFirst(5))}static empty(){return new it(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===An.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return An.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new it(new An(t.slice()))}}class uS{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function pP(n){return n.fields.find(t=>2===t.kind)}function Eg(n){return n.fields.filter(t=>2!==t.kind)}uS.UNKNOWN_ID=-1;class dS{constructor(t,e){this.fieldPath=t,this.kind=e}}class Fw{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Fw(0,da.min())}}function Hj(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=At.fromTimestamp(1e9===i?new ji(e+1,0):new ji(e,i));return new da(r,it.empty(),t)}function jj(n){return new da(n.readTime,n.key,-1)}class da{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new da(At.min(),it.empty(),-1)}static max(){return new da(At.max(),it.empty(),-1)}}function mP(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=it.comparator(n.documentKey,t.documentKey),0!==e?e:Qt(n.largestBatchId,t.largestBatchId))}const Gj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Jf(n){return gP.apply(this,arguments)}function gP(){return gP=(0,le.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==Gj)throw n;je("LocalStore","Unexpectedly lost primary lease")}),gP.apply(this,arguments)}class de{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new de((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof de?e:de.resolve(e)}catch(e){return de.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):de.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):de.reject(e)}static resolve(t){return new de((e,i)=>{e(t)})}static reject(t){return new de((e,i)=>{i(t)})}static waitFor(t){return new de((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},f=>i(f))}),c=!0,s===r&&e()})}static or(t){let e=de.resolve(!1);for(const i of t)e=e.next(r=>r?de.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new de((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let f=0;f<s;f++){const _=f;e(t[_]).next(b=>{c[_]=b,++d,d===s&&i(c)},b=>r(b))}})}static doWhile(t,e){return new de((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class hS{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new Ur,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new Lw(t,e.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=_P(i.target.error);this.v.reject(new Lw(t,r))}}static open(t,e,i,r){try{return new hS(e,t.transaction(r,i))}catch(s){throw new Lw(e,s)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(je("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new R9(e)}}class ac{constructor(t,e,i){this.name=t,this.version=e,this.V=i,12.2===ac.S((0,V.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return je("SimpleDb","Removing database:",t),Tg(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,V.hl)())return!1;if(ac.C())return!0;const t=(0,V.z$)(),e=ac.S(t),i=0<e&&e<10,r=ac.N(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(t){var e=this;return(0,le.Z)(function*(){return e.db||(je("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new Lw(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Be(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Be(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Lw(t,d))},s.onupgradeneeded=c=>{je("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.V.O(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{je("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=i=>e.F(i)),e.db})()}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,le.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.$(t);const f=hS.open(s.db,t,c?"readonly":"readwrite",i),_=r(f).next(b=>(f.P(),b)).catch(b=>(f.abort(b),de.reject(b))).toPromise();return _.catch(()=>{}),yield f.R,_}catch(f){const _=f,b="FirebaseError"!==_.name&&d<3;if(je("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),s.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class k9{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return Tg(this.L.delete())}}class Lw extends Be{constructor(t,e){super(ge.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Xf(n){return"IndexedDbTransactionError"===n.name}class R9{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(je("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Tg(i)}add(t){return je("SimpleDb","ADD",this.store.name,t,t),Tg(this.store.add(t))}get(t){return Tg(this.store.get(t)).next(e=>(void 0===e&&(e=null),je("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return je("SimpleDb","DELETE",this.store.name,t),Tg(this.store.delete(t))}count(){return je("SimpleDb","COUNT",this.store.name),Tg(this.store.count())}j(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new de((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}H(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new de((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}J(t,e){je("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,c,d)=>d.delete())}X(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Z(t){const e=this.cursor({});return new de((i,r)=>{e.onerror=s=>{const c=_P(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}W(t,e){const i=[];return new de((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const f=new k9(d),_=e(d.primaryKey,d.value,f);if(_ instanceof de){const b=_.catch(D=>(f.done(),de.reject(D)));i.push(b)}f.isDone?r():null===f.K?d.continue():d.continue(f.K)}}).next(()=>de.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Tg(n){return new de((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=_P(i.target.error);e(r)}})}let $j=!1;function _P(n){const t=ac.S((0,V.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $j||($j=!0,setTimeout(()=>{throw i},0)),i}}return n}class O9{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){var e=this;je("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,le.Z)(function*(){e.task=null;try{je("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(i){Xf(i)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Jf(i)}yield e.et(6e4)}))}}class P9{constructor(t,e){this.localStore=t,this.persistence=e}nt(t=50){var e=this;return(0,le.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.st(i,t))})()}st(t,e){const i=new Set;let r=e,s=!0;return de.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return je("IndexBackiller",`Processing collection: ${c}`),this.it(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}it(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.rt(r,s)).next(d=>(je("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}rt(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=jj(s);mP(c,i)>0&&(i=c)}),new da(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let ha=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return n.ct=-1,n})();function Bw(n){return null==n}function Vw(n){return 0===n&&1/n==-1/0}function qj(n){return"number"==typeof n&&Number.isInteger(n)&&!Vw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function $s(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Wj(t)),t=N9(n.get(e),t);return Wj(t)}function N9(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Wj(n){return n+"\x01\x01"}function _u(n){const t=n.length;if(xt(t>=2),2===t)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),An.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&mt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let f;0===r.length?f=d:(r+=d,f=r,r=""),i.push(f);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:mt()}s=c+2}return new An(i)}const Zj=["userId","batchId"];function fS(n,t){return[n,$s(t)]}function Yj(n,t,e){return[n,$s(t),e]}const F9={},L9=["prefixPath","collectionGroup","readTime","documentId"],B9=["prefixPath","collectionGroup","documentId"],V9=["collectionGroup","readTime","prefixPath","documentId"],U9=["canonicalId","targetId"],H9=["targetId","path"],j9=["path","targetId"],G9=["collectionId","parent"],z9=["indexId","uid"],$9=["uid","sequenceNumber"],q9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W9=["indexId","uid","orderedDocumentKey"],Z9=["userId","collectionPath","documentId"],Y9=["userId","collectionPath","largestBatchId"],K9=["userId","collectionGroup","largestBatchId"],Kj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Q9=[...Kj,"documentOverlays"],Qj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jj=Qj,J9=[...Jj,"indexConfiguration","indexState","indexEntries"];class yP extends zj{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function ls(n,t){const e=st(n);return ac.M(e.ht,t)}function Xj(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ep(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function e3(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class wi{constructor(t,e){this.comparator=t,this.root=e||Ms.EMPTY}insert(t,e){return new wi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ms.BLACK,null,null))}remove(t){return new wi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ms.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new pS(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new pS(this.root,t,this.comparator,!1)}getReverseIterator(){return new pS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new pS(this.root,t,this.comparator,!0)}}class pS{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ms{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Ms.RED,this.left=r??Ms.EMPTY,this.right=s??Ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Ms(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ms.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ms.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const t=this.left.check();if(t!==this.right.check())throw mt();return t+(this.isRed()?0:1)}}Ms.EMPTY=null,Ms.RED=!0,Ms.BLACK=!1,Ms.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Ms(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ri{constructor(t){this.comparator=t,this.data=new wi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new t3(this.data.getIterator())}getIteratorFrom(t){return new t3(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Ri)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ri(this.comparator);return e.data=t,e}}class t3{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qy(n){return n.hasNext()?n.getNext():void 0}class Vo{constructor(t){this.fields=t,t.sort(sr.comparator)}static empty(){return new Vo([])}unionWith(t){let e=new Ri(sr.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Vo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ky(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class n3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new n3("Invalid base64 string: "+r):r}}(t);return new Hr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Hr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Qt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Hr.EMPTY_BYTE_STRING=new Hr("");const eY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tp(n){if(xt(!!n),"string"==typeof n){let t=0;const e=eY.exec(n);if(xt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:or(n.seconds),nanos:or(n.nanos)}}function or(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ud(n){return"string"==typeof n?Hr.fromBase64String(n):Hr.fromUint8Array(n)}function mS(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function gS(n){const t=n.mapValue.fields.__previous_value__;return mS(t)?gS(t):t}function Uw(n){const t=tp(n.mapValue.fields.__local_write_time__.timestampValue);return new ji(t.seconds,t.nanos)}class tY{constructor(t,e,i,r,s,c,d,f,_){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=_}}class np{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new np("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof np&&t.projectId===this.projectId&&t.database===this.database}}const ip={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_S={nullValue:"NULL_VALUE"};function rp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mS(n)?4:a3(n)?9007199254740991:10:mt()}function yu(n,t){if(n===t)return!0;const e=rp(n);if(e!==rp(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Uw(n).isEqual(Uw(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=tp(i.timestampValue),c=tp(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Ud(n.bytesValue).isEqual(Ud(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return or(i.geoPointValue.latitude)===or(r.geoPointValue.latitude)&&or(i.geoPointValue.longitude)===or(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return or(i.integerValue)===or(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=or(i.doubleValue),c=or(r.doubleValue);return s===c?Vw(s)===Vw(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return Ky(n.arrayValue.values||[],t.arrayValue.values||[],yu);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(Xj(s)!==Xj(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!yu(s[d],c[d])))return!1;return!0}(n,t);default:return mt()}var r}function Hw(n,t){return void 0!==(n.values||[]).find(e=>yu(e,t))}function sp(n,t){if(n===t)return 0;const e=rp(n),i=rp(t);if(e!==i)return Qt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Qt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=or(r.integerValue||r.doubleValue),d=or(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return r3(n.timestampValue,t.timestampValue);case 4:return r3(Uw(n),Uw(t));case 5:return Qt(n.stringValue,t.stringValue);case 6:return function(r,s){const c=Ud(r),d=Ud(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let f=0;f<c.length&&f<d.length;f++){const _=Qt(c[f],d[f]);if(0!==_)return _}return Qt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=Qt(or(r.latitude),or(s.latitude));return 0!==c?c:Qt(or(r.longitude),or(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let f=0;f<c.length&&f<d.length;++f){const _=sp(c[f],d[f]);if(_)return _}return Qt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===ip.mapValue&&s===ip.mapValue)return 0;if(r===ip.mapValue)return 1;if(s===ip.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),f=s.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let b=0;b<d.length&&b<_.length;++b){const D=Qt(d[b],_[b]);if(0!==D)return D;const M=sp(c[d[b]],f[_[b]]);if(0!==M)return M}return Qt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw mt()}}function r3(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Qt(n,t);const e=tp(n),i=tp(t),r=Qt(e.seconds,i.seconds);return 0!==r?r:Qt(e.nanos,i.nanos)}function Jy(n){return vP(n)}function vP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=tp(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ud(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=vP(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${vP(i.fields[d])}`;return s+"}"}(n.mapValue):mt();var t}function Dg(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function bP(n){return!!n&&"integerValue"in n}function jw(n){return!!n&&"arrayValue"in n}function s3(n){return!!n&&"nullValue"in n}function o3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vS(n){return!!n&&"mapValue"in n}function Gw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ep(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Gw(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Gw(n.arrayValue.values[e]);return t}return Object.assign({},n)}function a3(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function nY(n){return"nullValue"in n?_S:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Dg(np.empty(),it.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function iY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Dg(np.empty(),it.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ip:mt()}function l3(n,t){const e=sp(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function c3(n,t){const e=sp(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class As{constructor(t){this.value=t}static empty(){return new As({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!vS(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gw(e)}setAll(t){let e=sr.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=Gw(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());vS(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return yu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];vS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){ep(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new As(Gw(this.value))}}function u3(n){const t=[];return ep(n.fields,(e,i)=>{const r=new sr([e]);if(vS(i)){const s=u3(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new Vo(t)}class Oi{constructor(t,e,i,r,s,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=c,this.documentState=d}static newInvalidDocument(t){return new Oi(t,0,At.min(),At.min(),At.min(),As.empty(),0)}static newFoundDocument(t,e,i,r){return new Oi(t,1,e,At.min(),i,r,0)}static newNoDocument(t,e){return new Oi(t,2,e,At.min(),At.min(),As.empty(),0)}static newUnknownDocument(t,e){return new Oi(t,3,e,At.min(),At.min(),As.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(At.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Oi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class op{constructor(t,e){this.position=t,this.inclusive=e}}function d3(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?it.comparator(it.fromName(c.referenceValue),e.key):sp(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function h3(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!yu(n.position[e],t.position[e]))return!1;return!0}class Xy{constructor(t,e="asc"){this.field=t,this.dir=e}}function rY(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class f3{}class Dn extends f3{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new sY(t,e,i):"array-contains"===e?new lY(t,i):"in"===e?new v3(t,i):"not-in"===e?new cY(t,i):"array-contains-any"===e?new uY(t,i):new Dn(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new oY(t,i):new aY(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(sp(e,this.value)):null!==e&&rp(this.value)===rp(e)&&this.matchesComparison(sp(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Jn extends f3{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new Jn(t,e)}matches(t){return ev(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft(e=>e.isInequality());return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function ev(n){return"and"===n.op}function wP(n){return"or"===n.op}function CP(n){return p3(n)&&ev(n)}function p3(n){for(const t of n.filters)if(t instanceof Jn)return!1;return!0}function EP(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+Jy(n.value);if(CP(n))return n.filters.map(t=>EP(t)).join(",");{const t=n.filters.map(e=>EP(e)).join(",");return`${n.op}(${t})`}}function m3(n,t){return n instanceof Dn?(e=n,(i=t)instanceof Dn&&e.op===i.op&&e.field.isEqual(i.field)&&yu(e.value,i.value)):n instanceof Jn?function(e,i){return i instanceof Jn&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,s,c)=>r&&m3(s,i.filters[c]),!0)}(n,t):void mt();var e,i}function g3(n,t){const e=n.filters.concat(t);return Jn.create(e,n.op)}function _3(n){return n instanceof Dn?`${(t=n).field.canonicalString()} ${t.op} ${Jy(t.value)}`:n instanceof Jn?function(t){return t.op.toString()+" {"+t.getFilters().map(_3).join(" ,")+"}"}(n):"Filter";var t}class sY extends Dn{constructor(t,e,i){super(t,e,i),this.key=it.fromName(i.referenceValue)}matches(t){const e=it.comparator(t.key,this.key);return this.matchesComparison(e)}}class oY extends Dn{constructor(t,e){super(t,"in",e),this.keys=y3(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class aY extends Dn{constructor(t,e){super(t,"not-in",e),this.keys=y3(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function y3(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>it.fromName(i.referenceValue))}class lY extends Dn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return jw(e)&&Hw(e.arrayValue,this.value)}}class v3 extends Dn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Hw(this.value.arrayValue,e)}}class cY extends Dn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Hw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Hw(this.value.arrayValue,e)}}class uY extends Dn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!jw(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Hw(this.value.arrayValue,i))}}class dY{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.dt=null}}function TP(n,t=null,e=[],i=[],r=null,s=null,c=null){return new dY(n,t,e,i,r,s,c)}function Ig(n){const t=st(n);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>EP(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Bw(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Jy(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Jy(i)).join(",")),t.dt=e}return t.dt}function zw(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!rY(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!m3(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!h3(n.startAt,t.startAt)&&h3(n.endAt,t.endAt)}function bS(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wS(n,t){return n.filters.filter(e=>e instanceof Dn&&e.field.isEqual(t))}function b3(n,t,e){let i=_S,r=!0;for(const s of wS(n,t)){let c=_S,d=!0;switch(s.op){case"<":case"<=":c=nY(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=_S}l3({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];l3({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function w3(n,t,e){let i=ip,r=!0;for(const s of wS(n,t)){let c=ip,d=!0;switch(s.op){case">=":case">":c=iY(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=ip}c3({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];c3({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class Hd{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function C3(n,t,e,i,r,s,c,d){return new Hd(n,t,e,i,r,s,c,d)}function tv(n){return new Hd(n)}function E3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function DP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function CS(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function IP(n){return null!==n.collectionGroup}function Sg(n){const t=st(n);if(null===t.wt){t.wt=[];const e=CS(t),i=DP(t);if(null!==e&&null===i)e.isKeyField()||t.wt.push(new Xy(e)),t.wt.push(new Xy(sr.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Xy(sr.keyField(),s))}}}return t.wt}function fo(n){const t=st(n);if(!t._t)if("F"===t.limitType)t._t=TP(t.path,t.collectionGroup,Sg(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Sg(t))e.push(new Xy(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new op(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new op(t.startAt.position,t.startAt.inclusive):null;t._t=TP(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function SP(n,t){t.getFirstInequalityField(),CS(n);const e=n.filters.concat([t]);return new Hd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function ES(n,t,e){return new Hd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function $w(n,t){return zw(fo(n),fo(t))&&n.limitType===t.limitType}function T3(n){return`${Ig(fo(n))}|lt:${n.limitType}`}function xP(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>_3(i)).join(", ")}]`),Bw(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Jy(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Jy(i)).join(",")),`Target(${e})`}(fo(n))}; limitType=${n.limitType})`}function qw(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):it.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of Sg(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=d3(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,Sg(e),i)||e.endAt&&!function(r,s,c){const d=d3(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,Sg(e),i)));var e,i}function D3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function I3(n){return(t,e)=>{let i=!1;for(const r of Sg(n)){const s=hY(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function hY(n,t,e){const i=n.field.isKeyField()?it.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),f=c.data.field(r);return null!==d&&null!==f?sp(d,f):mt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return mt()}}class jd{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ep(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return e3(this.inner)}size(){return this.innerSize}}const fY=new wi(it.comparator);function Uo(){return fY}const S3=new wi(it.comparator);function Ww(...n){let t=S3;for(const e of n)t=t.insert(e.key,e);return t}function x3(n){let t=S3;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function vu(){return Zw()}function M3(){return Zw()}function Zw(){return new jd(n=>n.toString(),(n,t)=>n.isEqual(t))}const pY=new wi(it.comparator),mY=new Ri(it.comparator);function cn(...n){let t=mY;for(const e of n)t=t.add(e);return t}const gY=new Ri(Qt);function MP(){return gY}function A3(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vw(t)?"-0":t}}function k3(n){return{integerValue:""+n}}function R3(n,t){return qj(t)?k3(t):A3(n,t)}class TS{constructor(){this._=void 0}}function _Y(n,t,e){return n instanceof nv?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&mS(r)&&(r=gS(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof xg?P3(n,t):n instanceof Mg?N3(n,t):function(i,r){const s=O3(i,r),c=F3(s)+F3(i.gt);return bP(s)&&bP(i.gt)?k3(c):A3(i.serializer,c)}(n,t)}function yY(n,t,e){return n instanceof xg?P3(n,t):n instanceof Mg?N3(n,t):e}function O3(n,t){return n instanceof iv?bP(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class nv extends TS{}class xg extends TS{constructor(t){super(),this.elements=t}}function P3(n,t){const e=L3(t);for(const i of n.elements)e.some(r=>yu(r,i))||e.push(i);return{arrayValue:{values:e}}}class Mg extends TS{constructor(t){super(),this.elements=t}}function N3(n,t){let e=L3(t);for(const i of n.elements)e=e.filter(r=>!yu(r,i));return{arrayValue:{values:e}}}class iv extends TS{constructor(t,e){super(),this.serializer=t,this.gt=e}}function F3(n){return or(n.integerValue||n.doubleValue)}function L3(n){return jw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Yw{constructor(t,e){this.field=t,this.transform=e}}class bY{constructor(t,e){this.version=t,this.transformResults=e}}class Gi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Gi}static exists(t){return new Gi(void 0,t)}static updateTime(t){return new Gi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function DS(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class IS{}function B3(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new sv(n.key,Gi.none()):new rv(n.key,n.data,Gi.none());{const e=n.data,i=As.empty();let r=new Ri(sr.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new Gd(n.key,i,new Vo(r.toArray()),Gi.none())}}function wY(n,t,e){n instanceof rv?function(i,r,s){const c=i.value.clone(),d=H3(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof Gd?function(i,r,s){if(!DS(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=H3(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(U3(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function Kw(n,t,e,i){return n instanceof rv?function(r,s,c,d){if(!DS(r.precondition,s))return c;const f=r.value.clone(),_=j3(r.fieldTransforms,d,s);return f.setAll(_),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof Gd?function(r,s,c,d){if(!DS(r.precondition,s))return c;const f=j3(r.fieldTransforms,d,s),_=s.data;return _.setAll(U3(r)),_.setAll(f),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,t,e,i):(c=e,DS(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function CY(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=O3(i.transform,r||null);null!=s&&(null===e&&(e=As.empty()),e.set(i.field,s))}return e||null}function V3(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Ky(e,i,(r,s)=>function vY(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof xg&&i instanceof xg||e instanceof Mg&&i instanceof Mg?Ky(e.elements,i.elements,yu):e instanceof iv&&i instanceof iv?yu(e.gt,i.gt):e instanceof nv&&i instanceof nv);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class rv extends IS{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gd extends IS{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function U3(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function H3(n,t,e){const i=new Map;xt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,yY(c,d,e[r]))}return i}function j3(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,_Y(s,c,t))}return i}class sv extends IS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AP extends IS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kP{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&wY(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Kw(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Kw(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=M3();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const f=B3(c,d);null!==f&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(At.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),cn())}isEqual(t){return this.batchId===t.batchId&&Ky(this.mutations,t.mutations,(e,i)=>V3(e,i))&&Ky(this.baseMutations,t.baseMutations,(e,i)=>V3(e,i))}}class RP{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){xt(t.mutations.length===i.length);let r=pY;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new RP(t,e,i,r)}}class OP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class TY{constructor(t,e){this.count=t,this.unchangedNames=e}}var Dr,kn;function G3(n){switch(n){default:return mt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function z3(n){if(void 0===n)return fr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Dr.OK:return ge.OK;case Dr.CANCELLED:return ge.CANCELLED;case Dr.UNKNOWN:return ge.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return ge.INTERNAL;case Dr.UNAVAILABLE:return ge.UNAVAILABLE;case Dr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Dr.NOT_FOUND:return ge.NOT_FOUND;case Dr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Dr.ABORTED:return ge.ABORTED;case Dr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Dr.DATA_LOSS:return ge.DATA_LOSS;default:return mt()}}(kn=Dr||(Dr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";class PP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return SS}static getOrCreateInstance(){return null===SS&&(SS=new PP),SS}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(t))}}let SS=null;function $3(){return new TextEncoder}const DY=new Zy([4294967295,4294967295],0);function q3(n){const t=$3().encode(n),e=new y9;return e.update(t),new Uint8Array(e.digest())}function W3(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Zy([e,i],0),new Zy([r,s],0)]}class NP{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Qw(`Invalid padding: ${e}`);if(i<0)throw new Qw(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new Qw(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new Qw(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=Zy.fromNumber(this.It)}Et(t,e,i){let r=t.add(e.multiply(Zy.fromNumber(i)));return 1===r.compare(DY)&&(r=new Zy([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=q3(t),[i,r]=W3(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(i,r,s);if(!this.At(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),c=new NP(s,r,e);return i.forEach(d=>c.insert(d)),c}insert(t){if(0===this.It)return;const e=q3(t),[i,r]=W3(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(i,r,s);this.Rt(c)}}Rt(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class Qw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jw{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Xw.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Jw(At.min(),r,new wi(Qt),Uo(),cn())}}class Xw{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Xw(i,e,cn(),cn(),cn())}}class xS{constructor(t,e,i,r){this.Pt=t,this.removedTargetIds=e,this.key=i,this.bt=r}}class Z3{constructor(t,e){this.targetId=t,this.Vt=e}}class Y3{constructor(t,e,i=Hr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class K3{constructor(){this.St=0,this.Dt=J3(),this.Ct=Hr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=cn(),e=cn(),i=cn();return this.Dt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:mt()}}),new Xw(this.Ct,this.xt,t,e,i)}Ft(){this.Nt=!1,this.Dt=J3()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class IY{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=Uo(),this.zt=Q3(),this.Wt=new wi(Qt)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,e=>{const i=this.Zt(e);switch(t.state){case 0:this.te(e)&&i.$t(t.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(t.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(e);break;case 3:this.te(e)&&(i.Kt(),i.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),i.$t(t.resumeToken));break;default:mt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach((i,r)=>{this.te(r)&&e(r)})}ne(t){var e;const i=t.targetId,r=t.Vt.count,s=this.se(i);if(s){const c=s.target;if(bS(c))if(0===r){const d=new it(c.path);this.Yt(i,d,Oi.newNoDocument(d,At.min()))}else xt(1===r);else{const d=this.ie(i);if(d!==r){const f=this.re(t,d);0!==f&&(this.ee(i),this.Wt=this.Wt.insert(i,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=PP.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(_,b,D){var M,R,U,q,J,we;const He={localCacheCount:b,existenceFilterCount:D.count},Ge=D.unchangedNames;return Ge&&(He.bloomFilter={applied:0===_,hashCount:null!==(M=Ge?.hashCount)&&void 0!==M?M:0,bitmapLength:null!==(q=null===(U=null===(R=Ge?.bits)||void 0===R?void 0:R.bitmap)||void 0===U?void 0:U.length)&&void 0!==q?q:0,padding:null!==(we=null===(J=Ge?.bits)||void 0===J?void 0:J.padding)&&void 0!==we?we:0}),He}(f,d,t.Vt))}}}}re(t,e){const{unchangedNames:i,count:r}=t.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:c=0},hashCount:d=0}=i;let f,_;try{f=Ud(s).toUint8Array()}catch(b){if(b instanceof n3)return Ya("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{_=new NP(f,c,d)}catch(b){return Ya(b instanceof Qw?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===_.It?1:r!==e-this.oe(t.targetId,_)?2:0}oe(t,e){const i=this.Gt.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const c=this.Gt.ue(),d=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;e.vt(d)||(this.Yt(t,s,null),r++)}),r}ce(t){const e=new Map;this.Qt.forEach((s,c)=>{const d=this.se(c);if(d){if(s.current&&bS(d.target)){const f=new it(d.target.path);null!==this.jt.get(f)||this.ae(c,f)||this.Yt(c,f,Oi.newNoDocument(f,t))}s.Mt&&(e.set(c,s.Ot()),s.Ft())}});let i=cn();this.zt.forEach((s,c)=>{let d=!0;c.forEachWhile(f=>{const _=this.se(f);return!_||"TargetPurposeLimboResolution"===_.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.jt.forEach((s,c)=>c.setReadTime(t));const r=new Jw(t,e,this.Wt,this.jt,i);return this.jt=Uo(),this.zt=Q3(),this.Wt=new wi(Qt),r}Jt(t,e){if(!this.te(t))return;const i=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,i),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,i){if(!this.te(t))return;const r=this.Zt(t);this.ae(t,e)?r.Bt(e,1):r.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),i&&(this.jt=this.jt.insert(e,i))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new K3,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Ri(Qt),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||je("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new K3),this.Gt.getRemoteKeysForTarget(t).forEach(e=>{this.Yt(t,e,null)})}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function Q3(){return new wi(it.comparator)}function J3(){return new wi(it.comparator)}const SY={asc:"ASCENDING",desc:"DESCENDING"},xY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MY={and:"AND",or:"OR"};class AY{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function FP(n,t){return n.useProto3Json||Bw(t)?t:{value:t}}function ov(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function X3(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function kY(n,t){return ov(n,t.toTimestamp())}function pr(n){return xt(!!n),At.fromTimestamp(function(t){const e=tp(t);return new ji(e.seconds,e.nanos)}(n))}function LP(n,t){return(e=n,new An(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function eG(n){const t=An.fromString(n);return xt(cG(t)),t}function eC(n,t){return LP(n.databaseId,t.path)}function bu(n,t){const e=eG(t);if(e.get(1)!==n.databaseId.projectId)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new it(nG(e))}function BP(n,t){return LP(n.databaseId,t)}function tG(n){const t=eG(n);return 4===t.length?An.emptyPath():nG(t)}function tC(n){return new An(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nG(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function iG(n,t,e){return{name:eC(n,t),fields:e.value.mapValue.fields}}function rG(n,t,e){const i=bu(n,t.name),r=pr(t.updateTime),s=t.createTime?pr(t.createTime):At.min(),c=new As({mapValue:{fields:t.fields}}),d=Oi.newFoundDocument(i,r,s,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function nC(n,t){let e;if(t instanceof rv)e={update:iG(n,t.key,t.value)};else if(t instanceof sv)e={delete:eC(n,t.key)};else if(t instanceof Gd)e={update:iG(n,t.key,t.data),updateMask:VY(t.fieldMask)};else{if(!(t instanceof AP))return mt();e={verify:eC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof nv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Mg)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof iv)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw mt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:kY(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:mt()),e;var r}function VP(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Gi.updateTime(pr(r.updateTime)):void 0!==r.exists?Gi.exists(r.exists):Gi.none():Gi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),d=new nv):"appendMissingElements"in c?d=new xg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Mg(c.removeAllFromArray.values||[]):"increment"in c?d=new iv(s,c.increment):mt();const f=sr.fromServerFormat(c.fieldPath);return new Yw(f,d)}(n,r)):[];var r;if(t.update){const r=bu(n,t.update.name),s=new As({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Vo((t.updateMask.fieldPaths||[]).map(_=>sr.fromServerFormat(_)));return new Gd(r,s,c,e,i)}return new rv(r,s,e,i)}if(t.delete){const r=bu(n,t.delete);return new sv(r,e)}if(t.verify){const r=bu(n,t.verify);return new AP(r,e)}return mt()}function sG(n,t){return{documents:[BP(n,t.path)]}}function UP(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=BP(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=BP(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0!==f.length)return lG(Jn.create(f,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const s=function(f){if(0!==f.length)return f.map(_=>{return{field:ap((b=_).field),direction:FY(b.dir)};var b})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=FP(n,t.limit);var d,f;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(f=t.endAt).inclusive,values:f.position}),e}function oG(n){let t=tG(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){xt(1===i);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let s=[];e.where&&(s=function(b){const D=aG(b);return D instanceof Jn&&CP(D)?D.getFilters():[D]}(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(b=>{return new Xy(av((D=b).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;e.limit&&(d=function(b){let D;return D="object"==typeof b?b.value:b,Bw(D)?null:D}(e.limit));let f=null;var b;e.startAt&&(f=new op((b=e.startAt).values||[],!!b.before));let _=null;return e.endAt&&(_=function(b){return new op(b.values||[],!b.before)}(e.endAt)),C3(t,r,c,s,d,"F",f,_)}function aG(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=av(t.unaryFilter.field);return Dn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=av(t.unaryFilter.field);return Dn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=av(t.unaryFilter.field);return Dn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=av(t.unaryFilter.field);return Dn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(n):void 0!==n.fieldFilter?Dn.create(av((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Jn.create(t.compositeFilter.filters.map(e=>aG(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return mt()}}(t.compositeFilter.op))}(n):mt();var t}function FY(n){return SY[n]}function LY(n){return xY[n]}function BY(n){return MY[n]}function ap(n){return{fieldPath:n.canonicalString()}}function av(n){return sr.fromServerFormat(n.fieldPath)}function lG(n){return n instanceof Dn?function(t){if("=="===t.op){if(o3(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NAN"}};if(s3(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(o3(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NOT_NAN"}};if(s3(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ap(t.field),op:LY(t.op),value:t.value}}}(n):n instanceof Jn?function(t){const e=t.getFilters().map(i=>lG(i));return 1===e.length?e[0]:{compositeFilter:{op:BY(t.op),filters:e}}}(n):mt()}function VY(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function cG(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class zd{constructor(t,e,i,r,s=At.min(),c=At.min(),d=Hr.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(t){return new zd(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class uG{constructor(t){this.fe=t}}function dG(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:MS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:eC(r=n.fe,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:ov(r,s.version.toTimestamp()),createTime:ov(r,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Ag(t.version)};else{if(!t.isUnknownDocument())return mt();i.unknownDocument={path:e.path.toArray(),version:Ag(t.version)}}var r,s;return i}function MS(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Ag(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function kg(n){const t=new ji(n.seconds,n.nanoseconds);return At.fromTimestamp(t)}function Rg(n,t){const e=(t.baseMutations||[]).map(s=>VP(n.fe,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>VP(n.fe,s)),r=ji.fromMillis(t.localWriteTimeMs);return new kP(t.batchId,r,e,i)}function iC(n){const t=kg(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?kg(n.lastLimboFreeSnapshotVersion):At.min();let i;var r;return void 0!==n.query.documents?(xt(1===(r=n.query).documents.length),i=fo(tv(tG(r.documents[0])))):i=fo(oG(n.query)),new zd(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Hr.fromBase64String(n.resumeToken))}function hG(n,t){const e=Ag(t.snapshotVersion),i=Ag(t.lastLimboFreeSnapshotVersion);let r;r=bS(t.target)?sG(n.fe,t.target):UP(n.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ig(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function HP(n){const t=oG({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ES(t,t.limit,"L"):t}function jP(n,t){return new OP(t.largestBatchId,VP(n.fe,t.overlayMutation))}function fG(n,t){const e=t.path.lastSegment();return[n,$s(t.path.popLast()),e]}function pG(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Ag(i.readTime),documentKey:$s(i.documentKey.path),largestBatchId:i.largestBatchId}}class HY{getBundleMetadata(t,e){return mG(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:kg(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return mG(t).put({bundleId:(i=e).id,createTime:Ag(pr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return gG(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:HP(r.bundledQuery),readTime:kg(r.readTime)};var r})}saveNamedQuery(t,e){return gG(t).put({name:(i=e).name,readTime:Ag(pr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function mG(n){return ls(n,"bundles")}function gG(n){return ls(n,"namedQueries")}class AS{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){return new AS(t,e.uid||"")}getOverlay(t,e){return rC(t).get(fG(this.userId,e)).next(i=>i?jP(this.serializer,i):null)}getOverlays(t,e){const i=vu();return de.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new OP(e,c);r.push(this.we(t,d))}),de.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add($s(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(rC(t).J("collectionPathOverlayIndex",d))}),de.waitFor(s)}getOverlaysForCollection(t,e,i){const r=vu(),s=$s(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return rC(t).j("collectionPathOverlayIndex",c).next(d=>{for(const f of d){const _=jP(this.serializer,f);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=vu();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return rC(t).X({index:"collectionGroupOverlayIndex",range:d},(f,_,b)=>{const D=jP(this.serializer,_);s.size()<r||D.largestBatchId===c?(s.set(D.getKey(),D),c=D.largestBatchId):b.done()}).next(()=>s)}we(t,e){return rC(t).put(function(i,r,s){const[c,d,f]=fG(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:nC(i.fe,s.mutation)}}(this.serializer,this.userId,e))}}function rC(n){return ls(n,"documentOverlays")}class Og{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(or(t.integerValue));else if("doubleValue"in t){const i=or(t.doubleValue);isNaN(i)?this.ye(e,13):(this.ye(e,15),Vw(i)?e.pe(0):e.pe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ye(e,20),"string"==typeof i?e.Ie(i):(e.Ie(`${i.seconds||""}`),e.pe(i.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(Ud(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ye(e,45),e.pe(i.latitude||0),e.pe(i.longitude||0)}else"mapValue"in t?a3(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):mt()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const i=t.fields||{};this.ye(e,55);for(const r of Object.keys(i))this.Te(r,e),this.me(i[r],e)}Pe(t,e){const i=t.values||[];this.ye(e,50);for(const r of i)this.me(r,e)}ve(t,e){this.ye(e,37),it.fromName(t).path.forEach(i=>{this.ye(e,60),this.be(i,e)})}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function jY(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function _G(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=jY(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Og.Ve=new Og;class GY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.De(i.value),i=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ne(i.value),i=e.next();this.ke()}Me(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=e.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=e.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(t){const e=this.Fe(t),i=_G(e);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Le(t){const e=this.Fe(t),i=_G(e);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class zY{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class $Y{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class sC{constructor(){this.je=new GY,this.ze=new zY(this.je),this.We=new $Y(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Pg{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Pg(this.indexId,this.documentKey,this.arrayValue,i)}}function lp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=yG(n.arrayValue,t.arrayValue),0!==e?e:(e=yG(n.directionalValue,t.directionalValue),0!==e?e:it.comparator(n.documentKey,t.documentKey)))}function yG(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class qY{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const i=e;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(t){xt(t.collectionGroup===this.collectionId);const e=pP(t);if(void 0!==e&&!this.en(e))return!1;const i=Eg(t);let r=new Set,s=0,c=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const d=i[s];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[c++],d))return!1}++s}for(;s<i.length;++s){const d=i[s];if(c>=this.Ye.length||!this.sn(this.Ye[c++],d))return!1}return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function vG(n){var t,e;if(xt(n instanceof Dn||n instanceof Jn),n instanceof Dn){if(n instanceof v3){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>Dn.create(n.field,"==",s)))||[];return Jn.create(r,"or")}return n}const i=n.filters.map(r=>vG(r));return Jn.create(i,n.op)}function WY(n){if(0===n.getFilters().length)return[];const t=$P(vG(n));return xt(bG(t)),GP(t)||zP(t)?[t]:t.getFilters()}function GP(n){return n instanceof Dn}function zP(n){return n instanceof Jn&&CP(n)}function bG(n){return GP(n)||zP(n)||function(t){if(t instanceof Jn&&wP(t)){for(const e of t.getFilters())if(!GP(e)&&!zP(e))return!1;return!0}return!1}(n)}function $P(n){if(xt(n instanceof Dn||n instanceof Jn),n instanceof Dn)return n;if(1===n.filters.length)return $P(n.filters[0]);const t=n.filters.map(i=>$P(i));let e=Jn.create(t,n.op);return e=kS(e),bG(e)?e:(xt(e instanceof Jn),xt(ev(e)),xt(e.filters.length>1),e.filters.reduce((i,r)=>qP(i,r)))}function qP(n,t){let e;return xt(n instanceof Dn||n instanceof Jn),xt(t instanceof Dn||t instanceof Jn),e=n instanceof Dn?t instanceof Dn?Jn.create([n,t],"and"):wG(n,t):t instanceof Dn?wG(t,n):function(i,r){if(xt(i.filters.length>0&&r.filters.length>0),ev(i)&&ev(r))return g3(i,r.getFilters());const s=wP(i)?i:r,c=wP(i)?r:i,d=s.filters.map(f=>qP(f,c));return Jn.create(d,"or")}(n,t),kS(e)}function wG(n,t){if(ev(t))return g3(t,n.getFilters());{const e=t.filters.map(i=>qP(n,i));return Jn.create(e,"or")}}function kS(n){if(xt(n instanceof Dn||n instanceof Jn),n instanceof Dn)return n;const t=n.getFilters();if(1===t.length)return kS(t[0]);if(p3(n))return n;const e=t.map(r=>kS(r)),i=[];return e.forEach(r=>{r instanceof Dn?i.push(r):r instanceof Jn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Jn.create(i,n.op)}class ZY{constructor(){this.rn=new WP}addToCollectionParentIndex(t,e){return this.rn.add(e),de.resolve()}getCollectionParents(t,e){return de.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return de.resolve()}deleteFieldIndex(t,e){return de.resolve()}getDocumentsMatchingTarget(t,e){return de.resolve(null)}getIndexType(t,e){return de.resolve(0)}getFieldIndexes(t,e){return de.resolve([])}getNextCollectionGroupToUpdate(t){return de.resolve(null)}getMinOffset(t,e){return de.resolve(da.min())}getMinOffsetFromCollectionGroup(t,e){return de.resolve(da.min())}updateCollectionGroup(t,e,i){return de.resolve()}updateIndexEntries(t,e){return de.resolve()}}class WP{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Ri(An.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ri(An.comparator)).toArray()}}const RS=new Uint8Array(0);class YY{constructor(t,e){this.user=t,this.databaseId=e,this.on=new WP,this.un=new jd(i=>Ig(i),(i,r)=>zw(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.on.add(e)});const s={collectionId:i,parent:$s(r)};return CG(t).put(s)}return de.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[Uj(e),""],!1,!0);return CG(t).j(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(_u(c.parent))}return i})}addFieldIndex(t,e){const i=OS(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=aC(t);return s.next(d=>{c.put(pG(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=OS(t),r=aC(t),s=oC(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=oC(t);let r=!0;const s=new Map;return de.forEach(this.cn(e),c=>this.an(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=cn();const d=[];return de.forEach(s,(f,_)=>{var b;je("IndexedDbIndexManager",`Using index ${b=f,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ge=>`${Ge.fieldPath}:${Ge.kind}`).join(",")}`} to execute ${Ig(e)}`);const D=function(Ge,Ye){const Ut=pP(Ye);if(void 0===Ut)return null;for(const Ht of wS(Ge,Ut.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(_,f),M=function(Ge,Ye){const Ut=new Map;for(const Ht of Eg(Ye))for(const Sn of wS(Ge,Ht.fieldPath))switch(Sn.op){case"==":case"in":Ut.set(Ht.fieldPath.canonicalString(),Sn.value);break;case"not-in":case"!=":return Ut.set(Ht.fieldPath.canonicalString(),Sn.value),Array.from(Ut.values())}return null}(_,f),R=function(Ge,Ye){const Ut=[];let Ht=!0;for(const Sn of Eg(Ye)){const Xi=0===Sn.kind?b3(Ge,Sn.fieldPath,Ge.startAt):w3(Ge,Sn.fieldPath,Ge.startAt);Ut.push(Xi.value),Ht&&(Ht=Xi.inclusive)}return new op(Ut,Ht)}(_,f),U=function(Ge,Ye){const Ut=[];let Ht=!0;for(const Sn of Eg(Ye)){const Xi=0===Sn.kind?w3(Ge,Sn.fieldPath,Ge.endAt):b3(Ge,Sn.fieldPath,Ge.endAt);Ut.push(Xi.value),Ht&&(Ht=Xi.inclusive)}return new op(Ut,Ht)}(_,f),q=this.hn(f,_,R),J=this.hn(f,_,U),we=this.ln(f,_,M),He=this.fn(f.indexId,D,q,R.inclusive,J,U.inclusive,we);return de.forEach(He,Ge=>i.H(Ge,e.limit).next(Ye=>{Ye.forEach(Ut=>{const Ht=it.fromSegments(Ut.documentKey);c.has(Ht)||(c=c.add(Ht),d.push(Ht))})}))}).next(()=>d)}return de.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:WY(Jn.create(t.filters,"and")).map(i=>TP(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}fn(t,e,i,r,s,c,d){const f=(null!=e?e.length:1)*Math.max(i.length,s.length),_=f/(null!=e?e.length:1),b=[];for(let D=0;D<f;++D){const M=e?this.dn(e[D/_]):RS,R=this.wn(t,M,i[D%_],r),U=this._n(t,M,s[D%_],c),q=d.map(J=>this.wn(t,M,J,!0));b.push(...this.createRange(R,U,q))}return b}wn(t,e,i,r){const s=new Pg(t,it.empty(),e,i);return r?s:s.Je()}_n(t,e,i,r){const s=new Pg(t,it.empty(),e,i);return r?s.Je():s}an(t,e){const i=new qY(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.tn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;const r=this.cn(e);return de.forEach(r,s=>this.an(t,s).next(c=>{c?0!==i&&c.fields.length<function(d){let f=new Ri(sr.comparator),_=!1;for(const b of d.filters)for(const D of b.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?_=!0:f=f.add(D.field));for(const b of d.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(_?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}mn(t,e){const i=new sC;for(const r of Eg(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.He(r.kind);Og.Ve._e(s,c)}return i.Qe()}dn(t){const e=new sC;return Og.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const i=new sC;return Og.Ve._e(Dg(this.databaseId,e),i.He(function(r){const s=Eg(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Qe()}ln(t,e,i){if(null===i)return[];let r=[];r.push(new sC);let s=0;for(const c of Eg(t)){const d=i[s++];for(const f of r)if(this.yn(e,c.fieldPath)&&jw(d))r=this.pn(r,c,d);else{const _=f.He(c.kind);Og.Ve._e(d,_)}}return this.In(r)}hn(t,e,i){return this.ln(t,e,i.position)}In(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Qe();return e}pn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const f=new sC;f.seed(d.Qe()),Og.Ve._e(c,f.He(e.kind)),s.push(f)}return s}yn(t,e){return!!t.filters.find(i=>i instanceof Dn&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=OS(t),r=aC(t);return(e?i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.j()).next(s=>{const c=[];return de.forEach(s,d=>r.get([d.indexId,this.uid]).next(f=>{c.push(function(_,b){const D=b?new Fw(b.sequenceNumber,new da(kg(b.readTime),new it(_u(b.documentKey)),b.largestBatchId)):Fw.empty(),M=_.fields.map(([R,U])=>new dS(sr.fromServerFormat(R),U));return new uS(_.indexId,_.collectionGroup,M,D)}(d,f))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Qt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=OS(t),s=aC(t);return this.Tn(t).next(c=>r.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>de.forEach(d,f=>s.put(pG(f.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return de.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),de.forEach(d,f=>this.En(t,r,f).next(_=>{const b=this.An(s,f);return _.isEqual(b)?de.resolve():this.vn(t,s,f,_,b)}))))})}Rn(t,e,i,r){return oC(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,i,r){return oC(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,e.key),e.key.path.toArray()])}En(t,e,i){const r=oC(t);let s=new Ri(lp);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,e)])},(c,d)=>{s=s.add(new Pg(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}An(t,e){let i=new Ri(lp);const r=this.mn(e,t);if(null==r)return i;const s=pP(e);if(null!=s){const c=t.data.field(s.fieldPath);if(jw(c))for(const d of c.arrayValue.values||[])i=i.add(new Pg(e.indexId,t.key,this.dn(d),r))}else i=i.add(new Pg(e.indexId,t.key,RS,r));return i}vn(t,e,i,r,s){je("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,f,_,b,D){const M=d.getIterator(),R=f.getIterator();let U=Qy(M),q=Qy(R);for(;U||q;){let J=!1,we=!1;if(U&&q){const He=_(U,q);He<0?we=!0:He>0&&(J=!0)}else null!=U?we=!0:J=!0;J?(b(q),q=Qy(R)):we?(D(U),U=Qy(M)):(U=Qy(M),q=Qy(R))}}(r,s,lp,d=>{c.push(this.Rn(t,e,i,d))},d=>{c.push(this.Pn(t,e,i,d))}),de.waitFor(c)}Tn(t){let e=1;return aC(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>lp(c,d)).filter((c,d,f)=>!d||0!==lp(c,f[d-1]));const r=[];r.push(t);for(const c of i){const d=lp(c,t),f=lp(c,e);if(0===d)r[0]=t.Je();else if(d>0&&f<0)r.push(c),r.push(c.Je());else if(f>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2){if(this.bn(r[c],r[c+1]))return[];s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,RS,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,RS,[]]))}return s}bn(t,e){return lp(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(EG)}getMinOffset(t,e){return de.mapArray(this.cn(e),i=>this.an(t,i).next(r=>r||mt())).next(EG)}}function CG(n){return ls(n,"collectionParents")}function oC(n){return ls(n,"indexEntries")}function OS(n){return ls(n,"indexConfiguration")}function aC(n){return ls(n,"indexState")}function EG(n){xt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;mP(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new da(t.readTime,t.documentKey,e)}const TG={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qs{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new qs(t,qs.DEFAULT_COLLECTION_PERCENTILE,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function DG(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const f=i.X({range:c},(b,D,M)=>(d++,M.delete()));s.push(f.next(()=>{xt(1===d)}));const _=[];for(const b of e.mutations){const D=Yj(t,b.key.path,e.batchId);s.push(r.delete(D)),_.push(b.key)}return de.waitFor(s).next(()=>_)}function PS(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw mt();t=n.noDocument}return JSON.stringify(t).length}qs.DEFAULT_COLLECTION_PERCENTILE=10,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qs.DEFAULT=new qs(41943040,qs.DEFAULT_COLLECTION_PERCENTILE,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qs.DISABLED=new qs(-1,0,0);class NS{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(t,e,i,r){xt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new NS(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cp(t).X({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=lv(t),c=cp(t);return c.add({}).next(d=>{xt("number"==typeof d);const f=new kP(d,e,i,r),_=function(M,R,U){const q=U.baseMutations.map(we=>nC(M.fe,we)),J=U.mutations.map(we=>nC(M.fe,we));return{userId:R,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:q,mutations:J}}(this.serializer,this.userId,f),b=[];let D=new Ri((M,R)=>Qt(M.canonicalString(),R.canonicalString()));for(const M of r){const R=Yj(this.userId,M.key.path,d);D=D.add(M.key.path.popLast()),b.push(c.put(_)),b.push(s.put(R,F9))}return D.forEach(M=>{b.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.Vn[d]=f.keys()}),de.waitFor(b).next(()=>f)})}lookupMutationBatch(t,e){return cp(t).get(e).next(i=>i?(xt(i.userId===this.userId),Rg(this.serializer,i)):null)}Sn(t,e){return this.Vn[e]?de.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Vn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return cp(t).X({index:"userMutationsIndex",range:r},(c,d,f)=>{d.userId===this.userId&&(xt(d.batchId>=i),s=Rg(this.serializer,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return cp(t).X({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cp(t).j("userMutationsIndex",e).next(i=>i.map(r=>Rg(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=fS(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return lv(t).X({range:r},(c,d,f)=>{const[_,b,D]=c,M=_u(b);if(_===this.userId&&e.path.isEqual(M))return cp(t).get(D).next(R=>{if(!R)throw mt();xt(R.userId===this.userId),s.push(Rg(this.serializer,R))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ri(Qt);const r=[];return e.forEach(s=>{const c=fS(this.userId,s.path),d=IDBKeyRange.lowerBound(c),f=lv(t).X({range:d},(_,b,D)=>{const[M,R,U]=_,q=_u(R);M===this.userId&&s.path.isEqual(q)?i=i.add(U):D.done()});r.push(f)}),de.waitFor(r).next(()=>this.Dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=fS(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new Ri(Qt);return lv(t).X({range:c},(f,_,b)=>{const[D,M,R]=f,U=_u(M);D===this.userId&&i.isPrefixOf(U)?U.length===r&&(d=d.add(R)):b.done()}).next(()=>this.Dn(t,d))}Dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(cp(t).get(s).next(c=>{if(null===c)throw mt();xt(c.userId===this.userId),i.push(Rg(this.serializer,c))}))}),de.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return DG(t.ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Cn(e.batchId)}),de.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return de.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return lv(t).X({range:i},(s,c,d)=>{if(s[0]===this.userId){const f=_u(s[1]);r.push(f)}else d.done()}).next(()=>{xt(0===r.length)})})}containsKey(t,e){return IG(t,this.userId,e)}xn(t){return SG(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function IG(n,t,e){const i=fS(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return lv(n).X({range:s,Y:!0},(d,f,_)=>{const[b,D,M]=d;b===t&&D===r&&(c=!0),_.done()}).next(()=>c)}function cp(n){return ls(n,"mutations")}function lv(n){return ls(n,"documentMutations")}function SG(n){return ls(n,"mutationQueues")}class Ng{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new Ng(0)}static Mn(){return new Ng(-1)}}class KY{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next(e=>{const i=new Ng(e.highestTargetId);return e.highestTargetId=i.next(),this.On(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.$n(t).next(e=>At.fromTimestamp(new ji(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.$n(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.$n(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.On(t,r)))}addTargetData(t,e){return this.Fn(t,e).next(()=>this.$n(t).next(i=>(i.targetCount+=1,this.Bn(e,i),this.On(t,i))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>cv(t).delete(e.targetId)).next(()=>this.$n(t)).next(i=>(xt(i.targetCount>0),i.targetCount-=1,this.On(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return cv(t).X((c,d)=>{const f=iC(d);f.sequenceNumber<=e&&null===i.get(f.targetId)&&(r++,s.push(this.removeTargetData(t,f)))}).next(()=>de.waitFor(s)).next(()=>r)}forEachTarget(t,e){return cv(t).X((i,r)=>{const s=iC(r);e(s)})}$n(t){return xG(t).get("targetGlobalKey").next(e=>(xt(null!==e),e))}On(t,e){return xG(t).put("targetGlobalKey",e)}Fn(t,e){return cv(t).put(hG(this.serializer,e))}Bn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.$n(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Ig(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return cv(t).X({range:r,index:"queryTargetsIndex"},(c,d,f)=>{const _=iC(d);zw(e,_.target)&&(s=_,f.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=up(t);return e.forEach(c=>{const d=$s(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),de.waitFor(r)}removeMatchingKeys(t,e,i){const r=up(t);return de.forEach(e,s=>{const c=$s(s.path);return de.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=up(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=up(t);let s=cn();return r.X({range:i,Y:!0},(c,d,f)=>{const _=_u(c[1]),b=new it(_);s=s.add(b)}).next(()=>s)}containsKey(t,e){const i=$s(e.path),r=IDBKeyRange.bound([i],[Uj(i)],!1,!0);let s=0;return up(t).X({index:"documentTargetsIndex",Y:!0,range:r},([c,d],f,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}le(t,e){return cv(t).get(e).next(i=>i?iC(i):null)}}function cv(n){return ls(n,"targets")}function xG(n){return ls(n,"targetGlobal")}function up(n){return ls(n,"targetDocuments")}function MG([n,t],[e,i]){const r=Qt(n,e);return 0===r?Qt(t,i):r}class QY{constructor(t){this.Ln=t,this.buffer=new Ri(MG),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();MG(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class AG{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){var e=this;je("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,le.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Xf(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Jf(i)}yield e.Qn(3e5)}))}}class JY{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return de.resolve(ha.ct);const i=new QY(e);return this.jn.forEachTarget(t,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(t,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(TG)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TG):this.Hn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let i,r,s,c,d,f,_;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,c=Date.now(),this.nthSequenceNumber(t,r))).next(D=>(i=D,d=Date.now(),this.removeTargets(t,i,e))).next(D=>(s=D,f=Date.now(),this.removeOrphanedDocuments(t,i))).next(D=>(_=Date.now(),hP()<=No.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${D} documents in `+(_-f)+`ms\nTotal Duration: ${_-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class XY{constructor(t,e){this.db=t,this.garbageCollector=function kG(n,t){return new JY(n,t)}(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Jn(t){let e=0;return this.Wn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,(i,r)=>e(r))}addReference(t,e,i){return FS(t,i)}removeReference(t,e,i){return FS(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return FS(t,e)}Xn(t,e){return function(i,r){let s=!1;return SG(i).Z(c=>IG(i,c,r).next(d=>(d&&(s=!0),de.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(t,(c,d)=>{if(d<=e){const f=this.Xn(t,c).next(_=>{if(!_)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,At.min()),up(t).delete([0,$s(c.path)])))});r.push(f)}}).next(()=>de.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return FS(t,e)}Yn(t,e){const i=up(t);let r,s=ha.ct;return i.X({index:"documentTargetsIndex"},([c,d],{path:f,sequenceNumber:_})=>{0===c?(s!==ha.ct&&e(new it(_u(r)),s),s=_,r=f):s=ha.ct}).next(()=>{s!==ha.ct&&e(new it(_u(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function FS(n,t){return up(n).put((i=n.currentSequenceNumber,{targetId:0,path:$s(t.path),sequenceNumber:i}));var i}class RG{constructor(){this.changes=new jd(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Oi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?de.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class e7{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Fg(t).put(i)}removeEntry(t,e,i){return Fg(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],MS(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Zn(t,i)))}getEntry(t,e){let i=Oi.newInvalidDocument(e);return Fg(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(lC(e))},(r,s)=>{i=this.ts(e,s)}).next(()=>i)}es(t,e){let i={size:0,document:Oi.newInvalidDocument(e)};return Fg(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(lC(e))},(r,s)=>{i={document:this.ts(e,s),size:PS(s)}}).next(()=>i)}getEntries(t,e){let i=Uo();return this.ns(t,e,(r,s)=>{const c=this.ts(r,s);i=i.insert(r,c)}).next(()=>i)}ss(t,e){let i=Uo(),r=new wi(it.comparator);return this.ns(t,e,(s,c)=>{const d=this.ts(s,c);i=i.insert(s,d),r=r.insert(s,PS(c))}).next(()=>({documents:i,rs:r}))}ns(t,e,i){if(e.isEmpty())return de.resolve();let r=new Ri(FG);e.forEach(f=>r=r.add(f));const s=IDBKeyRange.bound(lC(r.first()),lC(r.last())),c=r.getIterator();let d=c.getNext();return Fg(t).X({index:"documentKeyIndex",range:s},(f,_,b)=>{const D=it.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&FG(d,D)<0;)i(d,null),d=c.getNext();d&&d.isEqual(D)&&(i(d,_),d=c.hasNext()?c.getNext():null),d?b.G(lC(d)):b.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,i,r){const s=e.path,c=[s.popLast().toArray(),s.lastSegment(),MS(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fg(t).j(IDBKeyRange.bound(c,d,!0)).next(f=>{let _=Uo();for(const b of f){const D=this.ts(it.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);D.isFoundDocument()&&(qw(e,D)||r.has(D.key))&&(_=_.insert(D.key,D))}return _})}getAllFromCollectionGroup(t,e,i,r){let s=Uo();const c=NG(e,i),d=NG(e,da.max());return Fg(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(f,_,b)=>{const D=this.ts(it.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(D.key,D),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(t){return new t7(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return PG(t).get("remoteDocumentGlobalKey").next(e=>(xt(!!e),e))}Zn(t,e){return PG(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const i=function UY(n,t){let e;if(t.document)e=rG(n.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=it.fromSegments(t.noDocument.path),r=kg(t.noDocument.readTime);e=Oi.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return mt();{const i=it.fromSegments(t.unknownDocument.path),r=kg(t.unknownDocument.version);e=Oi.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new ji(i[0],i[1]);return At.fromTimestamp(r)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(At.min()))return i}return Oi.newInvalidDocument(t)}}function OG(n){return new e7(n)}class t7 extends RG{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new jd(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Ri((s,c)=>Qt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.us.get(s);if(e.push(this.os.removeEntry(t,s,d.readTime)),c.isValidDocument()){const f=dG(this.os.serializer,c);r=r.add(s.path.popLast()),i+=PS(f)-d.size,e.push(this.os.addEntry(t,s,f))}else if(i-=d.size,this.trackRemovals){const f=dG(this.os.serializer,c.convertToNoDocument(At.min()));e.push(this.os.addEntry(t,s,f))}}),r.forEach(s=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.os.updateMetadata(t,i)),de.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next(i=>(this.us.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.os.ss(t,e).next(({documents:i,rs:r})=>(r.forEach((s,c)=>{this.us.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function PG(n){return ls(n,"remoteDocumentGlobal")}function Fg(n){return ls(n,"remoteDocumentsV14")}function lC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function NG(n,t){const e=t.documentKey.path.toArray();return[n,MS(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function FG(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Qt(e[s],i[s]),r)return r;return r=Qt(e.length,i.length),r||(r=Qt(e[e.length-2],i[i.length-2]),r||Qt(e[e.length-1],i[i.length-1]))}class n7{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class LG{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&Kw(i.mutation,r,Vo.empty(),ji.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,cn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=cn()){const r=vu();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=Ww();return s.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=vu();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,cn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=Uo();const c=Zw(),d=Zw();return e.forEach((f,_)=>{const b=i.get(_.key);r.has(_.key)&&(void 0===b||b.mutation instanceof Gd)?s=s.insert(_.key,_):void 0!==b?(c.set(_.key,b.mutation.getFieldMask()),Kw(b.mutation,_,b.mutation.getFieldMask(),ji.now())):c.set(_.key,Vo.empty())}),this.recalculateAndSaveOverlays(t,s).next(f=>(f.forEach((_,b)=>c.set(_,b)),e.forEach((_,b)=>{var D;return d.set(_,new n7(b,null!==(D=c.get(_))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(t,e){const i=Zw();let r=new wi((c,d)=>c-d),s=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(f=>{const _=e.get(f);if(null===_)return;let b=i.get(f)||Vo.empty();b=d.applyToLocalView(_,b),i.set(f,b);const D=(r.get(d.batchId)||cn()).add(f);r=r.insert(d.batchId,D)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),_=f.key,b=f.value,D=M3();b.forEach(M=>{if(!s.has(M)){const R=B3(e.get(M),i.get(M));null!==R&&D.set(M,R),s=s.add(M)}}),c.push(this.documentOverlayCache.saveOverlays(t,_,D))}return de.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return it.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):IP(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):de.resolve(vu());let d=-1,f=s;return c.next(_=>de.forEach(_,(b,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(b)?de.resolve():this.remoteDocumentCache.getEntry(t,b).next(M=>{f=f.insert(b,M)}))).next(()=>this.populateOverlays(t,_,s)).next(()=>this.computeViews(t,f,_,cn())).next(b=>({batchId:d,changes:x3(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new it(e)).next(i=>{let r=Ww();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=Ww();return this.indexManager.getCollectionParents(t,r).next(c=>de.forEach(c,d=>{const f=(_=e,b=d.child(r),new Hd(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,b;return this.getDocumentsMatchingCollectionQuery(t,f,i).next(_=>{_.forEach((b,D)=>{s=s.insert(b,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r))).next(s=>{r.forEach((d,f)=>{const _=f.getKey();null===s.get(_)&&(s=s.insert(_,Oi.newInvalidDocument(_)))});let c=Ww();return s.forEach((d,f)=>{const _=r.get(d);void 0!==_&&Kw(_.mutation,f,Vo.empty(),ji.now()),qw(e,f)&&(c=c.insert(d,f))}),c})}}class r7{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return de.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var i;return this.cs.set(e.id,{id:(i=e).id,version:i.version,createTime:pr(i.createTime)}),de.resolve()}getNamedQuery(t,e){return de.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,{name:(i=e).name,query:HP(i.bundledQuery),readTime:pr(i.readTime)}),de.resolve();var i}}class s7{constructor(){this.overlays=new wi(it.comparator),this.ls=new Map}getOverlay(t,e){return de.resolve(this.overlays.get(e))}getOverlays(t,e){const i=vu();return de.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.we(t,e,s)}),de.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),de.resolve()}getOverlaysForCollection(t,e,i){const r=vu(),s=e.length+1,c=new it(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,_=f.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return de.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new wi((_,b)=>_-b);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let b=s.get(_.largestBatchId);null===b&&(b=vu(),s=s.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const d=vu(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,b)=>d.set(_,b)),!(d.size()>=r)););return de.resolve(d)}we(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new OP(e,i));let s=this.ls.get(e);void 0===s&&(s=cn(),this.ls.set(e,s)),this.ls.set(e,s.add(i.key))}}class ZP{constructor(){this.fs=new Ri(cs.ds),this.ws=new Ri(cs._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const i=new cs(t,e);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.ys(new cs(t,e))}ps(t,e){t.forEach(i=>this.removeReference(i,e))}Is(t){const e=new it(new An([])),i=new cs(e,t),r=new cs(e,t+1),s=[];return this.ws.forEachInRange([i,r],c=>{this.ys(c),s.push(c.key)}),s}Ts(){this.fs.forEach(t=>this.ys(t))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new it(new An([])),i=new cs(e,t),r=new cs(e,t+1);let s=cn();return this.ws.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new cs(t,0),i=this.fs.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class cs{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return it.comparator(t.key,e.key)||Qt(t.As,e.As)}static _s(t,e){return Qt(t.As,e.As)||it.comparator(t.key,e.key)}}class o7{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Ri(cs.ds)}checkEmpty(t){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.vs;this.vs++;const c=new kP(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.Rs=this.Rs.add(new cs(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(t,e){return de.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.bs(e+1),s=r<0?0:r;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new cs(e,0),r=new cs(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],c=>{const d=this.Ps(c.As);s.push(d)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ri(Qt);return e.forEach(r=>{const s=new cs(r,0),c=new cs(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,c],d=>{i=i.add(d.As)})}),de.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;it.isDocumentKey(s)||(s=s.child(""));const c=new cs(new it(s),0);let d=new Ri(Qt);return this.Rs.forEachWhile(f=>{const _=f.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(d=d.add(f.As)),!0)},c),de.resolve(this.Vs(d))}Vs(t){const e=[];return t.forEach(i=>{const r=this.Ps(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){xt(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return de.forEach(e.mutations,r=>{const s=new cs(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Rs=i})}Cn(t){}containsKey(t,e){const i=new cs(e,0),r=this.Rs.firstAfterOrEqual(i);return de.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return de.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class a7{constructor(t){this.Ds=t,this.docs=new wi(it.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Ds(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return de.resolve(i?i.document.mutableCopy():Oi.newInvalidDocument(e))}getEntries(t,e){let i=Uo();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Oi.newInvalidDocument(r))}),de.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=Uo();const c=e.path,d=new it(c.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:_,value:{document:b}}=f.getNext();if(!c.isPrefixOf(_.path))break;_.path.length>c.length+1||mP(jj(b),i)<=0||(r.has(b.key)||qw(e,b))&&(s=s.insert(b.key,b.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(t,e,i,r){mt()}Cs(t,e){return de.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new l7(this)}getSize(t){return de.resolve(this.size)}}class l7 extends RG{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.os.addEntry(t,r)):this.os.removeEntry(i)}),de.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class c7{constructor(t){this.persistence=t,this.xs=new jd(e=>Ig(e),zw),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ZP,this.targetCount=0,this.Ms=Ng.kn()}forEachTarget(t,e){return this.xs.forEach((i,r)=>e(r)),de.resolve()}getLastRemoteSnapshotVersion(t){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return de.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ns&&(this.Ns=e),de.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new Ng(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,de.resolve()}updateTargetData(t,e){return this.Fn(e),de.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,de.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.xs.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.xs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),de.waitFor(s).next(()=>r)}getTargetCount(t){return de.resolve(this.targetCount)}getTargetData(t,e){const i=this.xs.get(e)||null;return de.resolve(i)}addMatchingKeys(t,e,i){return this.ks.gs(e,i),de.resolve()}removeMatchingKeys(t,e,i){this.ks.ps(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),de.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),de.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ks.Es(e);return de.resolve(i)}containsKey(t,e){return de.resolve(this.ks.containsKey(e))}}class YP{constructor(t,e){this.$s={},this.overlays={},this.Os=new ha(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new c7(this),this.indexManager=new ZY,this.remoteDocumentCache=new a7(i=>this.referenceDelegate.Ls(i)),this.serializer=new uG(e),this.qs=new r7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new s7,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.$s[t.toKey()];return i||(i=new o7(e,this.referenceDelegate),this.$s[t.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,i){je("MemoryPersistence","Starting transaction:",t);const r=new u7(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(t,e){return de.or(Object.values(this.$s).map(i=>()=>i.containsKey(t,e)))}}class u7 extends zj{constructor(t){super(),this.currentSequenceNumber=t}}class LS{constructor(t){this.persistence=t,this.Qs=new ZP,this.js=null}static zs(t){return new LS(t)}get Ws(){if(this.js)return this.js;throw mt()}addReference(t,e,i){return this.Qs.addReference(i,e),this.Ws.delete(i.toString()),de.resolve()}removeReference(t,e,i){return this.Qs.removeReference(i,e),this.Ws.add(i.toString()),de.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),de.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ws,i=>{const r=it.fromPath(i);return this.Hs(t,r).next(s=>{s||e.removeEntry(r,At.min())})}).next(()=>(this.js=null,e.apply(t)))}updateLimboDocument(t,e){return this.Hs(t,e).next(i=>{i?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(t){return 0}Hs(t,e){return de.or([()=>de.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class d7{constructor(t){this.serializer=t}O(t,e,i,r){const s=new hS("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zj,{unique:!0}),d.createObjectStore("documentMutations"),BG(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=de.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),BG(t)),c=c.next(()=>function(d){const f=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,f){return f.store("mutations").j().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zj,{unique:!0});const b=f.store("mutations"),D=_.map(M=>b.put(M));return de.waitFor(D)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Ys(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(s)))),i<7&&r>=7&&(c=c.next(()=>this.Zs(s))),i<8&&r>=8&&(c=c.next(()=>this.ti(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.ei(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:Z9});f.createIndex("collectionPathOverlayIndex",Y9,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",K9,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:L9});f.createIndex("documentKeyIndex",B9),f.createIndex("collectionGroupIndex",V9)}(t)).next(()=>this.ni(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.si(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:z9}).createIndex("sequenceNumberIndex",$9,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:q9}).createIndex("documentKeyIndex",W9,{unique:!1})}(t))),c}Xs(t){let e=0;return t.store("remoteDocuments").X((i,r)=>{e+=PS(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.j().next(r=>de.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",c).next(d=>de.forEach(d,f=>{xt(f.userId===s.userId);const _=Rg(this.serializer,f);return DG(t,s.userId,_).next(()=>{})}))}))}Zs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((c,d)=>{const f=new An(c),_=[0,$s(f)];s.push(e.get(_).next(b=>b?de.resolve():e.put({targetId:0,path:$s(f),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>de.waitFor(s))})}ti(t,e){t.createObjectStore("collectionParents",{keyPath:G9});const i=e.store("collectionParents"),r=new WP,s=c=>{if(r.add(c)){const d=c.lastSegment(),f=c.popLast();return i.put({collectionId:d,parent:$s(f)})}};return e.store("remoteDocuments").X({Y:!0},(c,d)=>{const f=new An(c);return s(f.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([c,d,f],_)=>{const b=_u(d);return s(b.popLast())}))}ei(t){const e=t.store("targets");return e.X((i,r)=>{const s=iC(r),c=hG(this.serializer,s);return e.put(c)})}ni(t,e){const i=e.store("remoteDocuments"),r=[];return i.X((s,c)=>{const d=e.store("remoteDocumentsV14"),f=(_=c,_.document?new it(An.fromString(_.document.name).popFirst(5)):_.noDocument?it.fromSegments(_.noDocument.path):_.unknownDocument?it.fromSegments(_.unknownDocument.path):mt()).path.toArray();var _;const b={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(b))}).next(()=>de.waitFor(r))}si(t,e){const i=e.store("mutations"),r=OG(this.serializer),s=new YP(LS.zs,this.serializer.fe);return i.j().next(c=>{const d=new Map;return c.forEach(f=>{var _;let b=null!==(_=d.get(f.userId))&&void 0!==_?_:cn();Rg(this.serializer,f).keys().forEach(D=>b=b.add(D)),d.set(f.userId,b)}),de.forEach(d,(f,_)=>{const b=new as(_),D=AS.de(this.serializer,b),M=s.getIndexManager(b),R=NS.de(b,this.serializer,M,s.referenceDelegate);return new LG(r,R,D,M).recalculateAndSaveOverlaysForDocumentKeys(new yP(e,ha.ct),f).next()})})}}function BG(n){n.createObjectStore("targetDocuments",{keyPath:H9}).createIndex("documentTargetsIndex",j9,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",U9,{unique:!0}),n.createObjectStore("targetGlobal")}const KP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QP{constructor(t,e,i,r,s,c,d,f,_,b,D=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ii=s,this.window=c,this.document=d,this.ri=_,this.oi=b,this.ui=D,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=M=>Promise.resolve(),!QP.D())throw new Be(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XY(this,r),this.di=e+"main",this.serializer=new uG(f),this.wi=new ac(this.di,this.ui,new d7(this.serializer)),this.Bs=new KY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OG(this.serializer),this.qs=new HY,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,KP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Bs.getHighestSequenceNumber(t))}).then(t=>{this.Os=new ha(t,this.ri)}).then(()=>{this.Fs=!0}).catch(t=>(this.wi&&this.wi.close(),Promise.reject(t)))}Ii(t){var e=this;return this.fi=function(){var i=(0,le.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B(function(){var e=(0,le.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((0,le.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>VS(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(t).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(t)).next(e=>this.isPrimary&&!e?this.Ai(t).next(()=>!1):!!e&&this.vi(t).next(()=>!0))).catch(t=>{if(Xf(t))return je("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ii.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Ti(t){return cC(t).get("owner").next(e=>de.resolve(this.Ri(e)))}Pi(t){return VS(t).delete(this.clientId)}bi(){var t=this;return(0,le.Z)(function*(){if(t.isPrimary&&!t.Vi(t.li,18e5)){t.li=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ls(i,"clientMetadata");return r.j().next(s=>{const c=t.Si(s,18e5),d=s.filter(f=>-1===c.indexOf(f));return de.forEach(d,f=>r.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(t._i)for(const i of e)t._i.removeItem(t.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?de.resolve(!0):cC(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,KP);return!1}}return!(!this.networkEnabled||!this.inForeground)||VS(t).j().next(i=>void 0===this.Si(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&je("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,le.Z)(function*(){t.Fs=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Ni(),t.ki(),yield t.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new yP(e,ha.ct);return t.Ai(i).next(()=>t.Pi(i))}),t.wi.close(),t.Mi()})()}Si(t,e){return t.filter(i=>this.Vi(i.updateTimeMs,e)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",t=>VS(t).j().next(e=>this.Si(e,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(t,e){return NS.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new YY(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return AS.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,i){je("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.ui)?J9:14===c?Jj:13===c?Qj:12===c?Q9:11===c?Kj:void mt();var c;let d;return this.wi.runTransaction(t,r,s,f=>(d=new yP(f,this.Os?this.Os.next():ha.ct),"readwrite-primary"===e?this.Ti(d).next(_=>!!_||this.Ei(d)).next(_=>{if(!_)throw fr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Be(ge.FAILED_PRECONDITION,Gj);return i(d)}).next(_=>this.vi(d).next(()=>_)):this.Oi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Oi(t){return cC(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Be(ge.FAILED_PRECONDITION,KP)})}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cC(t).put("owner",e)}static D(){return ac.D()}Ai(t){const e=cC(t);return e.get("owner").next(i=>this.Ri(i)?(je("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):de.resolve())}Vi(t,e){const i=Date.now();return!(t<i-e||t>i&&(fr(`Detected an update time that is in the future: ${t} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,V.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const i=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return je("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return fr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){fr("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function cC(n){return ls(n,"owner")}function VS(n){return ls(n,"clientMetadata")}function JP(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class XP{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Fi=i,this.Bi=r}static Li(t,e){let i=cn(),r=cn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new XP(t,e.fromCache,i,r)}}class VG{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ki(t,e).next(s=>s||this.Gi(t,e,r,i)).next(s=>s||this.Qi(t,e))}Ki(t,e){if(E3(e))return de.resolve(null);let i=fo(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=ES(e,null,"F"),i=fo(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=cn(...s);return this.Ui.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(f=>{const _=this.ji(e,d);return this.zi(e,_,c,f.readTime)?this.Ki(t,ES(e,null,"F")):this.Wi(t,_,e,f)}))})))}Gi(t,e,i,r){return E3(e)||r.isEqual(At.min())?this.Qi(t,e):this.Ui.getDocuments(t,i).next(s=>{const c=this.ji(e,s);return this.zi(e,c,i,r)?this.Qi(t,e):(hP()<=No.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xP(e)),this.Wi(t,c,e,Hj(r,-1)))})}ji(t,e){let i=new Ri(I3(t));return e.forEach((r,s)=>{qw(t,s)&&(i=i.add(s))}),i}zi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(t,e){return hP()<=No.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",xP(e)),this.Ui.getDocumentsMatchingQuery(t,e,da.min())}Wi(t,e,i,r){return this.Ui.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class h7{constructor(t,e,i,r){this.persistence=t,this.Hi=e,this.serializer=r,this.Ji=new wi(Qt),this.Yi=new jd(s=>Ig(s),zw),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(i)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new LG(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ji))}}function UG(n,t,e,i){return new h7(n,t,e,i)}function HG(n,t){return eN.apply(this,arguments)}function eN(){return eN=(0,le.Z)(function*(n,t){const e=st(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.tr(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let f=cn();for(const _ of r){c.push(_.batchId);for(const b of _.mutations)f=f.add(b.key)}for(const _ of s){d.push(_.batchId);for(const b of _.mutations)f=f.add(b.key)}return e.localDocuments.getDocuments(i,f).next(_=>({er:_,removedBatchIds:c,addedBatchIds:d}))})})}),eN.apply(this,arguments)}function f7(n,t){const e=st(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Zi.newChangeBuffer({trackRemovals:!0});return function(c,d,f,_){const b=f.batch,D=b.keys();let M=de.resolve();return D.forEach(R=>{M=M.next(()=>_.getEntry(d,R)).next(U=>{const q=f.docVersions.get(R);xt(null!==q),U.version.compareTo(q)<0&&(b.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),_.addEntry(U)))})}),M.next(()=>c.mutationQueue.removeMutationBatch(d,b))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=cn();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function jG(n){const t=st(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function p7(n,t){const e=st(n),i=t.snapshotVersion;let r=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Zi.newChangeBuffer({trackRemovals:!0});r=e.Ji;const d=[];t.targetChanges.forEach((b,D)=>{const M=r.get(D);if(!M)return;d.push(e.Bs.removeMatchingKeys(s,b.removedDocuments,D).next(()=>e.Bs.addMatchingKeys(s,b.addedDocuments,D)));let R=M.withSequenceNumber(s.currentSequenceNumber);var U,q,J;null!==t.targetMismatches.get(D)?R=R.withResumeToken(Hr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,i)),r=r.insert(D,R),q=R,J=b,(0===(U=M).resumeToken.approximateByteSize()||q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&d.push(e.Bs.updateTargetData(s,R))});let f=Uo(),_=cn();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(GG(s,c,t.documentUpdates).next(b=>{f=b.nr,_=b.sr})),!i.isEqual(At.min())){const b=e.Bs.getLastRemoteSnapshotVersion(s).next(D=>e.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(b)}return de.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,f,_)).next(()=>f)}).then(s=>(e.Ji=r,s))}function GG(n,t,e){let i=cn(),r=cn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=Uo();return e.forEach((d,f)=>{const _=s.get(d);f.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(At.min())?(t.removeEntry(d,f.readTime),c=c.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(f),c=c.insert(d,f)):je("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),{nr:c,sr:r}})}function m7(n,t){const e=st(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function uv(n,t){const e=st(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Bs.getTargetData(i,t).next(s=>s?(r=s,de.resolve(r)):e.Bs.allocateTargetId(i).next(c=>(r=new zd(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(i.targetId,i),e.Yi.set(t,i.targetId)),i})}function dv(n,t,e){return tN.apply(this,arguments)}function tN(){return tN=(0,le.Z)(function*(n,t,e){const i=st(n),r=i.Ji.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Xf(c))throw c;je("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}),tN.apply(this,arguments)}function US(n,t,e){const i=st(n);let r=At.min(),s=cn();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,f,_){const b=st(d),D=b.Yi.get(_);return void 0!==D?de.resolve(b.Ji.get(D)):b.Bs.getTargetData(f,_)}(i,c,fo(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(c,d.targetId).next(f=>{s=f})}).next(()=>i.Hi.getDocumentsMatchingQuery(c,t,e?r:At.min(),e?s:cn())).next(d=>(qG(i,D3(t),d),{documents:d,ir:s})))}function zG(n,t){const e=st(n),i=st(e.Bs),r=e.Ji.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.le(s,t).next(c=>c?c.target:null))}function $G(n,t){const e=st(n),i=e.Xi.get(t)||At.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Zi.getAllFromCollectionGroup(r,t,Hj(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(qG(e,t,r),r))}function qG(n,t,e){let i=n.Xi.get(t)||At.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(t,i)}function nN(){return nN=(0,le.Z)(function*(n,t,e,i){const r=st(n);let s=cn(),c=Uo();for(const _ of e){const b=t.rr(_.metadata.name);_.document&&(s=s.add(b));const D=t.ur(_);D.setReadTime(t.cr(_.metadata.readTime)),c=c.insert(b,D)}const d=r.Zi.newChangeBuffer({trackRemovals:!0}),f=yield uv(r,(_=i,fo(tv(An.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>GG(_,d,c).next(b=>(d.apply(_),b)).next(b=>r.Bs.removeMatchingKeysForTargetId(_,f.targetId).next(()=>r.Bs.addMatchingKeys(_,s,f.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,b.nr,b.sr)).next(()=>b.nr)))}),nN.apply(this,arguments)}function _7(n,t){return iN.apply(this,arguments)}function iN(){return iN=(0,le.Z)(function*(n,t,e=cn()){const i=yield uv(n,fo(HP(t.bundledQuery))),r=st(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=pr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.qs.saveNamedQuery(s,t);const d=i.withResumeToken(Hr.EMPTY_BYTE_STRING,c);return r.Ji=r.Ji.insert(d.targetId,d),r.Bs.updateTargetData(s,d).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,e,i.targetId)).next(()=>r.qs.saveNamedQuery(s,t))})}),iN.apply(this,arguments)}function WG(n,t){return`firestore_clients_${n}_${t}`}function ZG(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function rN(n,t){return`firestore_targets_${n}_${t}`}class HS{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static ar(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Be(r.error.code,r.error.message))),c?new HS(t,e,r.state,s):(fr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class uC{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static ar(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Be(i.error.code,i.error.message))),s?new uC(t,i.state,r):(fr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class jS{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=MP();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=qj(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new jS(t,s):(fr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class sN{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new sN(e.clientId,e.onlineState):(fr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class oN{constructor(){this.activeTargetIds=MP()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class aN{constructor(t,e,i,r,s){this.window=t,this.ii=e,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new wi(Qt),this.started=!1,this.yr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=WG(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new oN),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,le.Z)(function*(){const e=yield t.syncEngine.$i();for(const r of e){if(r===t.wr)continue;const s=t.getItem(WG(t.persistenceKey,r));if(s){const c=jS.ar(r,s);c&&(t.gr=t.gr.insert(c.clientId,c))}}t.Pr();const i=t.storage.getItem(t.vr);if(i){const r=t.br(i);r&&t.Vr(r)}for(const r of t.yr)t.mr(r);t.yr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,i){this.Dr(t,e,i),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(rN(this.persistenceKey,t));if(i){const r=uC.ar(t,i);r&&(e=r.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(rN(this.persistenceKey,t))}updateQueryState(t,e,i){this.kr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Cr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return je("SharedClientState","READ",t,e),e}setItem(t,e){je("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){je("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(je("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,le.Z)(function*(){if(e.started){if(null!==i.key)if(e.Tr.test(i.key)){if(null==i.newValue){const r=e.Or(i.key);return e.Fr(r,null)}{const r=e.Br(i.key,i.newValue);if(r)return e.Fr(r.clientId,r)}}else if(e.Er.test(i.key)){if(null!==i.newValue){const r=e.Lr(i.key,i.newValue);if(r)return e.qr(r)}}else if(e.Ar.test(i.key)){if(null!==i.newValue){const r=e.Ur(i.key,i.newValue);if(r)return e.Kr(r)}}else if(i.key===e.vr){if(null!==i.newValue){const r=e.br(i.newValue);if(r)return e.Vr(r)}}else if(i.key===e.Ir){const r=function(s){let c=ha.ct;if(null!=s)try{const d=JSON.parse(s);xt("number"==typeof d),c=d}catch(d){fr("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==ha.ct&&e.sequenceNumberHandler(r)}else if(i.key===e.Rr){const r=e.Gr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Qr(s)))}}else e.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,i){const r=new HS(this.currentUser,t,e,i),s=ZG(this.persistenceKey,this.currentUser,t);this.setItem(s,r.hr())}Cr(t){const e=ZG(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:t}))}kr(t,e,i){const r=rN(this.persistenceKey,t),s=new uC(t,e,i);this.setItem(r,s.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const i=this.Or(t);return jS.ar(i,e)}Lr(t,e){const i=this.Er.exec(t),r=Number(i[1]);return HS.ar(new as(void 0!==i[2]?i[2]:null),r,e)}Ur(t,e){const i=this.Ar.exec(t),r=Number(i[1]);return uC.ar(r,e)}br(t){return sN.ar(t)}Gr(t){return JSON.parse(t)}qr(t){var e=this;return(0,le.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.jr(t.batchId,t.state,t.error);je("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const i=e?this.gr.insert(t,e):this.gr.remove(t),r=this.Sr(this.gr),s=this.Sr(i),c=[],d=[];return s.forEach(f=>{r.has(f)||c.push(f)}),r.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Wr(c,d).then(()=>{this.gr=i})}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=MP();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class YG{constructor(){this.Hr=new oN,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,i){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new oN,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class y7{Yr(t){}shutdown(){}}class KG{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let GS=null;function lN(){return null===GS?GS=268435456+Math.round(2147483648*Math.random()):GS++,"0x"+GS.toString(16)}const v7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b7{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const Ws="WebChannelConnection";class w7 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.mo=(t.ssl?"https":"http")+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,i,r,s){const c=lN(),d=this.To(t,e);je("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);const f={};return this.Eo(f,r,s),this.Ao(t,d,f,i).then(_=>(je("RestConnection",`Received RPC '${t}' ${c}: `,_),_),_=>{throw Ya("RestConnection",`RPC '${t}' ${c} failed with error: `,_,"url: ",d,"request:",i),_})}vo(t,e,i,r,s,c){return this.Io(t,e,i,r,s)}Eo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Yy,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}To(t,e){return`${this.mo}/v1/${e}:${v7[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,i,r){const s=lN();return new Promise((c,d)=>{const f=new _9;f.setWithCredentials(!0),f.listenOnce(p9.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case dP.NO_ERROR:const b=f.getResponseJson();je(Ws,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(b)),c(b);break;case dP.TIMEOUT:je(Ws,`RPC '${t}' ${s} timed out`),d(new Be(ge.DEADLINE_EXCEEDED,"Request time out"));break;case dP.HTTP_ERROR:const D=f.getStatus();if(je(Ws,`RPC '${t}' ${s} failed with status:`,D,"response text:",f.getResponseText()),D>0){let M=f.getResponseJson();Array.isArray(M)&&(M=M[0]);const R=M?.error;if(R&&R.status&&R.message){const U=function(q){const J=q.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(J)>=0?J:ge.UNKNOWN}(R.status);d(new Be(U,R.message))}else d(new Be(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Be(ge.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{je(Ws,`RPC '${t}' ${s} completed.`)}});const _=JSON.stringify(r);je(Ws,`RPC '${t}' ${s} sending request:`,r),f.send(e,"POST",_,i,15)})}Ro(t,e,i){const r=lN(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=h9(),d=f9(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(f.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(f.xmlHttpFactory=new g9({})),this.Eo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const b=s.join("");je(Ws,`Creating RPC '${t}' stream ${r}: ${b}`,f);const D=c.createWebChannel(b,f);let M=!1,R=!1;const U=new b7({ro:J=>{R?je(Ws,`Not sending because RPC '${t}' stream ${r} is closed:`,J):(M||(je(Ws,`Opening RPC '${t}' stream ${r} transport.`),D.open(),M=!0),je(Ws,`RPC '${t}' stream ${r} sending:`,J),D.send(J))},oo:()=>D.close()}),q=(J,we,He)=>{J.listen(we,Ge=>{try{He(Ge)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return q(D,cS.EventType.OPEN,()=>{R||je(Ws,`RPC '${t}' stream ${r} transport opened.`)}),q(D,cS.EventType.CLOSE,()=>{R||(R=!0,je(Ws,`RPC '${t}' stream ${r} transport closed`),U.wo())}),q(D,cS.EventType.ERROR,J=>{R||(R=!0,Ya(Ws,`RPC '${t}' stream ${r} transport errored:`,J),U.wo(new Be(ge.UNAVAILABLE,"The operation could not be completed")))}),q(D,cS.EventType.MESSAGE,J=>{var we;if(!R){const He=J.data[0];xt(!!He);const Ge=He,Ye=Ge.error||(null===(we=Ge[0])||void 0===we?void 0:we.error);if(Ye){je(Ws,`RPC '${t}' stream ${r} received error:`,Ye);const Ut=Ye.status;let Ht=function(Xi){const Js=Dr[Xi];if(void 0!==Js)return z3(Js)}(Ut),Sn=Ye.message;void 0===Ht&&(Ht=ge.INTERNAL,Sn="Unknown error status: "+Ut+" with message "+Ye.message),R=!0,U.wo(new Be(Ht,Sn)),D.close()}else je(Ws,`RPC '${t}' stream ${r} received:`,He),U._o(He)}}),q(d,m9.STAT_EVENT,J=>{J.stat===Nj.PROXY?je(Ws,`RPC '${t}' stream ${r} detected buffering proxy`):J.stat===Nj.NOPROXY&&je(Ws,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{U.fo()},0),U}}function QG(){return typeof window<"u"?window:null}function zS(){return typeof document<"u"?document:null}function dC(n){return new AY(n,!0)}class cN{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ii=t,this.timerId=e,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,e-i);r>0&&je("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),t())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class JG{constructor(t,e,i,r,s,c,d,f){this.ii=t,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new cN(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var t=this;return(0,le.Z)(function*(){t.Uo()&&(yield t.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(t){this.Ho(),this.stream.send(t)}zo(){var t=this;return(0,le.Z)(function*(){if(t.Ko())return t.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(t,e){var i=this;return(0,le.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==t?i.qo.reset():e&&e.code===ge.RESOURCE_EXHAUSTED?(fr(e.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):e&&e.code===ge.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.ao(e)})()}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===e&&this.Zo(i,r)},i=>{t(()=>{const r=new Be(ge.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(t,e){const i=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var t=this;this.state=5,this.qo.No((0,le.Z)(function*(){t.state=0,t.start()}))}tu(t){return je("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget(()=>this.Fo===t?e():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class C7 extends JG{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=s}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function OY(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(f=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:mt(),r=t.targetChange.targetIds||[],s=function(f,_){return f.useProto3Json?(xt(void 0===_||"string"==typeof _),Hr.fromBase64String(_||"")):(xt(void 0===_||_ instanceof Uint8Array),Hr.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(f){const _=void 0===f.code?ge.UNKNOWN:z3(f.code);return new Be(_,f.message||"")}(c);e=new Y3(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=bu(n,i.document.name),s=pr(i.document.updateTime),c=i.document.createTime?pr(i.document.createTime):At.min(),d=new As({mapValue:{fields:i.document.fields}}),f=Oi.newFoundDocument(r,s,c,d);e=new xS(i.targetIds||[],i.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const i=t.documentDelete,r=bu(n,i.document),s=i.readTime?pr(i.readTime):At.min(),c=Oi.newNoDocument(r,s);e=new xS([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=bu(n,i.document);e=new xS([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return mt();{const i=t.filter,{count:r=0,unchangedNames:s}=i,c=new TY(r,s);e=new Z3(i.targetId,c)}}var f;return e}(this.serializer,t),i=function(r){if(!("targetChange"in r))return At.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?At.min():s.readTime?pr(s.readTime):At.min()}(t);return this.listener.nu(e,i)}su(t){const e={};e.database=tC(this.serializer),e.addTarget=function(r,s){let c;const d=s.target;if(c=bS(d)?{documents:sG(r,d)}:{query:UP(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=X3(r,s.resumeToken);const f=FP(r,s.expectedCount);null!==f&&(c.expectedCount=f)}else if(s.snapshotVersion.compareTo(At.min())>0){c.readTime=ov(r,s.snapshotVersion.toTimestamp());const f=FP(r,s.expectedCount);null!==f&&(c.expectedCount=f)}return c}(this.serializer,t);const i=function NY(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Wo(e)}iu(t){const e={};e.database=tC(this.serializer),e.removeTarget=t,this.Wo(e)}}class E7 extends JG{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(xt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function PY(n,t){return n&&n.length>0?(xt(void 0!==t),n.map(e=>function(i,r){let s=pr(i.updateTime?i.updateTime:r);return s.isEqual(At.min())&&(s=pr(r)),new bY(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=pr(t.commitTime);return this.listener.cu(i,e)}return xt(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=tC(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>nC(this.serializer,i))};this.Wo(e)}}class T7 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Be(ge.UNKNOWN,r.toString())})}vo(t,e,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.vo(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(ge.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class I7{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(fr(e),this.mu=!1):je("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class S7{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{i.enqueueAndForget((0,le.Z)(function*(){var f;dp(c)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,le.Z)(function*(_){const b=st(_);b.vu.add(4),yield hv(b),b.bu.set("Unknown"),b.vu.delete(4),yield hC(b)}),function(_){return f.apply(this,arguments)})(c))}))}),this.bu=new I7(i,r)}}function hC(n){return dN.apply(this,arguments)}function dN(){return dN=(0,le.Z)(function*(n){if(dp(n))for(const t of n.Ru)yield t(!0)}),dN.apply(this,arguments)}function hv(n){return hN.apply(this,arguments)}function hN(){return hN=(0,le.Z)(function*(n){for(const t of n.Ru)yield t(!1)}),hN.apply(this,arguments)}function $S(n,t){const e=st(n);e.Au.has(t.targetId)||(e.Au.set(t.targetId,t),mN(e)?pN(e):pv(e).Ko()&&fN(e,t))}function fC(n,t){const e=st(n),i=pv(e);e.Au.delete(t),i.Ko()&&XG(e,t),0===e.Au.size&&(i.Ko()?i.jo():dp(e)&&e.bu.set("Unknown"))}function fN(n,t){if(n.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}pv(n).su(t)}function XG(n,t){n.Vu.qt(t),pv(n).iu(t)}function pN(n){n.Vu=new IY({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),le:t=>n.Au.get(t)||null,ue:()=>n.datastore.serializer.databaseId}),pv(n).start(),n.bu.gu()}function mN(n){return dp(n)&&!pv(n).Uo()&&n.Au.size>0}function dp(n){return 0===st(n).vu.size}function e6(n){n.Vu=void 0}function x7(n){return gN.apply(this,arguments)}function gN(){return gN=(0,le.Z)(function*(n){n.Au.forEach((t,e)=>{fN(n,t)})}),gN.apply(this,arguments)}function M7(n,t){return _N.apply(this,arguments)}function _N(){return _N=(0,le.Z)(function*(n,t){e6(n),mN(n)?(n.bu.Iu(t),pN(n)):n.bu.set("Unknown")}),_N.apply(this,arguments)}function A7(n,t,e){return yN.apply(this,arguments)}function yN(){return yN=(0,le.Z)(function*(n,t,e){if(n.bu.set("Online"),t instanceof Y3&&2===t.state&&t.cause)try{yield(i=(0,le.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.Au.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.Au.delete(d),r.Vu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){je("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield qS(n,i)}else if(t instanceof xS?n.Vu.Ht(t):t instanceof Z3?n.Vu.ne(t):n.Vu.Xt(t),!e.isEqual(At.min()))try{const i=yield jG(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.Vu.ce(s);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const _=r.Au.get(f);_&&r.Au.set(f,_.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach((d,f)=>{const _=r.Au.get(d);if(!_)return;r.Au.set(d,_.withResumeToken(Hr.EMPTY_BYTE_STRING,_.snapshotVersion)),XG(r,d);const b=new zd(_.target,d,f,_.sequenceNumber);fN(r,b)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){je("RemoteStore","Failed to raise snapshot:",i),yield qS(n,i)}var i}),yN.apply(this,arguments)}function qS(n,t,e){return vN.apply(this,arguments)}function vN(){return vN=(0,le.Z)(function*(n,t,e){if(!Xf(t))throw t;n.vu.add(1),yield hv(n),n.bu.set("Offline"),e||(e=()=>jG(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield e(),n.vu.delete(1),yield hC(n)}))}),vN.apply(this,arguments)}function t6(n,t){return t().catch(e=>qS(n,e,t))}function fv(n){return bN.apply(this,arguments)}function bN(){return bN=(0,le.Z)(function*(n){const t=st(n),e=hp(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;k7(t);)try{const r=yield m7(t.localStore,i);if(null===r){0===t.Eu.length&&e.jo();break}i=r.batchId,R7(t,r)}catch(r){yield qS(t,r)}n6(t)&&r6(t)}),bN.apply(this,arguments)}function k7(n){return dp(n)&&n.Eu.length<10}function R7(n,t){n.Eu.push(t);const e=hp(n);e.Ko()&&e.ou&&e.uu(t.mutations)}function n6(n){return dp(n)&&!hp(n).Uo()&&n.Eu.length>0}function r6(n){hp(n).start()}function O7(n){return wN.apply(this,arguments)}function wN(){return wN=(0,le.Z)(function*(n){hp(n).hu()}),wN.apply(this,arguments)}function P7(n){return CN.apply(this,arguments)}function CN(){return CN=(0,le.Z)(function*(n){const t=hp(n);for(const e of n.Eu)t.uu(e.mutations)}),CN.apply(this,arguments)}function N7(n,t,e){return EN.apply(this,arguments)}function EN(){return EN=(0,le.Z)(function*(n,t,e){const i=n.Eu.shift(),r=RP.from(i,t,e);yield t6(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield fv(n)}),EN.apply(this,arguments)}function F7(n,t){return TN.apply(this,arguments)}function TN(){return TN=(0,le.Z)(function*(n,t){var e;t&&hp(n).ou&&(yield(e=(0,le.Z)(function*(i,r){if(G3(s=r.code)&&s!==ge.ABORTED){const c=i.Eu.shift();hp(i).Qo(),yield t6(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield fv(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),n6(n)&&r6(n)}),TN.apply(this,arguments)}function s6(n,t){return DN.apply(this,arguments)}function DN(){return DN=(0,le.Z)(function*(n,t){const e=st(n);e.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const i=dp(e);e.vu.add(3),yield hv(e),i&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.vu.delete(3),yield hC(e)}),DN.apply(this,arguments)}function IN(n,t){return SN.apply(this,arguments)}function SN(){return SN=(0,le.Z)(function*(n,t){const e=st(n);t?(e.vu.delete(2),yield hC(e)):t||(e.vu.add(2),yield hv(e),e.bu.set("Unknown"))}),SN.apply(this,arguments)}function pv(n){return n.Su||(n.Su=function(t,e,i){const r=st(t);return r.fu(),new C7(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:x7.bind(null,n),ao:M7.bind(null,n),nu:A7.bind(null,n)}),n.Ru.push(function(){var t=(0,le.Z)(function*(e){e?(n.Su.Qo(),mN(n)?pN(n):n.bu.set("Unknown")):(yield n.Su.stop(),e6(n))});return function(e){return t.apply(this,arguments)}}())),n.Su}function hp(n){return n.Du||(n.Du=function(t,e,i){const r=st(t);return r.fu(),new E7(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:O7.bind(null,n),ao:F7.bind(null,n),au:P7.bind(null,n),cu:N7.bind(null,n)}),n.Ru.push(function(){var t=(0,le.Z)(function*(e){e?(n.Du.Qo(),yield fv(n)):(yield n.Du.stop(),n.Eu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Du}class xN{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new xN(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ge.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mv(n,t){if(fr("AsyncQueue",`${t}: ${n}`),Xf(n))return new Be(ge.UNAVAILABLE,`${t}: ${n}`);throw n}class gv{constructor(t){this.comparator=t?(e,i)=>t(e,i)||it.comparator(e.key,i.key):(e,i)=>it.comparator(e.key,i.key),this.keyedMap=Ww(),this.sortedSet=new wi(this.comparator)}static emptySet(t){return new gv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof gv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new gv;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class o6{constructor(){this.Cu=new wi(it.comparator)}track(t){const e=t.doc.key,i=this.Cu.get(e);i?0!==t.type&&3===i.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==i.type?this.Cu=this.Cu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Cu=this.Cu.remove(e):1===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):mt():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal((e,i)=>{t.push(i)}),t}}class _v{constructor(t,e,i,r,s,c,d,f,_){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=_}static fromInitialDocuments(t,e,i,r,s){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new _v(t,e,gv.emptySet(e),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$w(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class L7{constructor(){this.Nu=void 0,this.listeners=[]}}class B7{constructor(){this.queries=new jd(t=>T3(t),$w),this.onlineState="Unknown",this.ku=new Set}}function MN(n,t){return AN.apply(this,arguments)}function AN(){return AN=(0,le.Z)(function*(n,t){const e=st(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new L7),r)try{s.Nu=yield e.onListen(i)}catch(c){const d=mv(c,`Initialization of query '${xP(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Mu(e.onlineState),s.Nu&&t.$u(s.Nu)&&ON(e)}),AN.apply(this,arguments)}function kN(n,t){return RN.apply(this,arguments)}function RN(){return RN=(0,le.Z)(function*(n,t){const e=st(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),RN.apply(this,arguments)}function V7(n,t){const e=st(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.$u(r)&&(i=!0);c.Nu=r}}i&&ON(e)}function U7(n,t,e){const i=st(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function ON(n){n.ku.forEach(t=>{t.next()})}class PN{constructor(t,e,i){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new _v(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){return!t.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(t){t=_v.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class H7{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class a6{constructor(t){this.serializer=t}rr(t){return bu(this.serializer,t)}ur(t){return t.metadata.exists?rG(this.serializer,t.document,!1):Oi.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return pr(t)}}class j7{constructor(t,e,i){this.ju=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=l6(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const i=An.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,i=new a6(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||cn()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,le.Z)(function*(){const e=yield function g7(n,t,e,i){return nN.apply(this,arguments)}(t.localStore,new a6(t.serializer),t.documents,t.ju.id),i=t.Wu(t.documents);for(const r of t.queries)yield _7(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Hu:t.collectionGroups,Ju:e}})()}}function l6(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class c6{constructor(t){this.key=t}}class u6{constructor(t){this.key=t}}class d6{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=cn(),this.mutatedKeys=cn(),this.tc=I3(t),this.ec=new gv(this.tc)}get nc(){return this.Yu}sc(t,e){const i=e?e.ic:new o6,r=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const f="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,D)=>{const M=r.get(b),R=qw(this.query,D)?D:null,U=!!M&&this.mutatedKeys.has(M.key),q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let J=!1;M&&R?M.data.isEqual(R.data)?U!==q&&(i.track({type:3,doc:R}),J=!0):this.rc(M,R)||(i.track({type:2,doc:R}),J=!0,(f&&this.tc(R,f)>0||_&&this.tc(R,_)<0)&&(d=!0)):!M&&R?(i.track({type:0,doc:R}),J=!0):M&&!R&&(i.track({type:1,doc:M}),J=!0,(f||_)&&(d=!0)),J&&(R?(c=c.add(R),s=q?s.add(b):s.delete(b)):(c=c.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{ec:c,ic:i,zi:d,mutatedKeys:s}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const s=t.ic.xu();s.sort((_,b)=>function(D,M){const R=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return R(D)-R(M)}(_.type,b.type)||this.tc(_.doc,b.doc)),this.oc(i);const c=e?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==s.length||f?{snapshot:new _v(this.query,t.ec,r,s,t.mutatedKeys,0===d,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new o6,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=cn(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const e=[];return t.forEach(i=>{this.Zu.has(i)||e.push(new u6(i))}),this.Zu.forEach(i=>{t.has(i)||e.push(new c6(i))}),e}hc(t){this.Yu=t.ir,this.Zu=cn();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return _v.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class G7{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class z7{constructor(t){this.key=t,this.fc=!1}}class $7{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new jd(d=>T3(d),$w),this._c=new Map,this.mc=new Set,this.gc=new wi(it.comparator),this.yc=new Map,this.Ic=new ZP,this.Tc={},this.Ec=new Map,this.Ac=Ng.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function q7(n,t){return NN.apply(this,arguments)}function NN(){return NN=(0,le.Z)(function*(n,t){const e=rF(n);let i,r;const s=e.wc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const c=yield uv(e.localStore,fo(t)),d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield FN(e,t,i,"current"===d,c.resumeToken),e.isPrimaryClient&&$S(e.remoteStore,c)}return r}),NN.apply(this,arguments)}function FN(n,t,e,i,r){return LN.apply(this,arguments)}function LN(){return LN=(0,le.Z)(function*(n,t,e,i,r){n.Rc=(D,M,R)=>{return(U=(0,le.Z)(function*(q,J,we,He){let Ge=J.view.sc(we);Ge.zi&&(Ge=yield US(q.localStore,J.query,!1).then(({documents:Ht})=>J.view.sc(Ht,Ge)));const Ye=He&&He.targetChanges.get(J.targetId),Ut=J.view.applyChanges(Ge,q.isPrimaryClient,Ye);return WN(q,J.targetId,Ut.cc),Ut.snapshot}),function(q,J,we,He){return U.apply(this,arguments)})(n,D,M,R);var U};const s=yield US(n.localStore,t,!0),c=new d6(t,s.ir),d=c.sc(s.documents),f=Xw.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),_=c.applyChanges(d,n.isPrimaryClient,f);WN(n,e,_.cc);const b=new G7(t,e,c);return n.wc.set(t,b),n._c.has(e)?n._c.get(e).push(t):n._c.set(e,[t]),_.snapshot}),LN.apply(this,arguments)}function W7(n,t){return BN.apply(this,arguments)}function BN(){return BN=(0,le.Z)(function*(n,t){const e=st(n),i=e.wc.get(t),r=e._c.get(i.targetId);if(r.length>1)return e._c.set(i.targetId,r.filter(s=>!$w(s,t))),void e.wc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield dv(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),fC(e.remoteStore,i.targetId),yv(e,i.targetId)}).catch(Jf))):(yv(e,i.targetId),yield dv(e.localStore,i.targetId,!0))}),BN.apply(this,arguments)}function VN(){return VN=(0,le.Z)(function*(n,t,e){const i=sF(n);try{const r=yield function(s,c){const d=st(s),f=ji.now(),_=c.reduce((M,R)=>M.add(R.key),cn());let b,D;return d.persistence.runTransaction("Locally write mutations","readwrite",M=>{let R=Uo(),U=cn();return d.Zi.getEntries(M,_).next(q=>{R=q,R.forEach((J,we)=>{we.isValidDocument()||(U=U.add(J))})}).next(()=>d.localDocuments.getOverlayedDocuments(M,R)).next(q=>{b=q;const J=[];for(const we of c){const He=CY(we,b.get(we.key).overlayedDocument);null!=He&&J.push(new Gd(we.key,He,u3(He.value.mapValue),Gi.exists(!0)))}return d.mutationQueue.addMutationBatch(M,f,J,c)}).next(q=>{D=q;const J=q.applyToLocalDocumentSet(b,U);return d.documentOverlayCache.saveOverlays(M,q.batchId,J)})}).then(()=>({batchId:D.batchId,changes:x3(b)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let f=s.Tc[s.currentUser.toKey()];f||(f=new wi(Qt)),f=f.insert(c,d),s.Tc[s.currentUser.toKey()]=f}(i,r.batchId,e),yield $d(i,r.changes),yield fv(i.remoteStore)}catch(r){const s=mv(r,"Failed to persist write");e.reject(s)}}),VN.apply(this,arguments)}function h6(n,t){return UN.apply(this,arguments)}function UN(){return UN=(0,le.Z)(function*(n,t){const e=st(n);try{const i=yield p7(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.yc.get(s);c&&(xt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.fc=!0:r.modifiedDocuments.size>0?xt(c.fc):r.removedDocuments.size>0&&(xt(c.fc),c.fc=!1))}),yield $d(e,i,t)}catch(i){yield Jf(i)}}),UN.apply(this,arguments)}function f6(n,t,e){const i=st(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.wc.forEach((s,c)=>{const d=c.view.Mu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=st(s);d.onlineState=c;let f=!1;d.queries.forEach((_,b)=>{for(const D of b.listeners)D.Mu(c)&&(f=!0)}),f&&ON(d)}(i.eventManager,t),r.length&&i.dc.nu(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function Y7(n,t,e){return HN.apply(this,arguments)}function HN(){return HN=(0,le.Z)(function*(n,t,e){const i=st(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.yc.get(t),s=r&&r.key;if(s){let c=new wi(it.comparator);c=c.insert(s,Oi.newNoDocument(s,At.min()));const d=cn().add(s),f=new Jw(At.min(),new Map,new wi(Qt),c,d);yield h6(i,f),i.gc=i.gc.remove(s),i.yc.delete(t),ZN(i)}else yield dv(i.localStore,t,!1).then(()=>yv(i,t,e)).catch(Jf)}),HN.apply(this,arguments)}function K7(n,t){return jN.apply(this,arguments)}function jN(){return jN=(0,le.Z)(function*(n,t){const e=st(n),i=t.batch.batchId;try{const r=yield f7(e.localStore,t);qN(e,i,null),$N(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield $d(e,r)}catch(r){yield Jf(r)}}),jN.apply(this,arguments)}function Q7(n,t,e){return GN.apply(this,arguments)}function GN(){return GN=(0,le.Z)(function*(n,t,e){const i=st(n);try{const r=yield function(s,c){const d=st(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return d.mutationQueue.lookupMutationBatch(f,c).next(b=>(xt(null!==b),_=b.keys(),d.mutationQueue.removeMutationBatch(f,b))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,_,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_)).next(()=>d.localDocuments.getDocuments(f,_))})}(i.localStore,t);qN(i,t,e),$N(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield $d(i,r)}catch(r){yield Jf(r)}}),GN.apply(this,arguments)}function zN(){return zN=(0,le.Z)(function*(n,t){const e=st(n);dp(e.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=st(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Ec.get(i)||[];r.push(t),e.Ec.set(i,r)}catch(i){const r=mv(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),zN.apply(this,arguments)}function $N(n,t){(n.Ec.get(t)||[]).forEach(e=>{e.resolve()}),n.Ec.delete(t)}function qN(n,t,e){const i=st(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function yv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n._c.get(t))n.wc.delete(i),e&&n.dc.Pc(i,e);n._c.delete(t),n.isPrimaryClient&&n.Ic.Is(t).forEach(i=>{n.Ic.containsKey(i)||p6(n,i)})}function p6(n,t){n.mc.delete(t.path.canonicalString());const e=n.gc.get(t);null!==e&&(fC(n.remoteStore,e),n.gc=n.gc.remove(t),n.yc.delete(e),ZN(n))}function WN(n,t,e){for(const i of e)i instanceof c6?(n.Ic.addReference(i.key,t),X7(n,i)):i instanceof u6?(je("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,t),n.Ic.containsKey(i.key)||p6(n,i.key)):mt()}function X7(n,t){const e=t.key,i=e.path.canonicalString();n.gc.get(e)||n.mc.has(i)||(je("SyncEngine","New document in limbo: "+e),n.mc.add(i),ZN(n))}function ZN(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const t=n.mc.values().next().value;n.mc.delete(t);const e=new it(An.fromString(t)),i=n.Ac.next();n.yc.set(i,new z7(e)),n.gc=n.gc.insert(e,i),$S(n.remoteStore,new zd(fo(tv(e.path)),i,"TargetPurposeLimboResolution",ha.ct))}}function $d(n,t,e){return YN.apply(this,arguments)}function YN(){return YN=(0,le.Z)(function*(n,t,e){const i=st(n),r=[],s=[],c=[];var d;i.wc.isEmpty()||(i.wc.forEach((d,f)=>{c.push(i.Rc(f,t,e).then(_=>{if((_||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,_?.fromCache?"not-current":"current"),_){r.push(_);const b=XP.Li(f.targetId,_);s.push(b)}}))}),yield Promise.all(c),i.dc.nu(r),yield(d=(0,le.Z)(function*(f,_){const b=st(f);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>de.forEach(_,M=>de.forEach(M.Fi,R=>b.persistence.referenceDelegate.addReference(D,M.targetId,R)).next(()=>de.forEach(M.Bi,R=>b.persistence.referenceDelegate.removeReference(D,M.targetId,R)))))}catch(D){if(!Xf(D))throw D;je("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const M=D.targetId;if(!D.fromCache){const R=b.Ji.get(M),q=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);b.Ji=b.Ji.insert(M,q)}}}),function(f,_){return d.apply(this,arguments)})(i.localStore,s))}),YN.apply(this,arguments)}function eK(n,t){return KN.apply(this,arguments)}function KN(){return KN=(0,le.Z)(function*(n,t){const e=st(n);if(!e.currentUser.isEqual(t)){je("SyncEngine","User change. New user:",t.toKey());const i=yield HG(e.localStore,t);e.currentUser=t,(r=e).Ec.forEach(c=>{c.forEach(d=>{d.reject(new Be(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield $d(e,i.er)}var r}),KN.apply(this,arguments)}function tK(n,t){const e=st(n),i=e.yc.get(t);if(i&&i.fc)return cn().add(i.key);{let r=cn();const s=e._c.get(t);if(!s)return r;for(const c of s){const d=e.wc.get(c);r=r.unionWith(d.view.nc)}return r}}function nK(n,t){return QN.apply(this,arguments)}function QN(){return QN=(0,le.Z)(function*(n,t){const e=st(n),i=yield US(e.localStore,t.query,!0),r=t.view.hc(i);return e.isPrimaryClient&&WN(e,t.targetId,r.cc),r}),QN.apply(this,arguments)}function iK(n,t){return JN.apply(this,arguments)}function JN(){return JN=(0,le.Z)(function*(n,t){const e=st(n);return $G(e.localStore,t).then(i=>$d(e,i))}),JN.apply(this,arguments)}function rK(n,t,e,i){return XN.apply(this,arguments)}function XN(){return XN=(0,le.Z)(function*(n,t,e,i){const r=st(n),s=yield function(c,d){const f=st(c),_=st(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",b=>_.Sn(b,d).next(D=>D?f.localDocuments.getDocuments(b,D):de.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield fv(r.remoteStore):"acknowledged"===e||"rejected"===e?(qN(r,t,i||null),$N(r,t),d=t,st(st(r.localStore).mutationQueue).Cn(d)):mt(),yield $d(r,s)):je("SyncEngine","Cannot apply mutation batch with id: "+t)}),XN.apply(this,arguments)}function eF(){return eF=(0,le.Z)(function*(n,t){const e=st(n);if(rF(e),sF(e),!0===t&&!0!==e.vc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield m6(e,i.toArray());e.vc=!0,yield IN(e.remoteStore,!0);for(const s of r)$S(e.remoteStore,s)}else if(!1===t&&!1!==e.vc){const i=[];let r=Promise.resolve();e._c.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(yv(e,c),dv(e.localStore,c,!0))),fC(e.remoteStore,c)}),yield r,yield m6(e,i),function(s){const c=st(s);c.yc.forEach((d,f)=>{fC(c.remoteStore,f)}),c.Ic.Ts(),c.yc=new Map,c.gc=new wi(it.comparator)}(e),e.vc=!1,yield IN(e.remoteStore,!1)}}),eF.apply(this,arguments)}function m6(n,t,e){return tF.apply(this,arguments)}function tF(){return tF=(0,le.Z)(function*(n,t,e){const i=st(n),r=[],s=[];for(const c of t){let d;const f=i._c.get(c);if(f&&0!==f.length){d=yield uv(i.localStore,fo(f[0]));for(const _ of f){const b=i.wc.get(_),D=yield nK(i,b);D.snapshot&&s.push(D.snapshot)}}else{const _=yield zG(i.localStore,c);d=yield uv(i.localStore,_),yield FN(i,g6(_),c,!1,d.resumeToken)}r.push(d)}return i.dc.nu(s),r}),tF.apply(this,arguments)}function g6(n){return C3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function oK(n){const t=st(n);return st(st(t.localStore).persistence).$i()}function aK(n,t,e,i){return nF.apply(this,arguments)}function nF(){return nF=(0,le.Z)(function*(n,t,e,i){const r=st(n);if(r.vc)return void je("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield $G(r.localStore,D3(s[0])),d=Jw.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Hr.EMPTY_BYTE_STRING);yield $d(r,c,d);break}case"rejected":yield dv(r.localStore,t,!0),yv(r,t,i);break;default:mt()}}),nF.apply(this,arguments)}function lK(n,t,e){return iF.apply(this,arguments)}function iF(){return iF=(0,le.Z)(function*(n,t,e){const i=rF(n);if(i.vc){for(const r of t){if(i._c.has(r)){je("SyncEngine","Adding an already active target "+r);continue}const s=yield zG(i.localStore,r),c=yield uv(i.localStore,s);yield FN(i,g6(s),c.targetId,!1,c.resumeToken),$S(i.remoteStore,c)}for(const r of e)i._c.has(r)&&(yield dv(i.localStore,r,!1).then(()=>{fC(i.remoteStore,r),yv(i,r)}).catch(Jf))}}),iF.apply(this,arguments)}function rF(n){const t=st(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=h6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tK.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Y7.bind(null,t),t.dc.nu=V7.bind(null,t.eventManager),t.dc.Pc=U7.bind(null,t.eventManager),t}function sF(n){const t=st(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=K7.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Q7.bind(null,t),t}class pC{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,le.Z)(function*(){e.serializer=dC(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return UG(this.persistence,new VG,t.initialUser,this.serializer)}createPersistence(t){return new YP(LS.zs,this.serializer)}createSharedClientState(t){return new YG}terminate(){var t=this;return(0,le.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class oF extends pC{constructor(t,e,i){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,le.Z)(function*(){yield e().call(i,t),yield i.Vc.initialize(i,t),yield sF(i.Vc.syncEngine),yield fv(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return UG(this.persistence,new VG,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new AG(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new P9(e,this.persistence);return new O9(t.asyncQueue,i)}createPersistence(t){const e=JP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?qs.withCacheSize(this.cacheSizeBytes):qs.DEFAULT;return new QP(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,QG(),zS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new YG}}class _6 extends oF{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,le.Z)(function*(){yield e().call(i,t);const r=i.Vc.syncEngine;i.sharedClientState instanceof aN&&(i.sharedClientState.syncEngine={jr:rK.bind(null,r),zr:aK.bind(null,r),Wr:lK.bind(null,r),$i:oK.bind(null,r),Qr:iK.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,le.Z)(function*(c){yield function sK(n,t){return eF.apply(this,arguments)}(i.Vc.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=QG();if(!aN.D(e))throw new Be(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=JP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new aN(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class vv{initialize(t,e){var i=this;return(0,le.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>f6(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=eK.bind(null,i.syncEngine),yield IN(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new B7}createDatastore(t){const e=dC(t.databaseInfo.databaseId),i=new w7(t.databaseInfo);return new T7(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>f6(this.syncEngine,d,0),c=KG.D()?new KG:new y7,new S7(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,f,_){const b=new $7(i,r,s,c,d,f);return _&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,le.Z)(function*(e){const i=st(e);je("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield hv(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function y6(n,t=10240){let e=0;return{read:()=>(0,le.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class WS{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):fr("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class dK{constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new Ur,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var t=this;return(0,le.Z)(function*(){return t.metadata.promise})()}bc(){var t=this;return(0,le.Z)(function*(){return yield t.getMetadata(),t.Nc()})()}Nc(){var t=this;return(0,le.Z)(function*(){const e=yield t.kc();if(null===e)return null;const i=t.xc.decode(e),r=Number(i);isNaN(r)&&t.Mc(`length string (${i}) is not valid number`);const s=yield t.$c(r);return new H7(JSON.parse(s),e.length+r)})()}Oc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}kc(){var t=this;return(0,le.Z)(function*(){for(;t.Oc()<0&&!(yield t.Fc()););if(0===t.buffer.length)return null;const e=t.Oc();e<0&&t.Mc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}$c(t){var e=this;return(0,le.Z)(function*(){for(;e.buffer.length<t;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const i=e.xc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}Fc(){var t=this;return(0,le.Z)(function*(){const e=yield t.Cc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class hK{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Be(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,le.Z)(function*(s,c){const d=st(s),f=tC(d.serializer)+"/documents",_={documents:c.map(R=>eC(d.serializer,R))},b=yield d.vo("BatchGetDocuments",f,_,c.length),D=new Map;b.forEach(R=>{const U=function RY(n,t){return"found"in t?function(e,i){xt(!!i.found);const r=bu(e,i.found.name),s=pr(i.found.updateTime),c=i.found.createTime?pr(i.found.createTime):At.min(),d=new As({mapValue:{fields:i.found.fields}});return Oi.newFoundDocument(r,s,c,d)}(n,t):"missing"in t?function(e,i){xt(!!i.missing),xt(!!i.readTime);const r=bu(e,i.missing),s=pr(i.readTime);return Oi.newNoDocument(r,s)}(n,t):mt()}(d.serializer,R);D.set(U.key.toString(),U)});const M=[];return c.forEach(R=>{const U=D.get(R.toString());xt(!!U),M.push(U)}),M}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new sv(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=it.fromPath(r);t.mutations.push(new AP(s,t.precondition(s)))}),yield(i=(0,le.Z)(function*(r,s){const c=st(r),d=tC(c.serializer)+"/documents",f={writes:s.map(_=>nC(c.serializer,_))};yield c.Io("Commit",d,f)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw mt();e=At.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Be(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(At.min())?Gi.exists(!1):Gi.updateTime(e):Gi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(At.min()))throw new Be(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gi.updateTime(e)}return Gi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class fK{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new cN(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var t=this;this.qo.No((0,le.Z)(function*(){const e=new hK(t.datastore),i=t.qc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Uc(s)}))}).catch(r=>{t.Uc(r)})}))}qc(t){try{const e=this.updateFunction(t);return!Bw(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!G3(e)}return!1}}class pK{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=as.UNAUTHENTICATED,this.clientId=Vj.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,le.Z)(function*(d){je("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,le.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=mv(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function ZS(n,t){return aF.apply(this,arguments)}function aF(){return aF=(0,le.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,le.Z)(function*(s){i.isEqual(s)||(yield HG(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),aF.apply(this,arguments)}function lF(n,t){return cF.apply(this,arguments)}function cF(){return cF=(0,le.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield uF(n);je("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>s6(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>s6(t.remoteStore,s)),n._onlineComponents=t}),cF.apply(this,arguments)}function v6(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function uF(n){return dF.apply(this,arguments)}function dF(){return dF=(0,le.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ZS(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!v6(e))throw e;Ya("Error using user provided cache. Falling back to memory cache: "+e),yield ZS(n,new pC)}}else je("FirestoreClient","Using default OfflineComponentProvider"),yield ZS(n,new pC);return n._offlineComponents}),dF.apply(this,arguments)}function YS(n){return hF.apply(this,arguments)}function hF(){return hF=(0,le.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je("FirestoreClient","Using user provided OnlineComponentProvider"),yield lF(n,n._uninitializedComponentsProvider._online)):(je("FirestoreClient","Using default OnlineComponentProvider"),yield lF(n,new vv))),n._onlineComponents}),hF.apply(this,arguments)}function b6(n){return uF(n).then(t=>t.persistence)}function KS(n){return uF(n).then(t=>t.localStore)}function w6(n){return YS(n).then(t=>t.remoteStore)}function fF(n){return YS(n).then(t=>t.syncEngine)}function bv(n){return pF.apply(this,arguments)}function pF(){return pF=(0,le.Z)(function*(n){const t=yield YS(n),e=t.eventManager;return e.onListen=q7.bind(null,t.syncEngine),e.onUnlisten=W7.bind(null,t.syncEngine),e}),pF.apply(this,arguments)}function E6(n,t,e={}){const i=new Ur;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(r,s,c,d,f){const _=new WS({next:D=>{s.enqueueAndForget(()=>kN(r,b));const M=D.docs.has(c);!M&&D.fromCache?f.reject(new Be(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&D.fromCache&&d&&"server"===d.source?f.reject(new Be(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(D)},error:D=>f.reject(D)}),b=new PN(tv(c.path),_,{includeMetadataChanges:!0,Ku:!0});return MN(r,b)}(yield bv(n),n.asyncQueue,t,e,i)})),i.promise}function T6(n,t,e={}){const i=new Ur;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(r,s,c,d,f){const _=new WS({next:D=>{s.enqueueAndForget(()=>kN(r,b)),D.fromCache&&"server"===d.source?f.reject(new Be(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(D)},error:D=>f.reject(D)}),b=new PN(c,_,{includeMetadataChanges:!0,Ku:!0});return MN(r,b)}(yield bv(n),n.asyncQueue,t,e,i)})),i.promise}function D6(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const I6=new Map;function mF(n,t,e){if(!e)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function S6(n,t,e,i){if(!0===t&&!0===i)throw new Be(ge.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function x6(n){if(!it.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function M6(n){if(it.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":mt()}function In(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Be(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=QS(n);throw new Be(ge.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function A6(n,t){if(t<=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class k6{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Be(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Be(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}S6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=D6(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class mC{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k6({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Be(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k6(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new w9;switch(e.type){case"firstParty":return new D9(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Be(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=I6.get(t);e&&(je("ComponentProvider","Removing Datastore"),I6.delete(t),e.terminate())}(this),Promise.resolve()}}function R6(n,t,e,i={}){var r;const s=(n=In(n,mC))._getSettings(),c=`${t}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==c&&Ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:c,ssl:!1})),i.mockUserToken){let d,f;if("string"==typeof i.mockUserToken)d=i.mockUserToken,f=as.MOCK_USER;else{d=(0,V.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new Be(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new as(_)}n._authCredentials=new C9(new Lj(d,f))}}class Pi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pi(this.firestore,t,this._key)}}class ks{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ks(this.firestore,t,this._query)}}class wu extends ks{constructor(t,e,i){super(t,e,tv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pi(this.firestore,null,new it(t))}withConverter(t){return new wu(this.firestore,t,this._path)}}function Zs(n,t,...e){if(n=(0,V.m9)(n),mF("collection","path",t),n instanceof mC){const i=An.fromString(t,...e);return M6(i),new wu(n,null,i)}{if(!(n instanceof Pi||n instanceof wu))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(An.fromString(t,...e));return M6(i),new wu(n.firestore,null,i)}}function qd(n,t,...e){if(n=(0,V.m9)(n),1===arguments.length&&(t=Vj.A()),mF("doc","path",t),n instanceof mC){const i=An.fromString(t,...e);return x6(i),new Pi(n,null,new it(i))}{if(!(n instanceof Pi||n instanceof wu))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(An.fromString(t,...e));return x6(i),new Pi(n.firestore,n instanceof wu?n.converter:null,new it(i))}}function O6(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),(n instanceof Pi||n instanceof wu)&&(t instanceof Pi||t instanceof wu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function gF(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),n instanceof ks&&t instanceof ks&&n.firestore===t.firestore&&$w(n._query,t._query)&&n.converter===t.converter}class TK{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new cN(this,"async_queue_retry"),this.Xc=()=>{const e=zS();e&&je("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const t=zS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=zS();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new Ur;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qc.push(t),this.ea()))}ea(){var t=this;return(0,le.Z)(function*(){if(0!==t.Qc.length){try{yield t.Qc[0](),t.Qc.shift(),t.qo.reset()}catch(e){if(!Xf(e))throw e;je("AsyncQueue","Operation failed with retryable error: "+e)}t.Qc.length>0&&t.qo.No(()=>t.ea())}})()}ta(t){const e=this.Gc.then(()=>(this.Hc=!0,t().catch(i=>{throw this.Wc=i,this.Hc=!1,fr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=e,e}enqueueAfterDelay(t,e,i){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const r=xN.createAndSchedule(this,t,e,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&mt()}verifyOperationInProgress(){}sa(){var t=this;return(0,le.Z)(function*(){let e;do{e=t.Gc,yield e}while(e!==t.Gc)})()}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then(()=>{this.zc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()})}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function _F(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class DK{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ni extends mC{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new TK,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||P6(this),this._firestoreClient.terminate()}}function mr(n){return n._firestoreClient||P6(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function P6(n){var t,e,i;const r=n._freezeSettings(),s=(d=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new tY(n._databaseId,d,n._persistenceKey,(_=r).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,D6(_.experimentalLongPollingOptions),_.useFetchStreams));var d,_;n._firestoreClient=new pK(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(e=r.cache)||void 0===e?void 0:e._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function N6(n,t,e){const i=new Ur;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield ZS(n,e),yield lF(n,t),i.resolve()}catch(r){const s=r;if(!v6(s))throw s;Ya("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function F6(n){if(n._initialized||n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Cu(Hr.fromBase64String(t))}catch(e){throw new Be(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Cu(Hr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Wd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Be(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Lg{constructor(t){this._methodName=t}}class JS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Be(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Be(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Qt(this._lat,t._lat)||Qt(this._long,t._long)}}const LK=/^__.*__$/;class BK{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Gd(t,this.data,this.fieldMask,e,this.fieldTransforms):new rv(t,this.data,e,this.fieldTransforms)}}class L6{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Gd(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function B6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class XS{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new XS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.fa(t),r}da(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.ua(),r}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return nx(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(B6(this.ca)&&LK.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class VK{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||dC(t)}ya(t,e,i,r=!1){return new XS({ca:t,methodName:e,ga:i,path:sr.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bg(n){const t=n._freezeSettings(),e=dC(n._databaseId);return new VK(n._databaseId,!!t.ignoreUndefinedProperties,e)}function ex(n,t,e,i,r,s={}){const c=n.ya(s.merge||s.mergeFields?2:0,t,e,r);wF("Data must be an object, but it was:",c,i);const d=H6(i,c);let f,_;if(s.merge)f=new Vo(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const b=[];for(const D of s.mergeFields){const M=yC(t,D,e);if(!c.contains(M))throw new Be(ge.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);G6(b,M)||b.push(M)}f=new Vo(b),_=c.fieldTransforms.filter(D=>f.covers(D.field))}else f=null,_=c.fieldTransforms;return new BK(new As(d),f,_)}class _C extends Lg{_toFieldTransform(t){if(2!==t.ca)throw t._a(1===t.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _C}}function V6(n,t,e){return new XS({ca:3,ga:t.settings.ga,methodName:n._methodName,la:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class yF extends Lg{_toFieldTransform(t){return new Yw(t.path,new nv)}isEqual(t){return t instanceof yF}}class UK extends Lg{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=V6(this,t,!0),i=this.pa.map(s=>Vg(s,e)),r=new xg(i);return new Yw(t.path,r)}isEqual(t){return this===t}}class HK extends Lg{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=V6(this,t,!0),i=this.pa.map(s=>Vg(s,e)),r=new Mg(i);return new Yw(t.path,r)}isEqual(t){return this===t}}class jK extends Lg{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new iv(t.serializer,R3(t.serializer,this.Ia));return new Yw(t.path,e)}isEqual(t){return this===t}}function vF(n,t,e,i){const r=n.ya(1,t,e);wF("Data must be an object, but it was:",r,i);const s=[],c=As.empty();ep(i,(f,_)=>{const b=tx(t,f,e);_=(0,V.m9)(_);const D=r.da(b);if(_ instanceof _C)s.push(b);else{const M=Vg(_,D);null!=M&&(s.push(b),c.set(b,M))}});const d=new Vo(s);return new L6(c,d,r.fieldTransforms)}function bF(n,t,e,i,r,s){const c=n.ya(1,t,e),d=[yC(t,i,e)],f=[r];if(s.length%2!=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)d.push(yC(t,s[M])),f.push(s[M+1]);const _=[],b=As.empty();for(let M=d.length-1;M>=0;--M)if(!G6(_,d[M])){const R=d[M];let U=f[M];U=(0,V.m9)(U);const q=c.da(R);if(U instanceof _C)_.push(R);else{const J=Vg(U,q);null!=J&&(_.push(R),b.set(R,J))}}const D=new Vo(_);return new L6(b,D,c.fieldTransforms)}function U6(n,t,e,i=!1){return Vg(e,n.ya(i?4:3,t))}function Vg(n,t){if(j6(n=(0,V.m9)(n)))return wF("Unsupported field value:",t,n),H6(n,t);if(n instanceof Lg)return function(e,i){if(!B6(i.ca))throw i._a(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=Vg(c,i.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,V.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return R3(i.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=ji.fromDate(e);return{timestampValue:ov(i.serializer,r)}}if(e instanceof ji){const r=new ji(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ov(i.serializer,r)}}if(e instanceof JS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Cu)return{bytesValue:X3(i.serializer,e._byteString)};if(e instanceof Pi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:LP(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i._a(`Unsupported field value: ${QS(e)}`)}(n,t)}function H6(n,t){const e={};return e3(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ep(n,(i,r)=>{const s=Vg(r,t.ha(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function j6(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ji||n instanceof JS||n instanceof Cu||n instanceof Pi||n instanceof Lg)}function wF(n,t,e){if(!j6(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=QS(e);throw t._a("an object"===i?n+" a custom object":n+" "+i)}var i}function yC(n,t,e){if((t=(0,V.m9)(t))instanceof Wd)return t._internalPath;if("string"==typeof t)return tx(n,t);throw nx("Field path arguments must be of type string or ",n,!1,void 0,e)}const GK=new RegExp("[~\\*/\\[\\]]");function tx(n,t,e){if(t.search(GK)>=0)throw nx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Wd(...t.split("."))._internalPath}catch{throw nx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function nx(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||c)&&(f+=" (found",s&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new Be(ge.INVALID_ARGUMENT,d+n+f)}function G6(n,t){return n.some(e=>e.isEqual(t))}class vC{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new zK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(ix("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class zK extends vC{data(){return super.data()}}function ix(n,t){return"string"==typeof t?tx(n,t):t instanceof Wd?t._internalPath:t._delegate._internalPath}function z6(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CF{}class bC extends CF{}function jr(n,t,...e){let i=[];t instanceof CF&&i.push(t),i=i.concat(e),function(r){const s=r.filter(d=>d instanceof wv).length,c=r.filter(d=>d instanceof wC).length;if(s>1||s>0&&c>0)throw new Be(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class wC extends bC{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new wC(t,e,i)}_apply(t){const e=this._parse(t);return Z6(t._query,e),new ks(t.firestore,t.converter,SP(t._query,e))}_parse(t){const e=Bg(t.firestore);return function(r,s,c,d,f,_,b){let D;if(f.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){W6(b,_);const M=[];for(const R of b)M.push(q6(d,r,R));D={arrayValue:{values:M}}}else D=q6(d,r,b)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||W6(b,_),D=U6(c,"where",b,"in"===_||"not-in"===_);return Dn.create(f,_,D)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}function Ys(n,t,e){const i=t,r=ix("where",n);return wC._create(r,i,e)}class wv extends CF{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new wv(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:Jn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let s=i;const c=r.getFlattenedFilters();for(const d of c)Z6(s,d),s=SP(s,d)}(t._query,e),new ks(t.firestore,t.converter,SP(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class EF extends bC{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new EF(t,e)}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Xy(r,s);return function(d,f){if(null===DP(d)){const _=CS(d);null!==_&&Y6(0,_,f.field)}}(i,c),c}(t._query,this._field,this._direction);return new ks(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Hd(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class rx extends bC{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new rx(t,e,i)}_apply(t){return new ks(t.firestore,t.converter,ES(t._query,this._limit,this._limitType))}}class sx extends bC{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new sx(t,e,i)}_apply(t){const e=$6(t,this.type,this._docOrFields,this._inclusive);return new ks(t.firestore,t.converter,(r=e,new Hd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class ox extends bC{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new ox(t,e,i)}_apply(t){const e=$6(t,this.type,this._docOrFields,this._inclusive);return new ks(t.firestore,t.converter,(r=e,new Hd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function $6(n,t,e,i){if(e[0]=(0,V.m9)(e[0]),e[0]instanceof vC)return function(r,s,c,d,f){if(!d)throw new Be(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const b of Sg(r))if(b.field.isKeyField())_.push(Dg(s,d.key));else{const D=d.data.field(b.field);if(mS(D))throw new Be(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const M=b.field.canonicalString();throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}_.push(D)}return new op(_,f)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Bg(n.firestore);return function(s,c,d,f,_,b){const D=s.explicitOrderBy;if(_.length>D.length)throw new Be(ge.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let R=0;R<_.length;R++){const U=_[R];if(D[R].field.isKeyField()){if("string"!=typeof U)throw new Be(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof U}`);if(!IP(s)&&-1!==U.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${U}' contains a slash.`);const q=s.path.child(An.fromString(U));if(!it.isDocumentKey(q))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${q}' is not because it contains an odd number of segments.`);const J=new it(q);M.push(Dg(c,J))}else{const q=U6(d,f,U);M.push(q)}}return new op(M,b)}(n._query,n.firestore._databaseId,r,t,e,i)}}function q6(n,t,e){if("string"==typeof(e=(0,V.m9)(e))){if(""===e)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IP(t)&&-1!==e.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(An.fromString(e));if(!it.isDocumentKey(i))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Dg(n,new it(i))}if(e instanceof Pi)return Dg(n,e._key);throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QS(e)}.`)}function W6(n,t){if(!Array.isArray(n)||0===n.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Z6(n,t){if(t.isInequality()){const i=CS(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=DP(n);null!==s&&Y6(0,r,s)}const e=function(i,r){for(const s of i)for(const c of s.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Be(ge.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function Y6(n,t,e){if(!e.isEqual(t))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class TF{convertValue(t,e="none"){switch(rp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return or(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ud(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw mt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return ep(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new JS(or(t.latitude),or(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=gS(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Uw(t));default:return null}}convertTimestamp(t){const e=tp(t);return new ji(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=An.fromString(t);xt(cG(i));const r=new np(i.get(1),i.get(3)),s=new it(i.popFirst(5));return r.isEqual(e)||fr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function ax(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class JK extends TF{constructor(t){super(),this.firestore=t}convertBytes(t){return new Cu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Pi(this.firestore,null,e)}}class Ug{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Zd extends vC{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new CC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(ix("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class CC extends Zd{data(t={}){return super.data(t)}}class fp{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ug(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new CC(this._firestore,this._userDataWriter,i.key,i,new Ug(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Be(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new CC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ug(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new CC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ug(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,_=-1;return 0!==c.type&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:eQ(c.type),doc:d,oldIndex:f,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function eQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function Q6(n,t){return n instanceof Zd&&t instanceof Zd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof fp&&t instanceof fp&&n._firestore===t._firestore&&gF(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class pp extends TF{constructor(t){super(),this.firestore=t}convertBytes(t){return new Cu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Pi(this.firestore,null,e)}}function fa(n){n=In(n,ks);const t=In(n.firestore,Ni),e=mr(t),i=new pp(t);return z6(n._query),T6(e,n._query).then(r=>new fp(t,i,n,r))}function DF(n,t,e){n=In(n,Pi);const i=In(n.firestore,Ni),r=ax(n.converter,t,e);return Cv(i,[ex(Bg(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Gi.none())])}function lx(n,t,e,...i){n=In(n,Pi);const r=In(n.firestore,Ni),s=Bg(r);let c;return c="string"==typeof(t=(0,V.m9)(t))||t instanceof Wd?bF(s,"updateDoc",n._key,t,e,i):vF(s,"updateDoc",n._key,t),Cv(r,[c.toMutation(n._key,Gi.exists(!0))])}function J6(n){return Cv(In(n.firestore,Ni),[new sv(n._key,Gi.none())])}function IF(n,t){const e=In(n.firestore,Ni),i=qd(n),r=ax(n.converter,t);return Cv(e,[ex(Bg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Gi.exists(!1))]).then(()=>i)}function X6(n,...t){var e,i,r;n=(0,V.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||_F(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(_F(t[c])){const D=t[c];t[c]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[c+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),t[c+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let f,_,b;if(n instanceof Pi)_=In(n.firestore,Ni),b=tv(n._key.path),f={next:D=>{t[c]&&t[c](SF(_,n,D))},error:t[c+1],complete:t[c+2]};else{const D=In(n,ks);_=In(D.firestore,Ni),b=D._query;const M=new pp(_);f={next:R=>{t[c]&&t[c](new fp(_,M,D,R))},error:t[c+1],complete:t[c+2]},z6(n._query)}return function(D,M,R,U){const q=new WS(U),J=new PN(M,q,R);return D.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return MN(yield bv(D),J)})),()=>{q.Dc(),D.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return kN(yield bv(D),J)}))}}(mr(_),b,d,f)}function Cv(n,t){return function(e,i){const r=new Ur;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function Z7(n,t,e){return VN.apply(this,arguments)}(yield fF(e),i,r)})),r.promise}(mr(n),t)}function SF(n,t,e){const i=e.docs.get(t._key),r=new pp(n);return new Zd(n,r,t._key,i,new Ug(e.hasPendingWrites,e.fromCache),t.converter)}const mQ={maxAttempts:5};class ez{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Bg(t)}set(t,e,i){this._verifyNotCommitted();const r=mp(t,this._firestore),s=ax(r.converter,e,i),c=ex(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Gi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=mp(t,this._firestore);let c;return c="string"==typeof(e=(0,V.m9)(e))||e instanceof Wd?bF(this._dataReader,"WriteBatch.update",s._key,e,i,r):vF(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,Gi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=mp(t,this._firestore);return this._mutations=this._mutations.concat(new sv(e._key,Gi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mp(n,t){if((n=(0,V.m9)(n)).firestore!==t)throw new Be(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gQ extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Bg(t)}get(t){const e=mp(t,this._firestore),i=new JK(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return mt();const s=r[0];if(s.isFoundDocument())return new vC(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new vC(this._firestore,i,e._key,null,e.converter);throw mt()})}set(t,e,i){const r=mp(t,this._firestore),s=ax(r.converter,e,i),c=ex(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=mp(t,this._firestore);let c;return c="string"==typeof(e=(0,V.m9)(e))||e instanceof Wd?bF(this._dataReader,"Transaction.update",s._key,e,i,r):vF(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=mp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=mp(t,this._firestore),i=new pp(this._firestore);return super.get(t).then(r=>new Zd(this._firestore,i,e._key,r._document,new Ug(!1,!1),e.converter))}}function xF(n,t,e){n=In(n,Ni);const i=Object.assign(Object.assign({},mQ),e);return function(r){if(r.maxAttempts<1)throw new Be(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const d=new Ur;return r.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const f=yield function C6(n){return YS(n).then(t=>t.datastore)}(r);new fK(r.asyncQueue,f,c,s,d).run()})),d.promise}(mr(n),r=>t(new gQ(n,r)),i)}!function(n,t=!0){Yy=wn.SDK_VERSION,(0,wn._registerComponent)(new aa.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new Ni(new E9(e.getProvider("auth-internal")),new I9(e.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Be(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new np(d.options.projectId,f)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,wn.registerVersion)(Fj,"3.13.0",n),(0,wn.registerVersion)(Fj,"3.13.0","esm2017")}();let Yd=(()=>{class n{constructor(e){this.session=e,this.getFirestore()}getFirestore(){var e=this;return(0,le.Z)(function*(){try{e.db=function SK(n,t){const e="object"==typeof n?n:(0,wn.getApp)(),i="string"==typeof n?n:t||"(default)",r=(0,wn._getProvider)(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=(0,V.P0)("firestore");s&&R6(r,...s)}return r}()}catch{setTimeout(()=>{e.getFirestore()},500)}})()}checkUserExists(e){var i=this;return(0,le.Z)(function*(){return null!=(yield i.getUser(e))})()}checkIfJoinCodeExists(e){var i=this;return(0,le.Z)(function*(){const s=jr(Zs(i.db,"groups"),Ys("joinCode","==",e));try{return!(yield fa(s)).empty}catch(c){return console.error("Error checking join code:",c),!1}})()}getUser(e){var i=this;return(0,le.Z)(function*(){const s=jr(Zs(i.db,"users"),Ys("id","==",e)),c=yield fa(s);if(c.empty)return null;const d=[];return c.forEach(f=>{const _=f.data();d.push({name:_.name,id:_.id,groups:_.groups,wishlists:_.wishlists,wishlistTemplates:_.wishlistTemplates})}),d[0]})()}refreshUser(){var e=this;return(0,le.Z)(function*(){const i=yield e.getUser(e.session.getUser().id);i&&e.session.setUser(i)})()}createNewUser(e){var i=this;return(0,le.Z)(function*(){if(null==e||null==e.name||""==e.name)return;const r=Zs(i.db,"users");yield IF(r,e)})()}updateUserData(){const e=this.session.getUser();e&&fa(jr(Zs(this.db,"users"),Ys("id","==",e.id))).then(s=>{s.forEach(c=>{DF(c.ref,e,{merge:!0}).then(()=>{console.log("User data updated successfully in Firestore!")}).catch(d=>{console.error("Error updating user data: ",d)})})}).catch(s=>{console.error("Error querying Firestore: ",s)})}createNewGroup(e){var i=this;return(0,le.Z)(function*(){if(null==e||null==e.name||""==e.name||null==e.adminName||""==e.adminName)return;const r=Zs(i.db,"groups");yield IF(r,e)})()}getGroupFromJoinCode(e){var i=this;return new Promise(function(){var r=(0,le.Z)(function*(s,c){const f=jr(Zs(i.db,"groups"),Ys("joinCode","==",e));try{const _=yield fa(f);if(!_.empty){const b=_.docs[0].data();if(_.docs.length>0&&b)return s(b)}return s(null)}catch(_){return console.error("Error checking join code:",_),c("BAD")}});return function(s,c){return r.apply(this,arguments)}}())}getGroupsByParticipante(e,i){var r=this;return(0,le.Z)(function*(){const c=jr(Zs(r.db,"groups"),Ys(`participants.${e}`,"==",i));return new Promise(function(){var d=(0,le.Z)(function*(f,_){try{const b=yield fa(c);console.log("QS",b);const D=[];b.forEach(M=>{const R=M.data();D.push(R)}),console.log("OK"),f(D)}catch(b){console.error("Error querying groups by participant ID:",b),_(b)}});return function(f,_){return d.apply(this,arguments)}}())})()}getGroupsByParticipantId(e){var i=this;return(0,le.Z)(function*(){const r=Zs(i.db,"groups"),s=yield fa(r),c=[];return new Promise(function(){var d=(0,le.Z)(function*(f,_){try{s.forEach(b=>{const D=b.data();D.participants&&Object.values(D.participants).includes(e)&&c.push(D)}),f(c)}catch(b){console.error("Error querying groups by participant ID:",b),_(b)}});return function(f,_){return d.apply(this,arguments)}}())})()}getRecipientWishlist(e,i){var r=this;return(0,le.Z)(function*(){const c=jr(Zs(r.db,"users"),Ys("id","==",e));try{const d=yield fa(c);return d.empty?null:d.docs[0].data().wishlists.find(D=>D.name===i)||null}catch(d){throw console.error("Error getting recipient wishlist:",d),d}})()}updateParticipant(e,i,r,s){var c=this;return(0,le.Z)(function*(){const f=jr(Zs(c.db,"groups"),Ys("name","==",e),Ys("adminName","==",i));try{const _=yield fa(f);if(_.empty)console.error("Group not found");else{const D=_.docs[0].id;yield xF(c.db,function(){var M=(0,le.Z)(function*(R){const U=qd(c.db,"groups",D),q=yield R.get(U);if(q.exists()){const J=q.data();J.participants[r]=s,R.update(U,{participants:J.participants})}else console.error("Group not found")});return function(R){return M.apply(this,arguments)}}())}}catch(_){throw console.error("Error updating participant:",_),_}})()}updateGroupData(e,i,r,s=3){var c=this;return(0,le.Z)(function*(){const f=jr(Zs(c.db,"groups"),Ys("name","==",e),Ys("adminName","==",i));try{const _=yield fa(f);if(_.empty)console.error("Group not found");else{const D=_.docs[0].id;yield xF(c.db,function(){var M=(0,le.Z)(function*(R){const U=qd(c.db,"groups",D),q=yield R.get(U);if(q.exists()){const J=q.data(),we=J.participantsReady||{};r.participantsReady&&Object.keys(r.participantsReady).forEach(Ye=>{r.participantsReady&&(we[Ye]=r.participantsReady[Ye])}),J.participantsReady=we,delete r.participantsReady;const He=J.wishlists||{};r.wishlists&&Object.keys(r.wishlists).forEach(Ye=>{r.wishlists&&(He[Ye]=r.wishlists[Ye])}),J.wishlists=He,delete r.wishlists;const Ge={...J,...r};R.update(U,Ge)}else console.error("Group not found")});return function(R){return M.apply(this,arguments)}}())}}catch(_){if(console.error("Error updating group data:",_),!(s>0))throw console.error("Exceeded maximum retry attempts. Failed to update group data."),_;yield new Promise(b=>setTimeout(b,1e3)),yield c.updateGroupData(e,i,r,s-1)}})()}deleteGroup(e,i){var r=this;return(0,le.Z)(function*(){const c=jr(Zs(r.db,"groups"),Ys("name","==",e),Ys("adminName","==",i));try{const d=yield fa(c);if(d.empty)console.log(`Group ${e} with admin ${i} not found.`);else{const b=qd(r.db,"groups",d.docs[0].id);yield J6(b),console.log(`Group ${e} with admin ${i} deleted successfully.`)}}catch(d){throw console.error("Error deleting group:",d),d}})()}removeWishlistTemplateFromUser(e,i){var r=this;return(0,le.Z)(function*(){const c=jr(Zs(r.db,"users"),Ys("name","==",e));try{const d=yield fa(c);if(d.empty)console.log(`User ${e} not found.`);else{const f=d.docs[0],b=qd(r.db,"users",f.id),M=f.data().wishlistTemplates.filter(R=>R.name!==i);yield lx(b,{wishlistTemplates:M}),console.log(`Wishlist template ${i} removed successfully from user ${e}.`)}}catch(d){throw console.error("Error removing wishlist template:",d),d}})()}updateGroupWishlists(e,i,r){var s=this;return(0,le.Z)(function*(){const d=jr(Zs(s.db,"groups"),Ys("name","==",e),Ys("adminName","==",i));try{const f=yield fa(d);if(f.empty)console.error("Group not found");else{const D=qd(s.db,"groups",f.docs[0].id);yield lx(D,{wishlists:r})}}catch(f){throw console.error("Error updating wishlists in group data:",f),f}})()}clearWishlistFromGroups(e){var i=this;return(0,le.Z)(function*(){const r=i.session.getUser(),s=yield i.getGroupsByParticipantId(r.id);s.forEach(d=>{try{const f=function c(d,f){return Object.keys(d).find(b=>d[b]===f)||null}(d.participants,r.id),_=d.wishlists[f];if(_&&_==e){const b=JSON.parse(JSON.stringify(d.wishlists));delete b[f],i.updateGroupWishlists(d.name,d.adminName,b),console.log(f,_,d.wishlists,b),d.wishlists=b}}catch(f){console.log("Groups Loop",f)}console.log(i.session.getGroups())}),i.session.setGroups(s)})()}refreshGroups(){var e=this;return(0,le.Z)(function*(){const i=e.session.getUser();e.session.setGroups(yield e.getGroupsByParticipantId(i.id))})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(la))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CQ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"button",3),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.action())}),o._uU(2),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.data.action)}}function EQ(n,t){}const MF=new o.OlP("MatSnackBarData");class cx{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const TQ=Math.pow(2,31)-1;class AF{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Et.x,this._afterOpened=new Et.x,this._onAction=new Et.x,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,TQ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let DQ=(()=>{class n{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(AF),o.Y36(MF))},n.\u0275cmp=o.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"span",0),o._uU(1),o.qZA(),o.YNc(2,CQ,3,1,"div",1)),2&e&&(o.xp6(1),o.Oqu(i.data.message),o.xp6(1),o.Q6J("ngIf",i.hasAction))},dependencies:[Cn,co],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const IQ={snackBarState:Gn("state",[Tn("void, hidden",Jt({transform:"scale(0.8)",opacity:0})),Tn("visible",Jt({transform:"scale(1)",opacity:1})),zn("* => visible",ri("150ms cubic-bezier(0, 0, 0.2, 1)")),zn("* => void, * => hidden",ri("75ms cubic-bezier(0.4, 0.0, 1, 1)",Jt({opacity:0})))])};let SQ=(()=>{class n extends xy{constructor(e,i,r,s,c){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Et.x,this._onExit=new Et.x,this._onEnter=new Et.x,this._animationState="void",this.attachDomPortal=d=>{this._assertNotAttached();const f=this._portalOutlet.attachDomPortal(d);return this._afterPortalAttached(),f},this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}onAnimationEnd(e){const{fromState:i,toState:r}=e;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(hi(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>e.classList.add(r)):e.classList.add(i))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Lr),o.Y36(cx))},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&o.Gf(ig,7),2&e){let r;o.iGM(r=o.CRH())&&(i._portalOutlet=r.first)}},features:[o.qOj]}),n})(),xQ=(()=>{class n extends SQ{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,i){1&e&&o.WFA("@state.done",function(s){return i.onAnimationEnd(s)}),2&e&&o.d8E("@state",i._animationState)},features:[o.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,EQ,0,0,"ng-template",1),o.qZA(),o._UZ(2,"div")),2&e&&(o.xp6(2),o.uIk("aria-live",i._live)("role",i._role))},dependencies:[ig],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[IQ.snackBarState]}}),n})(),kF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Hf,lu,Wr,$f,St,St]}),n})();const nz=new o.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function MQ(){return new cx}});let AQ=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=c,this._defaultConfig=d,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){const s={...this._defaultConfig,...r};return s.data={message:e,action:i},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const s=o.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:cx,useValue:i}]}),c=new Vf(this.snackBarContainerComponent,i.viewContainerRef,s),d=e.attach(c);return d.instance.snackBarConfig=i,d.instance}_attach(e,i){const r={...new cx,...this._defaultConfig,...i},s=this._createOverlay(r),c=this._attachSnackBarContainer(s,r),d=new AF(c,s);if(e instanceof o.Rgc){const f=new ng(e,null,{$implicit:r.data,snackBarRef:d});d.instance=c.attachTemplatePortal(f)}else{const f=this._createInjector(r,d),_=new Vf(e,void 0,f),b=c.attachComponentPortal(_);d.instance=b.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(qn(s.detachments())).subscribe(f=>{s.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),r.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(d,r),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new rg;i.direction=e.direction;let r=this._overlay.position().global();const s="rtl"===e.direction,c="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,d=!c&&"center"!==e.horizontalPosition;return c?r.left("0"):d?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){return o.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:AF,useValue:i},{provide:MF,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($a),o.LFG(wD),o.LFG(o.zs3),o.LFG(v0),o.LFG(n,12),o.LFG(nz))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Hg=(()=>{class n extends AQ{constructor(e,i,r,s,c,d){super(e,i,r,s,c,d),this.simpleSnackBarComponent=DQ,this.snackBarContainerComponent=xQ,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($a),o.LFG(wD),o.LFG(o.zs3),o.LFG(v0),o.LFG(n,12),o.LFG(nz))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:kF}),n})();class iz{}class rz{}class Kd{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Kd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Kd;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Kd?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class kQ{encodeKey(t){return sz(t)}encodeValue(t){return sz(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const OQ=/%(\d[a-f0-9])/gi,PQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sz(n){return encodeURIComponent(n).replace(OQ,(t,e)=>PQ[e]??t)}function ux(n){return`${n}`}class gp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new kQ,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function RQ(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],f=e.get(c)||[];f.push(d),e.set(c,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(ux):[ux(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(ux(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(ux(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class NQ{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function oz(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function az(n){return typeof Blob<"u"&&n instanceof Blob}function lz(n){return typeof FormData<"u"&&n instanceof FormData}class EC{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function FQ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Kd),this.context||(this.context=new NQ),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new gp,this.urlWithParams=e}serializeBody(){return null===this.body?null:oz(this.body)||az(this.body)||lz(this.body)||function LQ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lz(this.body)?null:az(this.body)?this.body.type||null:oz(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,_=t.params||this.params;const b=t.context??this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((D,M)=>D.set(M,t.setHeaders[M]),f)),t.setParams&&(_=Object.keys(t.setParams).reduce((D,M)=>D.set(M,t.setParams[M]),_)),new EC(e,i,s,{params:_,headers:f,context:b,reportProgress:d,responseType:r,withCredentials:c})}}var Ir=(()=>((Ir=Ir||{})[Ir.Sent=0]="Sent",Ir[Ir.UploadProgress=1]="UploadProgress",Ir[Ir.ResponseHeader=2]="ResponseHeader",Ir[Ir.DownloadProgress=3]="DownloadProgress",Ir[Ir.Response=4]="Response",Ir[Ir.User=5]="User",Ir))();class RF{constructor(t,e=200,i="OK"){this.headers=t.headers||new Kd,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class OF extends RF{constructor(t={}){super(t),this.type=Ir.ResponseHeader}clone(t={}){return new OF({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class dx extends RF{constructor(t={}){super(t),this.type=Ir.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new dx({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class cz extends RF{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function PF(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let NF=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof EC)s=e;else{let f,_;f=r.headers instanceof Kd?r.headers:new Kd(r.headers),r.params&&(_=r.params instanceof gp?r.params:new gp({fromObject:r.params})),s=new EC(e,i,void 0!==r.body?r.body:null,{headers:f,context:r.context,params:_,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=ct(s).pipe(oo(f=>this.handler.handle(f)));if(e instanceof EC||"events"===r.observe)return c;const d=c.pipe(fi(f=>f instanceof dx));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,pt.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,pt.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,pt.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,pt.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new gp).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,PF(r,i))}post(e,i,r={}){return this.request("POST",e,PF(r,i))}put(e,i,r={}){return this.request("PUT",e,PF(r,i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(iz))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class uz{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const dz=new o.OlP("HTTP_INTERCEPTORS");let BQ=(()=>{class n{intercept(e,i){return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const VQ=/^\)\]\}',?\n/;let hz=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new nr.y(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((R,U)=>r.setRequestHeader(R,U.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const R=e.detectContentTypeHeader();null!==R&&r.setRequestHeader("Content-Type",R)}if(e.responseType){const R=e.responseType.toLowerCase();r.responseType="json"!==R?R:"text"}const s=e.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const R=r.statusText||"OK",U=new Kd(r.getAllResponseHeaders()),q=function UQ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return c=new OF({headers:U,status:r.status,statusText:R,url:q}),c},f=()=>{let{headers:R,status:U,statusText:q,url:J}=d(),we=null;204!==U&&(we=typeof r.response>"u"?r.responseText:r.response),0===U&&(U=we?200:0);let He=U>=200&&U<300;if("json"===e.responseType&&"string"==typeof we){const Ge=we;we=we.replace(VQ,"");try{we=""!==we?JSON.parse(we):null}catch(Ye){we=Ge,He&&(He=!1,we={error:Ye,text:we})}}He?(i.next(new dx({body:we,headers:R,status:U,statusText:q,url:J||void 0})),i.complete()):i.error(new cz({error:we,headers:R,status:U,statusText:q,url:J||void 0}))},_=R=>{const{url:U}=d(),q=new cz({error:R,status:r.status||0,statusText:r.statusText||"Unknown Error",url:U||void 0});i.error(q)};let b=!1;const D=R=>{b||(i.next(d()),b=!0);let U={type:Ir.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(U.total=R.total),"text"===e.responseType&&!!r.responseText&&(U.partialText=r.responseText),i.next(U)},M=R=>{let U={type:Ir.UploadProgress,loaded:R.loaded};R.lengthComputable&&(U.total=R.total),i.next(U)};return r.addEventListener("load",f),r.addEventListener("error",_),r.addEventListener("timeout",_),r.addEventListener("abort",_),e.reportProgress&&(r.addEventListener("progress",D),null!==s&&r.upload&&r.upload.addEventListener("progress",M)),r.send(s),i.next({type:Ir.Sent}),()=>{r.removeEventListener("error",_),r.removeEventListener("abort",_),r.removeEventListener("load",f),r.removeEventListener("timeout",_),e.reportProgress&&(r.removeEventListener("progress",D),null!==s&&r.upload&&r.upload.removeEventListener("progress",M)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(vc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const FF=new o.OlP("XSRF_COOKIE_NAME"),LF=new o.OlP("XSRF_HEADER_NAME");class fz{}let HQ=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ya(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(se),o.LFG(o.Lbi),o.LFG(FF))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),BF=(()=>{class n{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(fz),o.LFG(LF))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),jQ=(()=>{class n{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(dz,[]);this.chain=i.reduceRight((r,s)=>new uz(r,s),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(rz),o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),GQ=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:BF,useClass:BQ}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:FF,useValue:e.cookieName}:[],e.headerName?{provide:LF,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[BF,{provide:dz,useExisting:BF,multi:!0},{provide:fz,useClass:HQ},{provide:FF,useValue:"XSRF-TOKEN"},{provide:LF,useValue:"X-XSRF-TOKEN"}]}),n})(),zQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[NF,{provide:iz,useClass:jQ},hz,{provide:rz,useExisting:hz}],imports:[GQ.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const $Q=["*"];let hx;function TC(n){return function qQ(){if(void 0===hx&&(hx=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(hx=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return hx}()?.createHTML(n)||n}function pz(n){return Error(`Unable to find icon with the name "${n}"`)}function mz(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function gz(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class jg{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let fx=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new jg(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const c=this._sanitizer.sanitize(o.q3G.HTML,r);if(!c)throw gz(r);const d=TC(c);return this._addSvgIconConfig(e,i,new jg("",d,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new jg(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(o.q3G.HTML,i);if(!s)throw gz(i);const c=TC(s);return this._addSvgIconSetConfig(e,new jg("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,e);if(!i)throw mz(e);const r=this._cachedIconsByUrl.get(i);return r?ct(px(r)):this._loadSvgIconFromConfig(new jg(e,null)).pipe((0,$n.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,pt.U)(s=>px(s)))}getNamedSvgIcon(e,i=""){const r=_z(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):sf(pz(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ct(px(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,pt.U)(i=>px(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?ct(r):Ny(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe($l(d=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(o.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(_)),ct(null)})))).pipe((0,pt.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw pz(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,e,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,$n.b)(i=>e.svgText=i),(0,pt.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ct(null):this._fetchIcon(e).pipe((0,$n.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(TC("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(TC("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function WQ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const c=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,i);if(!c)throw mz(i);const d=this._inProgressUrlFetches.get(c);if(d)return d;const f=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,pt.U)(_=>TC(_)),vb(()=>this._inProgressUrlFetches.delete(c)),(0,W1.B)());return this._inProgressUrlFetches.set(c,f),f}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(_z(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return YQ(s)?new jg(s.url,null,s.options):new jg(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(NF,8),o.LFG(Il),o.LFG(se,8),o.LFG(o.qLn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function px(n){return n.cloneNode(!0)}function _z(n,t){return n+":"+t}function YQ(n){return!(!n.url||!n.options)}const KQ=cu(class{constructor(n){this._elementRef=n}}),QQ=new o.OlP("MAT_ICON_DEFAULT_OPTIONS"),JQ=new o.OlP("mat-icon-location",{providedIn:"root",factory:function XQ(){const n=(0,o.f3M)(se),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),yz=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],eJ=yz.map(n=>`[${n}]`).join(", "),tJ=/^url\(['"]?#(.*?)['"]?\)$/;let Gg=(()=>{class n extends KQ{constructor(e,i,r,s,c,d){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Us.w0.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Gt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(eJ),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)yz.forEach(c=>{const d=i[s],f=d.getAttribute(c),_=f?f.match(tJ):null;if(_){let b=r.get(d);b||(b=[],r.set(d,b)),b.push({name:c,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(hi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(fx),o.$8M("aria-hidden"),o.Y36(JQ),o.Y36(o.qLn),o.Y36(QQ,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,i){2&e&&(o.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),o.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[o.qOj],ngContentSelectors:$Q,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),VF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[St,St]}),n})(),nJ=(()=>{class n{constructor(e,i,r,s,c,d){this.afAuth=e,this.session=i,this.firestore=r,this.router=s,this.snackBar=c,this.dialog=d,this.hasUser=!1,this.hasClicked=!1}ngOnInit(){}signInWithGoogle(){var e=this;return(0,le.Z)(function*(){if(e.hasClicked)return;e.hasClicked=!0,setTimeout(()=>e.hasClicked=!1,2e3);const i=(0,hy.o)(),r=new hy.V;try{const c=(yield(0,hy.c)(i,r)).user;e.session.setAuthUser(c),e.authConnected()}catch(s){e.snackBar.open("Failed to login...","",{duration:3e3,panelClass:["centered-text"]}),console.error(s)}})()}authConnected(){var e=this;return(0,le.Z)(function*(){const i=e.session.getAuthUser().uid,r=yield e.firestore.getUser(i);if(null!=r)return e.moveOn(r);"QUIT"!=(yield e.createNewUser())&&e.moveOn(null)})()}moveOn(e){var i=this;return(0,le.Z)(function*(){null==e&&(e=yield i.firestore.getUser(i.session.getAuthUser().uid)),i.hasUser=!0,i.session.setUser(e),setTimeout(()=>{i.router.navigate(["/"])},800)})()}createNewUser(){return new Promise((e,i)=>{try{this.dialog.open(m8,{width:"90vw"}).afterClosed().subscribe(s=>null==s?e("QUIT"):(this.firestore.createNewUser(s),e("OK")))}catch{console.log("Failed to create new user"),i()}})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(hw),o.Y36(la),o.Y36(Yd),o.Y36(Zi),o.Y36(Hg),o.Y36(hu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],decls:5,vars:2,consts:[[1,"login-container"],["mat-flat-button","","color","accent",1,"login-btn",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"button",1),o.NdJ("click",function(){return i.signInWithGoogle()}),o._uU(2," Sign In "),o.TgZ(3,"mat-icon"),o._uU(4,"login"),o.qZA()()()),2&e&&o.ekj("leaving",i.hasUser)},dependencies:[co,Gg],styles:[".login-container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 16rem);text-align:center;padding:8rem 0;opacity:0;transform:translateY(50px);animation:load-in .5s ease-in .5s 1 forwards}@keyframes load-in{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.login-btn[_ngcontent-%COMP%]{min-width:8em;text-align:center;margin:1em 0}.leaving[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);animation:leaving .5s ease-in .3s 1 forwards}@keyframes leaving{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(50px)}}"]}),n})();function vz(n,t){const e=[...n.questions,...t.questions],i=Array.from(new Set(e));return{name:n.name,questions:i}}function sJ(){const n=Math.floor(1336336*Math.random()).toString(34).toUpperCase();return console.log(n),n}let DC=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=Gt(e)}get inset(){return this._inset}set inset(e){this._inset=Gt(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("aria-orientation",i.vertical?"vertical":"horizontal"),o.ekj("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),n})(),UF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[St,St]}),n})();function HF(n){return n&&"function"==typeof n.connect&&!(n instanceof _b)}class bz{applyChanges(t,e,i,r,s){t.forEachOperation((c,d,f)=>{let _,b;if(null==c.previousIndex){const D=i(c,d,f);_=e.createEmbeddedView(D.templateRef,D.context,D.index),b=1}else null==f?(e.remove(d),b=3):(_=e.get(d),e.move(_,f),b=2);s&&s({context:_?.context,operation:b,record:c})})}detach(){}}class mx{constructor(t=!1,e,i=!0,r){this._multiple=t,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Et.x,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,i=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let Cz=(()=>{class n{constructor(){this._listeners=[]}notify(e,i){for(let r of this._listeners)r(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const IC=new o.OlP("_ViewRepeater"),oJ=["trigger"],aJ=["panel"];function lJ(n,t){if(1&n&&(o.TgZ(0,"span",8),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.placeholder)}}function cJ(n,t){if(1&n&&(o.TgZ(0,"span",12),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.triggerValue)}}function uJ(n,t){1&n&&o.Hsn(0,0,["*ngSwitchCase","true"])}function dJ(n,t){if(1&n&&(o.TgZ(0,"span",9),o.YNc(1,cJ,2,1,"span",10),o.YNc(2,uJ,1,0,"ng-content",11),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngSwitch",!!e.customTrigger),o.xp6(2),o.Q6J("ngSwitchCase",!0)}}function hJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",13)(1,"div",14,15),o.NdJ("@transformPanel.done",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s._handleKeydown(r))}),o.Hsn(3,1),o.qZA()()}if(2&n){const e=o.oxw();o.Q6J("@transformPanelWrap",void 0),o.xp6(1),o.Gre("mat-select-panel ",e._getPanelTheme(),""),o.Udp("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),o.Q6J("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),o.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const fJ=[[["mat-select-trigger"]],"*"],pJ=["mat-select-trigger","*"],Ez={transformPanelWrap:Gn("transformPanelWrap",[zn("* => void",Oa("@transformPanel",[na()],{optional:!0}))]),transformPanel:Gn("transformPanel",[Tn("void",Jt({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Tn("showing",Jt({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Tn("showing-multiple",Jt({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),zn("void => *",ri("120ms cubic-bezier(0, 0, 0.2, 1)")),zn("* => void",ri("100ms 25ms linear",Jt({opacity:0})))])};let Tz=0;const Iz=new o.OlP("mat-select-scroll-strategy"),yJ=new o.OlP("MAT_SELECT_CONFIG"),vJ={provide:Iz,deps:[$a],useFactory:function _J(n){return()=>n.scrollStrategies.reposition()}};class bJ{constructor(t,e){this.source=t,this.value=e}}const wJ=Wa(jf(lg(G0(class{constructor(n,t,e,i,r){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new Et.x}})))),CJ=new o.OlP("MatSelectTrigger");let EJ=(()=>{class n extends wJ{constructor(e,i,r,s,c,d,f,_,b,D,M,R,U,q){super(c,s,f,_,D),this._viewportRuler=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=d,this._parentFormField=b,this._liveAnnouncer=U,this._defaultOptions=q,this._panelOpen=!1,this._compareWith=(J,we)=>J===we,this._uid="mat-select-"+Tz++,this._triggerAriaLabelledBy=null,this._destroy=new Et.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Tz++,this._panelDoneAnimatingStream=new Et.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=rf(()=>{const J=this.options;return J?J.changes.pipe(Pr(J),di(()=>(0,hr.T)(...J.map(we=>we.onSelectionChange)))):this._ngZone.onStable.pipe(hi(1),di(()=>this.optionSelectionChanges))}),this.openedChange=new o.vpe,this._openedStream=this.openedChange.pipe(fi(J=>J),(0,pt.U)(()=>{})),this._closedStream=this.openedChange.pipe(fi(J=>!J),(0,pt.U)(()=>{})),this.selectionChange=new o.vpe,this.valueChange=new o.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=q?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=q.typeaheadDebounceInterval),this._scrollStrategyFactory=R,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(M)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(I1.required)??!1}set required(e){this._required=Gt(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Gt(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Gt(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=y0(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new mx(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe($m(),qn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(qn(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Pr(null),qn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,c=this._keyManager;if(!c.isTyping()&&s&&!Bo(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const d=this.selected;c.onKeydown(e);const f=this.selected;f&&d!==f&&this._liveAnnouncer.announce(f.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,r=e.keyCode,s=40===r||38===r,c=i.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(c||13!==r&&32!==r||!i.activeItem||Bo(e))if(!c&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const d=this.options.some(f=>!f.disabled&&!f.selected);this.options.forEach(f=>{f.disabled||(d?f.select():f.deselect())})}else{const d=i.activeItemIndex;i.onKeydown(e),this._multiple&&s&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==d&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(hi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new b0(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(qn(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(qn(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,hr.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(qn(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,hr.T)(...this.options.map(i=>i._stateChanges)).pipe(qn(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,i){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(eg),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(Gf),o.Y36(o.SBq),o.Y36(za,8),o.Y36(Zf,8),o.Y36(Uy,8),o.Y36(et,8),o.Y36(rc,10),o.$8M("tabindex"),o.Y36(Iz),o.Y36(wD),o.Y36(yJ,8))},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&(o.Gf(oJ,5),o.Gf(aJ,5),o.Gf(V0,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.trigger=r.first),o.iGM(r=o.CRH())&&(i.panel=r.first),o.iGM(r=o.CRH())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[o.qOj,o.TTD]}),n})(),_x=(()=>{class n extends EJ{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,i,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*e-i+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(qn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(hi(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const i=dI(e,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===i?0:function c1(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}((e+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new bJ(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let c;if(this.multiple)c=40;else if(this.disableOptionCentering)c=16;else{let _=this._selectionModel.selected[0]||this.options.first;c=_&&_.group?32:16}r||(c*=-1);const d=0-(e.left+c-(r?s:0)),f=e.right+c-i.width+(r?0:s);d>0?c+=d+8:f>0&&(c-=f+8),this._overlayDir.offsetX=Math.round(c),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,i,r){const s=this._getItemHeight(),c=(s-this._triggerRect.height)/2,d=Math.floor(256/s);let f;return this.disableOptionCentering?0:(f=0===this._scrollTop?e*s:this._scrollTop===r?(e-(this._getItemCount()-d))*s+(s-(this._getItemCount()*s-256)%s):i-s/2,Math.round(-1*f-c))}_checkOverlayWithinViewport(e){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,c=r.height-this._triggerRect.bottom-8,d=Math.abs(this._offsetY),_=Math.min(this._getItemCount()*i,256)-d-this._triggerRect.height;_>c?this._adjustPanelUp(_,c):d>s?this._adjustPanelDown(d,s,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,i){const r=Math.round(e-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,i,r){const s=Math.round(e-i);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*e,256),c=i*e-r;let d;d=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),d+=dI(d,this.options,this.optionGroups);const f=r/2;this._scrollTop=this._calculateOverlayScroll(d,f,c),this._offsetY=this._calculateOverlayOffsetY(d,f,c),this._checkOverlayWithinViewport(c)}_getOriginBasedOnOption(){const e=this._getItemHeight(),i=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,CJ,5),o.Suo(r,hg,5),o.Suo(r,cI,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.customTrigger=s.first),o.iGM(s=o.CRH())&&(i.options=s),o.iGM(s=o.CRH())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(e,i){1&e&&o.NdJ("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&e&&(o.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),o.ekj("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[o._Bn([{provide:Py,useExisting:n},{provide:W0,useExisting:n}]),o.qOj],ngContentSelectors:pJ,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,i){if(1&e&&(o.F$t(fJ),o.TgZ(0,"div",0,1),o.NdJ("click",function(){return i.toggle()}),o.TgZ(3,"div",2),o.YNc(4,lJ,2,1,"span",3),o.YNc(5,dJ,3,2,"span",4),o.qZA(),o.TgZ(6,"div",5),o._UZ(7,"div",6),o.qZA()(),o.YNc(8,hJ,4,14,"ng-template",7),o.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&e){const r=o.MAs(1);o.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),o.xp6(3),o.Q6J("ngSwitch",i.empty),o.uIk("id",i._valueId),o.xp6(1),o.Q6J("ngSwitchCase",!0),o.xp6(1),o.Q6J("ngSwitchCase",!1),o.xp6(3),o.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},dependencies:[fn,$o,gs,ba,V0,zR],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Ez.transformPanelWrap,Ez.transformPanel]},changeDetection:0}),n})(),Sz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[vJ],imports:[Wr,Hf,u1,St,Bf,Nt,u1,St]}),n})();const TJ=["noMatchPtcptSelect"];function DJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div")(1,"mat-form-field",5)(2,"mat-label"),o._uU(3),o.qZA(),o.TgZ(4,"input",27),o.NdJ("ngModelChange",function(r){const c=o.CHM(e).index,d=o.oxw();return o.KtG(d.participants[c]=r)})("focusout",function(){const s=o.CHM(e).index,c=o.oxw();return o.KtG(c.addedPtcptInputFocusOut(s))}),o.qZA()()()}if(2&n){const e=t.index,i=o.oxw();o.xp6(3),o.AsE("Participant ",e+1,"",0==e?" (You)":"",""),o.xp6(1),o.Q6J("required",!0)("ngModel",i.participants[e])}}function IJ(n,t){if(1&n&&(o.TgZ(0,"mat-option",28),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw();o.Q6J("value",e)("disabled",i.noMatchHasBeenSelected(e)),o.xp6(1),o.hij(" ",e," ")}}function SJ(n,t){if(1&n&&(o.TgZ(0,"mat-option",30),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}function xJ(n,t){if(1&n&&(o.TgZ(0,"div"),o.YNc(1,SJ,2,2,"mat-option",32),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2).$implicit,r=o.oxw();o.xp6(1),o.Q6J("ngIf",e!==i&&r.participants.includes(e))}}function MJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-form-field",16)(1,"mat-label"),o._uU(2),o.qZA(),o.TgZ(3,"mat-select",17),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw().$implicit,c=o.oxw();return o.KtG(c.noMatchPairs[s]=r)})("selectionChange",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.selectNoMatchPair(r))}),o.TgZ(4,"mat-option",30),o._uU(5,"Cancel"),o.qZA(),o.YNc(6,xJ,2,1,"div",31),o.qZA()()}if(2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(2),o.hij("Don't match with ",e,""),o.xp6(1),o.Q6J("ngModel",i.noMatchPairs[e]),o.xp6(1),o.Q6J("value",null),o.xp6(2),o.Q6J("ngForOf",i.participants)}}function AJ(n,t){if(1&n&&(o.TgZ(0,"div",29),o.YNc(1,MJ,7,4,"mat-form-field",22),o.qZA()),2&n){const e=t.$implicit,i=o.oxw();o.xp6(1),o.Q6J("ngIf",i.participants.includes(e))}}function kJ(n,t){if(1&n&&(o.TgZ(0,"mat-option",30),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e.name),o.xp6(1),o.hij(" ",e.name," ")}}const RJ=function(){return{standalone:!0}};function OJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-form-field",16)(1,"mat-label"),o._uU(2,"Select Template"),o.qZA(),o.TgZ(3,"mat-select",33),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.currentTemplateName=r)})("selectionChange",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.selectTemplate(r.currentTemplateName))}),o.YNc(4,kJ,2,2,"mat-option",34),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(3),o.Q6J("ngModel",e.currentTemplateName)("ngModelOptions",o.DdM(3,RJ)),o.xp6(1),o.Q6J("ngForOf",e.templatesList)}}function PJ(n,t){1&n&&(o.TgZ(0,"mat-hint",35),o._uU(1,"You must enter a name"),o.qZA())}function NJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",36)(1,"mat-form-field",2)(2,"mat-label"),o._uU(3,"Question"),o.qZA(),o.TgZ(4,"input",3,4),o.NdJ("ngModelChange",function(r){const c=o.CHM(e).index,d=o.oxw();return o.KtG(d.wishlistTemplate.questions[c]=r)})("focusout",function(){const s=o.CHM(e).index,c=o.oxw();return o.KtG(c.questionInputFocusOut(s))}),o.qZA()()()}if(2&n){const e=t.index,i=o.oxw();o.xp6(4),o.Q6J("required",!0)("ngModel",i.wishlistTemplate.questions[e])}}let FJ=(()=>{class n{constructor(e,i,r,s){this.session=e,this.firestore=i,this.dialogRef=r,this.snackBar=s,this.participants=[],this.currentNoMatchPtcpt="",this.currentNoMatchPair="",this.currentTemplateName="",this.templatesList=[],this.previousGroupName="";const c=e.getUser().name;this.group={name:"",adminName:"",budget:20,participants:{},participantsReady:{},noMatchPairs:{},wishlistTemplate:{name:"",questions:[]},wishlists:{},isGenerated:!1,santas:{},joinCode:""},this.participants.push(c),this.participants=[...this.participants,"Hachi","Cinni","Timmi","Ivy"],this.templatesList=this.session.getUser().wishlistTemplates,this.templatesList.length>0?(this.wishlistTemplate=JSON.parse(JSON.stringify(this.templatesList[0])),this.wishlistTemplate.name=""):this.wishlistTemplate={name:"",questions:[]},this.noMatchPairs={}}ngOnInit(){}clickComplete(){var e=this;return(0,le.Z)(function*(){if(e.group.name.length<2)return e.openSnackbar("You must name this Secret Santa.");if(e.participants.length<3)return e.openSnackbar("You must enter at least 3 participants.");e.participants.forEach(i=>{""!=i&&(e.group.participants[i]="",e.group.participantsReady[i]=!1)}),e.group.participants[e.participants[0]]=e.session.getUser().id,e.group.noMatchPairs=e.verifyNoMatchPairs(),e.group.wishlistTemplate=e.wishlistTemplate,e.group.adminName=e.getObjectKeys(e.group.participants)[0],console.log("Completed: ",e.group);do{e.group.joinCode=sJ()}while(yield e.firestore.checkIfJoinCodeExists(e.group.joinCode));e.session.addUserWishlistTemplate(e.wishlistTemplate),e.firestore.updateUserData(),yield e.firestore.createNewGroup(e.group).then(()=>{e.snackBar.open(`Created ${e.group.name}`,"OK",{duration:3e3}),e.dialogRef.close()}),e.session.addLocalGroup(e.group)})()}nameGroupFocusOut(){(this.wishlistTemplate.name.length<2||this.wishlistTemplate.name===this.previousGroupName)&&(this.wishlistTemplate.name=this.group.name),this.previousGroupName=this.group.name}verifyNoMatchPairs(){return this.getObjectKeys(this.noMatchPairs).forEach(e=>{(!this.group.participants.hasOwnProperty(e)||""==this.group.noMatchPairs[e])&&delete this.noMatchPairs[e]}),this.noMatchPairs}selectNoMatchParticipant(e){this.noMatchPairs[e]="",console.log("selectNoMatchParticipant",this.noMatchPairs),this.noMatchPtcptSelect.value=null}selectNoMatchPair(e){console.log(e,this.noMatchPairs[e]),null===this.noMatchPairs[e]&&delete this.noMatchPairs[e],console.log("selectNoMatchPair",this.noMatchPairs)}noMatchHasBeenSelected(e){return this.noMatchPairs.hasOwnProperty(e)}addedPtcptInputFocusOut(e){""==this.participants[e]&&this.participants.splice(e,1)}clickAddParticipant(){this.participants.push(""),console.log(this.participants)}selectTemplate(e){this.currentTemplateName=e;let i={};this.templatesList.forEach(s=>{s.name==this.currentTemplateName&&(i=JSON.parse(JSON.stringify(s)))});const r=vz(this.wishlistTemplate,i);this.wishlistTemplate=r}questionInputFocusOut(e){""==this.wishlistTemplate.questions[e]&&this.wishlistTemplate.questions.splice(e,1)}clickAddQuestion(){""!=this.wishlistTemplate.questions[this.wishlistTemplate.questions.length-1]&&this.wishlistTemplate.questions.push("")}openSnackbar(e,i=3e3){this.snackBar.open(e,"",{duration:i,horizontalPosition:"center",verticalPosition:"bottom"})}getObjectKeys(e){return Object.keys(e)}trackByIndex(e,i){return e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Yd),o.Y36(Fd),o.Y36(Hg))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-group-generator"]],viewQuery:function(e,i){if(1&e&&o.Gf(TJ,5),2&e){let r;o.iGM(r=o.CRH())&&(i.noMatchPtcptSelect=r.first)}},decls:58,vars:16,consts:[[1,"group-generator-container"],[1,"mat-title","group-generator-title"],["appearance","outline",1,""],["matInput","","name","name",3,"required","ngModel","ngModelChange","focusout"],["nameInput","ngModel"],["appearance","outline"],["matInput","","name","budget","type","number",3,"required","ngModel","ngModelChange"],["budgetInput","ngModel"],["matPrefix",""],[1,"group-generator-divider"],[1,"mat-subheading-2","group-generator-subtitle"],[1,"group-participants-div"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"add-participant-div"],["mat-raised-button","","color","accent","type","button",1,"add-participant-btn",3,"click"],[1,"add-own-caption","mat-caption"],["appearance","outline",1,"form-field"],[3,"ngModel","ngModelChange","selectionChange"],["noMatchPtcptSelect",""],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","no-match-pairs-div",4,"ngFor","ngForOf"],["class","form-field","appearance","outline",4,"ngIf"],["matInput","","name","name",3,"required","ngModel","ngModelChange"],["align","end",4,"ngIf"],["class","wishlist-template-questions-div",4,"ngFor","ngForOf","ngForTrackBy"],["mat-raised-button","","color","accent",1,"group-generator-complete-btn",3,"click"],["matInput","",3,"required","ngModel","ngModelChange","focusout"],[3,"value","disabled"],[1,"no-match-pairs-div"],[3,"value"],[4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["align","end"],[1,"wishlist-template-questions-div"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2,"Setup new Secret Santa"),o.qZA(),o.TgZ(3,"mat-form-field",2)(4,"mat-label"),o._uU(5,"Name this Secret Santa"),o.qZA(),o.TgZ(6,"input",3,4),o.NdJ("ngModelChange",function(s){return i.group.name=s})("focusout",function(){return i.nameGroupFocusOut()}),o.qZA()(),o.TgZ(8,"mat-form-field",5)(9,"mat-label"),o._uU(10,"Budget"),o.qZA(),o.TgZ(11,"input",6,7),o.NdJ("ngModelChange",function(s){return i.group.budget=s}),o.qZA(),o.TgZ(13,"span",8),o._uU(14,"\xa3"),o.qZA()(),o._UZ(15,"mat-divider",9),o.TgZ(16,"div",10),o._uU(17,"Participants"),o.qZA(),o.TgZ(18,"div",11),o.YNc(19,DJ,5,4,"div",12),o.qZA(),o.TgZ(20,"div",13)(21,"button",14),o.NdJ("click",function(){return i.clickAddParticipant()}),o.TgZ(22,"mat-icon"),o._uU(23,"add"),o.qZA()(),o.TgZ(24,"div",15),o._uU(25,"Add Another Participant"),o.qZA()(),o._UZ(26,"mat-divider",9),o.TgZ(27,"div",10),o._uU(28,"Do-Not-Match (Optional)"),o.qZA(),o.TgZ(29,"mat-form-field",16)(30,"mat-label"),o._uU(31,"Select Participant"),o.qZA(),o.TgZ(32,"mat-select",17,18),o.NdJ("ngModelChange",function(s){return i.currentNoMatchPtcpt=s})("selectionChange",function(){return i.selectNoMatchParticipant(i.currentNoMatchPtcpt)}),o.TgZ(34,"mat-option",19),o._uU(35,"Select Participant"),o.qZA(),o.YNc(36,IJ,2,3,"mat-option",20),o.qZA()(),o.YNc(37,AJ,2,1,"div",21),o._UZ(38,"mat-divider",9),o.TgZ(39,"div",10),o._uU(40,"Wishlist Questions"),o.qZA(),o.YNc(41,OJ,5,4,"mat-form-field",22),o.TgZ(42,"mat-form-field",2)(43,"mat-label"),o._uU(44,"Name this Wishlist"),o.qZA(),o.TgZ(45,"input",23,4),o.NdJ("ngModelChange",function(s){return i.wishlistTemplate.name=s}),o.qZA(),o.YNc(47,PJ,2,0,"mat-hint",24),o.qZA(),o.YNc(48,NJ,6,2,"div",25),o.TgZ(49,"div",13)(50,"button",14),o.NdJ("click",function(){return i.clickAddQuestion()}),o.TgZ(51,"mat-icon"),o._uU(52,"add"),o.qZA()(),o.TgZ(53,"div",15),o._uU(54,"Add Another Question"),o.qZA()(),o._UZ(55,"mat-divider",9),o.TgZ(56,"button",26),o.NdJ("click",function(){return i.clickComplete()}),o._uU(57,"Complete"),o.qZA()()),2&e){const r=o.MAs(7);o.xp6(6),o.Q6J("required",!0)("ngModel",i.group.name),o.xp6(5),o.Q6J("required",!0)("ngModel",i.group.budget),o.xp6(8),o.Q6J("ngForOf",i.participants)("ngForTrackBy",i.trackByIndex),o.xp6(13),o.Q6J("ngModel",i.currentNoMatchPtcpt),o.xp6(2),o.Q6J("value",null),o.xp6(2),o.Q6J("ngForOf",i.participants),o.xp6(1),o.Q6J("ngForOf",i.getObjectKeys(i.noMatchPairs)),o.xp6(4),o.Q6J("ngIf",i.templatesList.length>0),o.xp6(4),o.Q6J("required",!0)("ngModel",i.wishlistTemplate.name),o.xp6(2),o.Q6J("ngIf",r.touched&&i.wishlistTemplate.name.length<1),o.xp6(1),o.Q6J("ngForOf",i.wishlistTemplate.questions)("ngForTrackBy",i.trackByIndex)}},dependencies:[$r,Cn,co,dt,p,g,I,lw,DC,Gg,_x,hg,mg,H1,By,yg,gg],styles:[".group-generator-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.group-generator-title[_ngcontent-%COMP%]{width:100%}.group-generator-subtitle[_ngcontent-%COMP%]{opacity:.8}mat-form-field[_ngcontent-%COMP%], .question-field-div[_ngcontent-%COMP%], .wishlist-template-questions-div[_ngcontent-%COMP%]{width:100%}.group-generator-divider[_ngcontent-%COMP%]{width:70%;margin:1em 0 .75em}.group-participants-div[_ngcontent-%COMP%], .no-match-pairs-div[_ngcontent-%COMP%]{width:100%}.add-participant-div[_ngcontent-%COMP%]{width:100%;min-height:3em;display:flex;flex-direction:row;align-items:center}.add-participant-btn[_ngcontent-%COMP%]{width:3em;max-height:2.6em;justify-self:start;margin-bottom:1.5em}.add-own-caption[_ngcontent-%COMP%]{height:2.6em;line-height:1em;margin-left:1.5em;opacity:.7}.group-generator-complete-btn[_ngcontent-%COMP%]{margin:.5em 0 1em}.footer-spacer[_ngcontent-%COMP%]{height:1.5em;width:100%}"]}),n})();function LJ(n,t){1&n&&(o.TgZ(0,"div",10)(1,"div",11),o._uU(2,"Enter a Join Code"),o.qZA()())}function BJ(n,t){1&n&&(o.TgZ(0,"div",10)(1,"div",11),o._uU(2,"No Secret Santa Found..."),o.qZA()())}function VJ(n,t){if(1&n&&(o.TgZ(0,"div",12)(1,"div",11),o._uU(2),o.qZA(),o.TgZ(3,"div",13),o._uU(4),o.qZA()()),2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.group.name),o.xp6(2),o.hij("Hosted By ",e.group.adminName,"")}}function UJ(n,t){if(1&n&&(o.TgZ(0,"mat-option",19),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}function HJ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",14)(1,"mat-form-field",15)(2,"mat-label"),o._uU(3,"Who are you?"),o.qZA(),o.TgZ(4,"mat-select",16),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.identifyParticipant=r)})("selectionChange",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.selectIdentifyParticipant())}),o.TgZ(5,"mat-option",17),o._uU(6,"Select Participant"),o.qZA(),o.YNc(7,UJ,2,2,"mat-option",18),o.qZA()()()}if(2&n){const e=o.oxw();o.xp6(4),o.Q6J("ngModel",e.identifyParticipant),o.xp6(1),o.Q6J("value",null),o.xp6(2),o.Q6J("ngForOf",e.getRemainingParticipants())}}let jJ=(()=>{class n{constructor(e,i,r,s){this.session=e,this.firestore=i,this.dialogRef=r,this.snackBar=s,this.joinCode="",this.prevJoinCode="",this.hasGroup=!1,this.clickedJoinCount=0,this.identifyParticipant="",this.hasIdentifiedParticipant=!1}ngOnInit(){}clickJoin(){switch(this.clickedJoinCount+=1,this.clickedJoinCount){case 1:return;case 2:this.joinGroup()}}joinGroup(){var e=this;return(0,le.Z)(function*(){console.log("joining group"),yield e.firestore.updateParticipant(e.group.name,e.group.adminName,e.identifyParticipant,e.session.getUser().id),e.session.addUserWishlistTemplate(e.group.wishlistTemplate),e.firestore.updateUserData(),e.session.addLocalGroup(e.group),e.snackBar.open(`Joined ${e.group.name}`,"OK",{duration:3e3}),e.dialogRef.close()})()}jobCodeInputKeyUp(){var e=this;return(0,le.Z)(function*(){if(e.joinCode=e.joinCode.toUpperCase(),e.joinCode!==e.prevJoinCode)try{const i=yield e.firestore.getGroupFromJoinCode(e.joinCode);i?(console.log("Found Group",i),e.hasGroup=!0,e.group=i):(e.hasGroup=!1,e.hasIdentifiedParticipant=!1,e.clickedJoinCount=0),e.prevJoinCode=e.joinCode}catch(i){console.log(i)}})()}selectIdentifyParticipant(){console.log(this.identifyParticipant),this.hasIdentifiedParticipant=!0}getRemainingParticipants(){let e=[];return this.getObjectKeys(this.group.participants).forEach(i=>{""==this.group.participants[i]&&e.push(i)}),e}getObjectKeys(e){return Object.keys(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Yd),o.Y36(Fd),o.Y36(Hg))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-join-group"]],decls:15,vars:7,consts:[[1,"join-group-container"],[1,"mat-title","join-group-title"],["appearance","outline"],["matInput","","name","budget","maxlength","4",3,"required","ngModel","ngModelChange","keyup"],[1,"display-group-div"],["class","no-group-div",4,"ngIf"],["class","has-group-div",4,"ngIf"],["class","identify-participant-div",4,"ngIf"],[1,"join-group-divider"],["mat-raised-button","","color","accent",1,"join-group-complete-btn",3,"disabled","click"],[1,"no-group-div"],[1,"display-group-name","mat-title"],[1,"has-group-div"],[1,"display-group-admin","mat-subheading-2"],[1,"identify-participant-div"],["appearance","outline",1,"form-field"],[3,"ngModel","ngModelChange","selectionChange"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2,"Join Group"),o.qZA(),o.TgZ(3,"mat-form-field",2)(4,"mat-label"),o._uU(5,"Join Code"),o.qZA(),o.TgZ(6,"input",3),o.NdJ("ngModelChange",function(s){return i.joinCode=s})("keyup",function(){return i.jobCodeInputKeyUp()}),o.qZA()(),o.TgZ(7,"div",4),o.YNc(8,LJ,3,0,"div",5),o.YNc(9,BJ,3,0,"div",5),o.YNc(10,VJ,5,2,"div",6),o.qZA(),o.YNc(11,HJ,8,3,"div",7),o._UZ(12,"mat-divider",8),o.TgZ(13,"button",9),o.NdJ("click",function(){return i.clickJoin()}),o._uU(14,"Join"),o.qZA()()),2&e&&(o.xp6(6),o.Q6J("required",!0)("ngModel",i.joinCode),o.xp6(2),o.Q6J("ngIf",!i.hasGroup&&i.joinCode.length<1),o.xp6(1),o.Q6J("ngIf",!i.hasGroup&&i.joinCode.length>0),o.xp6(1),o.Q6J("ngIf",i.hasGroup),o.xp6(1),o.Q6J("ngIf",i.clickedJoinCount>0),o.xp6(2),o.Q6J("disabled",!i.hasGroup&&0==i.clickedJoinCount||1==i.clickedJoinCount&&!i.hasIdentifiedParticipant))},dependencies:[$r,Cn,co,dt,g,lw,DC,_x,hg,mg,By,yg,q1,gg],styles:[".join-group-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.join-group-title[_ngcontent-%COMP%]{width:100%}.join-group-subtitle[_ngcontent-%COMP%]{opacity:.8}mat-form-field[_ngcontent-%COMP%], .question-field-div[_ngcontent-%COMP%], .wishlist-template-questions-div[_ngcontent-%COMP%]{width:100%}.join-group-divider[_ngcontent-%COMP%]{width:70%;margin:1em 0 .75em}.display-group-div[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;text-align:center;margin-top:1em}.display-group-name[_ngcontent-%COMP%]{opacity:.7}.display-group-admin[_ngcontent-%COMP%]{opacity:.85}.identify-participant-div[_ngcontent-%COMP%]{width:100%}"]}),n})();const xz=["*"],GJ=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],zJ=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],YJ=lg(Wa(class{})),KJ=Wa(class{}),Az=new o.OlP("MatList"),QJ=new o.OlP("MatNavList");let JJ=(()=>{class n extends YJ{constructor(e){super(),this._elementRef=e,this._stateChanges=new Et.x,"action-list"===this._getListType()&&(e.nativeElement.classList.add("mat-action-list"),e.nativeElement.setAttribute("role","group"))}_getListType(){const e=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===e?"list":"mat-action-list"===e?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[o._Bn([{provide:Az,useExisting:n}]),o.qOj,o.TTD],ngContentSelectors:xz,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),n})(),kz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),Rz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),XJ=(()=>{class n extends KJ{constructor(e,i,r,s){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new Et.x,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const c=this._getHostElement();"button"===c.nodeName.toLowerCase()&&!c.hasAttribute("type")&&c.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(qn(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=Gt(e)}ngAfterContentInit(){!function aI(n,t,e="mat"){n.changes.pipe(Pr(n)).subscribe(({length:i})=>{cg(t,`${e}-2-line`,!1),cg(t,`${e}-3-line`,!1),cg(t,`${e}-multi-line`,!1),2===i||3===i?cg(t,`${e}-${i}-line`,!0):i>3&&cg(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(QJ,8),o.Y36(Az,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,kz,5),o.Suo(r,Rz,5),o.Suo(r,oI,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._avatar=s.first),o.iGM(s=o.CRH())&&(i._icon=s.first),o.iGM(s=o.CRH())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("mat-list-item-disabled",i.disabled)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[o.qOj],ngContentSelectors:zJ,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,i){1&e&&(o.F$t(GJ),o.TgZ(0,"span",0),o._UZ(1,"span",1),o.Hsn(2),o.TgZ(3,"span",2),o.Hsn(4,1),o.qZA(),o.Hsn(5,2),o.qZA()),2&e&&(o.xp6(1),o.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},dependencies:[nc],encapsulation:2,changeDetection:0}),n})(),Pz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ug,du,St,zf,Wr,ug,St,zf,UF]}),n})(),sX=(()=>{class n{constructor(e){this.data=e}ngOnInit(){}onYesClick(){this.data.onYesClick()}onNoClick(){this.data.onNoClick()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(MF))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-snackbar-yesno"]],decls:8,vars:1,consts:[[1,"mat-body","snackbar-body"],[1,"message"],[1,"btns"],["mat-button","","color","accent",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2),o.qZA(),o.TgZ(3,"div",2)(4,"button",3),o.NdJ("click",function(){return i.onYesClick()}),o._uU(5,"Yes"),o.qZA(),o.TgZ(6,"button",3),o.NdJ("click",function(){return i.onNoClick()}),o._uU(7,"No"),o.qZA()()()),2&e&&(o.xp6(2),o.hij(" ",i.data.message," "))},dependencies:[co],styles:[".snackbar-body[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.snackbar-body[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{flex-grow:4}.snackbar-body[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;justify-content:end;flex-grow:1}"]}),n})();function oX(n,t){if(1&n&&(o.TgZ(0,"mat-option",17),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e.name),o.xp6(1),o.hij(" ",e.name," ")}}function aX(n,t){1&n&&(o.TgZ(0,"mat-hint",18),o._uU(1,"You must enter a name"),o.qZA())}function lX(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",19)(1,"mat-form-field",6)(2,"mat-label"),o._uU(3),o.qZA(),o.TgZ(4,"textarea",20),o.NdJ("ngModelChange",function(r){const c=o.CHM(e).$implicit,d=o.oxw();return o.KtG(d.wishlist[c]=r)})("keyup",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.autoGrowTextZone(r))}),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw();o.xp6(3),o.Oqu(e),o.xp6(1),o.Q6J("name",e)("ngModel",i.wishlist[e])}}const Nz=function(){return{standalone:!0}};function cX(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-form-field",21)(1,"mat-label"),o._uU(2,"Add New Question Name"),o.qZA(),o.TgZ(3,"input",22),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.newQuestionName=r)}),o.qZA()()}if(2&n){const e=o.oxw();o.ekj("hide",e.hideNewQuestionField),o.xp6(3),o.Q6J("ngModel",e.newQuestionName)("ngModelOptions",o.DdM(4,Nz))}}function uX(n,t){1&n&&(o.TgZ(0,"div",23),o._uU(1,"Add your own"),o.qZA())}let Fz=(()=>{class n{constructor(e,i,r,s){this.session=e,this.firestore=i,this.dialogRef=r,this.data=s,this.currentTemplateName="",this.newQuestionName="",this.showNewQuestionField=!1,this.hideNewQuestionField=!0,this.wishlist={name:""},this.template={name:"",questions:[]},this.templatesList=e.getUserWishlistTemplates(),this.wishlistsList=e.getUserWishlists(),!(this.templatesList.length<1)&&("edit"==s.type&&this.loadWishlist(s.source),this.selectTemplate(this.templatesList[0].name))}ngOnInit(){}loadWishlist(e){this.wishlistsList.forEach(i=>{i.name==e&&(this.wishlist=i)})}selectTemplate(e){this.currentTemplateName=e,this.templatesList.forEach(s=>{s.name==this.currentTemplateName&&(this.template=JSON.parse(JSON.stringify(s)))});const i=function iJ(n){console.log("generating template from data",n);const t=Object.keys(n).filter(r=>"name"!==r);return console.log(t),t.map(r=>n[r]),{name:n.name,questions:t}}(this.wishlist),r=vz(this.template,i);this.template=r,console.log(this.currentTemplateName,this.template)}clickAddQuestion(){if(this.showNewQuestionField){if(this.newQuestionName.length<2)return;setTimeout(()=>{this.showNewQuestionField=!1},500),this.addQuestion()}else this.hideNewQuestionField=!1,this.showNewQuestionField=!0}addQuestion(){this.hideNewQuestionField=!0,setTimeout(()=>{this.template.questions.push(this.newQuestionName),this.newQuestionName=""},500)}saveWishlist(){this.wishlist.name.length<1||(this.session.addWishlistToUser(this.wishlist),this.firestore.updateUserData(),this.dialogRef.close())}autoGrowTextZone(e){const i=e.target;i.style.height="auto",i.style.height=i.scrollHeight+28+"px"}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Yd),o.Y36(Fd),o.Y36(pg))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-wishlist-generator"]],decls:26,vars:11,consts:[[1,"wishlist-generator-container"],[1,"mat-title"],[1,"wishlist-generator-form",3,"ngSubmit"],["appearance","outline",1,"form-field"],[3,"ngModel","ngModelOptions","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,""],["matInput","","name","name",3,"required","ngModel","ngModelChange"],["nameInput","ngModel"],["align","end",4,"ngIf"],[1,"wishlist-generator-divider"],["class","question-field-div",4,"ngFor","ngForOf"],[1,"add-question-div"],["appearance","outline","class","add-question-field",3,"hide",4,"ngIf"],["mat-raised-button","","type","button",1,"add-question-btn",3,"color","click"],["class","add-own-caption mat-caption",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",1,"add-question-save-btn"],[3,"value"],["align","end"],[1,"question-field-div"],["matInput","","placeholder","",3,"name","ngModel","ngModelChange","keyup"],["appearance","outline",1,"add-question-field"],["matInput","","placeholder","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"add-own-caption","mat-caption"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2,"Create Wishlist"),o.qZA(),o.TgZ(3,"form",2),o.NdJ("ngSubmit",function(){return i.saveWishlist()}),o.TgZ(4,"mat-form-field",3)(5,"mat-label"),o._uU(6,"Select Template"),o.qZA(),o.TgZ(7,"mat-select",4),o.NdJ("ngModelChange",function(s){return i.currentTemplateName=s})("selectionChange",function(){return i.selectTemplate(i.currentTemplateName)}),o.YNc(8,oX,2,2,"mat-option",5),o.qZA()(),o.TgZ(9,"mat-form-field",6)(10,"mat-label"),o._uU(11,"Name this Wishlist"),o.qZA(),o.TgZ(12,"input",7,8),o.NdJ("ngModelChange",function(s){return i.wishlist.name=s}),o.qZA(),o.YNc(14,aX,2,0,"mat-hint",9),o.qZA(),o._UZ(15,"mat-divider",10),o.YNc(16,lX,5,3,"div",11),o._UZ(17,"mat-divider",10),o.TgZ(18,"div",12),o.YNc(19,cX,4,5,"mat-form-field",13),o.TgZ(20,"button",14),o.NdJ("click",function(){return i.clickAddQuestion()}),o.TgZ(21,"mat-icon"),o._uU(22,"add"),o.qZA()(),o.YNc(23,uX,2,0,"div",15),o.qZA(),o.TgZ(24,"button",16),o._uU(25,"Save"),o.qZA()()()),2&e){const r=o.MAs(13);o.xp6(7),o.Q6J("ngModel",i.currentTemplateName)("ngModelOptions",o.DdM(10,Nz)),o.xp6(1),o.Q6J("ngForOf",i.templatesList),o.xp6(4),o.Q6J("required",!0)("ngModel",i.wishlist.name),o.xp6(2),o.Q6J("ngIf",r.dirty&&i.wishlist.name.length<1),o.xp6(2),o.Q6J("ngForOf",i.template.questions),o.xp6(3),o.Q6J("ngIf",i.showNewQuestionField),o.xp6(1),o.Q6J("color",i.showNewQuestionField?"accent":"primary"),o.xp6(3),o.Q6J("ngIf",!i.showNewQuestionField)}},dependencies:[$r,Cn,co,dt,p,g,lw,DC,Gg,_x,hg,U1,mg,By,A1,yg,gg,Zf],styles:[".wishlist-generator-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;text-align:center}.wishlist-generator-divider[_ngcontent-%COMP%]{width:70%;margin-bottom:1em}mat-form-field[_ngcontent-%COMP%], .question-field-div[_ngcontent-%COMP%]{width:100%}.add-question-div[_ngcontent-%COMP%]{width:100%;min-height:3em;display:flex;flex-direction:row;align-items:center}.add-question-btn[_ngcontent-%COMP%]{width:3em;max-height:2.6em;justify-self:start;margin-bottom:1.5em}.add-question-field[_ngcontent-%COMP%]{margin-right:1em;width:0;opacity:0;animation:expand-out .3s ease-out .2s 1 forwards}.add-question-field.hide[_ngcontent-%COMP%]{width:calc(100% - 5em);opacity:1;animation:shrink-in .3s linear .2s 1 forwards}@keyframes expand-out{0%{width:0;opacity:0}5%{width:0;opacity:1}to{width:calc(100% - 5em);opacity:1}}@keyframes shrink-in{0%{width:calc(100% - 5em);opacity:1}95%{width:0;opacity:0}to{width:0;opacity:0}}.add-question-save-btn[_ngcontent-%COMP%]{margin:.5em 0 1em}.add-own-caption[_ngcontent-%COMP%]{height:2.6em;line-height:1em;margin-left:1.5em;opacity:.7}"]}),n})(),dX=0;const jF=new o.OlP("CdkAccordion");let hX=(()=>{class n{constructor(){this._stateChanges=new Et.x,this._openCloseAllActions=new Et.x,this.id="cdk-accordion-"+dX++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Gt(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[o._Bn([{provide:jF,useExisting:n}]),o.TTD]}),n})(),fX=0,pX=(()=>{class n{constructor(e,i,r){this.accordion=e,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Us.w0.EMPTY,this.closed=new o.vpe,this.opened=new o.vpe,this.destroyed=new o.vpe,this.expandedChange=new o.vpe,this.id="cdk-accordion-child-"+fX++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,c)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===c&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Gt(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Gt(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(jF,12),o.Y36(o.sBO),o.Y36(Cz))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[o._Bn([{provide:jF,useValue:void 0}])]}),n})(),mX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const gX=["body"];function _X(n,t){}const yX=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],vX=["mat-expansion-panel-header","*","mat-action-row"];function bX(n,t){if(1&n&&o._UZ(0,"span",2),2&n){const e=o.oxw();o.Q6J("@indicatorRotate",e._getExpandedState())}}const wX=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],CX=["mat-panel-title","mat-panel-description","*"],GF=new o.OlP("MAT_ACCORDION"),Lz="225ms cubic-bezier(0.4,0.0,0.2,1)",Bz={indicatorRotate:Gn("indicatorRotate",[Tn("collapsed, void",Jt({transform:"rotate(0deg)"})),Tn("expanded",Jt({transform:"rotate(180deg)"})),zn("expanded <=> collapsed, void => collapsed",ri(Lz))]),bodyExpansion:Gn("bodyExpansion",[Tn("collapsed, void",Jt({height:"0px",visibility:"hidden"})),Tn("expanded",Jt({height:"*",visibility:"visible"})),zn("expanded <=> collapsed, void => collapsed",ri(Lz))])},Vz=new o.OlP("MAT_EXPANSION_PANEL");let EX=(()=>{class n{constructor(e,i){this._template=e,this._expansionPanel=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(Vz,8))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),TX=0;const Uz=new o.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Hz=(()=>{class n extends pX{constructor(e,i,r,s,c,d,f){super(e,i,r),this._viewContainerRef=s,this._animationMode=d,this._hideToggle=!1,this.afterExpand=new o.vpe,this.afterCollapse=new o.vpe,this._inputChanges=new Et.x,this._headerId="mat-expansion-panel-header-"+TX++,this._bodyAnimationDone=new Et.x,this.accordion=e,this._document=c,this._bodyAnimationDone.pipe($m((_,b)=>_.fromState===b.fromState&&_.toState===b.toState)).subscribe(_=>{"void"!==_.fromState&&("expanded"===_.toState?this.afterExpand.emit():"collapsed"===_.toState&&this.afterCollapse.emit())}),f&&(this.hideToggle=f.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Gt(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Pr(null),fi(()=>this.expanded&&!this._portal),hi(1)).subscribe(()=>{this._portal=new ng(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,i=this._body.nativeElement;return e===i||i.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(GF,12),o.Y36(o.sBO),o.Y36(Cz),o.Y36(o.s_b),o.Y36(se),o.Y36(o.QbO,8),o.Y36(Uz,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,EX,5),2&e){let s;o.iGM(s=o.CRH())&&(i._lazyContent=s.first)}},viewQuery:function(e,i){if(1&e&&o.Gf(gX,5),2&e){let r;o.iGM(r=o.CRH())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[o._Bn([{provide:GF,useValue:void 0},{provide:Vz,useExisting:n}]),o.qOj,o.TTD],ngContentSelectors:vX,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,i){1&e&&(o.F$t(yX),o.Hsn(0),o.TgZ(1,"div",0,1),o.NdJ("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),o.TgZ(3,"div",2),o.Hsn(4,1),o.YNc(5,_X,0,0,"ng-template",3),o.qZA(),o.Hsn(6,2),o.qZA()),2&e&&(o.xp6(1),o.Q6J("@bodyExpansion",i._getExpandedState())("id",i.id),o.uIk("aria-labelledby",i._headerId),o.xp6(4),o.Q6J("cdkPortalOutlet",i._portal))},dependencies:[ig],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[Bz.bodyExpansion]},changeDetection:0}),n})();class DX{}const IX=jf(DX);let jz=(()=>{class n extends IX{constructor(e,i,r,s,c,d,f){super(),this.panel=e,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=d,this._parentChangeSubscription=Us.w0.EMPTY;const _=e.accordion?e.accordion._stateChanges.pipe(fi(b=>!(!b.hideToggle&&!b.togglePosition))):Va.E;this.tabIndex=parseInt(f||"")||0,this._parentChangeSubscription=(0,hr.T)(e.opened,e.closed,_,e._inputChanges.pipe(fi(b=>!!(b.hideToggle||b.disabled||b.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(fi(()=>e._containsFocus())).subscribe(()=>r.focusVia(i,"program")),c&&(this.expandedHeight=c.expandedHeight,this.collapsedHeight=c.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Bo(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,i){e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Hz,1),o.Y36(o.SBq),o.Y36(tc),o.Y36(o.sBO),o.Y36(Uz,8),o.Y36(o.QbO,8),o.$8M("tabindex"))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&e&&(o.uIk("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),o.Udp("height",i._getHeaderHeight()),o.ekj("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[o.qOj],ngContentSelectors:CX,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,i){1&e&&(o.F$t(wX),o.TgZ(0,"span",0),o.Hsn(1),o.Hsn(2,1),o.Hsn(3,2),o.qZA(),o.YNc(4,bX,1,1,"span",1)),2&e&&(o.ekj("mat-content-hide-toggle",!i._showToggle()),o.xp6(4),o.Q6J("ngIf",i._showToggle()))},dependencies:[Cn],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[Bz.indicatorRotate]},changeDetection:0}),n})(),SX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),xX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),MX=(()=>{class n extends hX{constructor(){super(...arguments),this._ownHeaders=new o.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Gt(e)}ngAfterContentInit(){this._headers.changes.pipe(Pr(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Wm(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,jz,5),2&e){let s;o.iGM(s=o.CRH())&&(i._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-accordion-multi",i.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[o._Bn([{provide:GF,useExisting:n}]),o.qOj]}),n})(),Gz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Wr,St,mX,lu]}),n})();const AX=["wishlistView"];function kX(n,t){if(1&n&&(o.TgZ(0,"mat-form-field",6)(1,"mat-label"),o._uU(2),o.qZA(),o.TgZ(3,"textarea",7),o._uU(4),o.qZA()()),2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(2),o.Oqu(e),o.xp6(1),o.Q6J("readonly",!0),o.xp6(1),o.Oqu(i.getText(e))}}function RX(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw(3);return o.KtG(c.navigateToLink(s))}),o._uU(1),o.TgZ(2,"mat-icon"),o._uU(3,"link"),o.qZA()()}if(2&n){const e=t.index;o.xp6(1),o.hij(" Link ",e+1," ")}}function OX(n,t){if(1&n&&(o.TgZ(0,"div",8),o.YNc(1,RX,4,1,"button",9),o.qZA()),2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(1),o.Q6J("ngForOf",i.getLinks(e))}}function PX(n,t){if(1&n&&(o.TgZ(0,"div",3),o.YNc(1,kX,5,3,"mat-form-field",4),o.YNc(2,OX,2,1,"div",5),o.qZA()),2&n){const e=t.$implicit,i=o.oxw();o.xp6(1),o.Q6J("ngIf","name"!=e),o.xp6(1),o.Q6J("ngIf",i.processedText[e]&&i.processedText[e].links.length>0)}}let zz=(()=>{class n{constructor(){this.processedText={}}ngOnInit(){this.processLinks()}ngAfterViewInit(){this.fixBoxHeights()}navigateToLink(e){window.open(e,"_blank")}getText(e){return this.processedText[e]?this.processedText[e].text:"Loading..."}getLinks(e){return this.processedText[e]?this.processedText[e].links:[]}processLinks(){const e=this.getObjectKeys(this.wishlist);for(let i=0;i<e.length;i++)"name"!=e[i]&&(this.processedText[e[i]]=this.extractLinks(this.wishlist[e[i]]))}extractLinks(e){const i=[];let r=1;return{text:e.replace(/(https?:\/\/[^\s]+)/g,d=>(i.push(d),`[Link ${r++}]`)),links:i}}getObjectKeys(e){return e?Object.keys(e):[]}fixBoxHeights(){Array.from(this.wishlistView.nativeElement.querySelectorAll("textarea")).forEach(i=>this.autoGrowTextZone(i))}autoGrowTextZone(e){e.style.height="auto",e.style.height=`${e.scrollHeight+4}px`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-view-wishlist"]],viewQuery:function(e,i){if(1&e&&o.Gf(AX,5),2&e){let r;o.iGM(r=o.CRH())&&(i.wishlistView=r.first)}},inputs:{wishlist:"wishlist"},decls:3,vars:1,consts:[[1,"view-wishlist-container"],["wishlistView",""],["class","wishlist-items",4,"ngFor","ngForOf"],[1,"wishlist-items"],["appearance","outline","class","wishlist-item",4,"ngIf"],["class","links-list",4,"ngIf"],["appearance","outline",1,"wishlist-item"],["matInput","",1,"custom-textarea",3,"readonly"],[1,"links-list"],["mat-button","","class","link-btn",3,"click",4,"ngFor","ngForOf"],["mat-button","",1,"link-btn",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.YNc(2,PX,3,2,"div",2),o.qZA()),2&e&&(o.xp6(2),o.Q6J("ngForOf",i.getObjectKeys(i.wishlist)))},dependencies:[$r,Cn,co,dt,g,lw,Gg],styles:[".view-wishlist-container[_ngcontent-%COMP%], .wishlist-item[_ngcontent-%COMP%]{width:100%}.custom-textarea[_ngcontent-%COMP%]{white-space:pre-line;font-family:inherit;height:auto;resize:none;overflow-y:hidden}.links-list[_ngcontent-%COMP%]{width:100%;min-height:2em;margin-top:-1.1em;display:flex;flex-direction:row;margin-bottom:1.5em;flex-wrap:wrap}.link-btn[_ngcontent-%COMP%]{margin:.25em .5em;padding-left:1.5em;border-radius:1.6em;line-height:2em;background-color:#bfbfbf;color:#000;text-align:center}mat-icon[_ngcontent-%COMP%]{font-size:1.5em;width:1em}"]}),n})();const NX=["wishlistsHeaderPanel"],FX=["wishlistsEmptyPanel"];function LX(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-expansion-panel",6,7),o.NdJ("opened",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.doNothing("empty"))}),o.TgZ(2,"mat-expansion-panel-header")(3,"mat-panel-title"),o._uU(4," You have no wishlists. "),o.qZA()()()}}function BX(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),o._uU(3),o.qZA()(),o._UZ(4,"app-view-wishlist",8),o.TgZ(5,"div",9)(6,"button",10),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.editWishList(s.name))}),o._uU(7," Edit "),o.TgZ(8,"mat-icon"),o._uU(9,"edit"),o.qZA()(),o.TgZ(10,"button",11),o.NdJ("click",function(){const s=o.CHM(e).$implicit,c=o.oxw();return o.KtG(c.clickDeleteWishlist(s.name))}),o._uU(11," Delete "),o.TgZ(12,"mat-icon"),o._uU(13,"delete"),o.qZA()()()()}if(2&n){const e=t.$implicit;o.xp6(3),o.hij(" ",e.name," "),o.xp6(1),o.Q6J("wishlist",e)}}let VX=(()=>{class n{constructor(e,i,r,s){this.session=e,this.firestore=i,this.dialog=r,this.snackBar=s}ngOnInit(){}createWishlist(){this.dialog.open(Fz,{width:"90vw",minHeight:"50vh",maxHeight:"90vh",data:{type:"new"}}).afterClosed().subscribe(i=>{})}editWishList(e){this.dialog.open(Fz,{width:"90vw",minHeight:"50vh",maxHeight:"90vh",data:{type:"edit",source:e}}).afterClosed().subscribe(r=>{})}deleteWishlist(e){var i=this;return(0,le.Z)(function*(){yield i.firestore.clearWishlistFromGroups(e),i.session.deleteWishlistFromUser(e),i.firestore.updateUserData()})()}clickDeleteWishlist(e){var i=this;return(0,le.Z)(function*(){"OK"===(yield new Promise((s,c)=>{const d=i.snackBar.openFromComponent(sX,{data:{message:`Delete ${e}?`,onYesClick:()=>(d.dismissWithAction(),s("OK")),onNoClick:()=>(d.dismissWithAction(),s("NO"))},duration:4e3})}))&&i.deleteWishlist(e)})()}doNothing(e){switch(e){case"header":return this.wishlistsHeaderPanel.close();case"empty":return this.wishlistsEmptyPanel.close()}}getObjectKeys(e){return e?Object.keys(e):[]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Yd),o.Y36(hu),o.Y36(Hg))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-wishlists"]],viewQuery:function(e,i){if(1&e&&(o.Gf(NX,5),o.Gf(FX,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.wishlistsHeaderPanel=r.first),o.iGM(r=o.CRH())&&(i.wishlistsEmptyPanel=r.first)}},decls:12,vars:2,consts:[[1,"wishlists-list"],["hideToggle","",1,"wishlists-header",3,"opened"],["wishlistsHeaderPanel",""],["mat-flat-button","","color","accent",1,"accordion-header-btn",3,"click"],["hideToggle","",3,"opened",4,"ngIf"],[4,"ngFor","ngForOf"],["hideToggle","",3,"opened"],["wishlistsEmptyPanel",""],[3,"wishlist"],[1,"wishlist-panel-btns"],["mat-flat-button","","color","accent",1,"edit-btn",3,"click"],["mat-flat-button","","color","warn",1,"edit-btn",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"mat-accordion",0)(1,"mat-expansion-panel",1,2),o.NdJ("opened",function(){return i.doNothing("header")}),o.TgZ(3,"mat-expansion-panel-header")(4,"mat-panel-title"),o._uU(5," Wishlists "),o.qZA(),o.TgZ(6,"mat-panel-description")(7,"button",3),o.NdJ("click",function(){return i.createWishlist()}),o.TgZ(8,"mat-icon"),o._uU(9,"add"),o.qZA()()()()(),o.YNc(10,LX,5,0,"mat-expansion-panel",4),o.YNc(11,BX,14,2,"mat-expansion-panel",5),o.qZA()),2&e&&(o.xp6(10),o.Q6J("ngIf",i.session.getUser().wishlists.length<1),o.xp6(1),o.Q6J("ngForOf",i.session.getUser().wishlists))},dependencies:[$r,Cn,co,Gg,MX,Hz,jz,xX,SX,zz],styles:[".wishlists-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{flex-grow:3}.wishlists-header[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{flex-grow:1;justify-content:right;margin-right:0}.accordion-header-btn[_ngcontent-%COMP%]{align-self:right}.wishlist-panel-btns[_ngcontent-%COMP%]{margin:1em 0 .5em}.wishlist-panel-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:7em;margin:0 .5em;padding-left:26px}.wishlist-item[_ngcontent-%COMP%]{width:100%}.custom-textarea[_ngcontent-%COMP%]{white-space:pre-line;font-family:inherit;height:auto;resize:none;overflow-y:hidden}"]}),n})();const UX=function(n,t){return["/secretsanta",n,t]};function HX(n,t){if(1&n&&(o.TgZ(0,"mat-list-item",9),o._uU(1),o.TgZ(2,"div",10)(3,"mat-icon"),o._uU(4,"keyboard_arrow_right"),o.qZA()()()),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.ekj("bottom-border",r.session.getGroups().length>1&&i!=r.session.getGroups().length-1),o.Q6J("routerLink",o.WLB(4,UX,e.name,i)),o.xp6(1),o.hij(" ",e.name," ")}}function jX(n,t){if(1&n&&(o.TgZ(0,"mat-list",7),o.YNc(1,HX,5,7,"mat-list-item",8),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.session.getGroups())}}function GX(n,t){1&n&&o._UZ(0,"mat-divider",4)}let zX=(()=>{class n{constructor(e,i,r,s){this.session=e,this.router=i,this.firestore=r,this.dialog=s,null==e.getAuthUser()&&i.navigate(["/","login"])}ngOnInit(){this.firestore.getGroupsByParticipantId(this.session.getUser().id).then(e=>{e&&this.session.setGroups([...e])})}clickSetupNewGroup(){this.dialog.open(FJ,{width:"90vw",minHeight:"50vh",maxHeight:"90vh",data:{}}).afterClosed().subscribe(i=>{})}clickJoinGroup(){this.dialog.open(jJ,{width:"90vw",minHeight:"50vh",maxHeight:"90vh",data:{}}).afterClosed().subscribe(i=>{})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Zi),o.Y36(Yd),o.Y36(hu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-index"]],decls:11,vars:3,consts:[[1,"index-container"],[1,"mat-headline","welcome-title"],["mat-flat-button","","color","accent",1,"index-main-btn","join-btn",3,"click"],["mat-flat-button","","color","accent",1,"index-main-btn","setup-btn",3,"click"],[1,"index-divider"],["class","groups-div",4,"ngIf"],["class","index-divider",4,"ngIf"],[1,"groups-div"],["routerLinkActive","active","class","group-item",3,"routerLink","bottom-border",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"group-item",3,"routerLink"],["mat-icon-button","",1,"groups-list-btn"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2),o.qZA(),o.TgZ(3,"button",2),o.NdJ("click",function(){return i.clickJoinGroup()}),o._uU(4," Join Secret Santa "),o.qZA(),o.TgZ(5,"button",3),o.NdJ("click",function(){return i.clickSetupNewGroup()}),o._uU(6," Setup New Secret Santa "),o.qZA(),o._UZ(7,"mat-divider",4),o.YNc(8,jX,2,1,"mat-list",5),o.YNc(9,GX,1,0,"mat-divider",6),o._UZ(10,"app-wishlists"),o.qZA()),2&e&&(o.xp6(2),o.hij(" Welcome Back, ",i.session.getUser().name," "),o.xp6(6),o.Q6J("ngIf",i.session.getGroups().length>0),o.xp6(1),o.Q6J("ngIf",i.session.getGroups().length>0))},dependencies:[$r,Cn,Sf,Qb,co,DC,Gg,JJ,XJ,VX],styles:[".index-container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 16rem);text-align:center;padding:8rem 0;display:flex;flex-direction:column;align-items:center;opacity:0;transform:translateY(50px);animation:load-in .5s ease-in .7s 1 forwards}@keyframes load-in{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.welcome-title[_ngcontent-%COMP%]{text-align:center;width:100%;margin-bottom:1em;opacity:.8}.index-main-btn[_ngcontent-%COMP%]{min-width:60vw;padding:.125em 0;margin:.75em 0}.index-divider[_ngcontent-%COMP%]{width:50%;margin:1em 0}app-wishlists[_ngcontent-%COMP%]{width:90%;margin:.75em 10%}.groups-div[_ngcontent-%COMP%]{width:90%;display:flex;flex-direction:column;align-items:center;margin:.75em 10%;padding-top:0!important;border:1px solid rgba(0,0,0,.08);border-radius:4px;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;overflow:hidden}.group-item[_ngcontent-%COMP%]{width:100%;font-family:Roboto;transition:.2s;cursor:pointer}.group-item[_ngcontent-%COMP%]:hover{background-color:#99999925}.groups-list-btn[_ngcontent-%COMP%]{flex:1;text-align:right}.bottom-border[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.06)}"]}),n})(),$X=(()=>{class n{constructor(e,i,r,s,c){this.session=e,this.firestore=i,this.dialogRef=r,this.data=s,this.snackBar=c,this.clicked=!1,this.group=s.group}ngOnInit(){}clickOK(){this.clicked||(this.clicked=!0,setTimeout(()=>this.clicked=!1,3e3),this.deleteGroup().then(e=>{console.log("OK",e),this.snackBar.open(`Deleted ${this.group.name}`,"",{duration:3e3}),this.session.deleteLocalGroup(this.group.name),this.dialogRef.close(!0)}).catch(e=>{console.log("noK",e),this.snackBar.open(`Failed to delete all data for ${this.group.name}`,"",{duration:3e3}),this.dialogRef.close(!0)}))}deleteGroup(){var e=this;return new Promise(function(){var i=(0,le.Z)(function*(r,s){try{yield e.firestore.deleteGroup(e.group.name,e.group.adminName)}catch(c){return console.log("Failed to delete group",c),s("ERROR")}try{return Object.keys(e.group.participants).forEach(function(){var c=(0,le.Z)(function*(d){e.group.participants[d]&&e.group.participants[d].length>1&&(yield e.firestore.removeWishlistTemplateFromUser(d,e.group.name))});return function(d){return c.apply(this,arguments)}}()),r("OK")}catch(c){return console.log("Failed to delete template from users",c),s("ERROR")}});return function(r,s){return i.apply(this,arguments)}}())}clickCancel(){this.clicked||(this.clicked=!0,setTimeout(()=>this.clicked=!1,3e3),setTimeout(()=>{this.dialogRef.close(!1)},300))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Yd),o.Y36(Fd),o.Y36(pg),o.Y36(Hg))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-delete-group"]],decls:13,vars:2,consts:[[1,"group-delete-container"],[1,"mat-title","group-delete-title"],[1,"mat-body"],[1,"group-delete-btns-div"],["mat-flat-button","","color","accent",1,"group-delete-btn","btn-ok",3,"click"],["mat-flat-button","","color","warn",1,"group-delete-btn","btn-no",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2),o.qZA(),o.TgZ(3,"div",2),o._uU(4),o._UZ(5,"br")(6,"br"),o._uU(7,"This will permanently remove the Secret Santa group from our records."),o.qZA(),o.TgZ(8,"div",3)(9,"button",4),o.NdJ("click",function(){return i.clickOK()}),o._uU(10,"OK"),o.qZA(),o.TgZ(11,"button",5),o.NdJ("click",function(){return i.clickCancel()}),o._uU(12,"Cancel"),o.qZA()()()),2&e&&(o.xp6(2),o.hij("Delete ",i.group.name,""),o.xp6(2),o.hij("Are you sure you want to delete the ",i.group.name," Secret Santa group?"))},dependencies:[co],styles:[".group-delete-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;text-align:center}.group-delete-title[_ngcontent-%COMP%]{width:100%}.group-delete-subtitle[_ngcontent-%COMP%]{opacity:.8}.group-delete-btns-div[_ngcontent-%COMP%]{width:100%;margin-top:2em}.group-delete-btn[_ngcontent-%COMP%]{margin:0 .5em}"]}),n})();const WX=[[["caption"]],[["colgroup"],["col"]]],ZX=["caption","colgroup, col"];function zF(n){return class extends n{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=Gt(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const Tv=new o.OlP("CDK_TABLE");let Dv=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Iv=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),yx=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class JX{}const XX=zF(JX);let Qd=(()=>{class n extends XX{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const i=this._stickyEnd;this._stickyEnd=Gt(e),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Tv,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,Dv,5),o.Suo(r,Iv,5),o.Suo(r,yx,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.cell=s.first),o.iGM(s=o.CRH())&&(i.headerCell=s.first),o.iGM(s=o.CRH())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[o._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),o.qOj]}),n})();class $F{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}}let qF=(()=>{class n extends $F{constructor(e,i){super(e,i)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Qd),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[o.qOj]}),n})(),WF=(()=>{class n extends $F{constructor(e,i){if(super(e,i),1===e._table?._elementRef.nativeElement.nodeType){const r=e._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Qd),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[o.qOj]}),n})();class qz{constructor(){this.tasks=[],this.endTasks=[]}}const ZF=new o.OlP("_COALESCED_STYLE_SCHEDULER");let Wz=(()=>{class n{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Et.x}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new qz,this._getScheduleObservable().pipe(qn(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new qz;for(const i of e.tasks)i();for(const i of e.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,Mn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(hi(1))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),YF=(()=>{class n{constructor(e,i){this.template=e,this._differs=i}ngOnChanges(e){if(!this._columnsDiffer){const i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof xC?e.headerCell.template:this instanceof MC?e.footerCell.template:e.cell.template}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();class eee extends YF{}const tee=zF(eee);let xC=(()=>{class n extends tee{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(Tv,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[o.qOj,o.TTD]}),n})();class nee extends YF{}const iee=zF(nee);let MC=(()=>{class n extends iee{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(Tv,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[o.qOj,o.TTD]}),n})(),vx=(()=>{class n extends YF{constructor(e,i,r){super(e,i),this._table=r}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(Tv,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[o.qOj]}),n})(),Jd=(()=>{class n{constructor(e){this._viewContainer=e,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),KF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},dependencies:[Jd],encapsulation:2}),n})(),JF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},dependencies:[Jd],encapsulation:2}),n})(),bx=(()=>{class n{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const Zz=["top","bottom","left","right"];class ree{constructor(t,e,i,r,s=!0,c=!0,d){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=c,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const i=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,i,r=!0){if(!t.length||!this._isBrowser||!e.some(M=>M)&&!i.some(M=>M))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=t[0],c=s.children.length,d=this._getCellWidths(s,r),f=this._getStickyStartColumnPositions(d,e),_=this._getStickyEndColumnPositions(d,i),b=e.lastIndexOf(!0),D=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const M="rtl"===this.direction,R=M?"right":"left",U=M?"left":"right";for(const q of t)for(let J=0;J<c;J++){const we=q.children[J];e[J]&&this._addStickyStyle(we,R,f[J],J===b),i[J]&&this._addStickyStyle(we,U,_[J],J===D)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===b?[]:d.slice(0,b+1).map((q,J)=>e[J]?q:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===D?[]:d.slice(D).map((q,J)=>i[J+D]?q:null).reverse()}))})}stickRows(t,e,i){if(!this._isBrowser)return;const r="bottom"===i?t.slice().reverse():t,s="bottom"===i?e.slice().reverse():e,c=[],d=[],f=[];for(let b=0,D=0;b<r.length;b++){if(!s[b])continue;c[b]=D;const M=r[b];f[b]=this._isNativeHtmlTable?Array.from(M.children):[M];const R=M.getBoundingClientRect().height;D+=R,d[b]=R}const _=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let b=0;b<r.length;b++){if(!s[b])continue;const D=c[b],M=b===_;for(const R of f[b])this._addStickyStyle(R,i,D,M)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:d,offsets:c,elements:f}):this._positionListener?.stickyFooterRowsUpdated({sizes:d,offsets:c,elements:f})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const i=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);Zz.some(r=>-1===e.indexOf(r)&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,i,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${i}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let i=0;for(const r of Zz)t.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=t.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(t,e){const i=[];let r=0;for(let s=0;s<t.length;s++)e[s]&&(i[s]=r,r+=t[s]);return i}_getStickyEndColumnPositions(t,e){const i=[];let r=0;for(let s=t.length;s>0;s--)e[s]&&(i[s]=r,r+=t[s]);return i}}const XF=new o.OlP("CDK_SPL");let wx=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),Cx=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),Ex=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Tx=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),Dx=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,D,M,R){this._differs=e,this._changeDetectorRef=i,this._elementRef=r,this._dir=c,this._platform=f,this._viewRepeater=_,this._coalescedStyleScheduler=b,this._viewportRuler=D,this._stickyPositioningListener=M,this._ngZone=R,this._onDestroy=new Et.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new o.vpe,this.viewChange=new ts({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=Gt(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=Gt(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(qn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),HF(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,s,c)=>this._getEmbeddedViewArgs(r.item,c),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&o.R0b.isInAngularZone()?this._ngZone.onStable.pipe(hi(1),qn(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,c)=>{this._addStickyColumnStyles([s],this._headerRowDefs[c])}),this._rowDefs.forEach(s=>{const c=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&c.push(i[d]);this._addStickyColumnStyles(c,s)}),r.forEach((s,c)=>{this._addStickyColumnStyles([s],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const c=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<c.length;d++){let f=c[d];const _=this._cachedRenderRowsMap.get(f.data);_.has(f.rowDef)?_.get(f.rowDef).push(f):_.set(f.rowDef,[f]),e.push(f)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(c=>{const d=r&&r.has(c)?r.get(c):[];if(d.length){const f=d.shift();return f.dataIndex=i,f}return{data:e,rowDef:c,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Ix(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Ix(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Ix(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Ix(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(c,d)=>c||!!d.getColumnsDiff(),i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(e){this._data=[],HF(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;HF(this.dataSource)?e=this.dataSource.connect(this):function qX(n){return!!n&&(n instanceof nr.y||(0,Ro.m)(n.lift)&&(0,Ro.m)(n.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=ct(this.dataSource)),this._renderChangeSubscription=e.pipe(qn(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){const r=Array.from(i.columns||[]).map(d=>this._columnDefsByName.get(d)),s=r.map(d=>d.sticky),c=r.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const i=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(e,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,e));else{let s=this._rowDefs.find(c=>c.when&&c.when(i,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,i){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:i}}_renderRow(e,i,r,s={}){const c=e.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),c}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))Jd.mostRecentCellOutlet&&Jd.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){const c=e.get(i).context;c.count=r,c.first=0===i,c.last=i===r-1,c.even=i%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[i].dataIndex,c.renderIndex=i):c.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,i=>{const r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const c of r.outlets)s.appendChild(c.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new ree(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:ct()).pipe(qn(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(e.templateRef),c=s.rootNodes[0];1===s.rootNodes.length&&c?.nodeType===this._document.ELEMENT_NODE&&(c.setAttribute("role","row"),c.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.sBO),o.Y36(o.SBq),o.$8M("role"),o.Y36(za,8),o.Y36(se),o.Y36(Lr),o.Y36(IC),o.Y36(ZF),o.Y36(eg),o.Y36(XF,12),o.Y36(o.R0b,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,bx,5),o.Suo(r,Qd,5),o.Suo(r,vx,5),o.Suo(r,xC,5),o.Suo(r,MC,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._noDataRow=s.first),o.iGM(s=o.CRH())&&(i._contentColumnDefs=s),o.iGM(s=o.CRH())&&(i._contentRowDefs=s),o.iGM(s=o.CRH())&&(i._contentHeaderRowDefs=s),o.iGM(s=o.CRH())&&(i._contentFooterRowDefs=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(wx,7),o.Gf(Cx,7),o.Gf(Ex,7),o.Gf(Tx,7)),2&e){let r;o.iGM(r=o.CRH())&&(i._rowOutlet=r.first),o.iGM(r=o.CRH())&&(i._headerRowOutlet=r.first),o.iGM(r=o.CRH())&&(i._footerRowOutlet=r.first),o.iGM(r=o.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[o._Bn([{provide:Tv,useExisting:n},{provide:IC,useClass:bz},{provide:ZF,useClass:Wz},{provide:XF,useValue:null}])],ngContentSelectors:ZX,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(o.F$t(WX),o.Hsn(0),o.Hsn(1,1),o.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[wx,Cx,Ex,Tx],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function Ix(n,t){return n.concat(Array.from(t))}let oee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ND]}),n})();const aee=[[["caption"]],[["colgroup"],["col"]]],lee=["caption","colgroup, col"];let eL=(()=>{class n extends Dx{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[o._Bn([{provide:IC,useClass:bz},{provide:Dx,useExisting:n},{provide:Tv,useExisting:n},{provide:ZF,useClass:Wz},{provide:XF,useValue:null}]),o.qOj],ngContentSelectors:lee,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(o.F$t(aee),o.Hsn(0),o.Hsn(1,1),o.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[wx,Cx,Ex,Tx],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),Sx=(()=>{class n extends Dv{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matCellDef",""]],features:[o._Bn([{provide:Dv,useExisting:n}]),o.qOj]}),n})(),xx=(()=>{class n extends Iv{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[o._Bn([{provide:Iv,useExisting:n}]),o.qOj]}),n})(),Mx=(()=>{class n extends Qd{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[o._Bn([{provide:Qd,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),o.qOj]}),n})(),Ax=(()=>{class n extends qF{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[o.qOj]}),n})(),kx=(()=>{class n extends WF{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[o.qOj]}),n})(),tL=(()=>{class n extends xC{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[o._Bn([{provide:xC,useExisting:n}]),o.qOj]}),n})(),nL=(()=>{class n extends vx{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[o._Bn([{provide:vx,useExisting:n}]),o.qOj]}),n})(),iL=(()=>{class n extends KF{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[o._Bn([{provide:KF,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},dependencies:[Jd],encapsulation:2}),n})(),rL=(()=>{class n extends JF{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[o._Bn([{provide:JF,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},dependencies:[Jd],encapsulation:2}),n})(),Kz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[oee,St,St]}),n})();function vee(n,t){if(1&n&&(o.TgZ(0,"th",17),o._uU(1," Don't Match "),o.qZA()),2&n){const e=o.oxw(2);o.uIk("colspan",e.noMatchdisplayedColumns.length)}}function bee(n,t){1&n&&o._UZ(0,"th",18)}function wee(n,t){if(1&n&&(o.TgZ(0,"td",19),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e," ")}}function Cee(n,t){1&n&&o._UZ(0,"th",18)}function Eee(n,t){if(1&n&&(o.TgZ(0,"td",19),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2);o.xp6(1),o.hij(" ",i.group.noMatchPairs[e]," ")}}function Tee(n,t){1&n&&o._UZ(0,"tr",20)}function Dee(n,t){1&n&&o._UZ(0,"tr",21)}const Qz=function(){return["header"]};function Iee(n,t){if(1&n&&(o.TgZ(0,"div",7)(1,"table",8),o.ynx(2,9),o.YNc(3,vee,2,1,"th",10),o.BQk(),o.ynx(4,11),o.YNc(5,bee,1,0,"th",12),o.YNc(6,wee,2,1,"td",13),o.BQk(),o.ynx(7,14),o.YNc(8,Cee,1,0,"th",12),o.YNc(9,Eee,2,1,"td",13),o.BQk(),o.YNc(10,Tee,1,0,"tr",15),o.YNc(11,Dee,1,0,"tr",16),o.qZA()()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("dataSource",e.getObjectKeys(e.group.noMatchPairs)),o.xp6(9),o.Q6J("matHeaderRowDef",o.DdM(3,Qz)),o.xp6(1),o.Q6J("matRowDefColumns",e.noMatchdisplayedColumns)}}function See(n,t){if(1&n&&(o.TgZ(0,"th",17),o._uU(1," Santa Matches (Anonymised) "),o.qZA()),2&n){const e=o.oxw(2);o.uIk("colspan",e.samtasDisplayedColumns.length)}}function xee(n,t){1&n&&o._UZ(0,"th",18)}function Mee(n,t){if(1&n&&(o.TgZ(0,"td",19),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e," ")}}function Aee(n,t){1&n&&o._UZ(0,"th",18)}function kee(n,t){if(1&n&&(o.TgZ(0,"td",19),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2);o.xp6(1),o.hij(" ",i.anonymisedSantas[e]," ")}}function Ree(n,t){1&n&&o._UZ(0,"tr",20)}function Oee(n,t){1&n&&o._UZ(0,"tr",21)}function Pee(n,t){if(1&n&&(o.TgZ(0,"div",22)(1,"table",8),o.ynx(2,9),o.YNc(3,See,2,1,"th",10),o.BQk(),o.ynx(4,23),o.YNc(5,xee,1,0,"th",12),o.YNc(6,Mee,2,1,"td",13),o.BQk(),o.ynx(7,24),o.YNc(8,Aee,1,0,"th",12),o.YNc(9,kee,2,1,"td",13),o.BQk(),o.YNc(10,Ree,1,0,"tr",15),o.YNc(11,Oee,1,0,"tr",16),o.qZA()()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("dataSource",e.getObjectKeys(e.anonymisedSantas)),o.xp6(9),o.Q6J("matHeaderRowDef",o.DdM(3,Qz)),o.xp6(1),o.Q6J("matRowDefColumns",e.samtasDisplayedColumns)}}function Nee(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.clickOk())}),o._uU(1,"Save"),o.qZA()}}const sL=["Alice","Benjamin","Charlotte","Daniel","Emily","Finn","Grace","Henry","Isabella","Jack","Katherine","Liam","Mia","Noah","Olivia","Penelope","Quinlan","Ruby","Samuel","Taylor","Ava","Bryce","Chloe","David","Ella","Freddie","Georgia","Hannah","Isaac","Jessica","Kevin","Lily","Matthew","Nora","Owen","Paige","Quinn","Rachel","Sophia","Thomas","Ursula","Victor","Wendy","Xander","Yasmine","Zachary"];let Fee=(()=>{class n{constructor(e,i,r,s,c){this.session=e,this.firestore=i,this.dialogRef=r,this.data=s,this.snackBar=c,this.anonymisedSantas={},this.noMatchdisplayedColumns=["userA","userB"],this.samtasDisplayedColumns=["Santa","Recipient"],this.clickedGenerated=!1,this.clickedSave=!1,this.hasSantas=!1,this.group=s.group}ngOnInit(){}clickOk(){this.clickedSave||(this.clickedSave=!0,setTimeout(()=>this.clickedSave=!1,1e3),this.saveMatches())}saveMatches(){this.group.isGenerated=!0,this.firestore.updateGroupData(this.group.name,this.group.adminName,{santas:this.group.santas,isGenerated:this.group.isGenerated}).then(()=>{this.firestore.refreshGroups(),this.dialogRef.close({wasGenerated:!0,group:this.group})}).catch(()=>{this.snackBar.open("Failed to save santa matches...","",{duration:3e3})})}clickGenerate(){if(this.clickedGenerated)return;this.clickedGenerated=!0;const e=1e3+150*this.getObjectKeys(this.group.santas).length;setTimeout(()=>this.clickedGenerated=!1,e),this.hasSantas=!1,this.group.santas={},this.anonymisedSantas={};const i=this.generateSantas(this.group);if(console.log("Generate Results",i),!i)return this.snackBar.open("Failed to generate santas :(","",{duration:3e3});this.group.santas=i,this.anonymiseSantas(),setTimeout(()=>{this.hasSantas=!0},e)}anonymiseSantas(){const e=this.getObjectKeys(this.group.participants),i={};e.forEach(s=>{let c;do{c=Math.floor(Math.random()*sL.length-1)}while(Object.values(i).includes(c));i[s]=c});let r=0;e.forEach(s=>{const c=sL[i[s]],d=sL[i[this.group.santas[s]]];setTimeout(()=>{this.anonymisedSantas[c]=d},500+150*r),r++})}generateSantas(e){const i=Object.keys(e.participants);let r={},s=0;for(;s<30;){i.sort(()=>Math.random()-.5),r={};let c=!0;for(let d=0;d<i.length;d++){const f=i[d],_=i[(d+1)%i.length];if(e.noMatchPairs[f]===_||e.noMatchPairs[_]===f){c=!1;break}r[f]=_}if(c)return r;console.log("Bad Pairing",s),s++}return!1}getObjectKeys(e){return e?Object.keys(e):[]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Yd),o.Y36(Fd),o.Y36(pg),o.Y36(Hg))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-generate-matches"]],decls:9,vars:4,consts:[[1,"match-gnrt-container"],[1,"mat-title","match-gnrt-title"],["class","no-match-pairs-div",4,"ngIf"],["class","santa-matches-div",4,"ngIf"],[1,"match-gnrt-btns-div"],["mat-flat-button","","color","accent",1,"match-gnrt-btn","btn-ok",3,"click"],["mat-flat-button","","color","accent","class","match-gnrt-btn btn-ok",3,"click",4,"ngIf"],[1,"no-match-pairs-div"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","header"],["mat-header-cell","","style","text-align: center; font-weight: bold;",4,"matHeaderCellDef"],["matColumnDef","userA"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userB"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"text-align","center","font-weight","bold"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"santa-matches-div"],["matColumnDef","Santa"],["matColumnDef","Recipient"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2,"Generate Matches"),o.qZA(),o.YNc(3,Iee,12,4,"div",2),o.YNc(4,Pee,12,4,"div",3),o.TgZ(5,"div",4)(6,"button",5),o.NdJ("click",function(){return i.clickGenerate()}),o._uU(7),o.qZA(),o.YNc(8,Nee,2,0,"button",6),o.qZA()()),2&e&&(o.xp6(3),o.Q6J("ngIf",i.getObjectKeys(i.group.noMatchPairs).length>0),o.xp6(1),o.Q6J("ngIf",i.getObjectKeys(i.anonymisedSantas).length>0),o.xp6(3),o.Oqu(i.hasSantas?"Regenerate":"Generate"),o.xp6(1),o.Q6J("ngIf",i.hasSantas))},dependencies:[Cn,co,eL,xx,tL,Mx,Sx,nL,Ax,kx,iL,rL],styles:[".match-gnrt-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;text-align:center}.match-gnrt-title[_ngcontent-%COMP%]{width:100%}.match-gnrt-subtitle[_ngcontent-%COMP%]{opacity:.8}.match-gnrt-btns-div[_ngcontent-%COMP%]{width:100%;margin-top:2em}.match-gnrt-btn[_ngcontent-%COMP%]{margin:0 .5em}.no-match-pairs-div[_ngcontent-%COMP%], .santa-matches-div[_ngcontent-%COMP%]{width:80%;margin-top:1.5em}table[_ngcontent-%COMP%]{width:100%}"]}),n})();const Lee=["input"],Bee=function(n){return{enterDuration:n}},Vee=["*"],Uee=new o.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let Hee=0;const jee={provide:Ds,useExisting:(0,o.Gpc)(()=>Jz),multi:!0};class Gee{constructor(t,e){this.source=t,this.checked=e}}const zee=jf(cu(Wa(lg(class{constructor(n){this._elementRef=n}}))));let $ee=(()=>{class n extends zee{constructor(e,i,r,s,c,d,f){super(e),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=c,this._onChange=_=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new o.vpe,this.toggleChange=new o.vpe,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=c.color||"accent",this._noopAnimations="NoopAnimations"===d,this.id=this._uniqueId=`${f}${++Hee}`}get required(){return this._required}set required(e){this._required=Gt(e)}get checked(){return this._checked}set checked(e){this._checked=Gt(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._focused=!0:e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[o.qOj]}),n})(),Jz=(()=>{class n extends $ee{constructor(e,i,r,s,c,d){super(e,i,r,s,c,d,"mat-slide-toggle-")}_createChangeEvent(e){return new Gee(this,e)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(tc),o.Y36(o.sBO),o.$8M("tabindex"),o.Y36(Uee),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,i){if(1&e&&o.Gf(Lee,5),2&e){let r;o.iGM(r=o.CRH())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(e,i){2&e&&(o.Ikx("id",i.id),o.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),o.ekj("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[o._Bn([jee]),o.qOj],ngContentSelectors:Vee,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,i){if(1&e&&(o.F$t(),o.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),o.NdJ("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),o.qZA(),o.TgZ(5,"span",5),o._UZ(6,"span",6),o.TgZ(7,"span",7),o._UZ(8,"span",8),o.qZA()()(),o.TgZ(9,"span",9,10),o.NdJ("cdkObserveContent",function(){return i._onLabelTextChange()}),o.TgZ(11,"span",11),o._uU(12,"\xa0"),o.qZA(),o.Hsn(13),o.qZA()()),2&e){const r=o.MAs(1),s=o.MAs(10);o.uIk("for",i.inputId),o.xp6(2),o.ekj("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),o.xp6(1),o.Q6J("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),o.uIk("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),o.xp6(4),o.Q6J("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",o.VKq(18,Bee,i._noopAnimations?0:150))}},dependencies:[nc,wy],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),Xz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),e$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Xz,du,St,qm,Xz,St]}),n})();const Zee=["wishlistItems"];function Yee(n,t){if(1&n&&(o.TgZ(0,"mat-option",19),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e.name," ")}}function Kee(n,t){1&n&&o._UZ(0,"mat-divider",4)}function Qee(n,t){if(1&n&&(o.TgZ(0,"div",20)(1,"div",21),o._uU(2),o.qZA(),o.TgZ(3,"div",22),o._uU(4,"Share this join code with your friends."),o.qZA()()),2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.group.joinCode)}}function Jee(n,t){1&n&&o._UZ(0,"mat-divider",4)}function Xee(n,t){if(1&n&&o._UZ(0,"app-view-wishlist",27),2&n){const e=o.oxw(2);o.Q6J("wishlist",e.recipientWishlist)}}function ete(n,t){if(1&n&&(o.TgZ(0,"div",23,24)(2,"div",25),o._uU(3),o.qZA(),o.TgZ(4,"div",22),o._uU(5),o.qZA(),o.YNc(6,Xee,1,1,"app-view-wishlist",26),o.qZA()),2&n){const e=o.oxw();o.xp6(3),o.hij("You are ",e.recipientName,"'s Secret Santa!"),o.xp6(2),o.hij("",e.recipientName,"'s Christmas List:"),o.xp6(1),o.Q6J("ngIf",e.recipientWishlist)}}function tte(n,t){1&n&&o._UZ(0,"mat-divider",4)}function nte(n,t){1&n&&(o.TgZ(0,"th",39),o._uU(1," No. "),o.qZA())}function ite(n,t){if(1&n&&(o.TgZ(0,"td",40),o._uU(1),o.qZA()),2&n){const e=t.index;o.xp6(1),o.hij(" ",e+1," ")}}function rte(n,t){1&n&&(o.TgZ(0,"th",39),o._uU(1," Name "),o.qZA())}function ste(n,t){if(1&n&&(o.TgZ(0,"td",40),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e," ")}}function ote(n,t){1&n&&(o.TgZ(0,"th",39),o._uU(1," Attendance "),o.qZA())}function ate(n,t){if(1&n&&(o.TgZ(0,"td",40),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2);o.xp6(1),o.hij(" ",i.checkAttendance(e)?"True":"False"," ")}}function lte(n,t){1&n&&(o.TgZ(0,"th",39),o._uU(1," Ready "),o.qZA())}function cte(n,t){if(1&n&&(o.TgZ(0,"td",40),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2);o.xp6(1),o.hij(" ",i.group.participantsReady[e]?"True":"False"," ")}}function ute(n,t){1&n&&(o.TgZ(0,"th",39),o._uU(1," Wishlist "),o.qZA())}function dte(n,t){if(1&n&&(o.TgZ(0,"td",40),o._uU(1),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(2);o.xp6(1),o.hij(" ",i.group.wishlists[e]," ")}}function hte(n,t){1&n&&o._UZ(0,"tr",41)}function fte(n,t){1&n&&o._UZ(0,"tr",42)}function pte(n,t){if(1&n&&(o.TgZ(0,"div",28)(1,"table",29),o.ynx(2,30),o.YNc(3,nte,2,0,"th",31),o.YNc(4,ite,2,1,"td",32),o.BQk(),o.ynx(5,33),o.YNc(6,rte,2,0,"th",31),o.YNc(7,ste,2,1,"td",32),o.BQk(),o.ynx(8,34),o.YNc(9,ote,2,0,"th",31),o.YNc(10,ate,2,1,"td",32),o.BQk(),o.ynx(11,35),o.YNc(12,lte,2,0,"th",31),o.YNc(13,cte,2,1,"td",32),o.BQk(),o.ynx(14,36),o.YNc(15,ute,2,0,"th",31),o.YNc(16,dte,2,1,"td",32),o.BQk(),o.YNc(17,hte,1,0,"tr",37),o.YNc(18,fte,1,0,"tr",38),o.qZA()()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("dataSource",e.participants),o.xp6(16),o.Q6J("matHeaderRowDef",e.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",e.displayedColumns)}}function mte(n,t){1&n&&o._UZ(0,"mat-divider",4)}function gte(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e)}}function _te(n,t){if(1&n&&(o.TgZ(0,"div"),o.YNc(1,gte,2,1,"div",45),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.waitingForPtcpts)}}function yte(n,t){if(1&n&&(o.TgZ(0,"div",43)(1,"div"),o._uU(2),o.qZA(),o.YNc(3,_te,2,1,"div",44),o.qZA()),2&n){const e=o.oxw();o.xp6(2),o.hij("Waiting for ",e.waitingForPtcpts.length>0?"":e.group.adminName+" to generate matches.",""),o.xp6(1),o.Q6J("ngIf",e.waitingForPtcpts.length>0)}}function vte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",46)(1,"button",47),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.clickGenerate())}),o._uU(2,"Matchmake"),o.qZA(),o.TgZ(3,"button",48),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.clickDeleteGroup())}),o._uU(4,"Delete"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.canGenerate())}}const bte=function(){return["/"]},wte=[{path:"",component:zX},{path:"login",component:nJ},{path:"secretsanta/:name/:index",component:(()=>{class n{constructor(e,i,r,s,c,d){this.session=e,this.firestore=i,this.route=r,this.snackBar=s,this.router=c,this.dialog=d,this.isAdmin=!1,this.isReady=!1,this.participantName="",this.participants=[],this.recipientName="",this.waitingForPtcpts=[],this.displayedColumns=["position","name","attendance","ready","wishlist"]}ngOnInit(){var e=this;this.route.params.subscribe(function(){var i=(0,le.Z)(function*(r){const d=e.findGroupByName(r.name,r.index);if(-1==d.status)return e.snackBar.open("Error Finding Secret Santa Group...","OK",{duration:3e3}),void e.router.navigate(["/"]);e.group=d.group,console.log("Search Status: ",d.status),e.checkIsAdmin(),e.getParticipantName(),e.participants=Object.keys(e.group.participants),e.isReady=e.group.participantsReady[e.participantName],e.selectedWishlist=e.session.getWishlists().find(f=>f.name==e.group.wishlists[e.participantName]),e.group.isGenerated?(e.recipientName=e.group.santas[e.participantName],e.recipientWishlist=yield e.firestore.getRecipientWishlist(e.group.participants[e.recipientName],e.group.wishlists[e.recipientName])):console.log("OOF"),console.log(e.recipientWishlist),e.waitingForPtcpts=e.getWaitingFor()});return function(r){return i.apply(this,arguments)}}())}ngAfterViewInit(){return(0,le.Z)(function*(){})()}getWishlist(){return console.log(this.recipientWishlist),this.recipientWishlist}fixBoxHeights(){this.wishlistItems.nativeElement.querySelectorAll("textarea").forEach(i=>this.autoGrowTextZone(i))}getLines(e){const i=e.match(/(\r\n|\r|\n)/g);return 1+(i?i.length:0)}selectWishlist(){console.log(this.selectedWishlist);let e={wishlists:{}};e.wishlists&&(e.wishlists[this.participantName]=this.selectedWishlist.name),this.firestore.updateGroupData(this.group.name,this.group.adminName,e).then(()=>{this.group.wishlists[this.participantName]=this.selectedWishlist.name,this.firestore.refreshGroups()})}readySliderToggled(){console.log(this.isReady);let e={participantsReady:{}};e.participantsReady&&(e.participantsReady[this.participantName]=this.isReady),this.firestore.updateGroupData(this.group.name,this.group.adminName,e).then(()=>{this.group.participantsReady[this.participantName]=this.isReady})}checkAttendance(e){return this.group.participants[e]&&this.group.participants[e].length>1}clickGenerate(){this.dialog.open(Fee,{width:"90vw",minHeight:"25vh",maxHeight:"90vh",data:{group:this.group}}).afterClosed().subscribe(i=>{null!=i&&i.wasGenerated&&(this.group=i.group,this.recipientName=this.group.santas[this.participantName],console.log(this.group))})}clickDeleteGroup(){this.dialog.open($X,{width:"80vw",minHeight:"25vh",maxHeight:"90vh",data:{group:this.group}}).afterClosed().subscribe(i=>{i&&this.router.navigate(["/"])})}findGroupByName(e,i){const r=this.session.getGroups();if(i>=0&&i<r.length&&r[i].name===e)return{group:r[i],status:1};{const s=r.find(d=>d.name===e);return{group:s||null,status:s?0:-1}}}checkIsAdmin(){this.isAdmin=this.session.getUser().id==this.group.participants[this.group.adminName]}getParticipantName(){const e=this.session.getUser().id;Object.keys(this.group.participants).forEach(i=>{this.group.participants[i]==e&&(console.log("I am",i,e),this.participantName=i)})}canGenerate(){let e=!0;return this.getObjectKeys(this.group.participantsReady).forEach(i=>{this.group.participantsReady[i]||(e=!1)}),!this.group.isGenerated&&e}getWaitingFor(){const e=[];return this.participants.forEach(i=>{this.group.participantsReady[i]||e.push(i)}),e}autoGrowTextZone(e){e.style.height="auto",e.style.height=`${e.scrollHeight+4}px`}getObjectKeys(e){return e?Object.keys(e):[]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(la),o.Y36(Yd),o.Y36(Id),o.Y36(Hg),o.Y36(Zi),o.Y36(hu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-view-group"]],viewQuery:function(e,i){if(1&e&&o.Gf(Zee,5),2&e){let r;o.iGM(r=o.CRH())&&(i.wishlistItems=r.first)}},decls:31,vars:22,consts:[[1,"view-group-container"],[1,"view-group-back-btn"],["mat-button","",3,"routerLink"],[1,"mat-title","view-group-title"],[1,"view-group-divider"],[1,"mat-subheading-2","view-group-budget"],[1,"ptcpt-config-div"],["appearance","outline",1,"form-field"],[3,"ngModel","ngModelChange","selectionChange"],["wishlistSelect",""],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","disabled","ngModelChange","change"],["class","view-group-divider",4,"ngIf"],["class","group-view-admin-join-code",4,"ngIf"],["class","group-view-match-wishlist-div",4,"ngIf"],["class","group-view-admin-group-details",4,"ngIf"],["class","group-view-waiting-list",4,"ngIf"],["class","view-group-admin-buttons",4,"ngIf"],[3,"value"],[1,"group-view-admin-join-code"],[1,"group-view-join-code","mat-subheading-2"],[1,"group-view-match-caption","mat-body"],[1,"group-view-match-wishlist-div"],["wishlistItems",""],[1,"group-view-match-name","mat-subheading-1"],[3,"wishlist",4,"ngIf"],[3,"wishlist"],[1,"group-view-admin-group-details"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","attendance"],["matColumnDef","ready"],["matColumnDef","wishlist"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"group-view-waiting-list"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"view-group-admin-buttons"],["mat-flat-button","","color","accent",3,"disabled","click"],["mat-flat-button","","color","warn",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),o._uU(4,"arrow_back"),o.qZA()()(),o.TgZ(5,"div",3),o._uU(6),o.qZA(),o._UZ(7,"mat-divider",4),o.TgZ(8,"div",5),o._uU(9),o.ALo(10,"number"),o.qZA(),o.TgZ(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),o._uU(14,"Select Wishlist"),o.qZA(),o.TgZ(15,"mat-select",8,9),o.NdJ("ngModelChange",function(s){return i.selectedWishlist=s})("selectionChange",function(){return i.selectWishlist()}),o.TgZ(17,"mat-option",10),o._uU(18,"Select Wishlist"),o.qZA(),o.YNc(19,Yee,2,2,"mat-option",11),o.qZA()(),o.TgZ(20,"mat-slide-toggle",12),o.NdJ("ngModelChange",function(s){return i.isReady=s})("change",function(){return i.readySliderToggled()}),o._uU(21),o.qZA()(),o.YNc(22,Kee,1,0,"mat-divider",13),o.YNc(23,Qee,5,1,"div",14),o.YNc(24,Jee,1,0,"mat-divider",13),o.YNc(25,ete,7,3,"div",15),o.YNc(26,tte,1,0,"mat-divider",13),o.YNc(27,pte,19,3,"div",16),o.YNc(28,mte,1,0,"mat-divider",13),o.YNc(29,yte,4,2,"div",17),o.YNc(30,vte,5,1,"div",18),o.qZA()),2&e&&(o.xp6(2),o.Q6J("routerLink",o.DdM(21,bte)),o.xp6(4),o.Oqu(i.group.name),o.xp6(3),o.hij("\xa3",o.xi3(10,18,i.group.budget,"1.2-2")," Budget"),o.xp6(6),o.Q6J("ngModel",i.selectedWishlist),o.xp6(2),o.Q6J("value",null),o.xp6(2),o.Q6J("ngForOf",i.session.getWishlists()),o.xp6(1),o.Q6J("ngModel",i.isReady)("disabled",i.group.isGenerated),o.xp6(1),o.Oqu(i.isReady?"Ready":"Tick When Ready"),o.xp6(1),o.Q6J("ngIf",i.isAdmin&&!i.group.isGenerated),o.xp6(1),o.Q6J("ngIf",i.isAdmin&&!i.group.isGenerated),o.xp6(1),o.Q6J("ngIf",i.group.isGenerated),o.xp6(1),o.Q6J("ngIf",i.group.isGenerated),o.xp6(1),o.Q6J("ngIf",i.isAdmin),o.xp6(1),o.Q6J("ngIf",i.isAdmin),o.xp6(1),o.Q6J("ngIf",!i.isAdmin&&!i.group.isGenerated),o.xp6(1),o.Q6J("ngIf",!i.isAdmin&&!i.group.isGenerated),o.xp6(1),o.Q6J("ngIf",i.isAdmin))},dependencies:[$r,Cn,Sf,co,dt,g,DC,Gg,_x,hg,Jz,eL,xx,tL,Mx,Sx,nL,Ax,kx,iL,rL,By,gg,zz,_s],styles:[".view-group-container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 16rem);text-align:center;padding:8rem 0;display:flex;flex-direction:column;align-items:center;opacity:0;transform:translateY(50px);animation:load-in .5s ease-in .5s 1 forwards}@keyframes load-in{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.view-group-title[_ngcontent-%COMP%]{opacity:.8;margin-bottom:0}.view-group-main-btn[_ngcontent-%COMP%]{min-width:60vw;font-size:1.2em;padding:.125em 0;margin:.75em 0}.view-group-divider[_ngcontent-%COMP%]{width:50%;margin:1em 0}.ptcpt-config-div[_ngcontent-%COMP%]{margin-top:2em;width:80%;margin-bottom:.5em}.ptcpt-config-div[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}.view-group-back-btn[_ngcontent-%COMP%]{position:absolute;top:1em;left:.5em;font-size:1em;color:#000000a0}.group-view-admin-group-details[_ngcontent-%COMP%]{font-family:Roboto;width:80%;margin-top:.5em}.group-view-admin-group-details[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.group-view-match-caption[_ngcontent-%COMP%]{margin-bottom:1em}.view-group-admin-buttons[_ngcontent-%COMP%]{margin-top:2em}.view-group-admin-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 .5em}.group-view-join-code[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5em}.group-view-match-wishlist-div[_ngcontent-%COMP%]{width:80%}.wishlist-item[_ngcontent-%COMP%]{width:100%}.custom-textarea[_ngcontent-%COMP%]{white-space:pre-line;font-family:inherit;height:auto;resize:none;overflow-y:hidden}"]}),n})()}];let Cte=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[dy.forRoot(wte),dy]}),n})(),Ete=(()=>{class n{constructor(){this.title="secret-santa-v1"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[mf]}),n})(),t$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[St,St]}),n})(),Tte=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[au]}),n})(),oL=(()=>{class n{constructor(){this.changes=new Et.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nte={provide:oL,deps:[[new o.FiY,new o.tp0,oL]],useFactory:function Pte(n){return n||new oL}};let s$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Nte,Gf],imports:[St,Wr,lu,$f,Tte,VF,du,St]}),n})(),a$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ug,St,ug,St]}),n})(),u$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),d$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[du,St,qm,u$,St,u$]}),n})(),h$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Wr,St,lu,du,qm,Cy,St]}),n})(),f$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Wr,St,St]}),n})();const sne={provide:new o.OlP("mat-tooltip-scroll-strategy"),deps:[$a],useFactory:function rne(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let p$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[sne],imports:[Cy,Wr,Hf,St,St,Bf]}),n})(),m$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Wr,St,Bf,Bf,St]}),n})(),g$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Cy,St,St]}),n})();const b$=new o.OlP("mat-chips-default-options");let w$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Gf,{provide:b$,useValue:{separatorKeyCodes:[13]}}],imports:[St]}),n})();const bne=[$f,t$,YU,UF,s$,VF,a$,d$,kF,fI,h$,Sz,f$,p$,m$,g$,Gz,Pz,e$,Kz,w$];let wne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[bne,$f,t$,YU,UF,s$,VF,a$,d$,kF,fI,h$,Sz,f$,p$,m$,g$,Gz,Pz,e$,Kz,w$]}),n})();function lL(){return(0,Hi.e)((n,t)=>{let e,i=!1;n.subscribe((0,bi.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}H(9568);var cL=H(3942);function uL(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function C$(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function E$(){if(!function X9(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}class AC{constructor(t){this._delegate=t}static fromBase64String(t){return E$(),new AC(Cu.fromBase64String(t))}static fromUint8Array(t){return C$(),new AC(Cu.fromUint8Array(t))}toBase64(){return E$(),this._delegate.toBase64()}toUint8Array(){return C$(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dL(n){return function Tne(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class Dne{enableIndexedDbPersistence(t,e){return function xK(n,t){F6(n=In(n,Ni));const e=mr(n);if(e._uninitializedComponentsProvider)throw new Be(ge.FAILED_PRECONDITION,"SDK cache is already specified.");Ya("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new vv;return N6(e,r,new oF(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function MK(n){F6(n=In(n,Ni));const t=mr(n);if(t._uninitializedComponentsProvider)throw new Be(ge.FAILED_PRECONDITION,"SDK cache is already specified.");Ya("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new vv;return N6(t,i,new _6(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function AK(n){if(n._initialized&&!n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(e=(0,le.Z)(function*(i){if(!ac.D())return Promise.resolve();const r=i+"main";yield ac.delete(r)}),function(i){return e.apply(this,arguments)})(JP(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class T${constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof np||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ya("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){R6(this._delegate,t,e,i)}enableNetwork(){return function RK(n){return function mK(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const t=yield b6(n),e=yield w6(n);return t.setNetworkEnabled(!0),function(i){const r=st(i);return r.vu.delete(0),hC(r)}(e)}))}(mr(n=In(n,Ni)))}(this._delegate)}disableNetwork(){return function OK(n){return function gK(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const t=yield b6(n),e=yield w6(n);return t.setNetworkEnabled(!1),(i=(0,le.Z)(function*(r){const s=st(r);s.vu.add(0),yield hv(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(mr(n=In(n,Ni)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,S6("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kK(n){return function(t){const e=new Ur;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function J7(n,t){return zN.apply(this,arguments)}(yield fF(t),e)})),e.promise}(mr(n=In(n,Ni)))}(this._delegate)}onSnapshotsInSync(t){return function oQ(n,t){return function vK(n,t){const e=new WS(t);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return i=yield bv(n),r=e,st(i).ku.add(r),void r.next();var i,r})),()=>{e.Dc(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return i=yield bv(n),r=e,void st(i).ku.delete(r);var i,r}))}}(mr(n=In(n,Ni)),_F(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Sv(this,Zs(this._delegate,t))}catch(e){throw po(e,"collection()","Firestore.collection()")}}doc(t){try{return new Ka(this,qd(this._delegate,t))}catch(e){throw po(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new mo(this,function EK(n,t){if(n=In(n,mC),mF("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ks(n,null,(e=t,new Hd(An.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw po(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return xF(this._delegate,e=>t(new D$(this,e)))}batch(){return mr(this._delegate),new I$(new ez(this._delegate,t=>Cv(this._delegate,t)))}loadBundle(t){return function PK(n,t){const e=mr(n=In(n,Ni)),i=new DK;return function bK(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?$3().encode(s):s,f=function(f,_){if(f instanceof Uint8Array)return y6(f,_);if(f instanceof ArrayBuffer)return y6(new Uint8Array(f),_);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new dK(f,c);var f}(e,dC(t));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function cK(n,t,e){const i=st(n);var r;(r=(0,le.Z)(function*(s,c,d){try{const f=yield c.getMetadata();if(yield function(M,R){const U=st(M),q=pr(R.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",J=>U.qs.getBundleMetadata(J,R.id)).then(J=>!!J&&J.createTime.compareTo(q)>=0)}(s.localStore,f))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=f).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(l6(f));const _=new j7(f,s.localStore,c.serializer);let b=yield c.bc();for(;b;){const M=yield _.zu(b);M&&d._updateProgress(M),b=yield c.bc()}const D=yield _.complete();return yield $d(s,D.Ju,void 0),yield function(M,R){const U=st(M);return U.persistence.runTransaction("Save bundle","readwrite",q=>U.qs.saveBundleMetadata(q,R))}(s.localStore,f),d._completeWith(D.progress),Promise.resolve(D.Hu)}catch(f){return Ya("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var M}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield fF(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function NK(n,t){return function wK(n,t){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(e,i){const r=st(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield KS(n),t)}))}(mr(n=In(n,Ni)),t).then(e=>e?new ks(n,null,e.query):null)}(this._delegate,t).then(e=>e?new mo(this,e):null)}}class Rx extends TF{constructor(t){super(),this.firestore=t}convertBytes(t){return new AC(new Cu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Ka.forKey(e,this.firestore,null)}}class D${constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Rx(t)}get(t){const e=qg(t);return this._delegate.get(e).then(i=>new kC(this._firestore,new Zd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=qg(t);return i?(uL("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=qg(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=qg(t);return this._delegate.delete(e),this}}class I${constructor(t){this._delegate=t}set(t,e,i){const r=qg(t);return i?(uL("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=qg(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=qg(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class $g{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new CC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new RC(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=$g.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new $g(t,new Rx(t),e),r.set(e,s)),s}}$g.INSTANCES=new WeakMap;class Ka{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Rx(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ka(e,new Pi(e._delegate,i,new it(t)))}static forKey(t,e,i){return new Ka(e,new Pi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Sv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Sv(this.firestore,Zs(this._delegate,t))}catch(e){throw po(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,V.m9)(t))instanceof Pi&&O6(this._delegate,t)}set(t,e){e=uL("DocumentReference.set",e);try{return e?DF(this._delegate,t,e):DF(this._delegate,t)}catch(i){throw po(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?lx(this._delegate,t):lx(this._delegate,t,e,...i)}catch(r){throw po(r,"updateDoc()","DocumentReference.update()")}}delete(){return J6(this._delegate)}onSnapshot(...t){const e=S$(t),i=x$(t,r=>new kC(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return X6(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function nQ(n){n=In(n,Pi);const t=In(n.firestore,Ni),e=mr(t),i=new pp(t);return function _K(n,t){const e=new Ur;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(i=(0,le.Z)(function*(r,s,c){try{const d=yield function(f,_){const b=st(f);return b.persistence.runTransaction("read document","readonly",D=>b.localDocuments.getDocument(D,_))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Be(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=mv(d,`Failed to get document '${s} from cache`);c.reject(f)}}),function(r,s,c){return i.apply(this,arguments)})(yield KS(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Zd(t,i,n._key,r,new Ug(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function iQ(n){n=In(n,Pi);const t=In(n.firestore,Ni);return E6(mr(t),n._key,{source:"server"}).then(e=>SF(t,n,e))}(this._delegate):function tQ(n){n=In(n,Pi);const t=In(n.firestore,Ni);return E6(mr(t),n._key).then(e=>SF(t,n,e))}(this._delegate),e.then(i=>new kC(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Ka(this.firestore,this._delegate.withConverter(t?$g.getInstance(this.firestore,t):null))}}function po(n,t,e){return n.message=n.message.replace(t,e),n}function S$(n){for(const t of n)if("object"==typeof t&&!dL(t))return t;return{}}function x$(n,t){var e,i;let r;return r=dL(n[0])?n[0]:dL(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class kC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Ka(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return Q6(this._delegate,t._delegate)}}class RC extends kC{data(t){const e=this._delegate.data(t);return function b9(n,t){n||mt()}(void 0!==e),e}}class mo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Rx(t)}where(t,e,i){try{return new mo(this.firestore,jr(this._delegate,Ys(t,e,i)))}catch(r){throw po(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new mo(this.firestore,jr(this._delegate,function $K(n,t="asc"){const e=t,i=ix("orderBy",n);return EF._create(i,e)}(t,e)))}catch(i){throw po(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new mo(this.firestore,jr(this._delegate,function qK(n){return A6("limit",n),rx._create("limit",n,"F")}(t)))}catch(e){throw po(e,"limit()","Query.limit()")}}limitToLast(t){try{return new mo(this.firestore,jr(this._delegate,function WK(n){return A6("limitToLast",n),rx._create("limitToLast",n,"L")}(t)))}catch(e){throw po(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new mo(this.firestore,jr(this._delegate,function ZK(...n){return sx._create("startAt",n,!0)}(...t)))}catch(e){throw po(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new mo(this.firestore,jr(this._delegate,function YK(...n){return sx._create("startAfter",n,!1)}(...t)))}catch(e){throw po(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new mo(this.firestore,jr(this._delegate,function KK(...n){return ox._create("endBefore",n,!1)}(...t)))}catch(e){throw po(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new mo(this.firestore,jr(this._delegate,function QK(...n){return ox._create("endAt",n,!0)}(...t)))}catch(e){throw po(e,"endAt()","Query.endAt()")}}isEqual(t){return gF(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function rQ(n){n=In(n,ks);const t=In(n.firestore,Ni),e=mr(t),i=new pp(t);return function yK(n,t){const e=new Ur;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(i=(0,le.Z)(function*(r,s,c){try{const d=yield US(r,s,!0),f=new d6(s,d.ir),_=f.sc(d.documents),b=f.applyChanges(_,!1);c.resolve(b.snapshot)}catch(d){const f=mv(d,`Failed to execute query '${s} against cache`);c.reject(f)}}),function(r,s,c){return i.apply(this,arguments)})(yield KS(n),t,e);var i})),e.promise}(e,n._query).then(r=>new fp(t,i,n,r))}(this._delegate):"server"===t?.source?function sQ(n){n=In(n,ks);const t=In(n.firestore,Ni),e=mr(t),i=new pp(t);return T6(e,n._query,{source:"server"}).then(r=>new fp(t,i,n,r))}(this._delegate):fa(this._delegate),e.then(i=>new hL(this.firestore,new fp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=S$(t),i=x$(t,r=>new hL(this.firestore,new fp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return X6(this._delegate,e,i)}withConverter(t){return new mo(this.firestore,this._delegate.withConverter(t?$g.getInstance(this.firestore,t):null))}}class Sne{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new RC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hL{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new mo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new RC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new Sne(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new RC(this._firestore,i))})}isEqual(t){return Q6(this._delegate,t._delegate)}}class Sv extends mo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ka(this.firestore,t):null}doc(t){try{return new Ka(this.firestore,void 0===t?qd(this._delegate):qd(this._delegate,t))}catch(e){throw po(e,"doc()","CollectionReference.doc()")}}add(t){return IF(this._delegate,t).then(e=>new Ka(this.firestore,e))}isEqual(t){return O6(this._delegate,t._delegate)}withConverter(t){return new Sv(this.firestore,this._delegate.withConverter(t?$g.getInstance(this.firestore,t):null))}}function qg(n){return In(n,Pi)}class fL{constructor(...t){this._delegate=new Wd(...t)}static documentId(){return new fL(sr.keyField().canonicalString())}isEqual(t){return(t=(0,V.m9)(t))instanceof Wd&&this._delegate._internalPath.isEqual(t._internalPath)}}class Wg{constructor(t){this._delegate=t}static serverTimestamp(){const t=function yQ(){return new yF("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Wg(t)}static delete(){const t=function _Q(){return new _C("deleteField")}();return t._methodName="FieldValue.delete",new Wg(t)}static arrayUnion(...t){const e=function vQ(...n){return new UK("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Wg(e)}static arrayRemove(...t){const e=function bQ(...n){return new HK("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Wg(e)}static increment(t){const e=function wQ(n){return new jK("increment",n)}(t);return e._methodName="FieldValue.increment",new Wg(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const xne={Firestore:T$,GeoPoint:JS,Timestamp:ji,Blob:AC,Transaction:D$,WriteBatch:I$,DocumentReference:Ka,DocumentSnapshot:kC,Query:mo,QueryDocumentSnapshot:RC,QuerySnapshot:hL,CollectionReference:Sv,FieldPath:fL,FieldValue:Wg,setLogLevel:function Ine(n){!function v9(n){Qf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function M$(n,t){return function kne(n,t=zm.z){return new nr.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function pL(n,t){return M$(n,t).pipe((0,pt.U)(e=>({payload:e,type:"query"})))}function Ox(n,t){return pL(n,t).pipe(Pr(void 0),lL(),(0,pt.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const f=r.find(b=>b.doc.ref.isEqual(c.ref)),_=e?.payload.docs.find(b=>b.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function A$(n,t,e){return Ox(n,e).pipe(af((i,r)=>function One(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function Pne(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return mL(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return mL(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return mL(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),$m(),(0,pt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function mL(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function k$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Ane(n){(function Mne(n,t){n.INTERNAL.registerComponent(new aa.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},xne)))})(n,(t,e)=>new T$(t,e,new Dne)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(cL.Z);class R${constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=Ox(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,pt.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Pr(void 0),lL(),fi(([i,r])=>r.length>0||!i),(0,pt.U)(([i,r])=>r),Bn.iC)}auditTrail(t){return this.stateChanges(t).pipe(af((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=k$(t);return A$(this.query,e,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(t={}){return pL(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Bn.iC)}get(t){return(0,Mn.D)(this.query.get(t)).pipe(Bn.iC)}add(t){return this.ref.add(t)}doc(t){return new O$(this.ref.doc(t),this.afs)}}class O${constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=F$(i,e);return new R$(r,s,this.afs)}snapshotChanges(){return function Rne(n,t){return M$(n,t).pipe(Pr(void 0),lL(),(0,pt.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Mn.D)(this.ref.get(t)).pipe(Bn.iC)}}class Nne{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Ox(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),fi(e=>e.length>0),Bn.iC):Ox(this.query,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}auditTrail(t){return this.stateChanges(t).pipe(af((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=k$(t);return A$(this.query,e,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(t={}){return pL(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Bn.iC)}get(t){return(0,Mn.D)(this.query.get(t)).pipe(Bn.iC)}}const P$=new o.OlP("angularfire2.enableFirestorePersistence"),N$=new o.OlP("angularfire2.firestore.persistenceSettings"),Fne=new o.OlP("angularfire2.firestore.settings"),Lne=new o.OlP("angularfire2.firestore.use-emulator");function F$(n,t=(e=>e)){return{query:t(n),ref:n}}let Bne=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,D,M,R,U,q,J,we,He){this.schedulers=f;const Ge=(0,Vr.on)(e,d,i),Ye=b;D&&EO(Ge,d,M,U,q,J,R,we),[this.firestore,this.persistenceEnabled$]=(0,Vr.cc)(`${Ge.name}.firestore`,"AngularFirestore",Ge.name,()=>{const Ut=d.runOutsideAngular(()=>Ge.firestore());if(s&&Ut.settings(s),Ye&&Ut.useEmulator(...Ye),r&&!vo(c)){const Ht=()=>{try{return(0,Mn.D)(Ut.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(Sn){return typeof console<"u"&&console.warn(Sn),ct(!1)}};return[Ut,d.runOutsideAngular(Ht)]}return[Ut,ct(!1)]},[s,Ye,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=F$(r,i),d=this.schedulers.ngZone.run(()=>s);return new R$(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new Nne(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new O$(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Vr.Dh),o.LFG(Vr.xv,8),o.LFG(P$,8),o.LFG(Fne,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Bn.HU),o.LFG(N$,8),o.LFG(Lne,8),o.LFG(hw,8),o.LFG(_O,8),o.LFG(yO,8),o.LFG(vO,8),o.LFG(bO,8),o.LFG(wO,8),o.LFG(CO,8),o.LFG(dw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Vne=(()=>{class n{constructor(){FI.Z.registerVersion("angularfire",Bn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:P$,useValue:!0},{provide:N$,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Bne]}),n})();const L$="firebasestorage.googleapis.com",B$="storageBucket";class Qi extends V.ZR{constructor(t,e,i=0){super(gL(t),`Firebase Storage: ${e} (${gL(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return gL(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ci=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ci||(Ci={})),Ci))();function gL(n){return"storage/"+n}function _L(){return new Qi(Ci.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function V$(){return new Qi(Ci.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U$(){return new Qi(Ci.CANCELED,"User canceled the upload/download.")}function H$(){return new Qi(Ci.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xv(n){return new Qi(Ci.INVALID_ARGUMENT,n)}function j$(){return new Qi(Ci.APP_DELETED,"The Firebase app was deleted.")}function G$(n){return new Qi(Ci.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function OC(n,t){return new Qi(Ci.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function PC(n){throw new Qi(Ci.INTERNAL_ERROR,"Internal error: "+n)}class Ks{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Ks.makeFromUrl(t,e)}catch{return new Ks(t,"")}if(""===i.path)return i;throw function Yne(n){return new Qi(Ci.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function _(Ye){Ye.path_=decodeURIComponent(Ye.path)}const D=e.replace(/[.]/g,"\\."),Ge=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${e===L$?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Ye=0;Ye<Ge.length;Ye++){const Ut=Ge[Ye],Ht=Ut.regex.exec(t);if(Ht){let Xi=Ht[Ut.indices.path];Xi||(Xi=""),i=new Ks(Ht[Ut.indices.bucket],Xi),Ut.postModify(i);break}}if(null==i)throw function Zne(n){return new Qi(Ci.INVALID_URL,"Invalid URL '"+n+"'.")}(t);return i}}class eie{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function Px(n){return"string"==typeof n||n instanceof String}function z$(n){return yL()&&n instanceof Blob}function yL(){return typeof Blob<"u"&&!(0,V.UG)()}function vL(n,t,e,i){if(i<t)throw xv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw xv(`Invalid value for '${n}'. Expected ${e} or less.`)}function Xd(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function $$(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var _p=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(_p||(_p={})),_p))();function q$(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class oie{constructor(t,e,i,r,s,c,d,f,_,b,D,M=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=D,this.retry=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,U)=>{this.resolve_=R,this.reject_=U,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function iie(n){return void 0!==n}(f)?s():s(f)}catch(f){c(f)}else if(null!==d){const f=_L();f.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,f):f)}else c(r.canceled?this.appDelete_?j$():U$():V$())};this.canceled_?e(0,new Nx(!1,null,!0)):this.backoffId_=function tie(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function f(){return 2===d}let _=!1;function b(...J){_||(_=!0,t.apply(null,J))}function D(J){r=setTimeout(()=>{r=null,n(R,f())},J)}function M(){s&&clearTimeout(s)}function R(J,...we){if(_)return void M();if(J)return M(),void b.call(null,J,...we);if(f()||c)return M(),void b.call(null,J,...we);let Ge;i<64&&(i*=2),1===d?(d=2,Ge=0):Ge=1e3*(i+Math.random()),D(Ge)}let U=!1;function q(J){U||(U=!0,M(),!_&&(null!==r?(J||(d=2),clearTimeout(r),D(0)):J||(d=1)))}return D(0),s=setTimeout(()=>{c=!0,q(!0)},e),q}((i,r)=>{if(r)return void i(!1,new Nx(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===_p.NO_ERROR,f=s.getStatus();if(!d||q$(f,this.additionalRetryCodes_)&&this.retry){const b=s.getErrorCode()===_p.ABORT;return void i(!1,new Nx(!1,null,b))}const _=-1!==this.successCodes_.indexOf(f);i(!0,new Nx(_,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function nie(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Nx{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function fie(...n){const t=function hie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(yL())return new Blob(n);throw new Qi(Ci.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const pa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bL{constructor(t,e){this.data=t,this.contentType=e||null}}function wL(n,t){switch(n){case pa.RAW:return new bL(W$(t));case pa.BASE64:case pa.BASE64URL:return new bL(Z$(n,t));case pa.DATA_URL:return new bL(function _ie(n){const t=new Y$(n);return t.base64?Z$(pa.BASE64,t.rest):function gie(n){let t;try{t=decodeURIComponent(n)}catch{throw OC(pa.DATA_URL,"Malformed data URL.")}return W$(t)}(t.rest)}(t),function yie(n){return new Y$(n).contentType}(t))}throw _L()}function W$(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function Z$(n,t){switch(n){case pa.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw OC(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case pa.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw OC(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function mie(n){if(typeof atob>"u")throw function Xne(n){return new Qi(Ci.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:OC(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class Y${constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw OC(pa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function vie(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Eu{constructor(t,e){let i=0,r="";z$(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(z$(this.data_)){const r=function pie(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Eu(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Eu(i,!0)}}static getBlob(...t){if(yL()){const e=t.map(i=>i instanceof Eu?i.data_:i);return new Eu(fie.apply(null,e))}{const e=t.map(c=>Px(c)?wL(pa.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new Eu(r,!0)}}uploadData(){return this.data_}}function CL(n){let t;try{t=JSON.parse(n)}catch{return null}return function sie(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function K$(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function Cie(n,t){return t}class go{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||Cie}}let Fx=null;function NC(){if(Fx)return Fx;const n=[];n.push(new go("bucket")),n.push(new go("generation")),n.push(new go("metageneration")),n.push(new go("name","fullPath",!0));const e=new go("name");e.xform=function t(s,c){return function Eie(n){return!Px(n)||n.length<2?n:K$(n)}(c)},n.push(e);const r=new go("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new go("timeCreated")),n.push(new go("updated")),n.push(new go("md5Hash",null,!0)),n.push(new go("cacheControl",null,!0)),n.push(new go("contentDisposition",null,!0)),n.push(new go("contentEncoding",null,!0)),n.push(new go("contentLanguage",null,!0)),n.push(new go("contentType",null,!0)),n.push(new go("metadata","customMetadata",!0)),Fx=n,Fx}function Q$(n,t,e){const i=CL(t);return null===i?null:function Die(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function Tie(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Ks(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function EL(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const J$="prefixes";class Tu{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Du(n){if(!n)throw _L()}function Lx(n,t){return function e(i,r){const s=Q$(n,r,t);return Du(null!==s),s}}function Mv(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function qne(){return new Qi(Ci.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function $ne(){return new Qi(Ci.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function zne(n){return new Qi(Ci.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Wne(n){return new Qi(Ci.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function FC(n){const t=Mv(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function Gne(n){return new Qi(Ci.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function e4(n,t,e){const r=Xd(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Tu(r,"GET",Lx(n,e),c);return d.errorHandler=FC(t),d}function kie(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=Xd(t.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,b=new Tu(d,"GET",function Mie(n,t){return function e(i,r){const s=function xie(n,t,e){const i=CL(e);return null===i?null:function Sie(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[J$])for(const r of e[J$]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Ks(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new Ks(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Du(null!==s),s}}(n,t.bucket),_);return b.urlParams=s,b.errorHandler=Mv(t),b}function n4(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function Nie(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class Bx{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function TL(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Du(!1)}return Du(!!e&&-1!==(t||["active"]).indexOf(e)),e}const Vie={STATE_CHANGED:"state_changed"},_o={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function DL(n){switch(n){case"running":case"pausing":case"canceling":return _o.RUNNING;case"paused":return _o.PAUSED;case"success":return _o.SUCCESS;case"canceled":return _o.CANCELED;default:return _o.ERROR}}class Uie{constructor(t,e,i){if(function rie(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Av(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class jie extends class Hie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_p.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_p.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_p.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw PC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw PC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw PC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw PC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw PC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function lc(){return new jie}class a4{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=NC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Ci.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(q$(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=V$()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Ci.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function Fie(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=n4(t,i,r),d={name:c.fullPath},f=Xd(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=EL(c,e),U=new Tu(f,"POST",function R(q){let J;TL(q);try{J=q.getResponseHeader("X-Goog-Upload-URL")}catch{Du(!1)}return Du(Px(J)),J},n.maxUploadRetryTime);return U.urlParams=d,U.headers=b,U.body=D,U.errorHandler=Mv(t),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,lc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function Lie(n,t,e,i){const f=new Tu(e,"POST",function s(_){const b=TL(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Du(!1)}D||Du(!1);const M=Number(D);return Du(!isNaN(M)),new Bx(M,i.size(),"final"===b)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=Mv(t),f}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,lc,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new Bx(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function Bie(n,t,e,i,r,s,c,d){const f=new Bx(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw function Qne(){return new Qi(Ci.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _=f.total-f.current;let b=_;r>0&&(b=Math.min(b,r));const D=f.current;let R="";R=0===b?"finalize":_===b?"upload, finalize":"upload";const U={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${f.current}`},q=i.slice(D,D+b);if(null===q)throw H$();const Ge=new Tu(e,"POST",function J(Ye,Ut){const Ht=TL(Ye,["active","final"]),Sn=f.current+b,Xi=i.size();let Js;return Js="final"===Ht?Lx(t,s)(Ye,Ut):null,new Bx(Sn,Xi,"final"===Ht,Js)},t.maxUploadRetryTime);return Ge.headers=U,Ge.body=q.uploadData(),Ge.progressCallback=d||null,Ge.errorHandler=Mv(n),Ge}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(c,lc,r,s,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=e4(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,lc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function r4(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let Ge="";for(let Ye=0;Ye<2;Ye++)Ge+=Math.random().toString().slice(2);return Ge}();c["Content-Type"]="multipart/related; boundary="+f;const _=n4(t,i,r),b=EL(_,e),R=Eu.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+f+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",i,"\r\n--"+f+"--");if(null===R)throw H$();const U={name:_.fullPath},q=Xd(s,n.host,n._protocol),we=n.maxUploadRetryTime,He=new Tu(q,"POST",Lx(n,e),we);return He.urlParams=U,He.headers=c,He.body=R.uploadData(),He.errorHandler=Mv(t),He}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,lc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=U$(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=DL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new Uie(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(DL(this._state)){case _o.SUCCESS:Av(this._resolve.bind(null,this.snapshot))();break;case _o.CANCELED:case _o.ERROR:Av(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(DL(this._state)){case _o.RUNNING:case _o.PAUSED:t.next&&Av(t.next.bind(t,this.snapshot))();break;case _o.SUCCESS:t.complete&&Av(t.complete.bind(t))();break;default:t.error&&Av(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Zg{constructor(t,e){this._service=t,this._location=e instanceof Ks?e:Ks.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Zg(t,e)}get root(){const t=new Ks(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K$(this._location.path)}get storage(){return this._service}get parent(){const t=function bie(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ks(this._location.bucket,t);return new Zg(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw G$(t)}}function c4(n,t,e){return IL.apply(this,arguments)}function IL(){return IL=(0,le.Z)(function*(n,t,e){const r=yield u4(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield c4(n,t,r.nextPageToken))}),IL.apply(this,arguments)}function u4(n,t){null!=t&&"number"==typeof t.maxResults&&vL("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=kie(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,lc)}function ere(n){n._throwIfRoot("getDownloadURL");const t=function Rie(n,t,e){const r=Xd(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Tu(r,"GET",function Aie(n,t){return function e(i,r){const s=Q$(n,r,t);return Du(null!==s),function Iie(n,t,e,i){const r=CL(t);if(null===r||!Px(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(_=>{const D=n.fullPath;return Xd("/b/"+c(n.bucket)+"/o/"+c(D),e,i)+$$({alt:"media",token:_})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=FC(t),d}(n.storage,n._location,NC());return n.storage.makeRequestWithTokens(t,lc).then(e=>{if(null===e)throw function Jne(){return new Qi(Ci.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function d4(n,t){const e=function wie(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Ks(n._location.bucket,e);return new Zg(n.storage,i)}function h4(n,t){if(n instanceof SL){const e=n;if(null==e._bucket)throw function Kne(){return new Qi(Ci.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+B$+"' property when initializing the app?")}();const i=new Zg(e,e._bucket);return null!=t?h4(i,t):i}return void 0!==t?d4(n,t):n}function rre(n,t){if(t&&function nre(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof SL)return function ire(n,t){return new Zg(n,t)}(n,t);throw xv("To use ref(service, url), the first argument must be a Storage instance.")}return h4(n,t)}function f4(n,t){const e=t?.[B$];return null==e?null:Ks.makeFromBucketSpec(e,n)}class SL{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=L$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ks.makeFromBucketSpec(r,this._host):f4(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ks.makeFromBucketSpec(this._url,t):f4(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){vL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){vL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,le.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,le.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Zg(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new eie(j$());{const c=function die(n,t,e,i,r,s,c=!0){const d=$$(n.urlParams),f=n.url+d,_=Object.assign({},n.headers);return function cie(n,t){t&&(n["X-Firebase-GMPID"]=t)}(_,t),function aie(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(_,e),function lie(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(_,s),function uie(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(_,i),new oie(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(t,e){var i=this;return(0,le.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const p4="@firebase/storage";function _4(n,t){return rre(n=(0,V.m9)(n),t)}function pre(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new SL(e,i,r,t,wn.SDK_VERSION)}!function mre(){(0,wn._registerComponent)(new aa.wA("storage",pre,"PUBLIC").setMultipleInstances(!0)),(0,wn.registerVersion)(p4,"0.11.2",""),(0,wn.registerVersion)(p4,"0.11.2","esm2017")}();class Vx{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class v4{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Vx(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new Vx(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new Vx(c,this,this._ref)):{next:e.next?c=>e.next(new Vx(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class b4{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new eh(t,this._service))}get items(){return this._delegate.items.map(t=>new eh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class eh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function fre(n,t){return d4(n,t)}(this._delegate,t);return new eh(e,this.storage)}get root(){return new eh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new eh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new v4(function ore(n,t,e){return function Yie(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new a4(n,new Eu(t),e)}(n=(0,V.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=pa.RAW,i){this._throwIfRoot("putString");const r=wL(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new v4(new a4(this._delegate,new Eu(r.data,!0),s),this)}listAll(){return function ure(n){return function Qie(n){const t={prefixes:[],items:[]};return c4(n,t).then(()=>t)}(n=(0,V.m9)(n))}(this._delegate).then(t=>new b4(t,this.storage))}list(t){return function cre(n,t){return u4(n=(0,V.m9)(n),t)}(this._delegate,t||void 0).then(e=>new b4(e,this.storage))}getMetadata(){return function are(n){return function Jie(n){n._throwIfRoot("getMetadata");const t=e4(n.storage,n._location,NC());return n.storage.makeRequestWithTokens(t,lc)}(n=(0,V.m9)(n))}(this._delegate)}updateMetadata(t){return function lre(n,t){return function Xie(n,t){n._throwIfRoot("updateMetadata");const e=function Oie(n,t,e,i){const s=Xd(t.fullServerUrl(),n.host,n._protocol),d=EL(e,i),_=n.maxOperationRetryTime,b=new Tu(s,"PATCH",Lx(n,i),_);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=FC(t),b}(n.storage,n._location,t,NC());return n.storage.makeRequestWithTokens(e,lc)}(n=(0,V.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function dre(n){return ere(n=(0,V.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function hre(n){return function tre(n){n._throwIfRoot("deleteObject");const t=function Pie(n,t){const i=Xd(t.fullServerUrl(),n.host,n._protocol),d=new Tu(i,"DELETE",function c(f,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=FC(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,lc)}(n=(0,V.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw G$(t)}}class w4{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(C4(t))throw xv("ref() expected a child path but got a URL, use refFromURL instead.");return new eh(_4(this._delegate,t),this)}refFromURL(t){if(!C4(t))throw xv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ks.makeFromUrl(t,this._delegate.host)}catch{throw xv("refFromUrl() expected a valid full URL but got an invalid one.")}return new eh(_4(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function y4(n,t,e,i={}){!function sre(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,V.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function C4(n){return/^[A-Za-z]+:\/\//.test(n)}function vre(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new w4(e,i)}function E4(n){const t=function wre(n){return new nr.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(vy(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,pt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function Ux(n){return{getDownloadURL:()=>ct(void 0).pipe(Bn.fc,di(()=>n.getDownloadURL()),Bn.iC),getMetadata:()=>ct(void 0).pipe(Bn.fc,di(()=>n.getMetadata()),Bn.iC),delete:()=>(0,Mn.D)(n.delete()),child:t=>Ux(n.child(t)),updateMetadata:t=>(0,Mn.D)(n.updateMetadata(t)),put:(t,e)=>E4(n.put(t,e)),putString:(t,e,i)=>E4(n.putString(t,e,i)),list:t=>(0,Mn.D)(n.list(t)),listAll:()=>(0,Mn.D)(n.listAll())}}!function bre(n){const t={TaskState:_o,TaskEvent:Vie,StringFormat:pa,Storage:w4,Reference:eh};n.INTERNAL.registerComponent(new aa.wA("storage-compat",vre,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(cL.Z);const Cre=new o.OlP("angularfire2.storageBucket"),Ere=new o.OlP("angularfire2.storage.maxUploadRetryTime"),Tre=new o.OlP("angularfire2.storage.maxOperationRetryTime"),Dre=new o.OlP("angularfire2.storage.use-emulator");let Ire=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,D){const M=(0,Vr.on)(e,c,i);this.storage=(0,Vr.cc)(`${M.name}.storage.${r}`,"AngularFireStorage",M.name,()=>{const R=c.runOutsideAngular(()=>M.storage(r||void 0)),U=b;return U&&R.useEmulator(...U),f&&R.setMaxUploadRetryTime(f),_&&R.setMaxOperationRetryTime(_),R},[f,_])}ref(e){return Ux(this.storage.ref(e))}refFromURL(e){return Ux(this.storage.refFromURL(e))}upload(e,i,r){return Ux(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Vr.Dh),o.LFG(Vr.xv,8),o.LFG(Cre,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Bn.HU),o.LFG(Ere,8),o.LFG(Tre,8),o.LFG(Dre,8),o.LFG(dw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Sre=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),xre=(()=>{class n{constructor(){FI.Z.registerVersion("angularfire",Bn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Ire],imports:[Sre]}),n})();const T4="@firebase/database";let xL="";function I4(n){xL=n}class kre{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,V.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,V.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Rre{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,V.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const S4=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new kre(t)}}catch{}return new Rre},Yg=S4("localStorage"),ML=S4("sessionStorage"),kv=new No.Yd("@firebase/database"),x4=function(){let n=1;return function(){return n++}}(),M4=function(n){const t=(0,V.dS)(n),e=new V.gQ;e.update(t);const i=e.digest();return V.US.encodeByteArray(i)},LC=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=LC.apply(null,i):t+="object"==typeof i?(0,V.Wl)(i):i,t+=" "}return t};let Kg=null,A4=!0;const k4=function(n,t){(0,V.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(kv.logLevel=No.in.VERBOSE,Kg=kv.log.bind(kv),t&&ML.set("logging_enabled",!0)):"function"==typeof n?Kg=n:(Kg=null,ML.remove("logging_enabled"))},us=function(...n){if(!0===A4&&(A4=!1,null===Kg&&!0===ML.get("logging_enabled")&&k4(!0)),Kg){const t=LC.apply(null,n);Kg(t)}},BC=function(n){return function(...t){us(n,...t)}},AL=function(...n){const t="FIREBASE INTERNAL ERROR: "+LC(...n);kv.error(t)},Iu=function(...n){const t=`FIREBASE FATAL ERROR: ${LC(...n)}`;throw kv.error(t),new Error(t)},Qs=function(...n){const t="FIREBASE WARNING: "+LC(...n);kv.warn(t)},Hx=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},yp="[MIN_NAME]",th="[MAX_NAME]",Qg=function(n,t){if(n===t)return 0;if(n===yp||t===th)return-1;if(t===yp||n===th)return 1;{const e=P4(n),i=P4(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Nre=function(n,t){return n===t?0:n<t?-1:1},VC=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Wl)(t))},kL=function(n){if("object"!=typeof n||null===n)return(0,V.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,V.Wl)(t[i]),e+=":",e+=kL(n[t[i]]);return e+="}",e},R4=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function ds(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const O4=function(n){(0,V.hu)(!Hx(n),"Invalid JSON number");const i=1023;let r,s,c,d,f;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const _=[];for(f=52;f;f-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(f=11;f;f-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const b=_.join("");let D="";for(f=0;f<64;f+=8){let M=parseInt(b.substr(f,8),2).toString(16);1===M.length&&(M="0"+M),D+=M}return D.toLowerCase()},Vre=new RegExp("^-?(0*)\\d{1,10}$"),P4=function(n){if(Vre.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},Rv=function(n){try{n()}catch(t){setTimeout(()=>{throw Qs("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},UC=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Gre{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Qs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zre{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(us("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qs(t)}}let HC=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const V4=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,j4="websocket",G4="long_polling";class OL{constructor(t,e,i,r,s=!1,c="",d=!1,f=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yg.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Yg.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function z4(n,t,e){let i;if((0,V.hu)("string"==typeof t,"typeof type must == string"),(0,V.hu)("object"==typeof e,"typeof params must == object"),t===j4)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==G4)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function $re(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return ds(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class qre{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,V.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,V.p$)(this.counters_)}}const PL={},NL={};function FL(n){const t=n.toString();return PL[t]||(PL[t]=new qre),PL[t]}class Zre{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Rv(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class vp{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=BC(t),this.stats_=FL(e),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),z4(e,G4,f))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Zre(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new LL((...s)=>{const[c,d,f,_,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=f;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&V4.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vp.forceAllow_=!0}static forceDisallow(){vp.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!vp.forceAllow_&&(vp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,V.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,V.h$)(e),r=R4(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,V.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class LL{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=x4(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=LL.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){us("frame writing exception"),d.stack&&us(d.stack),us(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||us("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,V.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{us("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Gx=null;typeof MozWebSocket<"u"?Gx=MozWebSocket:typeof WebSocket<"u"&&(Gx=WebSocket);let Ov=(()=>{class n{constructor(e,i,r,s,c,d,f){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=BC(this.connId),this.stats_=FL(i),this.connURL=n.connectionURL_(i,d,f,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,V.Yr)()&&typeof location<"u"&&location.hostname&&V4.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),z4(e,j4,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yg.set("previous_websocket_failure",!0);try{let r;if((0,V.Yr)()){r={headers:{"User-Agent":`Firebase/5/${xL}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new Gx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Gx&&!n.forceDisallow_}static previouslyFailed(){return Yg.isInMemoryStorage||!0===Yg.get("previous_websocket_failure")}markConnectionHealthy(){Yg.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,V.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,V.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=R4(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Q4=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[vp,Ov]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Ov&&Ov.isAvailable();let r=i&&!Ov.previouslyFailed();if(e.webSocketOnly&&(i||Qs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ov];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class rq{constructor(t,e,i,r,s,c,d,f,_,b){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=BC("c:"+this.id+":"),this.transportManager_=new Q4(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=UC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=VC("t",t),i=VC("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=VC("t",t),i=VC("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=VC("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?AL("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):AL("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Qs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),UC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):UC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sq{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class oq{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,V.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,V.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class zx extends oq{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zx}getInitialEvent(t){return(0,V.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Wn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Vn(){return new Wn("")}function mn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function bp(n){return n.pieces_.length-n.pieceNum_}function pi(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Wn(n.pieces_,t)}function VL(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function jC(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function cq(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Wn(t,0)}function zi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Wn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Wn(e,0)}function gn(n){return n.pieceNum_>=n.pieces_.length}function yo(n,t){const e=mn(n),i=mn(t);if(null===e)return t;if(e===i)return yo(pi(n),pi(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function gse(n,t){const e=jC(n,0),i=jC(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Qg(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function UL(n,t){if(bp(n)!==bp(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Qa(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(bp(n)>bp(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class _se{constructor(t,e){this.errorPrefix_=e,this.parts_=jC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,V.ug)(this.parts_[i]);uq(this)}}function uq(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Jg(n))}function Jg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class HL extends oq{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new HL}getInitialEvent(t){return(0,V.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const GC=1e3;let qx,Xg=(()=>{class n extends sq{constructor(e,i,r,s,c,d,f,_){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=BC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=GC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");HL.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&zx.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,V.Wl)(c)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new V.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,f=>{const _=f.d,b=f.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",f),"ok"!==b&&this.removeListen_(r,s),e.onComplete&&e.onComplete(b,_))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,V.r3)(e,"w")){const r=(0,V.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Qs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,V.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,V.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,V.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):AL("Unrecognized action received from server: "+(0,V.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=GC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=GC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=GC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,le.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let f=!1,_=null;const b=function(){_?_.close():(f=!0,s())};e.realtime_={close:b,sendRequest:function(R){(0,V.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(R)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[R,U]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);f?us("getToken() completed but was canceled"):(us("getToken() completed. Creating connection."),e.authToken_=R&&R.accessToken,e.appCheckToken_=U&&U.token,_=new rq(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,q=>{Qs(q+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(R){e.log_("Failed to get token: "+R),f||(e.repoInfo_.nodeAdmin&&Qs(R),b())}}})()}interrupt(e){us("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){us("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=GC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>kL(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Wn(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){us("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){us("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,V.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+xL.replace(/\./g,"-")]=1,(0,V.uI)()?e["framework.cordova"]=1:(0,V.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zx.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new yn(t,e)}}class $x{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new yn(yp,t),r=new yn(yp,e);return 0!==this.compare(i,r)}minPost(){return yn.MIN}}class fq extends $x{static get __EMPTY_NODE(){return qx}static set __EMPTY_NODE(t){qx=t}compare(t,e){return Qg(t.name,e.name)}isDefinedOn(t){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return yn.MIN}maxPost(){return new yn(th,qx)}makePost(t,e){return(0,V.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new yn(t,qx)}toString(){return".key"}}const Su=new fq;class Wx{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let GL,cc=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Ho.EMPTY_NODE,this.right=c??Ho.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ho.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Ho.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ho{constructor(t,e=Ho.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ho(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,cc.BLACK,null,null))}remove(t){return new Ho(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,cc.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Wx(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Wx(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Wx(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Wx(this.root_,null,this.comparator_,!0,t)}}function Dse(n,t){return Qg(n.name,t.name)}function jL(n,t){return Qg(n,t)}Ho.EMPTY_NODE=new class Tse{copy(t,e,i,r,s){return this}insert(t,e,i){return new cc(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pq=function(n){return"number"==typeof n?"number:"+O4(n):"string:"+n},mq=function(n){if(n.isLeafNode()){const t=n.val();(0,V.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,V.r3)(t,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===GL||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===GL||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gq,_q,yq,Pv=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),mq(this.priorityNode_)}static set __childrenNodeConstructor(e){gq=e}static get __childrenNodeConstructor(){return gq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return gn(e)?this:".priority"===mn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=mn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,V.hu)(".priority"!==r||1===bp(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(pi(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+pq(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?O4(this.value_):this.value_,this.lazyHash_=M4(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,V.hu)(s>=0,"Unknown leaf type: "+i),(0,V.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ei=new class Mse extends $x{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Qg(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn(th,new Pv("[PRIORITY-POST]",yq))}makePost(t,e){const i=_q(t);return new yn(e,new Pv("[PRIORITY-POST]",i))}toString(){return".priority"}},Ase=Math.log(2);class kse{constructor(t){this.count=parseInt(Math.log(t+1)/Ase,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Zx=function(n,t,e,i){n.sort(t);const r=function(f,_){const b=_-f;let D,M;if(0===b)return null;if(1===b)return D=n[f],M=e?e(D):D,new cc(M,D.node,cc.BLACK,null,null);{const R=parseInt(b/2,10)+f,U=r(f,R),q=r(R+1,_);return D=n[R],M=e?e(D):D,new cc(M,D.node,cc.BLACK,U,q)}},d=function(f){let _=null,b=null,D=n.length;const M=function(U,q){const J=D-U,we=D;D-=U;const He=r(J+1,we),Ge=n[J],Ye=e?e(Ge):Ge;R(new cc(Ye,Ge.node,q,null,He))},R=function(U){_?(_.left=U,_=U):(b=U,_=U)};for(let U=0;U<f.count;++U){const q=f.nextBitIsOne(),J=Math.pow(2,f.count-(U+1));q?M(J,cc.BLACK):(M(J,cc.BLACK),M(J,cc.RED))}return b}(new kse(n.length));return new Ho(i||t,d)};let zL;const Nv={};class nh{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,V.hu)(Nv&&Ei,"ChildrenNode.ts has not been loaded"),zL=zL||new nh({".priority":Nv},{".priority":Ei}),zL}get(t){const e=(0,V.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ho?e:null}hasIndex(t){return(0,V.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,V.hu)(t!==Su,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(yn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?Zx(i,t.getCompare()):Nv;const f=t.toString(),_=Object.assign({},this.indexSet_);_[f]=t;const b=Object.assign({},this.indexes_);return b[f]=d,new nh(b,_)}addToIndexes(t,e){const i=(0,V.UI)(this.indexes_,(r,s)=>{const c=(0,V.DV)(this.indexSet_,s);if((0,V.hu)(c,"Missing index implementation for "+s),r===Nv){if(c.isDefinedOn(t.node)){const d=[],f=e.getIterator(yn.Wrap);let _=f.getNext();for(;_;)_.name!==t.name&&d.push(_),_=f.getNext();return d.push(t),Zx(d,c.getCompare())}return Nv}{const d=e.get(t.name);let f=r;return d&&(f=f.remove(new yn(t.name,d))),f.insert(t,t.node)}});return new nh(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,V.UI)(this.indexes_,r=>{if(r===Nv)return r;{const s=e.get(t.name);return s?r.remove(new yn(t.name,s)):r}});return new nh(i,this.indexSet_)}}let zC,sn=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&mq(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zC||(zC=new n(new Ho(jL),null,nh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zC}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?zC:i}}getChild(e){const i=mn(e);return null===i?this:this.getImmediateChild(i).getChild(pi(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,V.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new yn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?zC:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=mn(e);if(null===r)return i;{(0,V.hu)(".priority"!==mn(e)||1===bp(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(pi(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(Ei,(d,f)=>{i[d]=f.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+pq(this.getPriority().val())+":"),this.forEachChild(Ei,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":M4(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new yn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new yn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new yn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,yn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,yn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===$C?-1:0}withIndex(e){if(e===Su||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Su||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Ei),s=i.getIterator(Ei);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Su?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const $C=new class Rse extends sn{constructor(){super(new Ho(jL),sn.EMPTY_NODE,nh.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return sn.EMPTY_NODE}isEmpty(){return!1}};function Ji(n,t=null){if(null===n)return sn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,V.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Pv(n,Ji(t));if(n instanceof Array){let e=sn.EMPTY_NODE;return ds(n,(i,r)=>{if((0,V.r3)(n,i)&&"."!==i.substring(0,1)){const s=Ji(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Ji(t))}{const e=[];let i=!1;if(ds(n,(c,d)=>{if("."!==c.substring(0,1)){const f=Ji(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),e.push(new yn(c,f)))}}),0===e.length)return sn.EMPTY_NODE;const s=Zx(e,Dse,c=>c.name,jL);if(i){const c=Zx(e,Ei.getCompare());return new sn(s,Ji(t),new nh({".priority":c},{".priority":Ei}))}return new sn(s,Ji(t),nh.Default)}}Object.defineProperties(yn,{MIN:{value:new yn(yp,sn.EMPTY_NODE)},MAX:{value:new yn(th,$C)}}),fq.__EMPTY_NODE=sn.EMPTY_NODE,Pv.__childrenNodeConstructor=sn,function Ise(n){GL=n}($C),function xse(n){yq=n}($C),function Sse(n){_q=n}(Ji);class $L extends $x{constructor(t){super(),this.indexPath_=t,(0,V.hu)(!gn(t)&&".priority"!==mn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Qg(t.name,e.name):s}makePost(t,e){const i=Ji(t),r=sn.EMPTY_NODE.updateChild(this.indexPath_,i);return new yn(e,r)}maxPost(){const t=sn.EMPTY_NODE.updateChild(this.indexPath_,$C);return new yn(th,t)}toString(){return jC(this.indexPath_,0).join("/")}}const qL=new class Pse extends $x{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Qg(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(t,e){const i=Ji(t);return new yn(e,i)}toString(){return".value"}};function vq(n){return{type:"value",snapshotNode:n}}function Fv(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function qC(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function WC(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class WL{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,V.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(qC(e,d)):(0,V.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Fv(e,i)):c.trackChildChange(WC(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Ei,(r,s)=>{e.hasChild(r)||i.trackChildChange(qC(r,s))}),e.isLeafNode()||e.forEachChild(Ei,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(WC(r,s,c))}else i.trackChildChange(Fv(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?sn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ZC{constructor(t){this.indexedFilter_=new WL(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ZC.getStartPost_(t),this.endPost_=ZC.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,c){return this.matches(new yn(e,i))||(i=sn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=sn.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(sn.EMPTY_NODE);const s=this;return e.forEachChild(Ei,(c,d)=>{s.matches(new yn(c,d))||(r=r.updateImmediateChild(c,sn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Fse{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ZC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new yn(e,i))||(i=sn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=sn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=sn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),c++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(sn.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let c=0;for(;s.hasNext();){const d=s.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:r=r.updateImmediateChild(d.name,sn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const D=this.index_.getCompare();c=(M,R)=>D(R,M)}else c=this.index_.getCompare();const d=t;(0,V.hu)(d.numChildren()===this.limit_,"");const f=new yn(e,i),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(f);if(d.hasChild(e)){const D=d.getImmediateChild(e);let M=r.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=M&&(M.name===e||d.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const R=null==M?1:c(M,f);if(b&&!i.isEmpty()&&R>=0)return s?.trackChildChange(WC(e,i,D)),d.updateImmediateChild(e,i);{s?.trackChildChange(qC(e,D));const q=d.updateImmediateChild(e,sn.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(s?.trackChildChange(Fv(M.name,M.node)),q.updateImmediateChild(M.name,M.node)):q}}return i.isEmpty()?t:b&&c(_,f)>=0?(null!=s&&(s.trackChildChange(qC(_.name,_.node)),s.trackChildChange(Fv(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(_.name,sn.EMPTY_NODE)):t}}class Yx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ei}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:th}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ei}copy(){const t=new Yx;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function ZL(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function YL(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function Kx(n,t){const e=n.copy();return e.index_=t,e}function bq(n){const t={};if(n.isDefault())return t;let e;if(n.index_===Ei?e="$priority":n.index_===qL?e="$value":n.index_===Su?e="$key":((0,V.hu)(n.index_ instanceof $L,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,V.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,V.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,V.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,V.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,V.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function wq(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Ei&&(t.i=n.index_.toString()),t}class Qx extends sq{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=BC("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,V.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=Qx.getListenId_(t,i),d={};this.listens_[c]=d;const f=bq(t._queryParams);this.restRequest_(s+".json",f,(_,b)=>{let D=b;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(s,D,!1,i),(0,V.DV)(this.listens_,c)===d){let M;M=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(M,null)}})}unlisten(t,e){const i=Qx.getListenId_(t,e);delete this.listens_[i]}get(t){const e=bq(t._queryParams),i=t._path.toString(),r=new V.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,V.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,V.cI)(d.responseText)}catch{Qs("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&Qs("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class jse{constructor(){this.rootNode_=sn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Jx(){return{value:null,children:new Map}}function Lv(n,t,e){if(gn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=mn(t);n.children.has(i)||n.children.set(i,Jx()),Lv(n.children.get(i),t=pi(t),e)}}function KL(n,t){if(gn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Ei,(i,r)=>{Lv(n,new Wn(i),r)}),KL(n,t)}}if(n.children.size>0){const e=mn(t);return t=pi(t),n.children.has(e)&&KL(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function QL(n,t,e){null!==n.value?e(t,n.value):function Gse(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{QL(r,new Wn(t.toString()+"/"+i),e)})}class zse{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ds(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class Wse{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new zse(t);const i=1e4+2e4*Math.random();UC(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;ds(t,(r,s)=>{s>0&&(0,V.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),UC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ja=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ja||(Ja={})),Ja))();function e2(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Xx{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Ja.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(gn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Wn(t));return new Xx(Vn(),e,this.revert)}}return(0,V.hu)(mn(this.path)===t,"operationForChild called for unrelated child."),new Xx(pi(this.path),this.affectedTree,this.revert)}}class YC{constructor(t,e){this.source=t,this.path=e,this.type=Ja.LISTEN_COMPLETE}operationForChild(t){return gn(this.path)?new YC(this.source,Vn()):new YC(this.source,pi(this.path))}}class e_{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Ja.OVERWRITE}operationForChild(t){return gn(this.path)?new e_(this.source,Vn(),this.snap.getImmediateChild(t)):new e_(this.source,pi(this.path),this.snap)}}class Bv{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Ja.MERGE}operationForChild(t){if(gn(this.path)){const e=this.children.subtree(new Wn(t));return e.isEmpty()?null:e.value?new e_(this.source,Vn(),e.value):new Bv(this.source,Vn(),e)}return(0,V.hu)(mn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Bv(this.source,pi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wp{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(gn(t))return this.isFullyInitialized()&&!this.filtered_;const e=mn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Zse{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function KC(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,f)=>function Qse(n,t,e){if(null==t.childName||null==e.childName)throw(0,V.g5)("Should only compare child_ events.");const i=new yn(t.childName,t.snapshotNode),r=new yn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),c.forEach(d=>{const f=function Kse(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(_=>{_.respondsTo(d.type)&&t.push(_.createEvent(f,n.query_))})})}function eM(n,t){return{eventCache:n,serverCache:t}}function QC(n,t,e,i){return eM(new wp(t,e,i),n.serverCache)}function Eq(n,t,e,i){return eM(n.eventCache,new wp(t,e,i))}function tM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function t_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let t2;class Ti{constructor(t,e=(()=>(t2||(t2=new Ho(Nre)),t2))()){this.value=t,this.children=e}static fromObject(t){let e=new Ti(null);return ds(t,(i,r)=>{e=e.set(new Wn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Vn(),value:this.value};if(gn(t))return null;{const i=mn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(pi(t),e);return null!=s?{path:zi(new Wn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(gn(t))return this;{const e=mn(t),i=this.children.get(e);return null!==i?i.subtree(pi(t)):new Ti(null)}}set(t,e){if(gn(t))return new Ti(e,this.children);{const i=mn(t),s=(this.children.get(i)||new Ti(null)).set(pi(t),e),c=this.children.insert(i,s);return new Ti(this.value,c)}}remove(t){if(gn(t))return this.children.isEmpty()?new Ti(null):new Ti(null,this.children);{const e=mn(t),i=this.children.get(e);if(i){const r=i.remove(pi(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Ti(null):new Ti(this.value,s)}return this}}get(t){if(gn(t))return this.value;{const e=mn(t),i=this.children.get(e);return i?i.get(pi(t)):null}}setTree(t,e){if(gn(t))return e;{const i=mn(t),s=(this.children.get(i)||new Ti(null)).setTree(pi(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Ti(this.value,c)}}fold(t){return this.fold_(Vn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(zi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Vn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(gn(t))return null;{const s=mn(t),c=this.children.get(s);return c?c.findOnPath_(pi(t),zi(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Vn(),e)}foreachOnPath_(t,e,i){if(gn(t))return this;{this.value&&i(e,this.value);const r=mn(t),s=this.children.get(r);return s?s.foreachOnPath_(pi(t),zi(e,r),i):new Ti(null)}}foreach(t){this.foreach_(Vn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(zi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class uc{constructor(t){this.writeTree_=t}static empty(){return new uc(new Ti(null))}}function JC(n,t,e){if(gn(t))return new uc(new Ti(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=yo(r,t);return s=s.updateChild(c,e),new uc(n.writeTree_.set(r,s))}{const r=new Ti(e),s=n.writeTree_.setTree(t,r);return new uc(s)}}}function n2(n,t,e){let i=n;return ds(e,(r,s)=>{i=JC(i,zi(t,r),s)}),i}function Tq(n,t){if(gn(t))return uc.empty();{const e=n.writeTree_.setTree(t,new Ti(null));return new uc(e)}}function r2(n,t){return null!=n_(n,t)}function n_(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(yo(e.path,t)):null}function Dq(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ei,(i,r)=>{t.push(new yn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new yn(i,r.value))}),t}function Cp(n,t){if(gn(t))return n;{const e=n_(n,t);return new uc(null!=e?new Ti(e):n.writeTree_.subtree(t))}}function s2(n){return n.writeTree_.isEmpty()}function Vv(n,t){return Iq(Vn(),n.writeTree_,t)}function Iq(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,V.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=Iq(zi(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(zi(n,".priority"),i)),e}}function nM(n,t){return kq(t,n)}function ioe(n,t){if(n.snap)return Qa(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Qa(zi(n.path,e),t))return!0;return!1}function soe(n){return n.visible}function Sq(n,t,e){let i=uc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)Qa(e,c)?(d=yo(e,c),i=JC(i,d,s.snap)):Qa(c,e)&&(d=yo(c,e),i=JC(i,Vn(),s.snap.getChild(d)));else{if(!s.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(Qa(e,c))d=yo(e,c),i=n2(i,d,s.children);else if(Qa(c,e))if(d=yo(c,e),gn(d))i=n2(i,Vn(),s.children);else{const f=(0,V.DV)(s.children,mn(d));if(f){const _=f.getChild(pi(d));i=JC(i,Vn(),_)}}}}}return i}function xq(n,t,e,i,r){if(i||r){const s=Cp(n.visibleWrites,t);return!r&&s2(s)?e:r||null!=e||r2(s,Vn())?Vv(Sq(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(Qa(_.path,t)||Qa(t,_.path))},t),e||sn.EMPTY_NODE):null}{const s=n_(n.visibleWrites,t);if(null!=s)return s;{const c=Cp(n.visibleWrites,t);return s2(c)?e:null!=e||r2(c,Vn())?Vv(c,e||sn.EMPTY_NODE):null}}}function iM(n,t,e,i){return xq(n.writeTree,n.treePath,t,e,i)}function o2(n,t){return function ooe(n,t,e){let i=sn.EMPTY_NODE;const r=n_(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Ei,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Cp(n.visibleWrites,t);return e.forEachChild(Ei,(c,d)=>{const f=Vv(Cp(s,new Wn(c)),d);i=i.updateImmediateChild(c,f)}),Dq(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return Dq(Cp(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function Mq(n,t,e,i){return function aoe(n,t,e,i,r){(0,V.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=zi(t,e);if(r2(n.visibleWrites,s))return null;{const c=Cp(n.visibleWrites,s);return s2(c)?r.getChild(e):Vv(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function rM(n,t){return function coe(n,t){return n_(n.visibleWrites,t)}(n.writeTree,zi(n.treePath,t))}function a2(n,t,e){return function loe(n,t,e,i){const r=zi(t,e),s=n_(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Vv(Cp(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function Aq(n,t){return kq(zi(n.treePath,t),n.writeTree)}function kq(n,t){return{treePath:n,writeTree:t}}class foe{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,V.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,WC(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,qC(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Fv(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,V.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,WC(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const Rq=new class poe{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class l2{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new wp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return a2(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:t_(this.viewCache_),s=function hoe(n,t,e,i,r,s){return function uoe(n,t,e,i,r,s,c){let d;const f=Cp(n.visibleWrites,t),_=n_(f,Vn());if(null!=_)d=_;else{if(null==e)return[];d=Vv(f,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const b=[],D=c.getCompare(),M=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let R=M.getNext();for(;R&&b.length<r;)0!==D(R,i)&&b.push(R),R=M.getNext();return b}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function Oq(n,t,e,i,r,s){const c=t.eventCache;if(null!=rM(i,e))return t;{let d,f;if(gn(e))if((0,V.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=t_(t),D=o2(i,_ instanceof sn?_:sn.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),D,s)}else{const _=iM(i,t_(t));d=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const _=mn(e);if(".priority"===_){(0,V.hu)(1===bp(e),"Can't have a priority with additional path components");const b=c.getNode();f=t.serverCache.getNode();const D=Mq(i,e,b,f);d=null!=D?n.filter.updatePriority(b,D):c.getNode()}else{const b=pi(e);let D;if(c.isCompleteForChild(_)){f=t.serverCache.getNode();const M=Mq(i,e,c.getNode(),f);D=null!=M?c.getNode().getImmediateChild(_).updateChild(b,M):c.getNode().getImmediateChild(_)}else D=a2(i,_,t.serverCache);d=null!=D?n.filter.updateChild(c.getNode(),_,D,b,r,s):c.getNode()}}return QC(t,d,c.isFullyInitialized()||gn(e),n.filter.filtersNodes())}}function sM(n,t,e,i,r,s,c,d){const f=t.serverCache;let _;const b=c?n.filter:n.filter.getIndexedFilter();if(gn(e))_=b.updateFullNode(f.getNode(),i,null);else if(b.filtersNodes()&&!f.isFiltered()){const R=f.getNode().updateChild(e,i);_=b.updateFullNode(f.getNode(),R,null)}else{const R=mn(e);if(!f.isCompleteForPath(e)&&bp(e)>1)return t;const U=pi(e),J=f.getNode().getImmediateChild(R).updateChild(U,i);_=".priority"===R?b.updatePriority(f.getNode(),J):b.updateChild(f.getNode(),R,J,U,Rq,null)}const D=Eq(t,_,f.isFullyInitialized()||gn(e),b.filtersNodes());return Oq(n,D,e,r,new l2(r,D,s),d)}function c2(n,t,e,i,r,s,c){const d=t.eventCache;let f,_;const b=new l2(r,t,s);if(gn(e))_=n.filter.updateFullNode(t.eventCache.getNode(),i,c),f=QC(t,_,!0,n.filter.filtersNodes());else{const D=mn(e);if(".priority"===D)_=n.filter.updatePriority(t.eventCache.getNode(),i),f=QC(t,_,d.isFullyInitialized(),d.isFiltered());else{const M=pi(e),R=d.getNode().getImmediateChild(D);let U;if(gn(M))U=i;else{const q=b.getCompleteChild(D);U=null!=q?".priority"===VL(M)&&q.getChild(cq(M)).isEmpty()?q:q.updateChild(M,i):sn.EMPTY_NODE}f=R.equals(U)?t:QC(t,n.filter.updateChild(d.getNode(),D,U,M,b,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function Pq(n,t){return n.eventCache.isCompleteForChild(t)}function Nq(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function u2(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,f=t;_=gn(e)?i:new Ti(null).setTree(e,i);const b=t.serverCache.getNode();return _.children.inorderTraversal((D,M)=>{if(b.hasChild(D)){const U=Nq(0,t.serverCache.getNode().getImmediateChild(D),M);f=sM(n,f,new Wn(D),U,r,s,c,d)}}),_.children.inorderTraversal((D,M)=>{const R=!t.serverCache.isCompleteForChild(D)&&null===M.value;if(!b.hasChild(D)&&!R){const q=Nq(0,t.serverCache.getNode().getImmediateChild(D),M);f=sM(n,f,new Wn(D),q,r,s,c,d)}}),f}class Eoe{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new WL(i.getIndex()),s=function Lse(n){return n.loadsAllData()?new WL(n.getIndex()):n.hasLimit()?new Fse(n):new ZC(n)}(i);this.processor_=function moe(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,f=r.updateFullNode(sn.EMPTY_NODE,c.getNode(),null),_=s.updateFullNode(sn.EMPTY_NODE,d.getNode(),null),b=new wp(f,c.isFullyInitialized(),r.filtersNodes()),D=new wp(_,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=eM(D,b),this.eventGenerator_=new Zse(this.query_)}get query(){return this.query_}}function Ioe(n,t){const e=t_(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!gn(t)&&!e.getImmediateChild(mn(t)).isEmpty())?e.getChild(t):null}function Fq(n){return 0===n.eventRegistrations_.length}function Lq(n,t,e){const i=[];if(e){(0,V.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function Bq(n,t,e,i){t.type===Ja.MERGE&&null!==t.source.queryId&&((0,V.hu)(t_(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(tM(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function _oe(n,t,e,i,r){const s=new foe;let c,d;if(e.type===Ja.OVERWRITE){const _=e;_.source.fromUser?c=c2(n,t,_.path,_.snap,i,r,s):((0,V.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered()&&!gn(_.path),c=sM(n,t,_.path,_.snap,i,r,d,s))}else if(e.type===Ja.MERGE){const _=e;_.source.fromUser?c=function voe(n,t,e,i,r,s,c){let d=t;return i.foreach((f,_)=>{const b=zi(e,f);Pq(t,mn(b))&&(d=c2(n,d,b,_,r,s,c))}),i.foreach((f,_)=>{const b=zi(e,f);Pq(t,mn(b))||(d=c2(n,d,b,_,r,s,c))}),d}(n,t,_.path,_.children,i,r,s):((0,V.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered(),c=u2(n,t,_.path,_.children,i,r,d,s))}else if(e.type===Ja.ACK_USER_WRITE){const _=e;c=_.revert?function Coe(n,t,e,i,r,s){let c;if(null!=rM(i,e))return t;{const d=new l2(i,t,r),f=t.eventCache.getNode();let _;if(gn(e)||".priority"===mn(e)){let b;if(t.serverCache.isFullyInitialized())b=iM(i,t_(t));else{const D=t.serverCache.getNode();(0,V.hu)(D instanceof sn,"serverChildren would be complete if leaf node"),b=o2(i,D)}_=n.filter.updateFullNode(f,b,s)}else{const b=mn(e);let D=a2(i,b,t.serverCache);null==D&&t.serverCache.isCompleteForChild(b)&&(D=f.getImmediateChild(b)),_=null!=D?n.filter.updateChild(f,b,D,pi(e),d,s):t.eventCache.getNode().hasChild(b)?n.filter.updateChild(f,b,sn.EMPTY_NODE,pi(e),d,s):f,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=iM(i,t_(t)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=rM(i,Vn()),QC(t,_,c,n.filter.filtersNodes())}}(n,t,_.path,i,r,s):function boe(n,t,e,i,r,s,c){if(null!=rM(r,e))return t;const d=t.serverCache.isFiltered(),f=t.serverCache;if(null!=i.value){if(gn(e)&&f.isFullyInitialized()||f.isCompleteForPath(e))return sM(n,t,e,f.getNode().getChild(e),r,s,d,c);if(gn(e)){let _=new Ti(null);return f.getNode().forEachChild(Su,(b,D)=>{_=_.set(new Wn(b),D)}),u2(n,t,e,_,r,s,d,c)}return t}{let _=new Ti(null);return i.foreach((b,D)=>{const M=zi(e,b);f.isCompleteForPath(M)&&(_=_.set(b,f.getNode().getChild(M)))}),u2(n,t,e,_,r,s,d,c)}}(n,t,_.path,_.affectedTree,i,r,s)}else{if(e.type!==Ja.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+e.type);c=function woe(n,t,e,i,r){const s=t.serverCache;return Oq(n,Eq(t,s.getNode(),s.isFullyInitialized()||gn(e),s.isFiltered()),e,i,Rq,r)}(n,t,e.path,i,s)}const f=s.getChanges();return function yoe(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=tM(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(vq(tM(t)))}}(t,c,f),{viewCache:c,changes:f}}(n.processor_,r,t,e,i);return function goe(n,t){(0,V.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,V.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Vq(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Vq(n,t,e,i){return function Yse(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function Nse(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),KC(n,r,"child_removed",t,i,e),KC(n,r,"child_added",t,i,e),KC(n,r,"child_moved",s,i,e),KC(n,r,"child_changed",t,i,e),KC(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let oM,lM;class Uq{constructor(){this.views=new Map}}function d2(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,V.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Bq(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(Bq(c,t,e,i));return s}}function Hq(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=iM(e,r?i:null),f=!1;d?f=!0:i instanceof sn?(d=o2(e,i),f=!1):(d=sn.EMPTY_NODE,f=!1);const _=eM(new wp(d,f,!1),new wp(i,r,!1));return new Eoe(t,_)}return c}function jq(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Ep(n,t){let e=null;for(const i of n.views.values())e=e||Ioe(i,t);return e}function Gq(n,t){return t._queryParams.loadsAllData()?aM(n):n.views.get(t._queryIdentifier)}function zq(n,t){return null!=Gq(n,t)}function Tp(n){return null!=aM(n)}function aM(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Foe=1;class $q{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ti(null),this.pendingWriteTree_=function doe(){return{visibleWrites:uc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function h2(n,t,e,i,r){return function Xse(n,t,e,i,r){(0,V.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=JC(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Uv(n,new e_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Dp(n,t,e=!1){const i=function toe(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function noe(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,V.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&ioe(d,i.path)?r=!1:Qa(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function roe(n){n.visibleWrites=Sq(n.allWrites,soe,Vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Tq(n.visibleWrites,i.path):ds(i.children,f=>{n.visibleWrites=Tq(n.visibleWrites,zi(i.path,f))}),!0))}(n.pendingWriteTree_,t)){let s=new Ti(null);return null!=i.snap?s=s.set(Vn(),!0):ds(i.children,c=>{s=s.set(new Wn(c),!0)}),Uv(n,new Xx(i.path,s,e))}return[]}function XC(n,t,e){return Uv(n,new e_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function cM(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===t._queryIdentifier||zq(c,t))){const f=function Ooe(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=Tp(n);if("default"===r)for(const[f,_]of n.views.entries())c=c.concat(Lq(_,e,i)),Fq(_)&&(n.views.delete(f),_.query._queryParams.loadsAllData()||s.push(_.query));else{const f=n.views.get(r);f&&(c=c.concat(Lq(f,e,i)),Fq(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!Tp(n)&&s.push(new(function Aoe(){return(0,V.hu)(oM,"Reference.ts has not been loaded"),oM}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function koe(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=f.removed;if(d=f.events,!r){const b=-1!==_.findIndex(M=>M._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(M,R)=>Tp(R));if(b&&!D){const M=n.syncPointTree_.subtree(s);if(!M.isEmpty()){const R=function Goe(n){return n.fold((t,e,i)=>{if(e&&Tp(e))return[aM(e)];{let r=[];return e&&(r=jq(e)),ds(i,(s,c)=>{r=r.concat(c)}),r}})}(M);for(let U=0;U<R.length;++U){const q=R[U],J=q.query,we=Yq(n,q);n.listenProvider_.startListening(tE(J),eE(n,J),we.hashFn,we.onComplete)}}}!D&&_.length>0&&!i&&(b?n.listenProvider_.stopListening(tE(t),null):_.forEach(M=>{const R=n.queryToTagMap.get(dM(M));n.listenProvider_.stopListening(tE(M),R)}))}!function zoe(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=dM(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,_)}return d}function qq(n,t,e,i){const r=p2(n,i);if(null!=r){const s=m2(r),c=s.path,d=s.queryId,f=yo(c,t);return g2(n,c,new e_(e2(d),f,e))}return[]}function f2(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(M,R)=>{const U=yo(M,r);s=s||Ep(R,U),c=c||Tp(R)});let f,d=n.syncPointTree_.get(r);d?(c=c||Tp(d),s=s||Ep(d,Vn())):(d=new Uq,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?f=!0:(f=!1,s=sn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((R,U)=>{const q=Ep(U,Vn());q&&(s=s.updateImmediateChild(R,q))}));const _=zq(d,t);if(!_&&!t._queryParams.loadsAllData()){const M=dM(t);(0,V.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const R=function $oe(){return Foe++}();n.queryToTagMap.set(M,R),n.tagToQueryMap.set(R,M)}let D=function Roe(n,t,e,i,r,s){const c=Hq(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function Soe(n,t){n.eventRegistrations_.push(t)}(c,e),function xoe(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ei,(s,c)=>{i.push(Fv(s,c))}),e.isFullyInitialized()&&i.push(vq(e.getNode())),Vq(n,i,e.getNode(),t)}(c,e)}(d,t,e,nM(n.pendingWriteTree_,r),s,f);if(!_&&!c&&!i){const M=Gq(d,t);D=D.concat(function qoe(n,t,e){const i=t._path,r=eE(n,t),s=Yq(n,e),c=n.listenProvider_.startListening(tE(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,V.hu)(!Tp(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((_,b,D)=>{if(!gn(_)&&b&&Tp(b))return[aM(b).query];{let M=[];return b&&(M=M.concat(jq(b).map(R=>R.query))),ds(D,(R,U)=>{M=M.concat(U)}),M}});for(let _=0;_<f.length;++_){const b=f[_];n.listenProvider_.stopListening(tE(b),eE(n,b))}}return c}(n,t,M))}return D}function uM(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const _=Ep(d,yo(c,t));if(_)return _});return xq(r,t,s,e,!0)}function Uv(n,t){return Wq(t,n.syncPointTree_,null,nM(n.pendingWriteTree_,Vn()))}function Wq(n,t,e,i){if(gn(n.path))return Zq(n,t,e,i);{const r=t.get(Vn());null==e&&null!=r&&(e=Ep(r,Vn()));let s=[];const c=mn(n.path),d=n.operationForChild(c),f=t.children.get(c);if(f&&d){const _=e?e.getImmediateChild(c):null,b=Aq(i,c);s=s.concat(Wq(d,f,_,b))}return r&&(s=s.concat(d2(r,n,i,e))),s}}function Zq(n,t,e,i){const r=t.get(Vn());null==e&&null!=r&&(e=Ep(r,Vn()));let s=[];return t.children.inorderTraversal((c,d)=>{const f=e?e.getImmediateChild(c):null,_=Aq(i,c),b=n.operationForChild(c);b&&(s=s.concat(Zq(b,d,f,_)))}),r&&(s=s.concat(d2(r,n,i,e))),s}function Yq(n,t){const e=t.query,i=eE(n,e);return{hashFn:()=>(function Toe(n){return n.viewCache_.serverCache.getNode()}(t)||sn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Uoe(n,t,e){const i=p2(n,e);if(i){const r=m2(i),s=r.path,c=r.queryId,d=yo(s,t);return g2(n,s,new YC(e2(c),d))}return[]}(n,e._path,i):function Voe(n,t){return Uv(n,new YC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function Bre(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return cM(n,e,null,s)}}}}function eE(n,t){const e=dM(t);return n.queryToTagMap.get(e)}function dM(n){return n._path.toString()+"$"+n._queryIdentifier}function p2(n,t){return n.tagToQueryMap.get(t)}function m2(n){const t=n.indexOf("$");return(0,V.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Wn(n.substr(0,t))}}function g2(n,t,e){const i=n.syncPointTree_.get(t);return(0,V.hu)(i,"Missing sync point for query tag that we're tracking"),d2(i,e,nM(n.pendingWriteTree_,t),null)}function tE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Noe(){return(0,V.hu)(lM,"Reference.ts has not been loaded"),lM}())(n._repo,n._path):n}class _2{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new _2(e)}node(){return this.node_}}class y2{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=zi(this.path_,t);return new y2(this.syncTree_,e)}node(){return uM(this.syncTree_,this.path_)}}const Kq=function(n,t,e){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Zoe(n[".sv"],t,e):"object"==typeof n[".sv"]?Yoe(n[".sv"],t):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Zoe=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,V.hu)(!1,"Unexpected server value: "+n)},Yoe=function(n,t,e){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,V.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,V.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},Qq=function(n,t,e,i){return b2(t,new y2(e,n),i)},v2=function(n,t,e){return b2(n,new _2(t),e)};function b2(n,t,e){const i=n.getPriority().val(),r=Kq(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=Kq(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new Pv(d,Ji(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new Pv(r))),c.forEachChild(Ei,(d,f)=>{const _=b2(f,t.getImmediateChild(d),e);_!==f&&(s=s.updateImmediateChild(d,_))}),s}}class w2{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function hM(n,t){let e=t instanceof Wn?t:new Wn(t),i=n,r=mn(e);for(;null!==r;){const s=(0,V.DV)(i.node.children,r)||{children:{},childCount:0};i=new w2(r,i,s),e=pi(e),r=mn(e)}return i}function i_(n){return n.node.value}function C2(n,t){n.node.value=t,E2(n)}function Jq(n){return n.node.childCount>0}function fM(n,t){ds(n.node.children,(e,i)=>{t(new w2(e,n,i))})}function Xq(n,t,e,i){e&&!i&&t(n),fM(n,r=>{Xq(r,t,!0,i)}),e&&i&&t(n)}function nE(n){return new Wn(null===n.parent?n.name:nE(n.parent)+"/"+n.name)}function E2(n){null!==n.parent&&function Joe(n,t,e){const i=function Koe(n){return void 0===i_(n)&&!Jq(n)}(e),r=(0,V.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,E2(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,E2(n))}(n.parent,n.name,n)}const Xoe=/[\[\].#$\/\u0000-\u001F\u007F]/,eae=/[\[\].#$\u0000-\u001F\u007F]/,T2=10485760,pM=function(n){return"string"==typeof n&&0!==n.length&&!Xoe.test(n)},e5=function(n){return"string"==typeof n&&0!==n.length&&!eae.test(n)},iE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Hx(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},xu=function(n,t,e,i){i&&void 0===t||rE((0,V.gK)(n,"value"),t,e)},rE=function(n,t,e){const i=e instanceof Wn?new _se(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Jg(i));if("function"==typeof t)throw new Error(n+"contains a function "+Jg(i)+" with contents = "+t.toString());if(Hx(t))throw new Error(n+"contains "+t.toString()+" "+Jg(i));if("string"==typeof t&&t.length>T2/3&&(0,V.ug)(t)>T2)throw new Error(n+"contains a string greater than "+T2+" utf8 bytes "+Jg(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(ds(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!pM(c)))throw new Error(n+" contains an invalid key ("+c+") "+Jg(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function yse(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,V.ug)(t),uq(n)})(i,c),rE(n,d,i),function vse(n){const t=n.parts_.pop();n.byteLength_-=(0,V.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Jg(i)+" in addition to actual children.")}},t5=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,V.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];ds(t,(c,d)=>{const f=new Wn(c);if(rE(r,d,zi(e,f)),".priority"===VL(f)&&!iE(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=jC(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!pM(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(gse);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Qa(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},D2=function(n,t,e){if(!e||void 0!==t){if(Hx(t))throw new Error((0,V.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!iE(t))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sE=function(n,t,e,i){if(!(i&&void 0===e||pM(e)))throw new Error((0,V.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},oE=function(n,t,e,i){if(!(i&&void 0===e||e5(e)))throw new Error((0,V.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Xa=function(n,t){if(".info"===mn(t))throw new Error(n+" failed = Can't modify data under /.info/")},n5=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!pM(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),e5(n)}(e))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mM(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!UL(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function r5(n,t,e){mM(n,e),s5(n,i=>UL(i,t))}function ma(n,t,e){mM(n,e),s5(n,i=>Qa(i,t)||Qa(t,i))}function s5(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(sae(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function sae(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Kg&&us("event: "+e.toString()),Rv(i)}}}const o5="repo_interrupt";class aae{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jx(),this.transactionQueueTree_=new w2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function a5(n){const e=n.infoData_.getNode(new Wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function aE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:a5(n)})}function l5(n,t,e,i,r){n.dataUpdateCount++;const s=new Wn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const f=(0,V.UI)(e,_=>Ji(_));c=function Hoe(n,t,e,i){const r=p2(n,i);if(r){const s=m2(r),c=s.path,d=s.queryId,f=yo(c,t),_=Ti.fromObject(e);return g2(n,c,new Bv(e2(d),f,_))}return[]}(n.serverSyncTree_,s,f,r)}else{const f=Ji(e);c=qq(n.serverSyncTree_,s,f,r)}else if(i){const f=(0,V.UI)(e,_=>Ji(_));c=function Boe(n,t,e){const i=Ti.fromObject(e);return Uv(n,new Bv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,f)}else{const f=Ji(e);c=XC(n.serverSyncTree_,s,f)}let d=s;c.length>0&&(d=jv(n,s)),ma(n.eventQueue_,d,c)}function c5(n,t){I2(n,"connected",t),!1===t&&function hae(n){Hv(n,"onDisconnectEvents");const t=aE(n),e=Jx();QL(n.onDisconnect_,Vn(),(r,s)=>{const c=Qq(r,s,n.serverSyncTree_,t);Lv(e,r,c)});let i=[];QL(e,Vn(),(r,s)=>{i=i.concat(XC(n.serverSyncTree_,r,s));const c=A2(n,r);jv(n,c)}),n.onDisconnect_=Jx(),ma(n.eventQueue_,Vn(),i)}(n)}function I2(n,t,e){const i=new Wn("/.info/"+t),r=Ji(e);n.infoData_.updateSnapshot(i,r);const s=XC(n.infoSyncTree_,i,r);ma(n.eventQueue_,i,s)}function gM(n){return n.nextWriteId_++}function S2(n,t,e,i,r){Hv(n,"set",{path:t.toString(),value:e,priority:i});const s=aE(n),c=Ji(e,i),d=uM(n.serverSyncTree_,t),f=v2(c,d,s),_=gM(n),b=h2(n.serverSyncTree_,t,f,_,!0);mM(n.eventQueue_,b),n.server_.put(t.toString(),c.val(!0),(M,R)=>{const U="ok"===M;U||Qs("set at "+t+" failed: "+M);const q=Dp(n.serverSyncTree_,_,!U);ma(n.eventQueue_,t,q),Ip(0,r,M,R)});const D=A2(n,t);jv(n,D),ma(n.eventQueue_,D,[])}function fae(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&KL(n.onDisconnect_,t),Ip(0,e,i,r)})}function u5(n,t,e,i){const r=Ji(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&Lv(n.onDisconnect_,t,r),Ip(0,i,s,c)})}function x2(n,t,e){let i;i=".info"===mn(t._path)?cM(n.infoSyncTree_,t,e):cM(n.serverSyncTree_,t,e),r5(n.eventQueue_,t._path,i)}function d5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(o5)}function Hv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),us(e,...t)}function Ip(n,t,e,i){t&&Rv(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function M2(n,t,e){return uM(n.serverSyncTree_,t,e)||sn.EMPTY_NODE}function _M(n,t=n.transactionQueueTree_){if(t||yM(n,t),i_(t)){const e=f5(n,t);(0,V.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function vae(n,t,e){const i=e.map(_=>_.currentWriteId),r=M2(n,t,i);let s=r;const c=r.hash();for(let _=0;_<e.length;_++){const b=e[_];(0,V.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const D=yo(t,b.path);s=s.updateChild(D,b.currentOutputSnapshotRaw)}const d=s.val(!0),f=t;n.server_.put(f.toString(),d,_=>{Hv(n,"transaction put response",{path:f.toString(),status:_});let b=[];if("ok"===_){const D=[];for(let M=0;M<e.length;M++)e[M].status=2,b=b.concat(Dp(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&D.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();yM(n,hM(n.transactionQueueTree_,t)),_M(n,n.transactionQueueTree_),ma(n.eventQueue_,t,b);for(let M=0;M<D.length;M++)Rv(D[M])}else{if("datastale"===_)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{Qs("transaction at "+f.toString()+" failed: "+_);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=_}jv(n,t)}},c)}(n,nE(t),e)}else Jq(t)&&fM(t,e=>{_M(n,e)})}function jv(n,t){const e=h5(n,t),i=nE(e);return function bae(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const f=t[d],_=yo(e,f.path);let D,b=!1;if((0,V.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)b=!0,D=f.abortReason,r=r.concat(Dp(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)b=!0,D="maxretry",r=r.concat(Dp(n.serverSyncTree_,f.currentWriteId,!0));else{const M=M2(n,f.path,c);f.currentInputSnapshot=M;const R=t[d].update(M.val());if(void 0!==R){rE("transaction failed: Data returned ",R,f.path);let U=Ji(R);"object"==typeof R&&null!=R&&(0,V.r3)(R,".priority")||(U=U.updatePriority(M.getPriority()));const J=f.currentWriteId,we=aE(n),He=v2(U,M,we);f.currentOutputSnapshotRaw=U,f.currentOutputSnapshotResolved=He,f.currentWriteId=gM(n),c.splice(c.indexOf(J),1),r=r.concat(h2(n.serverSyncTree_,f.path,He,f.currentWriteId,f.applyLocally)),r=r.concat(Dp(n.serverSyncTree_,J,!0))}else b=!0,D="nodata",r=r.concat(Dp(n.serverSyncTree_,f.currentWriteId,!0))}ma(n.eventQueue_,e,r),r=[],b&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===D?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(D),!1,null)))}yM(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Rv(i[d]);_M(n,n.transactionQueueTree_)}(n,f5(n,e),i),i}function h5(n,t){let e,i=n.transactionQueueTree_;for(e=mn(t);null!==e&&void 0===i_(i);)i=hM(i,e),e=mn(t=pi(t));return i}function f5(n,t){const e=[];return p5(n,t,e),e.sort((i,r)=>i.order-r.order),e}function p5(n,t,e){const i=i_(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);fM(t,r=>{p5(n,r,e)})}function yM(n,t){const e=i_(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,C2(t,e.length>0?e:void 0)}fM(t,i=>{yM(n,i)})}function A2(n,t){const e=nE(h5(n,t)),i=hM(n.transactionQueueTree_,t);return function Qoe(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{k2(n,r)}),k2(n,i),Xq(i,r=>{k2(n,r)}),e}function k2(n,t){const e=i_(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,V.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,V.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(Dp(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?C2(t,void 0):e.length=s+1,ma(n.eventQueue_,nE(t),r);for(let c=0;c<i.length;c++)Rv(i[c])}}const R2=function(n,t){const e=Eae(n),i=e.namespace;return"firebase.com"===e.domain&&Iu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Iu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new OL(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Wn(e.pathString)}},Eae=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",f=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let b=n.indexOf("/");-1===b&&(b=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),t=n.substring(0,Math.min(b,D)),b<D&&(r=function wae(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(b,D)));const M=function Cae(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Qs(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,D)));_=t.indexOf(":"),_>=0?(c="https"===d||"wss"===d,f=parseInt(t.substring(_+1),10)):_=t.length;const R=t.slice(0,_);if("localhost"===R.toLowerCase())e="localhost";else if(R.split(".").length<=2)e=R;else{const U=t.indexOf(".");i=t.substring(0,U).toLowerCase(),e=t.substring(U+1),s=i}"ns"in M&&(s=M.ns)}return{host:t,port:f,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}},m5="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Tae=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=m5.charAt(e%64),e=Math.floor(e/64);(0,V.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=m5.charAt(t[r]);return(0,V.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class g5{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class _5{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class O2{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class y5{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new V.BH;return fae(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Xa("OnDisconnect.remove",this._path);const t=new V.BH;return u5(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Xa("OnDisconnect.set",this._path),xu("OnDisconnect.set",t,this._path,!1);const e=new V.BH;return u5(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Xa("OnDisconnect.setWithPriority",this._path),xu("OnDisconnect.setWithPriority",t,this._path,!1),D2("OnDisconnect.setWithPriority",e,!1);const i=new V.BH;return function pae(n,t,e,i,r){const s=Ji(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&Lv(n.onDisconnect_,t,s),Ip(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Xa("OnDisconnect.update",this._path),t5("OnDisconnect.update",t,this._path,!1);const e=new V.BH;return function mae(n,t,e,i){if((0,V.xb)(e))return us("onDisconnect().update() called with empty data.  Don't do anything."),void Ip(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&ds(e,(c,d)=>{const f=Ji(d);Lv(n.onDisconnect_,zi(t,c),f)}),Ip(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class jo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return gn(this._path)?null:VL(this._path)}get ref(){return new el(this._repo,this._path)}get _queryIdentifier(){const t=wq(this._queryParams),e=kL(t);return"{}"===e?"default":e}get _queryObject(){return wq(this._queryParams)}isEqual(t){if(!((t=(0,V.m9)(t))instanceof jo))return!1;const e=this._repo===t._repo,i=UL(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function mse(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function vM(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Sp(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Su){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==yp)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==th)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Ei){if(null!=t&&!iE(t)||null!=e&&!iE(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof $L||n.getIndex()===qL,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bM(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class el extends jo{constructor(t,e){super(t,e,new Yx,!1)}get parent(){const t=cq(this._path);return null===t?null:new el(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class r_{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Wn(t),i=s_(this.ref,t);return new r_(this._node.getChild(e),i,Ei)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new r_(r,s_(this.ref,i),Ei)))}hasChild(t){const e=new Wn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function v5(n,t){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==t?s_(n._root,t):n._root}function b5(n,t){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const e=R2(t,n._repo.repoInfo_.nodeAdmin);n5("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Iu("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),v5(n,e.path.toString())}function s_(n,t){return null===mn((n=(0,V.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),oE("child","path",e,!1)):oE("child","path",t,!1),new el(n._repo,zi(n._path,t));var e}function P2(n,t){n=(0,V.m9)(n),Xa("set",n._path),xu("set",t,n._path,!1);const e=new V.BH;return S2(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function Mae(n,t){t5("update",t,n._path,!1);const e=new V.BH;return function dae(n,t,e,i){Hv(n,"update",{path:t.toString(),value:e});let r=!0;const s=aE(n),c={};if(ds(e,(d,f)=>{r=!1,c[d]=Qq(zi(t,d),Ji(f),n.serverSyncTree_,s)}),r)us("update() called with empty data.  Don't do anything."),Ip(0,i,"ok",void 0);else{const d=gM(n),f=function Loe(n,t,e,i){!function eoe(n,t,e,i){(0,V.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=n2(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Ti.fromObject(e);return Uv(n,new Bv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);mM(n.eventQueue_,f),n.server_.merge(t.toString(),e,(_,b)=>{const D="ok"===_;D||Qs("update at "+t+" failed: "+_);const M=Dp(n.serverSyncTree_,d,!D),R=M.length>0?jv(n,t):t;ma(n.eventQueue_,R,M),Ip(0,i,_,b)}),ds(e,_=>{const b=A2(n,zi(t,_));jv(n,b)}),ma(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Aae(n){n=(0,V.m9)(n);const t=new O2(()=>{}),e=new lE(t);return function uae(n,t,e){const i=function joe(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(_,b)=>{const D=yo(_,e);i=i||Ep(b,D)});let r=n.syncPointTree_.get(e);r?i=i||Ep(r,Vn()):(r=new Uq,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new wp(i,!0,!1):null;return function Doe(n){return tM(n.viewCache_)}(Hq(r,t,nM(n.pendingWriteTree_,t._path),s?c.getNode():sn.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Ji(r).withIndex(t._queryParams.getIndex());let c;if(f2(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=XC(n.serverSyncTree_,t._path,s);else{const d=eE(n.serverSyncTree_,t);c=qq(n.serverSyncTree_,t._path,s,d)}return ma(n.eventQueue_,t._path,c),cM(n.serverSyncTree_,t,e,null,!0),s},r=>(Hv(n,"get for query "+(0,V.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new r_(i,new el(n._repo,n._path),n._queryParams.getIndex()))}class lE{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new g5("value",this,new r_(t.snapshotNode,new el(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new _5(this,t,e):null}matches(t){return t instanceof lE&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class wM{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new _5(this,t,e):null}createEvent(t,e){(0,V.hu)(null!=t.childName,"Child events should have a childName.");const i=s_(new el(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new g5(t.type,this,new r_(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof wM&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function cE(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const f=e,_=(b,D)=>{x2(n._repo,n,d),f(b,D)};_.userCallback=e.userCallback,_.context=e.context,e=_}const c=new O2(e,s||void 0),d="value"===t?new lE(c):new wM(t,c);return function gae(n,t,e){let i;i=".info"===mn(t._path)?f2(n.infoSyncTree_,t,e):f2(n.serverSyncTree_,t,e),r5(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>x2(n._repo,n,d)}function N2(n,t,e,i){return cE(n,"value",t,e,i)}function w5(n,t,e,i){return cE(n,"child_added",t,e,i)}function C5(n,t,e,i){return cE(n,"child_changed",t,e,i)}function E5(n,t,e,i){return cE(n,"child_moved",t,e,i)}function T5(n,t,e,i){return cE(n,"child_removed",t,e,i)}function D5(n,t,e){let i=null;const r=e?new O2(e):null;"value"===t?i=new lE(r):t&&(i=new wM(t,r)),x2(n._repo,n,i)}class dc{}class I5 extends dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){xu("endAt",this._value,t._path,!0);const e=YL(t._queryParams,this._value,this._key);if(bM(e),Sp(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jo(t._repo,t._path,e,t._orderByCalled)}}class Rae extends dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){xu("endBefore",this._value,t._path,!1);const e=function Hse(n,t,e){let i;return i=YL(n,t,n.index_===Su||e?e:yp),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(bM(e),Sp(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jo(t._repo,t._path,e,t._orderByCalled)}}class S5 extends dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){xu("startAt",this._value,t._path,!0);const e=ZL(t._queryParams,this._value,this._key);if(bM(e),Sp(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new jo(t._repo,t._path,e,t._orderByCalled)}}class Nae extends dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){xu("startAfter",this._value,t._path,!1);const e=function Use(n,t,e){let i;return i=ZL(n,t,n.index_===Su||e?e:th),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(bM(e),Sp(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new jo(t._repo,t._path,e,t._orderByCalled)}}class Lae extends dc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new jo(t._repo,t._path,function Bse(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Vae extends dc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new jo(t._repo,t._path,function Vse(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class Hae extends dc{constructor(t){super(),this._path=t}_apply(t){vM(t,"orderByChild");const e=new Wn(this._path);if(gn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new $L(e),r=Kx(t._queryParams,i);return Sp(r),new jo(t._repo,t._path,r,!0)}}class Gae extends dc{_apply(t){vM(t,"orderByKey");const e=Kx(t._queryParams,Su);return Sp(e),new jo(t._repo,t._path,e,!0)}}class $ae extends dc{_apply(t){vM(t,"orderByPriority");const e=Kx(t._queryParams,Ei);return Sp(e),new jo(t._repo,t._path,e,!0)}}class Wae extends dc{_apply(t){vM(t,"orderByValue");const e=Kx(t._queryParams,qL);return Sp(e),new jo(t._repo,t._path,e,!0)}}class Yae extends dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(xu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new I5(this._value,this._key)._apply(new S5(this._value,this._key)._apply(t))}}function hc(n,...t){let e=(0,V.m9)(n);for(const i of t)e=i._apply(e);return e}(function Moe(n){(0,V.hu)(!oM,"__referenceConstructor has already been defined"),oM=n})(el),function Poe(n){(0,V.hu)(!lM,"__referenceConstructor has already been defined"),lM=n}(el);const F2={};function M5(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Iu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),us("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,_,c=R2(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(f=!0,s=`http://${_}?ns=${d.namespace}`,c=R2(s,r),d=c.repoInfo):f=!c.repoInfo.secure;const b=r&&f?new HC(HC.OWNER):new zre(n.name,n.options,t);n5("Invalid Firebase Database URL",c),gn(c.path)||Iu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function ele(n,t,e,i){let r=F2[t.name];r||(r={},F2[t.name]=r);let s=r[n.toURLString()];return s&&Iu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new aae(n,false,e,i),r[n.toURLString()]=s,s}(d,n,b,new Gre(n.name,e));return new nle(D,n)}class nle{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function lae(n,t,e){if(n.stats_=FL(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Qx(n.repoInfo_,(i,r,s,c)=>{l5(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>c5(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Xg(n.repoInfo_,t,(i,r,s,c)=>{l5(n,i,r,s,c)},i=>{c5(n,i)},i=>{!function cae(n,t){ds(t,(e,i)=>{I2(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Wre(n,t){const e=n.toString();return NL[e]||(NL[e]=t()),NL[e]}(n.repoInfo_,()=>new Wse(n.stats_,n.server_)),n.infoData_=new jse,n.infoSyncTree_=new $q({startListening:(i,r,s,c)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=XC(n.infoSyncTree_,i._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),I2(n,"connected",!1),n.serverSyncTree_=new $q({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,f)=>{const _=c(d,f);ma(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new el(this._repo,Vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Xae(n,t){const e=F2[t];(!e||e[n.key]!==n)&&Iu(`Database ${t}(${n.repoInfo_}) has already been deleted.`),d5(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Iu("Cannot call "+t+" on a deleted database.")}}function A5(){Q4.IS_TRANSPORT_INITIALIZED&&Qs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ile(){A5(),vp.forceDisallow()}function rle(){A5(),Ov.forceDisallow(),vp.forceAllow()}function ale(n,t){k4(n,t)}const cle={".sv":"timestamp"};class hle{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Xg.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Xg.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function lle(n){I4(wn.SDK_VERSION),(0,wn._registerComponent)(new aa.wA("database",(t,{instanceIdentifier:e})=>M5(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,wn.registerVersion)(T4,"0.14.4",n),(0,wn.registerVersion)(T4,"0.14.4","esm2017")}();const gle=new No.Yd("@firebase/database-compat"),R5=function(n){gle.warn("FIREBASE WARNING: "+n)};class vle{constructor(t){this._delegate=t}cancel(t){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,R5("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class ble{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class xp{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),oE("DataSnapshot.child","path",t,!1),new xp(this._database,this._delegate.child(t))}hasChild(t){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),oE("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new xp(this._database,e)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new ga(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Rs{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",e,!1);const c=Rs.getCancelAndContextArgs_("Query.on",i,r),d=(_,b)=>{e.call(c.context,new xp(this.database,_),b)};d.userCallback=e,d.context=c.context;const f=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return N2(this._delegate,d,f),e;case"child_added":return w5(this._delegate,d,f),e;case"child_removed":return T5(this._delegate,d,f),e;case"child_changed":return C5(this._delegate,d,f),e;case"child_moved":return E5(this._delegate,d,f),e;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,V.Wj)("Query.off","callback",e,!0),(0,V.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,D5(this._delegate,t,r)}else D5(this._delegate,t)}get(){return Aae(this._delegate).then(t=>new xp(this.database,t))}once(t,e,i,r){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",e,!0);const s=Rs.getCancelAndContextArgs_("Query.once",i,r),c=new V.BH,d=(_,b)=>{const D=new xp(this.database,_);e&&e.call(s.context,D,b),c.resolve(D)};d.userCallback=e,d.context=s.context;const f=_=>{s.cancel&&s.cancel.call(s.context,_),c.reject(_)};switch(t){case"value":N2(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":w5(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":T5(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":C5(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":E5(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new Rs(this.database,hc(this._delegate,function Bae(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Lae(n)}(t)))}limitToLast(t){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new Rs(this.database,hc(this._delegate,function Uae(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Vae(n)}(t)))}orderByChild(t){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new Rs(this.database,hc(this._delegate,function jae(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oE("orderByChild","path",n,!1),new Hae(n)}(t)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new Rs(this.database,hc(this._delegate,function zae(){return new Gae}()))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new Rs(this.database,hc(this._delegate,function qae(){return new $ae}()))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new Rs(this.database,hc(this._delegate,function Zae(){return new Wae}()))}startAt(t=null,e){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new Rs(this.database,hc(this._delegate,function Pae(n=null,t){return sE("startAt","key",t,!0),new S5(n,t)}(t,e)))}startAfter(t=null,e){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new Rs(this.database,hc(this._delegate,function Fae(n,t){return sE("startAfter","key",t,!0),new Nae(n,t)}(t,e)))}endAt(t=null,e){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new Rs(this.database,hc(this._delegate,function kae(n,t){return sE("endAt","key",t,!0),new I5(n,t)}(t,e)))}endBefore(t=null,e){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new Rs(this.database,hc(this._delegate,function Oae(n,t){return sE("endBefore","key",t,!0),new Rae(n,t)}(t,e)))}equalTo(t,e){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new Rs(this.database,hc(this._delegate,function Kae(n,t){return sE("equalTo","key",t,!0),new Yae(n,t)}(t,e)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Rs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,V.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,V.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,V.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new ga(this.database,new el(this._delegate._repo,this._delegate._path))}}class ga extends Rs{constructor(t,e){super(t,new jo(e._repo,e._path,new Yx,!1)),this.database=t,this._delegate=e}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new ga(this.database,s_(this._delegate,t))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new ga(this.database,t):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new ga(this.database,this._delegate.root)}set(t,e){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",e,!0);const i=P2(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,R5("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xa("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",e,!0);const i=Mae(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function xae(n,t,e){if(Xa("setWithPriority",n._path),xu("setWithPriority",t,n._path,!1),D2("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new V.BH;return S2(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",t,!0);const e=function Iae(n){return Xa("remove",n._path),P2(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,V.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function fle(n,t,e){var i;if(n=(0,V.m9)(n),Xa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new V.BH,d=N2(n,()=>{});return function yae(n,t,e,i,r,s){Hv(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:x4(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=M2(n,t,void 0);c.currentInputSnapshot=d;const f=c.update(d.val());if(void 0===f)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{rE("transaction failed: Data returned ",f,c.path),c.status=0;const _=hM(n.transactionQueueTree_,t),b=i_(_)||[];let D;b.push(c),C2(_,b),"object"==typeof f&&null!==f&&(0,V.r3)(f,".priority")?(D=(0,V.DV)(f,".priority"),(0,V.hu)(iE(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(uM(n.serverSyncTree_,t)||sn.EMPTY_NODE).getPriority().val();const M=aE(n),R=Ji(f,D),U=v2(R,d,M);c.currentOutputSnapshotRaw=R,c.currentOutputSnapshotResolved=U,c.currentWriteId=gM(n);const q=h2(n.serverSyncTree_,t,U,c.currentWriteId,c.applyLocally);ma(n.eventQueue_,t,q),_M(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(f,_,b)=>{let D=null;f?s.reject(f):(D=new r_(b,new el(n._repo,n._path),Ei),s.resolve(new hle(_,D)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new ble(s.committed,new xp(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",e,!0);const i=function Sae(n,t){n=(0,V.m9)(n),Xa("setPriority",n._path),D2("setPriority",t,!1);const e=new V.BH;return S2(n._repo,zi(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",e,!0);const i=function Dae(n,t){n=(0,V.m9)(n),Xa("push",n._path),xu("push",t,n._path,!0);const e=a5(n._repo),i=Tae(e),r=s_(n,i),s=s_(n,i);let c;return c=null!=t?P2(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new ga(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new ga(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Xa("Reference.onDisconnect",this._delegate._path),new vle(new y5(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uE{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:ile,forceLongPolling:rle}}useEmulator(t,e,i={}){!function k5(n,t,e,i={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Iu("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Iu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new HC(HC.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,V.Sg)(i.mockUserToken,n.app.options.projectId);s=new HC(c)}!function Jae(n,t,e,i){n.repoInfo_=new OL(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,V.Dv)("database.ref",0,1,arguments.length),t instanceof ga){const e=b5(this._delegate,t.toString());return new ga(this,e)}{const e=v5(this._delegate,t);return new ga(this,e)}}refFromURL(t){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const i=b5(this._delegate,t);return new ga(this,i)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function sle(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),d5(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function ole(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function _ae(n){n.persistentConnection_&&n.persistentConnection_.resume(o5)}(n._repo)}(this._delegate)}}uE.ServerValue={TIMESTAMP:function ule(){return cle}(),increment:n=>function dle(n){return{".sv":{increment:n}}}(n)};var Cle=Object.freeze({__proto__:null,initStandalone:function wle({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){I4(e);const c=new aa.zt("auth-internal",new aa.H0("database-standalone"));return c.setComponent(new aa.wA("auth-internal",()=>i,"PRIVATE")),{instance:new uE(M5(n,c,void 0,t,s),n),namespace:r}}});const Ele=uE.ServerValue;function O5(n){return null==n}function P5(n){return"function"==typeof n.set}function N5(n,t){return P5(t)?t:n.ref(t)}function F5(n,t){if(function Dle(n){return"string"==typeof n}(n))return t.stringCase();if(P5(n))return t.firebaseCase();if(function Ile(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function dE(n,t,e="on",i=zm.z){return new nr.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,pt.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,W1.B)())}function L5(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function Mle(n,t){const{payload:e,prevKey:i,key:r}=t,s=L5(n,r),c=function xle(n,t){if(O5(t))return 0;{const e=L5(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(f=>{const _={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(f=>f.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function B5(n){return(O5(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function V5(n,t,e){return function Sle(n,t,e){return dE(n,"value","once",e).pipe(di(i=>{const r=[ct(i)];return t.forEach(s=>r.push(dE(n,s,"on",e))),(0,hr.T)(...r).pipe(af(Mle,[]))}),$m())}(n,t=B5(t),e)}function U5(n,t,e){const i=(t=B5(t)).map(r=>dE(n,r,"on",e));return(0,hr.T)(...i)}function H5(n,t){return function(i,r){return F5(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function Ole(n){return function(e){return e?F5(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function j5(n,t){return function(){return dE(n,"value","on",t)}}!function Tle(n){n.INTERNAL.registerComponent(new aa.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new uE(r,i)},"PUBLIC").setServiceProps({Reference:ga,Query:Rs,Database:uE,DataSnapshot:xp,enableLogging:ale,INTERNAL:Cle,ServerValue:Ele}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(cL.Z);const Fle=new o.OlP("angularfire2.realtimeDatabaseURL"),Lle=new o.OlP("angularfire2.database.use-emulator");let Ble=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,D,M,R,U,q,J){this.schedulers=d;const we=f,He=(0,Vr.on)(e,c,i);_&&EO(He,c,b,M,R,U,D,q),this.database=(0,Vr.cc)(`${He.name}.database.${r}`,"AngularFireDatabase",He.name,()=>{const Ge=c.runOutsideAngular(()=>He.database(r||void 0));return we&&Ge.useEmulator(...we),Ge},[we])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>N5(this.database,e));let s=r;return i&&(s=i(r)),function Ple(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:H5(i,"update"),set:H5(i,"set"),push:r=>i.push(r),remove:Ole(i),snapshotChanges:r=>V5(n,r,e).pipe(Bn.iC),stateChanges:r=>U5(n,r,e).pipe(Bn.iC),auditTrail:r=>function Ale(n,t,e){return function Rle(n,t,e){return function kle(n,t){return dE(n,"value","on",t).pipe((0,pt.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function Mre(...n){const t=(0,La.jO)(n);return(0,Hi.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let f=0;f<r;f++)(0,Ed.Xf)(n[f]).subscribe((0,bi.x)(i,_=>{s[f]=_,!d&&!c[f]&&(c[f]=!0,(d=c.every(nf.y))&&(c=null))},Pf.Z));e.subscribe((0,bi.x)(i,f=>{if(d){const _=[f,...s];i.next(t?t(..._):_)}}))})}(t),(0,pt.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function Are(n){return(0,Hi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,bi.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,pt.U)(r=>r.actions))}(n,U5(n,t).pipe(af((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Bn.iC),valueChanges:(r,s)=>V5(n,r,e).pipe((0,pt.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),Bn.iC)}}(s,this)}object(e){return function Nle(n,t){return{query:n,snapshotChanges:()=>j5(n,t.schedulers.outsideAngular)().pipe(Bn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>j5(n,t.schedulers.outsideAngular)().pipe(Bn.iC,(0,pt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>N5(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Vr.Dh),o.LFG(Vr.xv,8),o.LFG(Fle,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Bn.HU),o.LFG(Lle,8),o.LFG(hw,8),o.LFG(_O,8),o.LFG(yO,8),o.LFG(vO,8),o.LFG(bO,8),o.LFG(wO,8),o.LFG(CO,8),o.LFG(dw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Vle=(()=>{class n{constructor(){FI.Z.registerVersion("angularfire",Bn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Ble]}),n})();const G5_firebase={apiKey:"AIzaSyAUC8jWcMouoMf44mchOeirYwyilHKJQlQ",authDomain:"secret-santa-v1.firebaseapp.com",projectId:"secret-santa-v1",storageBucket:"secret-santa-v1.appspot.com",messagingSenderId:"936180318357",appId:"1:936180318357:web:e188f56cbc95ab13d69b9c",measurementId:"G-9HFTY3QD7B"};let Ule=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[Ete]}),n.\u0275inj=o.cJS({imports:[Tl,Cte,dy,wne,zQ,l8,Vr.hO.initializeApp(G5_firebase),Vne,dZ,xre,Vle,NE]}),n})();(0,o.G48)(),td().bootstrapModule(Ule).catch(n=>console.error(n))},9751:(Ct,Oe,H)=>{H.d(Oe,{y:()=>be});var o=H(930),z=H(727),N=H(8822),ae=H(9635),fe=H(2416),ye=H(576),se=H(2806);let be=(()=>{class ne{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const xe=new ne;return xe.source=this,xe.operator=Fe,xe}subscribe(Fe,xe,rt){const Ee=function Z(ne){return ne&&ne instanceof o.Lv||function Y(ne){return ne&&(0,ye.m)(ne.next)&&(0,ye.m)(ne.error)&&(0,ye.m)(ne.complete)}(ne)&&(0,z.Nn)(ne)}(Fe)?Fe:new o.Hp(Fe,xe,rt);return(0,se.x)(()=>{const{operator:ve,source:wt}=this;Ee.add(ve?ve.call(Ee,wt):wt?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(xe){Fe.error(xe)}}forEach(Fe,xe){return new(xe=Ce(xe))((rt,Ee)=>{const ve=new o.Hp({next:wt=>{try{Fe(wt)}catch(yt){Ee(yt),ve.unsubscribe()}},error:Ee,complete:rt});this.subscribe(ve)})}_subscribe(Fe){var xe;return null===(xe=this.source)||void 0===xe?void 0:xe.subscribe(Fe)}[N.L](){return this}pipe(...Fe){return(0,ae.U)(Fe)(this)}toPromise(Fe){return new(Fe=Ce(Fe))((xe,rt)=>{let Ee;this.subscribe(ve=>Ee=ve,ve=>rt(ve),()=>xe(Ee))})}}return ne.create=$e=>new ne($e),ne})();function Ce(ne){var $e;return null!==($e=ne??fe.v.Promise)&&void 0!==$e?$e:Promise}},7579:(Ct,Oe,H)=>{H.d(Oe,{x:()=>se});var o=H(9751),z=H(727);const ae=(0,H(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=H(8737),ye=H(2806);let se=(()=>{class Ce extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const ne=new be(this,this);return ne.operator=Z,ne}_throwIfClosed(){if(this.closed)throw new ae}next(Z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(Z)}})}error(Z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:ne}=this;for(;ne.length;)ne.shift().error(Z)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:ne,isStopped:$e,observers:Fe}=this;return ne||$e?z.Lc:(this.currentObservers=null,Fe.push(Z),new z.w0(()=>{this.currentObservers=null,(0,fe.P)(Fe,Z)}))}_checkFinalizedStatuses(Z){const{hasError:ne,thrownError:$e,isStopped:Fe}=this;ne?Z.error($e):Fe&&Z.complete()}asObservable(){const Z=new o.y;return Z.source=this,Z}}return Ce.create=(Y,Z)=>new be(Y,Z),Ce})();class be extends se{constructor(Y,Z){super(),this.destination=Y,this.source=Z}next(Y){var Z,ne;null===(ne=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===ne||ne.call(Z,Y)}error(Y){var Z,ne;null===(ne=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===ne||ne.call(Z,Y)}complete(){var Y,Z;null===(Z=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===Z||Z.call(Y)}_subscribe(Y){var Z,ne;return null!==(ne=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(Y))&&void 0!==ne?ne:z.Lc}}},930:(Ct,Oe,H)=>{H.d(Oe,{Hp:()=>rt,Lv:()=>ne});var o=H(576),z=H(727),N=H(2416),ae=H(7849),fe=H(5032);const ye=Ce("C",void 0,void 0);function Ce(Ae,Ie,ke){return{kind:Ae,value:Ie,error:ke}}var Y=H(3410),Z=H(2806);class ne extends z.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,z.Nn)(Ie)&&Ie.add(this)):this.destination=yt}static create(Ie,ke,qe){return new rt(Ie,ke,qe)}next(Ie){this.isStopped?wt(function be(Ae){return Ce("N",Ae,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?wt(function se(Ae){return Ce("E",void 0,Ae)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?wt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Fe(Ae,Ie){return $e.call(Ae,Ie)}class xe{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:ke}=this;if(ke.next)try{ke.next(Ie)}catch(qe){Ee(qe)}}error(Ie){const{partialObserver:ke}=this;if(ke.error)try{ke.error(Ie)}catch(qe){Ee(qe)}else Ee(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(ke){Ee(ke)}}}class rt extends ne{constructor(Ie,ke,qe){let Ze;if(super(),(0,o.m)(Ie)||!Ie)Ze={next:Ie??void 0,error:ke??void 0,complete:qe??void 0};else{let he;this&&N.v.useDeprecatedNextContext?(he=Object.create(Ie),he.unsubscribe=()=>this.unsubscribe(),Ze={next:Ie.next&&Fe(Ie.next,he),error:Ie.error&&Fe(Ie.error,he),complete:Ie.complete&&Fe(Ie.complete,he)}):Ze=Ie}this.destination=new xe(Ze)}}function Ee(Ae){N.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(Ae):(0,ae.h)(Ae)}function wt(Ae,Ie){const{onStoppedNotification:ke}=N.v;ke&&Y.z.setTimeout(()=>ke(Ae,Ie))}const yt={closed:!0,next:fe.Z,error:function ve(Ae){throw Ae},complete:fe.Z}},727:(Ct,Oe,H)=>{H.d(Oe,{Lc:()=>ye,w0:()=>fe,Nn:()=>se});var o=H(576);const N=(0,H(3888).d)(Ce=>function(Z){Ce(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((ne,$e)=>`${$e+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var ae=H(8737);class fe{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Fe of Z)Fe.remove(this);else Z.remove(this);const{initialTeardown:ne}=this;if((0,o.m)(ne))try{ne()}catch(Fe){Y=Fe instanceof N?Fe.errors:[Fe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Fe of $e)try{be(Fe)}catch(xe){Y=Y??[],xe instanceof N?Y=[...Y,...xe.errors]:Y.push(xe)}}if(Y)throw new N(Y)}}add(Y){var Z;if(Y&&Y!==this)if(this.closed)be(Y);else{if(Y instanceof fe){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(Y)}}_hasParent(Y){const{_parentage:Z}=this;return Z===Y||Array.isArray(Z)&&Z.includes(Y)}_addParent(Y){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(Y),Z):Z?[Z,Y]:Y}_removeParent(Y){const{_parentage:Z}=this;Z===Y?this._parentage=null:Array.isArray(Z)&&(0,ae.P)(Z,Y)}remove(Y){const{_finalizers:Z}=this;Z&&(0,ae.P)(Z,Y),Y instanceof fe&&Y._removeParent(this)}}fe.EMPTY=(()=>{const Ce=new fe;return Ce.closed=!0,Ce})();const ye=fe.EMPTY;function se(Ce){return Ce instanceof fe||Ce&&"closed"in Ce&&(0,o.m)(Ce.remove)&&(0,o.m)(Ce.add)&&(0,o.m)(Ce.unsubscribe)}function be(Ce){(0,o.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(Ct,Oe,H)=>{H.d(Oe,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ct,Oe,H)=>{H.d(Oe,{E:()=>z});const z=new(H(9751).y)(fe=>fe.complete())},8996:(Ct,Oe,H)=>{H.d(Oe,{D:()=>Ie});var o=H(8421),z=H(5363),N=H(9468),ye=H(9751),be=H(2202),Ce=H(576),Y=H(9672);function ne(ke,qe){if(!ke)throw new Error("Iterable cannot be null");return new ye.y(Ze=>{(0,Y.f)(Ze,qe,()=>{const he=ke[Symbol.asyncIterator]();(0,Y.f)(Ze,qe,()=>{he.next().then(Je=>{Je.done?Ze.complete():Ze.next(Je.value)})},0,!0)})})}var $e=H(3670),Fe=H(8239),xe=H(1144),rt=H(6495),Ee=H(2206),ve=H(4532),wt=H(3260);function Ie(ke,qe){return qe?function Ae(ke,qe){if(null!=ke){if((0,$e.c)(ke))return function ae(ke,qe){return(0,o.Xf)(ke).pipe((0,N.R)(qe),(0,z.Q)(qe))}(ke,qe);if((0,xe.z)(ke))return function se(ke,qe){return new ye.y(Ze=>{let he=0;return qe.schedule(function(){he===ke.length?Ze.complete():(Ze.next(ke[he++]),Ze.closed||this.schedule())})})}(ke,qe);if((0,Fe.t)(ke))return function fe(ke,qe){return(0,o.Xf)(ke).pipe((0,N.R)(qe),(0,z.Q)(qe))}(ke,qe);if((0,Ee.D)(ke))return ne(ke,qe);if((0,rt.T)(ke))return function Z(ke,qe){return new ye.y(Ze=>{let he;return(0,Y.f)(Ze,qe,()=>{he=ke[be.h](),(0,Y.f)(Ze,qe,()=>{let Je,kt;try{({value:Je,done:kt}=he.next())}catch(vt){return void Ze.error(vt)}kt?Ze.complete():Ze.next(Je)},0,!0)}),()=>(0,Ce.m)(he?.return)&&he.return()})}(ke,qe);if((0,wt.L)(ke))return function yt(ke,qe){return ne((0,wt.Q)(ke),qe)}(ke,qe)}throw(0,ve.z)(ke)}(ke,qe):(0,o.Xf)(ke)}},8421:(Ct,Oe,H)=>{H.d(Oe,{Xf:()=>$e});var o=H(7582),z=H(1144),N=H(8239),ae=H(9751),fe=H(3670),ye=H(2206),se=H(4532),be=H(6495),Ce=H(3260),Y=H(576),Z=H(7849),ne=H(8822);function $e(Ae){if(Ae instanceof ae.y)return Ae;if(null!=Ae){if((0,fe.c)(Ae))return function Fe(Ae){return new ae.y(Ie=>{const ke=Ae[ne.L]();if((0,Y.m)(ke.subscribe))return ke.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,z.z)(Ae))return function xe(Ae){return new ae.y(Ie=>{for(let ke=0;ke<Ae.length&&!Ie.closed;ke++)Ie.next(Ae[ke]);Ie.complete()})}(Ae);if((0,N.t)(Ae))return function rt(Ae){return new ae.y(Ie=>{Ae.then(ke=>{Ie.closed||(Ie.next(ke),Ie.complete())},ke=>Ie.error(ke)).then(null,Z.h)})}(Ae);if((0,ye.D)(Ae))return ve(Ae);if((0,be.T)(Ae))return function Ee(Ae){return new ae.y(Ie=>{for(const ke of Ae)if(Ie.next(ke),Ie.closed)return;Ie.complete()})}(Ae);if((0,Ce.L)(Ae))return function wt(Ae){return ve((0,Ce.Q)(Ae))}(Ae)}throw(0,se.z)(Ae)}function ve(Ae){return new ae.y(Ie=>{(function yt(Ae,Ie){var ke,qe,Ze,he;return(0,o.mG)(this,void 0,void 0,function*(){try{for(ke=(0,o.KL)(Ae);!(qe=yield ke.next()).done;)if(Ie.next(qe.value),Ie.closed)return}catch(Je){Ze={error:Je}}finally{try{qe&&!qe.done&&(he=ke.return)&&(yield he.call(ke))}finally{if(Ze)throw Ze.error}}Ie.complete()})})(Ae,Ie).catch(ke=>Ie.error(ke))})}},6451:(Ct,Oe,H)=>{H.d(Oe,{T:()=>ye});var o=H(8189),z=H(8421),N=H(515),ae=H(3269),fe=H(8996);function ye(...se){const be=(0,ae.yG)(se),Ce=(0,ae._6)(se,1/0),Y=se;return Y.length?1===Y.length?(0,z.Xf)(Y[0]):(0,o.J)(Ce)((0,fe.D)(Y,be)):N.E}},5403:(Ct,Oe,H)=>{H.d(Oe,{x:()=>z});var o=H(930);function z(ae,fe,ye,se,be){return new N(ae,fe,ye,se,be)}class N extends o.Lv{constructor(fe,ye,se,be,Ce,Y){super(fe),this.onFinalize=Ce,this.shouldUnsubscribe=Y,this._next=ye?function(Z){try{ye(Z)}catch(ne){fe.error(ne)}}:super._next,this._error=be?function(Z){try{be(Z)}catch(ne){fe.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(Z){fe.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(Ct,Oe,H)=>{H.d(Oe,{U:()=>N});var o=H(4482),z=H(5403);function N(ae,fe){return(0,o.e)((ye,se)=>{let be=0;ye.subscribe((0,z.x)(se,Ce=>{se.next(ae.call(fe,Ce,be++))}))})}},8189:(Ct,Oe,H)=>{H.d(Oe,{J:()=>N});var o=H(5577),z=H(4671);function N(ae=1/0){return(0,o.z)(z.y,ae)}},5577:(Ct,Oe,H)=>{H.d(Oe,{z:()=>be});var o=H(4004),z=H(8421),N=H(4482),ae=H(9672),fe=H(5403),se=H(576);function be(Ce,Y,Z=1/0){return(0,se.m)(Y)?be((ne,$e)=>(0,o.U)((Fe,xe)=>Y(ne,Fe,$e,xe))((0,z.Xf)(Ce(ne,$e))),Z):("number"==typeof Y&&(Z=Y),(0,N.e)((ne,$e)=>function ye(Ce,Y,Z,ne,$e,Fe,xe,rt){const Ee=[];let ve=0,wt=0,yt=!1;const Ae=()=>{yt&&!Ee.length&&!ve&&Y.complete()},Ie=qe=>ve<ne?ke(qe):Ee.push(qe),ke=qe=>{Fe&&Y.next(qe),ve++;let Ze=!1;(0,z.Xf)(Z(qe,wt++)).subscribe((0,fe.x)(Y,he=>{$e?.(he),Fe?Ie(he):Y.next(he)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(ve--;Ee.length&&ve<ne;){const he=Ee.shift();xe?(0,ae.f)(Y,xe,()=>ke(he)):ke(he)}Ae()}catch(he){Y.error(he)}}))};return Ce.subscribe((0,fe.x)(Y,Ie,()=>{yt=!0,Ae()})),()=>{rt?.()}}(ne,$e,Ce,Z)))}},5363:(Ct,Oe,H)=>{H.d(Oe,{Q:()=>ae});var o=H(9672),z=H(4482),N=H(5403);function ae(fe,ye=0){return(0,z.e)((se,be)=>{se.subscribe((0,N.x)(be,Ce=>(0,o.f)(be,fe,()=>be.next(Ce),ye),()=>(0,o.f)(be,fe,()=>be.complete(),ye),Ce=>(0,o.f)(be,fe,()=>be.error(Ce),ye)))})}},3099:(Ct,Oe,H)=>{H.d(Oe,{B:()=>fe});var o=H(8421),z=H(7579),N=H(930),ae=H(4482);function fe(se={}){const{connector:be=(()=>new z.x),resetOnError:Ce=!0,resetOnComplete:Y=!0,resetOnRefCountZero:Z=!0}=se;return ne=>{let $e,Fe,xe,rt=0,Ee=!1,ve=!1;const wt=()=>{Fe?.unsubscribe(),Fe=void 0},yt=()=>{wt(),$e=xe=void 0,Ee=ve=!1},Ae=()=>{const Ie=$e;yt(),Ie?.unsubscribe()};return(0,ae.e)((Ie,ke)=>{rt++,!ve&&!Ee&&wt();const qe=xe=xe??be();ke.add(()=>{rt--,0===rt&&!ve&&!Ee&&(Fe=ye(Ae,Z))}),qe.subscribe(ke),!$e&&rt>0&&($e=new N.Hp({next:Ze=>qe.next(Ze),error:Ze=>{ve=!0,wt(),Fe=ye(yt,Ce,Ze),qe.error(Ze)},complete:()=>{Ee=!0,wt(),Fe=ye(yt,Y),qe.complete()}}),(0,o.Xf)(Ie).subscribe($e))})(ne)}}function ye(se,be,...Ce){if(!0===be)return void se();if(!1===be)return;const Y=new N.Hp({next:()=>{Y.unsubscribe(),se()}});return be(...Ce).subscribe(Y)}},9468:(Ct,Oe,H)=>{H.d(Oe,{R:()=>z});var o=H(4482);function z(N,ae=0){return(0,o.e)((fe,ye)=>{ye.add(N.schedule(()=>fe.subscribe(ye),ae))})}},8505:(Ct,Oe,H)=>{H.d(Oe,{b:()=>fe});var o=H(576),z=H(4482),N=H(5403),ae=H(4671);function fe(ye,se,be){const Ce=(0,o.m)(ye)||se||be?{next:ye,error:se,complete:be}:ye;return Ce?(0,z.e)((Y,Z)=>{var ne;null===(ne=Ce.subscribe)||void 0===ne||ne.call(Ce);let $e=!0;Y.subscribe((0,N.x)(Z,Fe=>{var xe;null===(xe=Ce.next)||void 0===xe||xe.call(Ce,Fe),Z.next(Fe)},()=>{var Fe;$e=!1,null===(Fe=Ce.complete)||void 0===Fe||Fe.call(Ce),Z.complete()},Fe=>{var xe;$e=!1,null===(xe=Ce.error)||void 0===xe||xe.call(Ce,Fe),Z.error(Fe)},()=>{var Fe,xe;$e&&(null===(Fe=Ce.unsubscribe)||void 0===Fe||Fe.call(Ce)),null===(xe=Ce.finalize)||void 0===xe||xe.call(Ce)}))}):ae.y}},4408:(Ct,Oe,H)=>{H.d(Oe,{o:()=>fe});var o=H(727);class z extends o.w0{constructor(se,be){super()}schedule(se,be=0){return this}}const N={setInterval(ye,se,...be){const{delegate:Ce}=N;return Ce?.setInterval?Ce.setInterval(ye,se,...be):setInterval(ye,se,...be)},clearInterval(ye){const{delegate:se}=N;return(se?.clearInterval||clearInterval)(ye)},delegate:void 0};var ae=H(8737);class fe extends z{constructor(se,be){super(se,be),this.scheduler=se,this.work=be,this.pending=!1}schedule(se,be=0){var Ce;if(this.closed)return this;this.state=se;const Y=this.id,Z=this.scheduler;return null!=Y&&(this.id=this.recycleAsyncId(Z,Y,be)),this.pending=!0,this.delay=be,this.id=null!==(Ce=this.id)&&void 0!==Ce?Ce:this.requestAsyncId(Z,this.id,be),this}requestAsyncId(se,be,Ce=0){return N.setInterval(se.flush.bind(se,this),Ce)}recycleAsyncId(se,be,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return be;null!=be&&N.clearInterval(be)}execute(se,be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(se,be);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,be){let Y,Ce=!1;try{this.work(se)}catch(Z){Ce=!0,Y=Z||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:se,scheduler:be}=this,{actions:Ce}=be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(Ce,this),null!=se&&(this.id=this.recycleAsyncId(be,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ct,Oe,H)=>{H.d(Oe,{v:()=>N});var o=H(6063);class z{constructor(fe,ye=z.now){this.schedulerActionCtor=fe,this.now=ye}schedule(fe,ye=0,se){return new this.schedulerActionCtor(this,fe).schedule(se,ye)}}z.now=o.l.now;class N extends z{constructor(fe,ye=z.now){super(fe,ye),this.actions=[],this._active=!1}flush(fe){const{actions:ye}=this;if(this._active)return void ye.push(fe);let se;this._active=!0;do{if(se=fe.execute(fe.state,fe.delay))break}while(fe=ye.shift());if(this._active=!1,se){for(;fe=ye.shift();)fe.unsubscribe();throw se}}}},4986:(Ct,Oe,H)=>{H.d(Oe,{P:()=>ae,z:()=>N});var o=H(4408);const N=new(H(7565).v)(o.o),ae=N},6063:(Ct,Oe,H)=>{H.d(Oe,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(Ct,Oe,H)=>{H.d(Oe,{z:()=>o});const o={setTimeout(z,N,...ae){const{delegate:fe}=o;return fe?.setTimeout?fe.setTimeout(z,N,...ae):setTimeout(z,N,...ae)},clearTimeout(z){const{delegate:N}=o;return(N?.clearTimeout||clearTimeout)(z)},delegate:void 0}},2202:(Ct,Oe,H)=>{H.d(Oe,{h:()=>z});const z=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ct,Oe,H)=>{H.d(Oe,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ct,Oe,H)=>{H.d(Oe,{_6:()=>ye,jO:()=>ae,yG:()=>fe});var o=H(576),z=H(3532);function N(se){return se[se.length-1]}function ae(se){return(0,o.m)(N(se))?se.pop():void 0}function fe(se){return(0,z.K)(N(se))?se.pop():void 0}function ye(se,be){return"number"==typeof N(se)?se.pop():be}},8737:(Ct,Oe,H)=>{function o(z,N){if(z){const ae=z.indexOf(N);0<=ae&&z.splice(ae,1)}}H.d(Oe,{P:()=>o})},3888:(Ct,Oe,H)=>{function o(z){const ae=z(fe=>{Error.call(fe),fe.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}H.d(Oe,{d:()=>o})},2806:(Ct,Oe,H)=>{H.d(Oe,{O:()=>ae,x:()=>N});var o=H(2416);let z=null;function N(fe){if(o.v.useDeprecatedSynchronousErrorHandling){const ye=!z;if(ye&&(z={errorThrown:!1,error:null}),fe(),ye){const{errorThrown:se,error:be}=z;if(z=null,se)throw be}}else fe()}function ae(fe){o.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=fe)}},9672:(Ct,Oe,H)=>{function o(z,N,ae,fe=0,ye=!1){const se=N.schedule(function(){ae(),ye?z.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(z.add(se),!ye)return se}H.d(Oe,{f:()=>o})},4671:(Ct,Oe,H)=>{function o(z){return z}H.d(Oe,{y:()=>o})},1144:(Ct,Oe,H)=>{H.d(Oe,{z:()=>o});const o=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(Ct,Oe,H)=>{H.d(Oe,{D:()=>z});var o=H(576);function z(N){return Symbol.asyncIterator&&(0,o.m)(N?.[Symbol.asyncIterator])}},576:(Ct,Oe,H)=>{function o(z){return"function"==typeof z}H.d(Oe,{m:()=>o})},3670:(Ct,Oe,H)=>{H.d(Oe,{c:()=>N});var o=H(8822),z=H(576);function N(ae){return(0,z.m)(ae[o.L])}},6495:(Ct,Oe,H)=>{H.d(Oe,{T:()=>N});var o=H(2202),z=H(576);function N(ae){return(0,z.m)(ae?.[o.h])}},8239:(Ct,Oe,H)=>{H.d(Oe,{t:()=>z});var o=H(576);function z(N){return(0,o.m)(N?.then)}},3260:(Ct,Oe,H)=>{H.d(Oe,{L:()=>ae,Q:()=>N});var o=H(7582),z=H(576);function N(fe){return(0,o.FC)(this,arguments,function*(){const se=fe.getReader();try{for(;;){const{value:be,done:Ce}=yield(0,o.qq)(se.read());if(Ce)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(be)}}finally{se.releaseLock()}})}function ae(fe){return(0,z.m)(fe?.getReader)}},3532:(Ct,Oe,H)=>{H.d(Oe,{K:()=>z});var o=H(576);function z(N){return N&&(0,o.m)(N.schedule)}},4482:(Ct,Oe,H)=>{H.d(Oe,{A:()=>z,e:()=>N});var o=H(576);function z(ae){return(0,o.m)(ae?.lift)}function N(ae){return fe=>{if(z(fe))return fe.lift(function(ye){try{return ae(ye,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ct,Oe,H)=>{function o(){}H.d(Oe,{Z:()=>o})},9635:(Ct,Oe,H)=>{H.d(Oe,{U:()=>N,z:()=>z});var o=H(4671);function z(...ae){return N(ae)}function N(ae){return 0===ae.length?o.y:1===ae.length?ae[0]:function(ye){return ae.reduce((se,be)=>be(se),ye)}}},7849:(Ct,Oe,H)=>{H.d(Oe,{h:()=>N});var o=H(2416),z=H(3410);function N(ae){z.z.setTimeout(()=>{const{onUnhandledError:fe}=o.v;if(!fe)throw ae;fe(ae)})}},4532:(Ct,Oe,H)=>{function o(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Oe,{z:()=>o})},4650:(Ct,Oe,H)=>{H.d(Oe,{$8M:()=>Ih,$Z:()=>Rb,AFp:()=>KD,ALo:()=>xD,AaK:()=>be,AsE:()=>Rf,BQk:()=>e0,CHM:()=>ju,CRH:()=>eg,CZH:()=>My,CqO:()=>t0,D6c:()=>T1,DdM:()=>Ym,EJc:()=>WR,EiD:()=>lb,EpF:()=>Ad,F$t:()=>Lm,F4k:()=>ek,FYo:()=>rf,FiY:()=>io,G48:()=>RV,Gf:()=>IR,GfV:()=>Va,GkF:()=>cy,Gpc:()=>Z,Gre:()=>gk,Hsn:()=>nk,Ikx:()=>QT,JOm:()=>Ts,JVY:()=>CE,KtG:()=>Tc,L6k:()=>RM,LAX:()=>EE,LFG:()=>Vi,LSH:()=>om,Lbi:()=>CV,Lck:()=>mD,MAs:()=>Qb,MMx:()=>E0,NdJ:()=>uy,O4$:()=>Lp,OlP:()=>En,Oqu:()=>kf,PXZ:()=>oI,Q6J:()=>Jb,QGY:()=>Nm,QP$:()=>Te,QbO:()=>JD,Qsj:()=>XM,R0b:()=>St,RDi:()=>IM,Rgc:()=>Xm,SBq:()=>cm,Sil:()=>eI,Suo:()=>PD,TTD:()=>Pu,TgZ:()=>Xb,Udp:()=>a0,VKq:()=>tc,WFA:()=>Fm,WLB:()=>hR,X6Q:()=>cI,XFs:()=>at,Xpm:()=>jn,Xts:()=>db,Y36:()=>oa,YKP:()=>pD,YNc:()=>Sf,Yjl:()=>B,Yz7:()=>Re,Z0I:()=>Rt,ZZ4:()=>$f,_Bn:()=>fD,_UZ:()=>Pm,_Vd:()=>lm,_c5:()=>C1,_uU:()=>d0,aQg:()=>X0,c2e:()=>$R,cJS:()=>Mt,cg1:()=>XT,d8E:()=>JT,dDg:()=>t1,dqk:()=>on,eBb:()=>OM,eFA:()=>z0,ekj:()=>qT,eoX:()=>n1,f3M:()=>Zp,g9A:()=>ag,h0i:()=>Ff,hGG:()=>E1,hij:()=>Hm,iGM:()=>OD,ifc:()=>It,ip1:()=>V0,jDz:()=>nR,kL8:()=>eD,kcU:()=>vh,lG2:()=>$,lqb:()=>Cd,lri:()=>XR,mCW:()=>sm,n5z:()=>Cl,n_E:()=>A0,oAB:()=>Bi,oxw:()=>LT,pB0:()=>PM,q3G:()=>vi,q4F:()=>Us,qLn:()=>hi,qOj:()=>qb,qZA:()=>ly,qzn:()=>Kh,rWj:()=>e1,sBO:()=>hg,sIi:()=>wf,s_b:()=>Iy,soG:()=>Ay,tb:()=>H0,tp0:()=>Pa,uIk:()=>IT,vHH:()=>xe,vpe:()=>ca,wAp:()=>Vt,xi3:()=>x0,xp6:()=>Cb,ynx:()=>Md,z2F:()=>dg,z3N:()=>jl,zSh:()=>Mn,zs3:()=>Xc});var o=H(7579),z=H(727),N=H(9751),ae=H(6451),fe=H(3099);function ye(a){for(let l in a)if(a[l]===ye)return l;throw Error("Could not find renamed property on target object.")}function se(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function be(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(be).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Ce(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const Y=ye({__forward_ref__:ye});function Z(a){return a.__forward_ref__=Z,a.toString=function(){return be(this())},a}function ne(a){return $e(a)?a():a}function $e(a){return"function"==typeof a&&a.hasOwnProperty(Y)&&a.__forward_ref__===Z}class xe extends Error{constructor(l,u){super(function rt(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,u)),this.code=l}}function Ee(a){return"string"==typeof a?a:null==a?"":String(a)}function Ie(a,l){throw new xe(-201,!1)}function ce(a,l){null==a&&function ie(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}(l,a,null,"!=")}function Re(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Mt(a){return{providers:a.providers||[],imports:a.imports||[]}}function en(a){return un(a,Pn)||un(a,Di)}function Rt(a){return null!==en(a)}function un(a,l){return a.hasOwnProperty(l)?a[l]:null}function oi(a){return a&&(a.hasOwnProperty(Xn)||a.hasOwnProperty(Gr))?a[Xn]:null}const Pn=ye({\u0275prov:ye}),Xn=ye({\u0275inj:ye}),Di=ye({ngInjectableDef:ye}),Gr=ye({ngInjectorDef:ye});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let Li;function ai(a){const l=Li;return Li=a,l}function fs(a,l,u){const h=en(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&at.Optional?null:void 0!==l?l:void Ie(be(a))}function Zn(a){return{toString:a}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),It=(()=>{return(a=It||(It={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",It;var a})();const on=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),gi={},Ot=[],ei=ye({\u0275cmp:ye}),Wt=ye({\u0275dir:ye}),ps=ye({\u0275pipe:ye}),an=ye({\u0275mod:ye}),ti=ye({\u0275fac:ye}),xn=ye({__NG_ELEMENT_ID__:ye});let _i=0;function jn(a){return Zn(()=>{const u=!0===a.standalone,h={},p={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||Ot,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||It.Emulated,id:"c"+_i++,styles:a.styles||Ot,_:null,setInput:null,schemas:a.schemas||null,tView:null},g=a.dependencies,v=a.features;return p.inputs=W(a.inputs,h),p.outputs=W(a.outputs),v&&v.forEach(T=>T(p)),p.directiveDefs=g?()=>("function"==typeof g?g():g).map(yi).filter(zr):null,p.pipeDefs=g?()=>("function"==typeof g?g():g).map(ee).filter(zr):null,p})}function yi(a){return L(a)||O(a)}function zr(a){return null!==a}function Bi(a){return Zn(()=>({type:a.type,bootstrap:a.bootstrap||Ot,declarations:a.declarations||Ot,imports:a.imports||Ot,exports:a.exports||Ot,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function W(a,l){if(null==a)return gi;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],g=p;Array.isArray(p)&&(g=p[1],p=p[0]),u[p]=h,l&&(l[p]=g)}return u}const $=jn;function B(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function L(a){return a[ei]||null}function O(a){return a[Wt]||null}function ee(a){return a[ps]||null}function Te(a){const l=L(a)||O(a)||ee(a);return null!==l&&l.standalone}function Qe(a,l){const u=a[an]||null;if(!u&&!0===l)throw new Error(`Type ${be(a)} does not have '\u0275mod' property.`);return u}function $i(a){return Array.isArray(a)&&"object"==typeof a[1]}function ur(a){return Array.isArray(a)&&!0===a[1]}function $o(a){return 0!=(8&a.flags)}function gs(a){return 2==(2&a.flags)}function ba(a){return 1==(1&a.flags)}function qr(a){return null!==a.template}function rl(a){return 0!=(256&a[2])}function Wo(a,l){return a.hasOwnProperty(ti)?a[ti]:null}class _s{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Pu(){return _c}function _c(a){return a.type.prototype.ngOnChanges&&(a.setInput=ol),Nu}function Nu(){const a=Fu(this),l=a?.current;if(l){const u=a.previous;if(u===gi)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function ol(a,l,u,h){const p=Fu(a)||function Wr(a,l){return a[dh]=l}(a,{previous:gi,current:null}),g=p.current||(p.current={}),v=p.previous,T=this.declaredInputs[u],I=v[T];g[T]=new _s(I&&I.currentValue,l,v===gi),a[h]=l}Pu.ngInherit=!0;const dh="__ngSimpleChanges__";function Fu(a){return a[dh]||null}function Rn(a){for(;Array.isArray(a);)a=a[0];return a}function Zo(a,l){return Rn(l[a])}function xr(a,l){return Rn(l[a.index])}function vc(a,l){return a.data[l]}function ys(a,l){return a[l]}function tr(a,l){const u=l[a];return $i(u)?u:u[0]}function bc(a){return 64==(64&a[2])}function Zr(a,l){return null==l?null:a[l]}function qi(a){a[18]=0}function Ca(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const Ft={lFrame:fl(null),bindingsEnabled:!0};function Cc(){return Ft.bindingsEnabled}function Pe(){return Ft.lFrame.lView}function rn(){return Ft.lFrame.tView}function ju(a){return Ft.lFrame.contextLView=a,a[8]}function Tc(a){return Ft.lFrame.contextLView=null,a}function ci(){let a=ll();for(;null!==a&&64===a.type;)a=a.parent;return a}function ll(){return Ft.lFrame.currentTNode}function Yr(a,l){const u=Ft.lFrame;u.currentTNode=a,u.isParent=l}function cl(){return Ft.lFrame.isParent}function Dc(){Ft.lFrame.isParent=!1}function Mr(){const a=Ft.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Yo(){return Ft.lFrame.bindingIndex++}function kr(a){const l=Ft.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function gh(a,l){const u=Ft.lFrame;u.bindingIndex=u.bindingRootIndex=a,dl(l)}function dl(a){Ft.lFrame.currentDirectiveIndex=a}function zu(a){const l=Ft.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Ea(){return Ft.lFrame.currentQueryIndex}function br(a){Ft.lFrame.currentQueryIndex=a}function Sc(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function $u(a,l,u){if(u&at.SkipSelf){let p=l,g=a;for(;!(p=p.parent,null!==p||u&at.Host||(p=Sc(g),null===p||(g=g[15],10&p.type))););if(null===p)return!1;l=p,a=g}const h=Ft.lFrame=hl();return h.currentTNode=l,h.lView=a,!0}function Ko(a){const l=hl(),u=a[1];Ft.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function hl(){const a=Ft.lFrame,l=null===a?null:a.child;return null===l?fl(a):l}function fl(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function qu(){const a=Ft.lFrame;return Ft.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const _h=qu;function wo(){const a=qu();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function _n(){return Ft.lFrame.selectedIndex}function Qo(a){Ft.lFrame.selectedIndex=a}function Fn(){const a=Ft.lFrame;return vc(a.tView,a.selectedIndex)}function Lp(){Ft.lFrame.currentNamespace="svg"}function vh(){!function Mc(){Ft.lFrame.currentNamespace=null}()}function ml(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const g=a.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:T,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:P}=g;v&&(a.contentHooks||(a.contentHooks=[])).push(-u,v),T&&((a.contentHooks||(a.contentHooks=[])).push(u,T),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,T)),I&&(a.viewHooks||(a.viewHooks=[])).push(-u,I),x&&((a.viewHooks||(a.viewHooks=[])).push(u,x),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,x)),null!=P&&(a.destroyHooks||(a.destroyHooks=[])).push(u,P)}}function Jo(a,l,u){Wu(a,l,3,u)}function Ac(a,l,u,h){(3&a[2])===u&&Wu(a,l,u,h)}function kc(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function Wu(a,l,u,h){const g=h??-1,v=l.length-1;let T=0;for(let I=void 0!==h?65535&a[18]:0;I<v;I++)if("number"==typeof l[I+1]){if(T=l[I],null!=h&&T>=h)break}else l[I]<0&&(a[18]+=65536),(T<g||-1==g)&&(Bp(a,u,l,I),a[18]=(4294901760&a[18])+I+2),I++}function Bp(a,l,u,h){const p=u[h]<0,g=u[h+1],T=a[p?-u[h]:u[h]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{g.call(T)}finally{}}}else try{g.call(T)}finally{}}class Ta{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Yu(a,l,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const g=u[h++],v=u[h++],T=u[h++];a.setAttribute(l,v,T,g)}else{const g=p,v=u[++h];Th(g)?a.setProperty(l,g,v):a.setAttribute(l,g,v),h++}}return h}function Oc(a){return 3===a||4===a||6===a}function Th(a){return 64===a.charCodeAt(0)}function Ia(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?u=p:0===u||Up(a,u,p,null,-1===u||2===u?l[++h]:null)}}return a}function Up(a,l,u,h,p){let g=0,v=a.length;if(-1===l)v=-1;else for(;g<a.length;){const T=a[g++];if("number"==typeof T){if(T===l){v=-1;break}if(T>l){v=g-1;break}}}for(;g<a.length;){const T=a[g];if("number"==typeof T)break;if(T===u){if(null===h)return void(null!==p&&(a[g+1]=p));if(h===a[g+1])return void(a[g+2]=p)}g++,null!==h&&g++,null!==p&&g++}-1!==v&&(a.splice(v,0,l),g=v+1),a.splice(g++,0,u),null!==h&&a.splice(g++,0,h),null!==p&&a.splice(g++,0,p)}function Ku(a){return-1!==a}function gl(a){return 32767&a}function Fs(a,l){let u=function Hp(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let Co=!0;function Rr(a){const l=Co;return Co=a,l}let _l=0;const bs={};function Sa(a,l){const u=ea(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,yl(h.data,a),yl(l,null),yl(h.blueprint,null));const p=vl(a,l),g=a.injectorIndex;if(Ku(p)){const v=gl(p),T=Fs(p,l),I=T[1].data;for(let x=0;x<8;x++)l[g+x]=T[v+x]|I[v+x]}return l[g+8]=p,g}function yl(a,l){a.push(0,0,0,0,0,0,0,0,l)}function ea(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function vl(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=l;for(;null!==p;){if(h=ed(p),null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function To(a,l,u){!function Nc(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(xn)&&(h=u[xn]),null==h&&(h=u[xn]=_l++);const p=255&h;l.data[a+(p>>5)]|=1<<p}(a,l,u)}function Ju(a,l,u){if(u&at.Optional||void 0!==a)return a;Ie()}function jp(a,l,u,h){if(u&at.Optional&&void 0===h&&(h=null),0==(u&(at.Self|at.Host))){const p=a[9],g=ai(void 0);try{return p?p.get(l,h,u&at.Optional):fs(l,h,u&at.Optional)}finally{ai(g)}}return Ju(h,0,u)}function xa(a,l,u,h=at.Default,p){if(null!==a){if(1024&l[2]){const v=function Xu(a,l,u,h,p){let g=a,v=l;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const T=wl(g,v,u,h|at.Self,bs);if(T!==bs)return T;let I=g.parent;if(!I){const x=v[21];if(x){const P=x.get(u,bs,h);if(P!==bs)return P}I=ed(v),v=v[15]}g=I}return p}(a,l,u,h,bs);if(v!==bs)return v}const g=wl(a,l,u,h,bs);if(g!==bs)return g}return jp(l,u,h,p)}function wl(a,l,u,h,p){const g=function d_(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(xn)?a[xn]:void 0;return"number"==typeof l?l>=0?255&l:Si:l}(u);if("function"==typeof g){if(!$u(l,a,h))return h&at.Host?Ju(p,0,h):jp(l,u,h,p);try{const v=g(h);if(null!=v||h&at.Optional)return v;Ie()}finally{_h()}}else if("number"==typeof g){let v=null,T=ea(a,l),I=-1,x=h&at.Host?l[16][6]:null;for((-1===T||h&at.SkipSelf)&&(I=-1===T?vl(a,l):l[T+8],-1!==I&&Io(h,!1)?(v=l[1],T=gl(I),l=Fs(I,l)):T=-1);-1!==T;){const P=l[1];if(Gp(g,T,P.data)){const G=Dh(T,l,u,v,h,x);if(G!==bs)return G}I=l[T+8],-1!==I&&Io(h,l[1].data[T+8]===x)&&Gp(g,T,l)?(v=P,T=gl(I),l=Fs(I,l)):T=-1}}return p}function Dh(a,l,u,h,p,g){const v=l[1],T=v.data[a+8],P=Ma(T,v,u,null==h?gs(T)&&Co:h!=v&&0!=(3&T.type),p&at.Host&&g===T);return null!==P?Do(l,v,P,T):bs}function Ma(a,l,u,h,p){const g=a.providerIndexes,v=l.data,T=1048575&g,I=a.directiveStart,P=g>>20,Q=p?T+P:a.directiveEnd;for(let re=h?T:T+P;re<Q;re++){const Se=v[re];if(re<I&&u===Se||re>=I&&Se.type===u)return re}if(p){const re=v[I];if(re&&qr(re)&&re.type===u)return I}return null}function Do(a,l,u,h){let p=a[u];const g=l.data;if(function wh(a){return a instanceof Ta}(p)){const v=p;v.resolving&&function wt(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new xe(-200,`Circular dependency in DI detected for ${a}${u}`)}(function ve(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Ee(a)}(g[u]));const T=Rr(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?ai(v.injectImpl):null;$u(a,h,at.Default);try{p=a[u]=v.factory(void 0,g,a,h),l.firstCreatePass&&u>=h.directiveStart&&function pl(a,l,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:g}=l.type.prototype;if(h){const v=_c(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,v)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,p),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,g))}(u,g[u],l)}finally{null!==I&&ai(I),Rr(T),v.resolving=!1,_h()}}return p}function Gp(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function Io(a,l){return!(a&at.Self||a&at.Host&&l)}class Aa{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return xa(this._tNode,this._lView,l,h,u)}}function Si(){return new Aa(ci(),Pe())}function Cl(a){return Zn(()=>{const l=a.prototype.constructor,u=l[ti]||El(l),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const g=p[ti]||El(p);if(g&&g!==u)return g;p=Object.getPrototypeOf(p)}return g=>new g})}function El(a){return $e(a)?()=>{const l=El(ne(a));return l&&l()}:Wo(a)}function ed(a){const l=a[1],u=l.type;return 2===u?l.declTNode:1===u?a[6]:null}function Ih(a){return function bl(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const g=u[p];if(Oc(g))break;if(0===g)p+=2;else if("number"==typeof g)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(g===l)return u[p+1];p+=2}}}return null}(ci(),a)}const Kn="__parameters__";function Kr(a,l,u){return Zn(()=>{const h=function Fc(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(l);function p(...g){if(this instanceof p)return h.apply(this,g),this;const v=new p(...g);return T.annotation=v,T;function T(I,x,P){const G=I.hasOwnProperty(Kn)?I[Kn]:Object.defineProperty(I,Kn,{value:[]})[Kn];for(;G.length<=P;)G.push(null);return(G[P]=G[P]||[]).push(v),I}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class En{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Re({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Wi(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let h=a[u];Array.isArray(h)?(l===a&&(l=a.slice(0,u)),Wi(h,l)):l!==a&&l.push(h)}return l}function ws(a,l){a.forEach(u=>Array.isArray(u)?ws(u,l):l(u))}function nd(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Dl(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Hc(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function Or(a,l,u){let h=ta(a,l);return h>=0?a[1|h]=u:(h=~h,function p_(a,l,u,h){let p=a.length;if(p==l)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function jc(a,l){const u=ta(a,l);if(u>=0)return a[1|u]}function ta(a,l){return function rd(a,l,u){let h=0,p=a.length>>u;for(;p!==h;){const g=h+(p-h>>1),v=a[g<<u];if(l===v)return g<<u;v>l?p=g:h=g+1}return~(p<<u)}(a,l,1)}const Gn={},ri="__NG_DI_FLAG__",wr="ngTempTokenPath",Jt=/\n/gm,zc="__source";let zn;function Cr(a){const l=zn;return zn=a,l}function na(a,l=at.Default){if(void 0===zn)throw new xe(-203,!1);return null===zn?fs(a,void 0,l):zn.get(a,l&at.Optional?null:void 0,l)}function Vi(a,l=at.Default){return(function mi(){return Li}()||na)(ne(a),l)}function Zp(a,l=at.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),Vi(a,l)}function xl(a){const l=[];for(let u=0;u<a.length;u++){const h=ne(a[u]);if(Array.isArray(h)){if(0===h.length)throw new xe(900,!1);let p,g=at.Default;for(let v=0;v<h.length;v++){const T=h[v],I=Ph(T);"number"==typeof I?-1===I?p=T.token:g|=I:p=T}l.push(Vi(p,g))}else l.push(Vi(h))}return l}function Cs(a,l){return a[ri]=l,a.prototype[ri]=l,a}function Ph(a){return a[ri]}const io=Cs(Kr("Optional"),8),Pa=Cs(Kr("SkipSelf"),4);var Ts=(()=>((Ts=Ts||{})[Ts.Important=1]="Important",Ts[Ts.DashCase=2]="DashCase",Ts))();const j=new Map;let K=0;const si="__ngContext__";function ui(a,l){$i(l)?(a[si]=l[20],function _e(a){j.set(a[20],a)}(l)):a[si]=l}function Qp(a,l){return undefined(a,l)}function Yc(a){const l=a[3];return ur(l)?l[3]:l}function Wh(a){return m(a[13])}function w(a){return m(a[4])}function m(a){for(;null!==a&&!ur(a);)a=a[4];return a}function E(a,l,u,h,p){if(null!=h){let g,v=!1;ur(h)?g=h:$i(h)&&(v=!0,h=h[0]);const T=Rn(h);0===a&&null!==u?null==p?em(l,u,T):Vs(l,u,T,p||null,!0):1===a&&null!==u?Vs(l,u,T,p||null,!0):2===a?function Jv(a,l,u){const h=vd(a,l);h&&function tm(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}(l,T,v):3===a&&l.destroyNode(T),null!=g&&function EM(a,l,u,h,p){const g=u[7];g!==Rn(u)&&E(l,a,h,g,p);for(let T=10;T<u.length;T++){const I=u[T];bd(I[1],I,a,l,h,g)}}(l,a,g,u,p)}}function pe(a,l,u){return a.createElement(l,u)}function Kc(a,l){const u=a[9],h=u.indexOf(l),p=l[3];512&l[2]&&(l[2]&=-513,Ca(p,-1)),u.splice(h,1)}function Bl(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const p=h[17];null!==p&&p!==a&&Kc(p,h),l>0&&(a[u-1][4]=h[4]);const g=Dl(a,10+l);!function We(a,l){bd(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const v=g[19];null!==v&&v.detachView(g[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Vl(a,l){if(!(128&l[2])){const u=l[11];u.destroyNode&&bd(a,l,u,3,null,null),function hn(a){let l=a[13];if(!l)return Zh(a[1],a);for(;l;){let u=null;if($i(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)$i(l)&&Zh(l[1],l),l=l[3];null===l&&(l=a),$i(l)&&Zh(l[1],l),u=l&&l[4]}l=u}}(l)}}function Zh(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function Xp(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=l[u[h]];if(!(p instanceof Ta)){const g=u[h+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const T=p[g[v]],I=g[v+1];try{I.call(T)}finally{}}else try{g.call(p)}finally{}}}}(a,l),function C_(a,l){const u=a.cleanup,h=l[7];let p=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],T="function"==typeof v?v(l):Rn(l[v]),I=h[p=u[g+2]],x=u[g+3];"boolean"==typeof x?T.removeEventListener(u[g],I,x):x>=0?h[p=x]():h[p=-x].unsubscribe(),g+=2}else{const v=h[p=u[g+1]];u[g].call(v)}if(null!==h){for(let g=p+1;g<h.length;g++)(0,h[g])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const u=l[17];if(null!==u&&ur(l[3])){u!==l[3]&&Kc(u,l);const h=l[19];null!==h&&h.detachView(a)}!function Ke(a){j.delete(a[20])}(l)}}function E_(a,l,u){return function T_(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];if(2&h.flags){const p=a.data[h.directiveStart].encapsulation;if(p===It.None||p===It.Emulated)return null}return xr(h,u)}(a,l.parent,u)}function Vs(a,l,u,h,p){a.insertBefore(l,u,h,p)}function em(a,l,u){a.appendChild(l,u)}function D_(a,l,u,h,p){null!==h?Vs(a,l,u,h,p):em(a,l,u)}function vd(a,l){return a.parentNode(l)}function Kv(a,l,u){return I_(a,l,u)}let A_,R_,I_=function pE(a,l,u){return 40&a.type?xr(a,u):null};function x_(a,l,u,h){const p=E_(a,h,l),g=l[11],T=Kv(h.parent||l[6],h,l);if(null!=p)if(Array.isArray(u))for(let I=0;I<u.length;I++)D_(g,p,u[I],T,!1);else D_(g,p,u,T,!1)}function M_(a,l){if(null!==l){const u=l.type;if(3&u)return xr(l,a);if(4&u)return Qv(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return M_(a,h);{const p=a[l.index];return ur(p)?Qv(-1,p):Rn(p)}}if(32&u)return Qp(l,a)()||Rn(a[l.index]);{const h=gE(a,l);return null!==h?Array.isArray(h)?h[0]:M_(Yc(a[16]),h):M_(a,l.next)}}return null}function gE(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Qv(a,l){const u=10+a+1;if(u<l.length){const h=l[u],p=h[1].firstChild;if(null!==p)return M_(h,p)}return l[7]}function Ul(a,l,u,h,p,g,v){for(;null!=u;){const T=h[u.index],I=u.type;if(v&&0===l&&(T&&ui(Rn(T),h),u.flags|=4),64!=(64&u.flags))if(8&I)Ul(a,l,u.child,h,p,g,!1),E(l,a,p,T,g);else if(32&I){const x=Qp(u,h);let P;for(;P=x();)E(l,a,p,P,g);E(l,a,p,T,g)}else 16&I?im(a,l,h,u,p,g):E(l,a,p,T,g);u=v?u.projectionNext:u.next}}function bd(a,l,u,h,p,g){Ul(u,h,a.firstChild,l,p,g,!1)}function im(a,l,u,h,p,g){const v=u[16],I=v[6].projection[h.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)E(l,a,p,I[x],g);else Ul(a,l,I,v[3],p,g,!0)}function _E(a,l,u){a.setAttribute(l,"style",u)}function eb(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function wd(a){return function rm(){if(void 0===A_&&(A_=null,on.trustedTypes))try{A_=on.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return A_}()?.createHTML(a)||a}function IM(a){R_=a}class Hl{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class wE extends Hl{getTypeName(){return"HTML"}}class B2 extends Hl{getTypeName(){return"Style"}}class xM extends Hl{getTypeName(){return"Script"}}class MM extends Hl{getTypeName(){return"URL"}}class AM extends Hl{getTypeName(){return"ResourceURL"}}function jl(a){return a instanceof Hl?a.changingThisBreaksApplicationSecurity:a}function Kh(a,l){const u=function kM(a){return a instanceof Hl&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function CE(a){return new wE(a)}function RM(a){return new B2(a)}function OM(a){return new xM(a)}function EE(a){return new MM(a)}function PM(a){return new AM(a)}class NM{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(wd(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class FM{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=wd(l),u;const h=this.inertDocument.createElement("body");return h.innerHTML=wd(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(l){const u=l.attributes;for(let p=u.length-1;0<p;p--){const v=u.item(p).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&l.removeAttribute(v)}let h=l.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const BM=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function sm(a){return(a=String(a)).match(BM)?a:"unsafe:"+a}function Gl(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function es(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const P_=Gl("area,br,col,hr,img,wbr"),Qh=Gl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),N_=Gl("rp,rt"),rb=es(P_,es(Qh,Gl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),es(N_,Gl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),es(N_,Qh)),sb=Gl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ab=es(sb,Gl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),DE=Gl("script,style,template");class IE{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!rb.hasOwnProperty(u))return this.sanitizedSomething=!0,!DE.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=l.attributes;for(let p=0;p<h.length;p++){const g=h.item(p),v=g.name,T=v.toLowerCase();if(!ab.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let I=g.value;sb[T]&&(I=sm(I)),this.buf.push(" ",v,'="',SE(I),'"')}return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();rb.hasOwnProperty(u)&&!P_.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(SE(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const ko=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jh=/([^\#-~ |!])/g;function SE(a){return a.replace(/&/g,"&amp;").replace(ko,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Jh,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let F_;function lb(a,l){let u=null;try{F_=F_||function O_(a){const l=new FM(a);return function LM(){try{return!!(new window.DOMParser).parseFromString(wd(""),"text/html")}catch{return!1}}()?new NM(l):l}(a);let h=l?String(l):"";u=F_.getInertBodyElement(h);let p=5,g=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=g,g=u.innerHTML,u=F_.getInertBodyElement(h)}while(h!==g);return wd((new IE).sanitizeChildren(cb(u)||u))}finally{if(u){const h=cb(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function cb(a){return"content"in a&&function xE(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var vi=(()=>((vi=vi||{})[vi.NONE=0]="NONE",vi[vi.HTML=1]="HTML",vi[vi.STYLE=2]="STYLE",vi[vi.SCRIPT=3]="SCRIPT",vi[vi.URL=4]="URL",vi[vi.RESOURCE_URL=5]="RESOURCE_URL",vi))();function om(a){const l=function Xh(){const a=Pe();return a&&a[12]}();return l?l.sanitize(vi.URL,a)||"":Kh(a,"URL")?jl(a):sm(Ee(a))}const db=new En("ENVIRONMENT_INITIALIZER"),hb=new En("INJECTOR",-1),kE=new En("INJECTOR_DEF_TYPES");class RE{get(l,u=Gn){if(u===Gn){const h=new Error(`NullInjectorError: No provider for ${be(l)}!`);throw h.name="NullInjectorError",h}return u}}function qM(...a){return{\u0275providers:OE(0,a)}}function OE(a,...l){const u=[],h=new Set;let p;return ws(l,g=>{const v=g;fb(v,u,[],h)&&(p||(p=[]),p.push(v))}),void 0!==p&&PE(p,u),u}function PE(a,l){for(let u=0;u<a.length;u++){const{providers:p}=a[u];ws(p,g=>{l.push(g)})}}function fb(a,l,u,h){if(!(a=ne(a)))return!1;let p=null,g=oi(a);const v=!g&&L(a);if(g||v){if(v&&!v.standalone)return!1;p=a}else{const I=a.ngModule;if(g=oi(I),!g)return!1;p=I}const T=h.has(p);if(v){if(T)return!1;if(h.add(p),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of I)fb(x,l,u,h)}}else{if(!g)return!1;{if(null!=g.imports&&!T){let x;h.add(p);try{ws(g.imports,P=>{fb(P,l,u,h)&&(x||(x=[]),x.push(P))})}finally{}void 0!==x&&PE(x,l)}if(!T){const x=Wo(p)||(()=>new p);l.push({provide:p,useFactory:x,deps:Ot},{provide:kE,useValue:p,multi:!0},{provide:db,useValue:()=>Vi(p),multi:!0})}const I=g.providers;null==I||T||ws(I,P=>{l.push(P)})}}return p!==a&&void 0!==a.providers}const pb=ye({provide:String,useValue:ye});function L_(a){return null!==a&&"object"==typeof a&&pb in a}function ef(a){return"function"==typeof a}const Mn=new En("Set Injector scope."),La={},ct={};let Et;function ts(){return void 0===Et&&(Et=new RE),Et}class Cd{}class am extends Cd{constructor(l,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mb(l,v=>this.processProvider(v)),this.records.set(hb,tf(void 0,this)),p.has("environment")&&this.records.set(Cd,tf(void 0,this));const g=this.records.get(Mn);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(kE.multi,Ot,at.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=Cr(this),h=ai(void 0);try{return l()}finally{Cr(u),ai(h)}}get(l,u=Gn,h=at.Default){this.assertNotDestroyed();const p=Cr(this),g=ai(void 0);try{if(!(h&at.SkipSelf)){let T=this.records.get(l);if(void 0===T){const I=function nf(a){return"function"==typeof a||"object"==typeof a&&a instanceof En}(l)&&en(l);T=I&&this.injectableDefInScope(I)?tf(nr(l),La):null,this.records.set(l,T)}if(null!=T)return this.hydrate(l,T)}return(h&at.Self?ts():this.parent).get(l,u=h&at.Optional&&u===Gn?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[wr]=v[wr]||[]).unshift(be(l)),p)throw v;return function no(a,l,u,h){const p=a[wr];throw l[zc]&&p.unshift(l[zc]),a.message=function Wv(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=be(l);if(Array.isArray(l))p=l.map(be).join(" -> ");else if("object"==typeof l){let g=[];for(let v in l)if(l.hasOwnProperty(v)){let T=l[v];g.push(v+":"+("string"==typeof T?JSON.stringify(T):be(T)))}p=`{${g.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(Jt,"\n  ")}`}("\n"+a.message,p,u,h),a.ngTokenPath=p,a[wr]=null,a}(v,l,"R3InjectorError",this.source)}throw v}finally{ai(g),Cr(p)}}resolveInjectorInitializers(){const l=Cr(this),u=ai(void 0);try{const h=this.get(db.multi,Ot,at.Self);for(const p of h)p()}finally{Cr(l),ai(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(be(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(l){let u=ef(l=ne(l))?l:ne(l&&l.provide);const h=function KM(a){return L_(a)?tf(void 0,a.useValue):tf(FE(a),La)}(l);if(ef(l)||!0!==l.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=tf(void 0,La,!0),p.factory=()=>xl(p.multi),this.records.set(u,p)),u=l,p.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===La&&(u.value=ct,u.value=u.factory()),"object"==typeof u.value&&u.value&&function QM(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=ne(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function nr(a){const l=en(a),u=null!==l?l.factory:Wo(a);if(null!==u)return u;if(a instanceof En)throw new xe(204,!1);if(a instanceof Function)return function YM(a){const l=a.length;if(l>0)throw Hc(l,"?"),new xe(204,!1);const u=function Hn(a){const l=a&&(a[Pn]||a[Di]);if(l){const u=function vn(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new xe(204,!1)}function FE(a,l,u){let h;if(ef(a)){const p=ne(a);return Wo(p)||nr(p)}if(L_(a))h=()=>ne(a.useValue);else if(function ZM(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...xl(a.deps||[]));else if(function NE(a){return!(!a||!a.useExisting)}(a))h=()=>Vi(ne(a.useExisting));else{const p=ne(a&&(a.useClass||a.provide));if(!function LE(a){return!!a.deps}(a))return Wo(p)||nr(p);h=()=>new p(...xl(a.deps))}return h}function tf(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function pt(a){return!!a.\u0275providers}function mb(a,l){for(const u of a)Array.isArray(u)?mb(u,l):pt(u)?mb(u.\u0275providers,l):l(u)}class B_{}class gb{resolveComponentFactory(l){throw function BE(a){const l=Error(`No component factory found for ${be(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let lm=(()=>{class a{}return a.NULL=new gb,a})();function VE(){return Ba(ci(),Pe())}function Ba(a,l){return new cm(xr(a,l))}let cm=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=VE,a})();function V_(a){return a instanceof cm?a.nativeElement:a}class rf{}let XM=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Ro(){const a=Pe(),u=tr(ci().index,a);return($i(u)?u:a)[11]}(),a})(),sf=(()=>{class a{}return a.\u0275prov=Re({token:a,providedIn:"root",factory:()=>null}),a})();class Va{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Us=new Va("14.3.0"),Hi={};function di(a){return a.ngOriginalError}class hi{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&di(l);for(;u&&di(u);)u=di(u);return u||null}}function $n(a){return a instanceof Function?a():a}function jE(a,l,u){let h=a.length;for(;;){const p=a.indexOf(l,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const g=l.length;if(p+g===h||a.charCodeAt(p+g)<=32)return p}u=p+1}}const ln="ng-template";function dm(a,l,u){let h=0;for(;h<a.length;){let p=a[h++];if(u&&"class"===p){if(p=a[h],-1!==jE(p.toLowerCase(),l,0))return!0}else if(1===p){for(;h<a.length&&"string"==typeof(p=a[h++]);)if(p.toLowerCase()===l)return!0;return!1}}return!1}function GE(a){return 4===a.type&&a.value!==ln}function lf(a,l,u){return l===(4!==a.type||u?a.value:ln)}function iA(a,l,u){let h=4;const p=a.attrs||[],g=function $E(a){for(let l=0;l<a.length;l++)if(Oc(a[l]))return l;return a.length}(p);let v=!1;for(let T=0;T<l.length;T++){const I=l[T];if("number"!=typeof I){if(!v)if(4&h){if(h=2|1&h,""!==I&&!lf(a,I,u)||""===I&&1===l.length){if(sa(h))return!1;v=!0}}else{const x=8&h?I:l[++T];if(8&h&&null!==a.attrs){if(!dm(a.attrs,x,u)){if(sa(h))return!1;v=!0}continue}const G=Ua(8&h?"class":I,p,GE(a),u);if(-1===G){if(sa(h))return!1;v=!0;continue}if(""!==x){let Q;Q=G>g?"":p[G+1].toLowerCase();const re=8&h?Q:null;if(re&&-1!==jE(re,x,0)||2&h&&x!==Q){if(sa(h))return!1;v=!0}}}}else{if(!v&&!sa(h)&&!sa(I))return!1;if(v&&sa(I))continue;v=!1,h=I|1&h}}return sa(h)||v}function sa(a){return 0==(1&a)}function Ua(a,l,u,h){if(null===l)return-1;let p=0;if(h||!u){let g=!1;for(;p<l.length;){const v=l[p];if(v===a)return p;if(3===v||6===v)g=!0;else{if(1===v||2===v){let T=l[++p];for(;"string"==typeof T;)T=l[++p];continue}if(4===v)break;if(0===v){p+=4;continue}}p+=g?1:2}return-1}return function z2(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function bb(a,l,u=!1){for(let h=0;h<l.length;h++)if(iA(a,l[h],u))return!0;return!1}function Nr(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function ql(a,l){return a?":not("+l.trim()+")":l}function wb(a){let l=a[0],u=1,h=2,p="",g=!1;for(;u<a.length;){let v=a[u];if("string"==typeof v)if(2&h){const T=a[++u];p+="["+v+(T.length>0?'="'+T+'"':"")+"]"}else 8&h?p+="."+v:4&h&&(p+=" "+v);else""!==p&&!sa(v)&&(l+=ql(g,p),p=""),h=v,g=g||!sa(h);u++}return""!==p&&(l+=ql(g,p)),l}const Kt={};function Cb(a){qE(rn(),Pe(),_n()+a,!1)}function qE(a,l,u,h){if(!h)if(3==(3&l[2])){const g=a.preOrderCheckHooks;null!==g&&Jo(l,g,u)}else{const g=a.preOrderHooks;null!==g&&Ac(l,g,0,u)}Qo(u)}function Jc(a,l=null,u=null,h){const p=ZE(a,l,u,h);return p.resolveInjectorInitializers(),p}function ZE(a,l=null,u=null,h,p=new Set){const g=[u||Ot,qM(a)];return h=h||("object"==typeof a?void 0:be(a)),new am(g,l||ts(),h||null,p)}let Xc=(()=>{class a{static create(u,h){if(Array.isArray(u))return Jc({name:""},h,u,"");{const p=u.name??"";return Jc({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=Gn,a.NULL=new RE,a.\u0275prov=Re({token:a,providedIn:"any",factory:()=>Vi(hb)}),a.__NG_ELEMENT_ID__=-1,a})();function oa(a,l=at.Default){const u=Pe();return null===u?Vi(a,l):xa(ci(),u,ne(a),l)}function Rb(){throw new Error("invalid")}function gm(a,l){return a<<17|l<<2}function is(a){return a>>17&32767}function $_(a){return 2|a}function Wl(a){return(131068&a)>>2}function _m(a,l){return-131069&a|l<<2}function Pb(a){return 1|a}function Z_(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const p=u[h],g=u[h+1];if(-1!==g){const v=a.data[g];br(p),v.contentQueries(2,l[g],g)}}}function Em(a,l,u,h,p,g,v,T,I,x,P){const G=l.blueprint.slice();return G[0]=p,G[2]=76|h,(null!==P||a&&1024&a[2])&&(G[2]|=1024),qi(G),G[3]=G[15]=a,G[8]=u,G[10]=v||a&&a[10],G[11]=T||a&&a[11],G[12]=I||a&&a[12]||null,G[9]=x||a&&a[9]||null,G[6]=g,G[20]=function te(){return K++}(),G[21]=P,G[16]=2==l.type?a[16]:G,G}function Sd(a,l,u,h,p){let g=a.data[l];if(null===g)g=function Vb(a,l,u,h,p){const g=ll(),v=cl(),I=a.data[l]=function AA(a,l,u,h,p,g){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,l,h,p);return null===a.firstChild&&(a.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(a,l,u,h,p),function ul(){return Ft.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=h,g.attrs=p;const v=function bo(){const a=Ft.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Yr(g,!0),g}function Ha(a,l,u,h){if(0===u)return-1;const p=l.length;for(let g=0;g<u;g++)l.push(h),a.blueprint.push(h),a.data.push(null);return p}function pf(a,l,u){Ko(l);try{const h=a.viewQuery;null!==h&&X_(1,h,u);const p=a.template;null!==p&&cT(a,l,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Z_(a,l),a.staticViewQueries&&X_(2,a.viewQuery,u);const g=a.components;null!==g&&function lT(a,l){for(let u=0;u<l.length;u++)VA(a,l[u])}(l,g)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,wo()}}function mf(a,l,u,h){const p=l[2];if(128!=(128&p)){Ko(l);try{qi(l),function Ar(a){return Ft.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&cT(a,l,u,2,h);const v=3==(3&p);if(v){const x=a.preOrderCheckHooks;null!==x&&Jo(l,x,null)}else{const x=a.preOrderHooks;null!==x&&Ac(l,x,0,null),kc(l,0)}if(function LA(a){for(let l=Wh(a);null!==l;l=w(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const p=u[h],g=p[3];0==(512&p[2])&&Ca(g,1),p[2]|=512}}}(l),function bf(a){for(let l=Wh(a);null!==l;l=w(l))for(let u=10;u<l.length;u++){const h=l[u],p=h[1];bc(h)&&mf(p,h,p.template,h[8])}}(l),null!==a.contentQueries&&Z_(a,l),v){const x=a.contentCheckHooks;null!==x&&Jo(l,x)}else{const x=a.contentHooks;null!==x&&Ac(l,x,1),kc(l,1)}!function xA(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)Qo(~p);else{const g=p,v=u[++h],T=u[++h];gh(v,g),T(2,l[g])}}}finally{Qo(-1)}}(a,l);const T=a.components;null!==T&&function aT(a,l){for(let u=0;u<l.length;u++)BA(a,l[u])}(l,T);const I=a.viewQuery;if(null!==I&&X_(2,I,h),v){const x=a.viewCheckHooks;null!==x&&Jo(l,x)}else{const x=a.viewHooks;null!==x&&Ac(l,x,2),kc(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,Ca(l[3],-1))}finally{wo()}}}function cT(a,l,u,h,p){const g=_n(),v=2&h;try{Qo(-1),v&&l.length>22&&qE(a,l,22,!1),u(h,p)}finally{Qo(g)}}function uT(a,l,u){if($o(l)){const p=l.directiveEnd;for(let g=l.directiveStart;g<p;g++){const v=a.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}function Tm(a,l,u){!Cc()||(function yf(a,l,u,h){const p=u.directiveStart,g=u.directiveEnd;a.firstCreatePass||Sa(u,l),ui(h,l);const v=u.initialInputs;for(let T=p;T<g;T++){const I=a.data[T],x=qr(I);x&&NA(l,u,I);const P=Do(l,a,T,u);ui(P,l),null!==v&&eB(0,T-p,P,I,0,v),x&&(tr(u.index,l)[8]=P)}}(a,l,u,xr(u,l)),128==(128&u.flags)&&function Dm(a,l,u){const h=u.directiveStart,p=u.directiveEnd,g=u.index,v=function Ic(){return Ft.lFrame.currentDirectiveIndex}();try{Qo(g);for(let T=h;T<p;T++){const I=a.data[T],x=l[T];dl(T),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&gT(I,x)}}finally{Qo(-1),dl(v)}}(a,l,u))}function Y_(a,l,u=xr){const h=l.localNames;if(null!==h){let p=l.index+1;for(let g=0;g<h.length;g+=2){const v=h[g+1],T=-1===v?u(l,a):a[v];a[p++]=T}}}function MA(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=dT(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function dT(a,l,u,h,p,g,v,T,I,x){const P=22+h,G=P+p,Q=function J2(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Kt);return u}(P,G),re="function"==typeof x?x():x;return Q[1]={type:a,blueprint:Q,template:u,queries:null,viewQuery:T,declTNode:l,data:Q.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:G,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:re,incompleteFirstPass:!1}}function hT(a,l,u,h){const p=ey(l);null===u?p.push(h):(p.push(u),a.firstCreatePass&&zb(a).push(h,p.length-1))}function fT(a,l,u){for(let h in a)if(a.hasOwnProperty(h)){const p=a[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(l,p):u[h]=[l,p]}return u}function K_(a,l){const h=l.directiveEnd,p=a.data,g=l.attrs,v=[];let T=null,I=null;for(let x=l.directiveStart;x<h;x++){const P=p[x],G=P.inputs,Q=null===g||GE(l)?null:FA(G,g);v.push(Q),T=fT(G,x,T),I=fT(P.outputs,x,I)}null!==T&&(T.hasOwnProperty("class")&&(l.flags|=16),T.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=v,l.inputs=T,l.outputs=I}function Hs(a,l,u,h,p,g,v,T){const I=xr(l,u);let P,x=l.inputs;!T&&null!=x&&(P=x[h])?($b(a,u,P,h,p),gs(l)&&gf(u,l.index)):3&l.type&&(h=function Po(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=v?v(p,l.value||"",h):p,g.setProperty(I,h,p))}function gf(a,l){const u=tr(l,a);16&u[2]||(u[2]|=32)}function _f(a,l,u,h){let p=!1;if(Cc()){const g=function OA(a,l,u){const h=a.directiveRegistry;let p=null;if(h)for(let g=0;g<h.length;g++){const v=h[g];bb(u,v.selectors,!1)&&(p||(p=[]),To(Sa(u,l),a,v.type),qr(v)?(vf(a,u),p.unshift(v)):p.push(v))}return p}(a,l,u),v=null===h?null:{"":-1};if(null!==g){p=!0,_T(u,a.data.length,g.length);for(let P=0;P<g.length;P++){const G=g[P];G.providersResolver&&G.providersResolver(G)}let T=!1,I=!1,x=Ha(a,l,g.length,null);for(let P=0;P<g.length;P++){const G=g[P];u.mergedAttrs=Ia(u.mergedAttrs,G.hostAttrs),yT(a,u,l,x,G),PA(x,G,v),null!==G.contentQueries&&(u.flags|=8),(null!==G.hostBindings||null!==G.hostAttrs||0!==G.hostVars)&&(u.flags|=128);const Q=G.type.prototype;!T&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),T=!0),!I&&(Q.ngOnChanges||Q.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),I=!0),x++}K_(a,u)}v&&function Im(a,l,u){if(l){const h=a.localNames=[];for(let p=0;p<l.length;p+=2){const g=u[l[p+1]];if(null==g)throw new xe(-301,!1);h.push(l[p],g)}}}(u,h,v)}return u.mergedAttrs=Ia(u.mergedAttrs,u.attrs),p}function mT(a,l,u,h,p,g){const v=g.hostBindings;if(v){let T=a.hostBindingOpCodes;null===T&&(T=a.hostBindingOpCodes=[]);const I=~l.index;(function RA(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(T)!=I&&T.push(I),T.push(h,p,v)}}function gT(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function vf(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function PA(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;qr(l)&&(u[""]=a)}}function _T(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function yT(a,l,u,h,p){a.data[h]=p;const g=p.factory||(p.factory=Wo(p.type)),v=new Ta(g,qr(p),oa);a.blueprint[h]=v,u[h]=v,mT(a,l,0,h,Ha(a,u,p.hostVars,Kt),p)}function NA(a,l,u){const h=xr(l,a),p=MA(u),g=a[10],v=Q_(a,Em(a,p,null,u.onPush?32:16,h,l,g,g.createRenderer(h,u),null,null,null));a[l.index]=v}function ja(a,l,u,h,p,g){const v=xr(a,l);!function Hb(a,l,u,h,p,g,v){if(null==g)a.removeAttribute(l,p,u);else{const T=null==v?Ee(g):v(g,h||"",p);a.setAttribute(l,p,T,u)}}(l[11],v,g,a.value,u,h,p)}function eB(a,l,u,h,p,g){const v=g[l];if(null!==v){const T=h.setInput;for(let I=0;I<v.length;){const x=v[I++],P=v[I++],G=v[I++];null!==T?h.setInput(u,G,x,P):u[P]=G}}}function FA(a,l){let u=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;a.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,a[p],l[h+1])),h+=2}else h+=2;else h+=4}return u}function Sm(a,l,u,h){return new Array(a,!0,!1,l,null,0,h,u,null,null)}function BA(a,l){const u=tr(l,a);if(bc(u)){const h=u[1];48&u[2]?mf(h,u,h.template,u[8]):u[5]>0&&jb(u)}}function jb(a){for(let h=Wh(a);null!==h;h=w(h))for(let p=10;p<h.length;p++){const g=h[p];if(bc(g))if(512&g[2]){const v=g[1];mf(v,g,v.template,g[8])}else g[5]>0&&jb(g)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=tr(u[h],a);bc(p)&&p[5]>0&&jb(p)}}function VA(a,l){const u=tr(l,a),h=u[1];(function UA(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),pf(h,u,u[8])}function Q_(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function Gb(a){for(;a;){a[2]|=32;const l=Yc(a);if(rl(a)&&!l)return a;a=l}return null}function J_(a,l,u,h=!0){const p=l[10];p.begin&&p.begin();try{mf(a,l,a.template,u)}catch(v){throw h&&xm(l,v),v}finally{p.end&&p.end()}}function X_(a,l,u){br(0),l(a,u)}function ey(a){return a[7]||(a[7]=[])}function zb(a){return a.cleanup||(a.cleanup=[])}function ty(a,l,u){return(null===a||qr(a))&&(u=function wa(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function xm(a,l){const u=a[9],h=u?u.get(hi,null):null;h&&h.handleError(l)}function $b(a,l,u,h,p){for(let g=0;g<u.length;){const v=u[g++],T=u[g++],I=l[v],x=a.data[v];null!==x.setInput?x.setInput(I,p,h,T):I[T]=p}}function Kl(a,l,u){const h=Zo(l,a);!function F(a,l,u){a.setValue(l,u)}(a[11],h,u)}function ny(a,l,u){let h=u?a.styles:null,p=u?a.classes:null,g=0;if(null!==l)for(let v=0;v<l.length;v++){const T=l[v];"number"==typeof T?g=T:1==g?p=Ce(p,T):2==g&&(h=Ce(h,T+": "+l[++v]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function iy(a,l,u,h,p=!1){for(;null!==u;){const g=l[u.index];if(null!==g&&h.push(Rn(g)),ur(g))for(let T=10;T<g.length;T++){const I=g[T],x=I[1].firstChild;null!==x&&iy(I[1],I,x,h)}const v=u.type;if(8&v)iy(a,l,u.child,h);else if(32&v){const T=Qp(u,l);let I;for(;I=T();)h.push(I)}else if(16&v){const T=gE(l,u);if(Array.isArray(T))h.push(...T);else{const I=Yc(l[16]);iy(I[1],I,T,h,!0)}}u=p?u.projectionNext:u.next}return h}class nu{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return iy(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(ur(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(Bl(l,h),Dl(u,h))}this._attachedToViewContainer=!1}Vl(this._lView[1],this._lView)}onDestroy(l){hT(this._lView[1],this._lView,null,l)}markForCheck(){Gb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){J_(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tt(a,l){bd(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=l}}class bT extends nu{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;J_(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class ry extends lm{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=L(l);return new Ql(u,this.ngModule)}}function Mm(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class wT{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){const p=this.injector.get(l,Hi,h);return p!==Hi||u===Hi?p:this.parentInjector.get(l,u,h)}}class Ql extends B_{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function rA(a){return a.map(wb).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Mm(this.componentDef.inputs)}get outputs(){return Mm(this.componentDef.outputs)}create(l,u,h,p){let g=(p=p||this.ngModule)instanceof Cd?p:p?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new wT(l,g):l,T=v.get(rf,null);if(null===T)throw new xe(407,!1);const I=v.get(sf,null),x=T.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",G=h?function Ub(a,l,u){return a.selectRootElement(l,u===It.ShadowDom)}(x,h,this.componentDef.encapsulation):pe(x,P,function sy(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(P)),Q=this.componentDef.onPush?288:272,re=dT(0,null,null,1,0,null,null,null,null,null),Se=Em(null,re,null,Q,null,null,T,x,I,v,null);let ze,et;Ko(Se);try{const dt=function jA(a,l,u,h,p,g){const v=u[1];u[22]=a;const I=Sd(v,22,2,"#host",null),x=I.mergedAttrs=l.hostAttrs;null!==x&&(ny(I,x,!0),null!==a&&(Yu(p,a,x),null!==I.classes&&eb(p,a,I.classes),null!==I.styles&&_E(p,a,I.styles)));const P=h.createRenderer(a,l),G=Em(u,MA(l),null,l.onPush?32:16,u[22],I,h,P,g||null,null,null);return v.firstCreatePass&&(To(Sa(I,u),v,l.type),vf(v,I),_T(I,u.length,1)),Q_(u,G),u[22]=G}(G,this.componentDef,Se,T,x);if(G)if(h)Yu(x,G,["ng-version",Us.full]);else{const{attrs:Nt,classes:Le}=function sA(a){const l=[],u=[];let h=1,p=2;for(;h<a.length;){let g=a[h];if("string"==typeof g)2===p?""!==g&&l.push(g,a[++h]):8===p&&u.push(g);else{if(!sa(p))break;p=g}h++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);Nt&&Yu(x,G,Nt),Le&&Le.length>0&&eb(x,G,Le.join(" "))}if(et=vc(re,22),void 0!==u){const Nt=et.projection=[];for(let Le=0;Le<this.ngContentSelectors.length;Le++){const zt=u[Le];Nt.push(null!=zt?Array.from(zt):null)}}ze=function GA(a,l,u,h){const p=u[1],g=function pT(a,l,u){const h=ci();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),yT(a,h,l,Ha(a,l,1,null),u),K_(a,h));const p=Do(l,a,h.directiveStart,h);ui(p,l);const g=xr(h,l);return g&&ui(g,l),p}(p,u,l);if(a[8]=u[8]=g,null!==h)for(const T of h)T(g,l);if(l.contentQueries){const T=ci();l.contentQueries(1,g,T.directiveStart)}const v=ci();return!p.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(Qo(v.index),mT(u[1],v,0,v.directiveStart,v.directiveEnd,l),gT(l,g)),g}(dt,this.componentDef,Se,[oy]),pf(re,Se,null)}finally{wo()}return new HA(this.componentType,ze,Ba(et,Se),Se,et)}}class HA extends class JM{}{constructor(l,u,h,p,g){super(),this.location=h,this._rootLView=p,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new bT(p),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){const g=this._rootLView;$b(g[1],g,p,l,u),gf(g,this._tNode.index)}}get injector(){return new Aa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function oy(){const a=ci();ml(Pe()[1],a)}function qb(a){let l=function ET(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let p;if(qr(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new xe(903,!1);p=l.\u0275dir}if(p){if(u){h.push(p);const v=a;v.inputs=Wb(a.inputs),v.declaredInputs=Wb(a.declaredInputs),v.outputs=Wb(a.outputs);const T=p.hostBindings;T&&WA(a,T);const I=p.viewQuery,x=p.contentQueries;if(I&&$A(a,I),x&&qA(a,x),se(a.inputs,p.inputs),se(a.declaredInputs,p.declaredInputs),se(a.outputs,p.outputs),qr(p)&&p.data.animation){const P=a.data;P.animation=(P.animation||[]).concat(p.data.animation)}}const g=p.features;if(g)for(let v=0;v<g.length;v++){const T=g[v];T&&T.ngInherit&&T(a),T===qb&&(u=!1)}}l=Object.getPrototypeOf(l)}!function zA(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=l+=p.hostVars,p.hostAttrs=Ia(p.hostAttrs,u=Ia(u,p.hostAttrs))}}(h)}function Wb(a){return a===gi?{}:a===Ot?[]:a}function $A(a,l){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{l(h,p),u(h,p)}:l}function qA(a,l){const u=a.contentQueries;a.contentQueries=u?(h,p,g)=>{l(h,p,g),u(h,p,g)}:l}function WA(a,l){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{l(h,p),u(h,p)}:l}let Am=null;function iu(){if(!Am){const a=on.Symbol;if(a&&a.iterator)Am=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Am=h)}}}return Am}function wf(a){return!!Zb(a)&&(Array.isArray(a)||!(a instanceof Map)&&iu()in a)}function Zb(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Ga(a,l,u){return a[l]=u}function Fr(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Jl(a,l,u,h){const p=Fr(a,l,u);return Fr(a,l+1,h)||p}function IT(a,l,u,h){const p=Pe();return Fr(p,Yo(),l)&&(rn(),ja(Fn(),p,a,l,u,h)),IT}function Ef(a,l,u,h){return Fr(a,Yo(),u)?l+Ee(u)+h:Kt}function Tf(a,l,u,h,p,g){const T=Jl(a,function dr(){return Ft.lFrame.bindingIndex}(),u,p);return kr(2),T?l+Ee(u)+h+Ee(p)+g:Kt}function Sf(a,l,u,h,p,g,v,T){const I=Pe(),x=rn(),P=a+22,G=x.firstCreatePass?function OT(a,l,u,h,p,g,v,T,I){const x=l.consts,P=Sd(l,a,4,v||null,Zr(x,T));_f(l,u,P,Zr(x,I)),ml(l,P);const G=P.tViews=dT(2,P,h,p,g,l.directiveRegistry,l.pipeRegistry,null,l.schemas,x);return null!==l.queries&&(l.queries.template(l,P),G.queries=l.queries.embeddedTView(P)),P}(P,x,I,l,u,h,p,g,v):x.data[P];Yr(G,!1);const Q=I[11].createComment("");x_(x,I,Q,G),ui(Q,I),Q_(I,I[P]=Sm(Q,I,Q,G)),ba(G)&&Tm(x,I,G),null!=v&&Y_(I,G,T)}function Qb(a){return ys(function Yn(){return Ft.lFrame.contextLView}(),22+a)}function Jb(a,l,u){const h=Pe();return Fr(h,Yo(),l)&&Hs(rn(),Fn(),h,a,l,h[11],u,!1),Jb}function ay(a,l,u,h,p){const v=p?"class":"style";$b(a,u,l.inputs[v],v,h)}function Xb(a,l,u,h){const p=Pe(),g=rn(),v=22+a,T=p[11],I=p[v]=pe(T,l,function bh(){return Ft.lFrame.currentNamespace}()),x=g.firstCreatePass?function sB(a,l,u,h,p,g,v){const T=l.consts,x=Sd(l,a,2,p,Zr(T,g));return _f(l,u,x,Zr(T,v)),null!==x.attrs&&ny(x,x.attrs,!1),null!==x.mergedAttrs&&ny(x,x.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,x),x}(v,g,p,0,l,u,h):g.data[v];Yr(x,!0);const P=x.mergedAttrs;null!==P&&Yu(T,I,P);const G=x.classes;null!==G&&eb(T,I,G);const Q=x.styles;return null!==Q&&_E(T,I,Q),64!=(64&x.flags)&&x_(g,p,I,x),0===function Hu(){return Ft.lFrame.elementDepthCount}()&&ui(I,p),function fh(){Ft.lFrame.elementDepthCount++}(),ba(x)&&(Tm(g,p,x),uT(g,x,p)),null!==h&&Y_(p,x),Xb}function ly(){let a=ci();cl()?Dc():(a=a.parent,Yr(a,!1));const l=a;!function Fp(){Ft.lFrame.elementDepthCount--}();const u=rn();return u.firstCreatePass&&(ml(u,a),$o(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Eh(a){return 0!=(16&a.flags)}(l)&&ay(u,l,Pe(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Vp(a){return 0!=(32&a.flags)}(l)&&ay(u,l,Pe(),l.stylesWithoutHost,!1),ly}function Pm(a,l,u,h){return Xb(a,l,u,h),ly(),Pm}function Md(a,l,u){const h=Pe(),p=rn(),g=a+22,v=p.firstCreatePass?function PT(a,l,u,h,p){const g=l.consts,v=Zr(g,h),T=Sd(l,a,8,"ng-container",v);return null!==v&&ny(T,v,!0),_f(l,u,T,Zr(g,p)),null!==l.queries&&l.queries.elementStart(l,T),T}(g,p,h,l,u):p.data[g];Yr(v,!0);const T=h[g]=h[11].createComment("");return x_(p,h,T,v),ui(T,h),ba(v)&&(Tm(p,h,v),uT(p,v,h)),null!=u&&Y_(h,v),Md}function e0(){let a=ci();const l=rn();return cl()?Dc():(a=a.parent,Yr(a,!1)),l.firstCreatePass&&(ml(l,a),$o(a)&&l.queries.elementEnd(a)),e0}function cy(a,l,u){return Md(a,l,u),e0(),cy}function Ad(){return Pe()}function Nm(a){return!!a&&"function"==typeof a.then}function ek(a){return!!a&&"function"==typeof a.subscribe}const t0=ek;function uy(a,l,u,h){const p=Pe(),g=rn(),v=ci();return NT(g,p,p[11],v,a,l,0,h),uy}function Fm(a,l){const u=ci(),h=Pe(),p=rn();return NT(p,h,ty(zu(p.data),u,h),u,a,l),Fm}function NT(a,l,u,h,p,g,v,T){const I=ba(h),P=a.firstCreatePass&&zb(a),G=l[8],Q=ey(l);let re=!0;if(3&h.type||T){const et=xr(h,l),dt=T?T(et):et,Nt=Q.length,Le=T?Ln=>T(Rn(Ln[h.index])):h.index;let zt=null;if(!T&&I&&(zt=function tk(a,l,u,h){const p=a.cleanup;if(null!=p)for(let g=0;g<p.length-1;g+=2){const v=p[g];if(v===u&&p[g+1]===h){const T=l[7],I=p[g+2];return T.length>I?T[I]:null}"string"==typeof v&&(g+=2)}return null}(a,l,p,h.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=g,zt.__ngLastListenerFn__=g,re=!1;else{g=n0(h,l,G,g,!1);const Ln=u.listen(dt,p,g);Q.push(g,Ln),P&&P.push(p,Le,Nt,Nt+1)}}else g=n0(h,l,G,g,!1);const Se=h.outputs;let ze;if(re&&null!==Se&&(ze=Se[p])){const et=ze.length;if(et)for(let dt=0;dt<et;dt+=2){const Ai=l[ze[dt]][ze[dt+1]].subscribe(g),fu=Q.length;Q.push(g,Ai),P&&P.push(p,h.index,fu,-(fu+1))}}}function FT(a,l,u,h){try{return!1!==u(h)}catch(p){return xm(a,p),!1}}function n0(a,l,u,h,p){return function g(v){if(v===Function)return h;Gb(2&a.flags?tr(a.index,l):l);let I=FT(l,0,h,v),x=g.__ngNextListenerFn__;for(;x;)I=FT(l,0,x,v)&&I,x=x.__ngNextListenerFn__;return p&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function LT(a=1){return function yh(a){return(Ft.lFrame.contextLView=function u_(a,l){for(;a>0;)l=l[15],a--;return l}(a,Ft.lFrame.contextLView))[8]}(a)}function oB(a,l){let u=null;const h=function zE(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let p=0;p<l.length;p++){const g=l[p];if("*"!==g){if(null===h?bb(a,g,!0):Nr(h,g))return p}else u=p}return u}function Lm(a){const l=Pe()[16][6];if(!l.projection){const h=l.projection=Hc(a?a.length:1,null),p=h.slice();let g=l.child;for(;null!==g;){const v=a?oB(g,a):0;null!==v&&(p[v]?p[v].projectionNext=g:h[v]=g,p[v]=g),g=g.next}}}function nk(a,l=0,u){const h=Pe(),p=rn(),g=Sd(p,22+a,16,null,u||null);null===g.projection&&(g.projection=l),Dc(),64!=(64&g.flags)&&function Xv(a,l,u){im(l[11],0,l,u,E_(a,u,l),Kv(u.parent||l[6],u,l))}(p,h,g)}function hy(a,l,u,h,p){const g=a[u+1],v=null===l;let T=h?is(g):Wl(g),I=!1;for(;0!==T&&(!1===I||v);){const P=a[T+1];V(a[T],l)&&(I=!0,a[T+1]=h?Pb(P):$_(P)),T=h?is(P):Wl(P)}I&&(a[u+1]=h?$_(g):Pb(g))}function V(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&ta(a,l)>=0}const wn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function No(a){return a.substring(wn.key,wn.keyEnd)}function fy(a,l){const u=wn.textEnd;return u===l?-1:(l=wn.keyEnd=function zT(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,wn.key=l,u),Rd(a,l,u))}function Rd(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function a0(a,l,u){return Br(a,l,u,!1),a0}function qT(a,l){return Br(a,l,null,!0),qT}function Lo(a,l){for(let u=function la(a){return function kd(a){wn.key=0,wn.keyEnd=0,wn.value=0,wn.valueEnd=0,wn.textEnd=a.length}(a),fy(a,Rd(a,0,wn.textEnd))}(l);u>=0;u=fy(l,u))Or(a,No(l),!0)}function Br(a,l,u,h){const p=Pe(),g=rn(),v=kr(2);g.firstUpdatePass&&py(g,a,v,h),l!==Kt&&Fr(p,v,l)&&Od(g,g.data[_n()],p,p[11],a,p[v+1]=function uk(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=be(jl(a)))),a}(l,u),h,v)}function ok(a,l){return l>=a.expandoStartIndex}function py(a,l,u,h){const p=a.data;if(null===p[u+1]){const g=p[_n()],v=ok(a,u);ZT(g,h)&&null===l&&!v&&(l=!1),l=function WT(a,l,u,h){const p=zu(a);let g=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(u=Um(u=l0(null,a,l,u,h),l.attrs,h),g=null);else{const v=l.directiveStylingLast;if(-1===v||a[v]!==p)if(u=l0(p,a,l,u,h),null===g){let I=function cB(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==Wl(h))return a[is(h)]}(a,l,h);void 0!==I&&Array.isArray(I)&&(I=l0(null,a,l,I[1],h),I=Um(I,l.attrs,h),function Af(a,l,u,h){a[is(u?l.classBindings:l.styleBindings)]=h}(a,l,h,I))}else g=function ak(a,l,u){let h;const p=l.directiveEnd;for(let g=1+l.directiveStylingLast;g<p;g++)h=Um(h,a[g].hostAttrs,u);return Um(h,l.attrs,u)}(a,l,h)}return void 0!==g&&(h?l.residualClasses=g:l.residualStyles=g),u}(p,g,l,h),function lB(a,l,u,h,p,g){let v=g?l.classBindings:l.styleBindings,T=is(v),I=Wl(v);a[h]=u;let P,x=!1;if(Array.isArray(u)){const G=u;P=G[1],(null===P||ta(G,P)>0)&&(x=!0)}else P=u;if(p)if(0!==I){const Q=is(a[T+1]);a[h+1]=gm(Q,T),0!==Q&&(a[Q+1]=_m(a[Q+1],h)),a[T+1]=function mA(a,l){return 131071&a|l<<17}(a[T+1],h)}else a[h+1]=gm(T,0),0!==T&&(a[T+1]=_m(a[T+1],h)),T=h;else a[h+1]=gm(I,0),0===T?T=h:a[I+1]=_m(a[I+1],h),I=h;x&&(a[h+1]=$_(a[h+1])),hy(a,P,h,!0),hy(a,P,h,!1),function le(a,l,u,h,p){const g=p?a.residualClasses:a.residualStyles;null!=g&&"string"==typeof l&&ta(g,l)>=0&&(u[h+1]=Pb(u[h+1]))}(l,P,a,h,g),v=gm(T,I),g?l.classBindings=v:l.styleBindings=v}(p,g,l,u,v,h)}}function l0(a,l,u,h,p){let g=null;const v=u.directiveEnd;let T=u.directiveStylingLast;for(-1===T?T=u.directiveStart:T++;T<v&&(g=l[T],h=Um(h,g.hostAttrs,p),g!==a);)T++;return null!==a&&(u.directiveStylingLast=T),h}function Um(a,l,u){const h=u?1:2;let p=-1;if(null!==l)for(let g=0;g<l.length;g++){const v=l[g];"number"==typeof v?p=v:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Or(a,v,!!u||l[++g]))}return void 0===a?null:a}function Od(a,l,u,h,p,g,v,T){if(!(3&l.type))return;const I=a.data,x=I[T+1];u0(function df(a){return 1==(1&a)}(x)?ck(I,l,u,p,Wl(x),v):void 0)||(u0(g)||function XE(a){return 2==(2&a)}(x)&&(g=ck(I,null,u,p,T,v)),function TM(a,l,u,h,p){if(l)p?a.addClass(u,h):a.removeClass(u,h);else{let g=-1===h.indexOf("-")?void 0:Ts.DashCase;null==p?a.removeStyle(u,h,g):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),g|=Ts.Important),a.setStyle(u,h,p,g))}}(h,v,Zo(_n(),u),p,g))}function ck(a,l,u,h,p,g){const v=null===l;let T;for(;p>0;){const I=a[p],x=Array.isArray(I),P=x?I[1]:I,G=null===P;let Q=u[p+1];Q===Kt&&(Q=G?Ot:void 0);let re=G?jc(Q,h):P===h?Q:void 0;if(x&&!u0(re)&&(re=jc(I,h)),u0(re)&&(T=re,v))return T;const Se=a[p+1];p=v?is(Se):Wl(Se)}if(null!==l){let I=g?l.residualClasses:l.residualStyles;null!=I&&(T=jc(I,h))}return T}function u0(a){return void 0!==a}function ZT(a,l){return 0!=(a.flags&(l?16:32))}function d0(a,l=""){const u=Pe(),h=rn(),p=a+22,g=h.firstCreatePass?Sd(h,p,1,l,null):h.data[p],v=u[p]=function k(a,l){return a.createText(l)}(u[11],l);x_(h,u,v,g),Yr(g,!1)}function kf(a){return Hm("",a,""),kf}function Hm(a,l,u){const h=Pe(),p=Ef(h,a,l,u);return p!==Kt&&Kl(h,_n(),p),Hm}function Rf(a,l,u,h,p){const g=Pe(),v=Tf(g,a,l,u,h,p);return v!==Kt&&Kl(g,_n(),v),Rf}function gk(a,l,u){!function lo(a,l,u,h){const p=rn(),g=kr(2);p.firstUpdatePass&&py(p,null,g,h);const v=Pe();if(u!==Kt&&Fr(v,g,u)){const T=p.data[_n()];if(ZT(T,h)&&!ok(p,g)){let I=h?T.classesWithoutHost:T.stylesWithoutHost;null!==I&&(u=Ce(I,u||"")),ay(p,T,v,u,h)}else!function c0(a,l,u,h,p,g,v,T){p===Kt&&(p=Ot);let I=0,x=0,P=0<p.length?p[0]:null,G=0<g.length?g[0]:null;for(;null!==P||null!==G;){const Q=I<p.length?p[I+1]:void 0,re=x<g.length?g[x+1]:void 0;let ze,Se=null;P===G?(I+=2,x+=2,Q!==re&&(Se=G,ze=re)):null===G||null!==P&&P<G?(I+=2,Se=P):(x+=2,Se=G,ze=re),null!==Se&&Od(a,l,u,h,Se,ze,v,T),P=I<p.length?p[I]:null,G=x<g.length?g[x]:null}}(p,T,v,v[11],v[g+1],v[g+1]=function uB(a,l,u){if(null==u||""===u)return Ot;const h=[],p=jl(u);if(Array.isArray(p))for(let g=0;g<p.length;g++)a(h,p[g],!0);else if("object"==typeof p)for(const g in p)p.hasOwnProperty(g)&&a(h,g,p[g]);else"string"==typeof p&&l(h,p);return h}(a,l,u),h,g)}}(Or,Lo,Ef(Pe(),a,l,u),!0)}function QT(a,l,u){const h=Pe();return Fr(h,Yo(),l)&&Hs(rn(),Fn(),h,a,l,h[11],u,!0),QT}function JT(a,l,u){const h=Pe();if(Fr(h,Yo(),l)){const g=rn(),v=Fn();Hs(g,v,h,a,l,ty(zu(g.data),v,h),u,!0)}return JT}const Of=void 0;var SB=["en",[["a","p"],["AM","PM"],Of],[["AM","PM"],Of,Of],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Of,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Of,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Of,"{1} 'at' {0}",Of],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function IB(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let jm={};function XT(a){const l=function xB(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=tD(l);if(u)return u;const h=l.split("-")[0];if(u=tD(h),u)return u;if("en"===h)return SB;throw new xe(701,!1)}function eD(a){return XT(a)[Vt.PluralCase]}function tD(a){return a in jm||(jm[a]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[a]),jm[a]}var Vt=(()=>((Vt=Vt||{})[Vt.LocaleId=0]="LocaleId",Vt[Vt.DayPeriodsFormat=1]="DayPeriodsFormat",Vt[Vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vt[Vt.DaysFormat=3]="DaysFormat",Vt[Vt.DaysStandalone=4]="DaysStandalone",Vt[Vt.MonthsFormat=5]="MonthsFormat",Vt[Vt.MonthsStandalone=6]="MonthsStandalone",Vt[Vt.Eras=7]="Eras",Vt[Vt.FirstDayOfWeek=8]="FirstDayOfWeek",Vt[Vt.WeekendRange=9]="WeekendRange",Vt[Vt.DateFormat=10]="DateFormat",Vt[Vt.TimeFormat=11]="TimeFormat",Vt[Vt.DateTimeFormat=12]="DateTimeFormat",Vt[Vt.NumberSymbols=13]="NumberSymbols",Vt[Vt.NumberFormats=14]="NumberFormats",Vt[Vt.CurrencyCode=15]="CurrencyCode",Vt[Vt.CurrencySymbol=16]="CurrencySymbol",Vt[Vt.CurrencyName=17]="CurrencyName",Vt[Vt.Currencies=18]="Currencies",Vt[Vt.Directionality=19]="Directionality",Vt[Vt.PluralCase=20]="PluralCase",Vt[Vt.ExtraData=21]="ExtraData",Vt))();const Gm="en-US";let Sk=Gm;function b0(a,l,u,h,p){if(a=ne(a),Array.isArray(a))for(let g=0;g<a.length;g++)b0(a[g],l,u,h,p);else{const g=rn(),v=Pe();let T=ef(a)?a:ne(a.provide),I=FE(a);const x=ci(),P=1048575&x.providerIndexes,G=x.directiveStart,Q=x.providerIndexes>>20;if(ef(a)||!a.multi){const re=new Ta(I,p,oa),Se=Nf(T,l,p?P:P+Q,G);-1===Se?(To(Sa(x,v),g,T),Wm(g,a,l.length),l.push(T),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(re),v.push(re)):(u[Se]=re,v[Se]=re)}else{const re=Nf(T,l,P+Q,G),Se=Nf(T,l,P,P+Q),ze=re>=0&&u[re],et=Se>=0&&u[Se];if(p&&!et||!p&&!ze){To(Sa(x,v),g,T);const dt=function Xk(a,l,u,h,p){const g=new Ta(a,u,oa);return g.multi=[],g.index=l,g.componentProviders=0,Kk(g,p,h&&!u),g}(p?Jk:Qk,u.length,p,h,I);!p&&et&&(u[Se].providerFactory=dt),Wm(g,a,l.length,0),l.push(T),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(dt),v.push(dt)}else Wm(g,a,re>-1?re:Se,Kk(u[p?Se:re],I,!p&&h));!p&&h&&et&&u[Se].componentProviders++}}}function Wm(a,l,u,h){const p=ef(l),g=function j2(a){return!!a.useClass}(l);if(p||g){const I=(g?ne(l.useClass):l).prototype.ngOnDestroy;if(I){const x=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const P=x.indexOf(u);-1===P?x.push(u,[h,I]):x[P+1].push(h,I)}else x.push(u,I)}}}function Kk(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function Nf(a,l,u,h){for(let p=u;p<h;p++)if(l[p]===a)return p;return-1}function Qk(a,l,u,h){return w0(this.multi,[])}function Jk(a,l,u,h){const p=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,T=Do(u,u[1],this.providerFactory.index,h);g=T.slice(0,v),w0(p,g);for(let I=v;I<T.length;I++)g.push(T[I])}else g=[],w0(p,g);return g}function w0(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function fD(a,l=[]){return u=>{u.providersResolver=(h,p)=>function hD(a,l,u){const h=rn();if(h.firstCreatePass){const p=qr(a);b0(u,h.data,h.blueprint,p,!0),b0(l,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,l)}}class Ff{}class pD{}function mD(a,l){return new gD(a,l??null)}class gD extends Ff{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ry(this);const h=Qe(l);this._bootstrapComponents=$n(h.bootstrap),this._r3Injector=ZE(l,u,[{provide:Ff,useValue:this},{provide:lm,useValue:this.componentFactoryResolver}],be(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class C0 extends pD{constructor(l){super(),this.moduleType=l}create(l){return new gD(this.moduleType,l)}}class tR extends Ff{constructor(l,u,h){super(),this.componentFactoryResolver=new ry(this),this.instance=null;const p=new am([...l,{provide:Ff,useValue:this},{provide:lm,useValue:this.componentFactoryResolver}],u||ts(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function E0(a,l,u=null){return new tR(a,l,u).injector}let T0=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=OE(0,u.type),p=h.length>0?E0([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Re({token:a,providedIn:"environment",factory:()=>new a(Vi(Cd))}),a})();function nR(a){a.getStandaloneInjector=l=>l.get(T0).getOrCreateStandaloneInjector(a)}function Ym(a,l,u){const h=Mr()+a,p=Pe();return p[h]===Kt?Ga(p,h,u?l.call(u):l()):function km(a,l){return a[l]}(p,h)}function tc(a,l,u,h){return function DD(a,l,u,h,p,g){const v=l+u;return Fr(a,v,p)?Ga(a,v+1,g?h.call(g,p):h(p)):Km(a,v+1)}(Pe(),Mr(),a,l,u,h)}function hR(a,l,u,h,p){return Qm(Pe(),Mr(),a,l,u,h,p)}function Km(a,l){const u=a[l];return u===Kt?void 0:u}function Qm(a,l,u,h,p,g,v){const T=l+u;return Jl(a,T,p,g)?Ga(a,T+2,v?h.call(v,p,g):h(p,g)):Km(a,T+2)}function xD(a,l){const u=rn();let h;const p=a+22;u.firstCreatePass?(h=function MD(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const g=h.factory||(h.factory=Wo(h.type)),v=ai(oa);try{const T=Rr(!1),I=g();return Rr(T),function Kb(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,Pe(),p,I),I}finally{ai(v)}}function x0(a,l,u,h){const p=a+22,g=Pe(),v=ys(g,p);return function Jm(a,l){return a[1].data[l].pure}(g,p)?Qm(g,Mr(),l,v.transform,u,h,v):v.transform(u,h)}function Lf(a){return l=>{setTimeout(a,void 0,l)}}const ca=class M0 extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let p=l,g=u||(()=>null),v=h;if(l&&"object"==typeof l){const I=l;p=I.next?.bind(I),g=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(g=Lf(g),p&&(p=Lf(p)),v&&(v=Lf(v)));const T=super.subscribe({next:p,error:g,complete:v});return l instanceof z.w0&&l.add(T),T}};function yR(){return this._results[iu()]()}class A0{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=iu(),h=A0.prototype;h[u]||(h[u]=yR)}get changes(){return this._changes||(this._changes=new ca)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const p=Wi(l);(this._changesDetected=!function Uc(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],g=l[h];if(u&&(p=u(p),g=u(g)),g!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xm=(()=>{class a{}return a.__NG_ELEMENT_ID__=bR,a})();const vR=Xm,Ty=class extends vR{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tViews,p=Em(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(p[19]=v.createEmbeddedView(h)),pf(h,p,l),new nu(p)}};function bR(){return Dy(ci(),Pe())}function Dy(a,l){return 4&a.type?new Ty(l,a,Ba(a,l)):null}let Iy=(()=>{class a{}return a.__NG_ELEMENT_ID__=rV,a})();function rV(){return R0(ci(),Pe())}const wR=Iy,AD=class extends wR{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return Ba(this._hostTNode,this._hostLView)}get injector(){return new Aa(this._hostTNode,this._hostLView)}get parentInjector(){const l=vl(this._hostTNode,this._hostLView);if(Ku(l)){const u=Fs(l,this._hostLView),h=gl(l);return new Aa(u[1].data[h+8],u)}return new Aa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=kD(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){let p,g;"number"==typeof h?p=h:null!=h&&(p=h.index,g=h.injector);const v=l.createEmbeddedView(u||{},g);return this.insert(v,p),v}createComponent(l,u,h,p,g){const v=l&&!function Qr(a){return"function"==typeof a}(l);let T;if(v)T=u;else{const G=u||{};T=G.index,h=G.injector,p=G.projectableNodes,g=G.environmentInjector||G.ngModuleRef}const I=v?l:new Ql(L(l)),x=h||this.parentInjector;if(!g&&null==I.ngModule){const Q=(v?x:this.parentInjector).get(Cd,null);Q&&(g=Q)}const P=I.create(x,p,void 0,g);return this.insert(P.hostView,T),P}insert(l,u){const h=l._lView,p=h[1];if(function al(a){return ur(a[3])}(h)){const P=this.indexOf(l);if(-1!==P)this.detach(P);else{const G=h[3],Q=new AD(G,G[6],G[3]);Q.detach(Q.indexOf(l))}}const g=this._adjustIndex(u),v=this._lContainer;!function Xr(a,l,u,h){const p=10+h,g=u.length;h>0&&(u[p-1][4]=l),h<g-10?(l[4]=u[p],nd(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const v=l[17];null!==v&&u!==v&&function Ui(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(v,l);const T=l[19];null!==T&&T.insertView(a),l[2]|=64}(p,h,v,g);const T=Qv(g,v),I=h[11],x=vd(I,v[7]);return null!==x&&function tt(a,l,u,h,p,g){h[0]=p,h[6]=l,bd(a,h,u,1,p,g)}(p,v[6],I,h,x,T),l.attachToViewContainerRef(),nd(k0(v),g,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=kD(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=Bl(this._lContainer,u);h&&(Dl(k0(this._lContainer),u),Vl(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=Bl(this._lContainer,u);return h&&null!=Dl(k0(this._lContainer),u)?new nu(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function kD(a){return a[8]}function k0(a){return a[8]||(a[8]=[])}function R0(a,l){let u;const h=l[a.index];if(ur(h))u=h;else{let p;if(8&a.type)p=Rn(h);else{const g=l[11];p=g.createComment("");const v=xr(a,l);Vs(g,vd(g,v),p,function fE(a,l){return a.nextSibling(l)}(g,v),!1)}l[a.index]=u=Sm(h,l,p,a),Q_(l,u)}return new AD(u,a,l)}class O0{constructor(l){this.queryList=l,this.matches=null}clone(){return new O0(this.queryList)}setDirty(){this.queryList.setDirty()}}class za{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,p=[];for(let g=0;g<h;g++){const v=u.getByIndex(g);p.push(this.queries[v.indexInDeclarationView].clone())}return new za(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==MR(l,u).matches&&this.queries[u].setDirty()}}class TR{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class au{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,g=this.getByIndex(h).embeddedTView(l,p);g&&(g.indexInDeclarationView=h,null!==u?u.push(g):u=[g])}return null!==u?new au(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class RD{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new RD(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const g=h[p];this.matchTNodeWithReadOption(l,u,oV(u,g)),this.matchTNodeWithReadOption(l,u,Ma(u,l,g,!1,!1))}else h===Xm?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Ma(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===cm||p===Iy||p===Xm&&4&u.type)this.addMatch(u.index,-2);else{const g=Ma(u,l,p,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function oV(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function lV(a,l,u,h){return-1===u?function aV(a,l){return 11&a.type?Ba(a,l):4&a.type?Dy(a,l):null}(l,a):-2===u?function cV(a,l,u){return u===cm?Ba(l,a):u===Xm?Dy(l,a):u===Iy?R0(l,a):void 0}(a,l,h):Do(a,a[1],u,l)}function DR(a,l,u,h){const p=l[19].queries[h];if(null===p.matches){const g=a.data,v=u.matches,T=[];for(let I=0;I<v.length;I+=2){const x=v[I];T.push(x<0?null:lV(l,g[x],v[I+1],u.metadata.read))}p.matches=T}return p.matches}function P0(a,l,u,h){const p=a.queries.getByIndex(u),g=p.matches;if(null!==g){const v=DR(a,l,p,u);for(let T=0;T<g.length;T+=2){const I=g[T];if(I>0)h.push(v[T/2]);else{const x=g[T+1],P=l[-I];for(let G=10;G<P.length;G++){const Q=P[G];Q[17]===Q[3]&&P0(Q[1],Q,x,h)}if(null!==P[9]){const G=P[9];for(let Q=0;Q<G.length;Q++){const re=G[Q];P0(re[1],re,x,h)}}}}}return h}function OD(a){const l=Pe(),u=rn(),h=Ea();br(h+1);const p=MR(u,h);if(a.dirty&&function Vu(a){return 4==(4&a[2])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const g=p.crossesNgTemplate?P0(u,l,h,[]):DR(u,l,p,h);a.reset(g,V_),a.notifyOnChanges()}return!0}return!1}function IR(a,l,u){const h=rn();h.firstCreatePass&&(xR(h,new TR(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),SR(h,Pe(),l)}function PD(a,l,u,h){const p=rn();if(p.firstCreatePass){const g=ci();xR(p,new TR(l,u,h),g.index),function dV(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}SR(p,Pe(),u)}function eg(){return function uV(a,l){return a[19].queries[l].queryList}(Pe(),Ea())}function SR(a,l,u){const h=new A0(4==(4&u));hT(a,l,h,h.destroy),null===l[19]&&(l[19]=new za),l[19].queries.push(new O0(h))}function xR(a,l,u){null===a.queries&&(a.queries=new au),a.queries.track(new RD(l,u))}function MR(a,l){return a.queries.getByIndex(l)}function og(...a){}const V0=new En("Application Initializer");let My=(()=>{class a{constructor(u){this.appInits=u,this.resolve=og,this.reject=og,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const g=this.appInits[p]();if(Nm(g))u.push(g);else if(t0(g)){const v=new Promise((T,I)=>{g.subscribe({complete:T,error:I})});u.push(v)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(Vi(V0,8))},a.\u0275prov=Re({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const KD=new En("AppId",{providedIn:"root",factory:function Hf(){return`${U0()}${U0()}${U0()}`}});function U0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ag=new En("Platform Initializer"),CV=new En("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),H0=new En("appBootstrapListener"),JD=new En("AnimationModuleType");let $R=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Re({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const Ay=new En("LocaleId",{providedIn:"root",factory:()=>Zp(Ay,at.Optional|at.SkipSelf)||function qR(){return typeof $localize<"u"&&$localize.locale||Gm}()}),WR=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class YR{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let eI=(()=>{class a{compileModuleSync(u){return new C0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),g=$n(Qe(u).declarations).reduce((v,T)=>{const I=L(T);return I&&v.push(new Ql(I)),v},[]);return new YR(h,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Re({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const DV=(()=>Promise.resolve(0))();function j0(a){typeof Zone>"u"?DV.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class St{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ca(!1),this.onMicrotaskEmpty=new ca(!1),this.onStable=new ca(!1),this.onError=new ca(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function JR(){let a=on.requestAnimationFrame,l=on.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function lg(a){const l=()=>{!function SV(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(on,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,cu(a),a.isCheckStableRunning=!0,iI(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),cu(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,g,v,T)=>{try{return Wa(a),u.invokeTask(p,g,v,T)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||a.shouldCoalesceRunChangeDetection)&&l(),jf(a)}},onInvoke:(u,h,p,g,v,T,I)=>{try{return Wa(a),u.invoke(p,g,v,T,I)}finally{a.shouldCoalesceRunChangeDetection&&l(),jf(a)}},onHasTask:(u,h,p,g)=>{u.hasTask(p,g),h===p&&("microTask"==g.change?(a._hasPendingMicrotasks=g.microTask,cu(a),iI(a)):"macroTask"==g.change&&(a.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,h,p,g)=>(u.handleError(p,g),a.runOutsideAngular(()=>a.onError.emit(g)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!St.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(St.isInAngularZone())throw new xe(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,p){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+p,l,IV,og,og);try{return g.runTask(v,u,h)}finally{g.cancelTask(v)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const IV={};function iI(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function cu(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Wa(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function jf(a){a._nesting--,iI(a)}class G0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ca,this.onMicrotaskEmpty=new ca,this.onStable=new ca,this.onError=new ca}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,p){return l.apply(u,h)}}const XR=new En(""),e1=new En("");let rI,t1=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rI||(function xV(a){rI=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{St.assertNotInAngularZone(),j0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())j0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let g=-1;h&&h>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)(Vi(St),Vi(n1),Vi(e1))},a.\u0275prov=Re({token:a,factory:a.\u0275fac}),a})(),n1=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return rI?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Re({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Nd=null;const r1=new En("AllowMultipleToken"),sI=new En("PlatformDestroyListeners");class oI{constructor(l,u){this.name=l,this.token=u}}function z0(a,l,u=[]){const h=`Platform: ${l}`,p=new En(h);return(g=[])=>{let v=Ry();if(!v||v.injector.get(r1,!1)){const T=[...u,...g,{provide:p,useValue:!0}];a?a(T):function aI(a){if(Nd&&!Nd.get(r1,!1))throw new xe(400,!1);Nd=a;const l=a.get($0);(function ug(a){const l=a.get(ag,null);l&&l.forEach(u=>u())})(a)}(function ky(a=[],l){return Xc.create({name:l,providers:[{provide:Mn,useValue:"platform"},{provide:sI,useValue:new Set([()=>Nd=null])},...a]})}(T,h))}return function s1(a){const l=Ry();if(!l)throw new xe(401,!1);return l}()}}function Ry(){return Nd?.get($0)??null}let $0=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function q0(a,l){let u;return u="noop"===a?new G0:("zone.js"===a?void 0:a)||new St(l),u}(h?.ngZone,function lI(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),g=[{provide:St,useValue:p}];return p.run(()=>{const v=Xc.create({providers:g,parent:this.injector,name:u.moduleType.name}),T=u.create(v),I=T.injector.get(hi,null);if(!I)throw new xe(402,!1);return p.runOutsideAngular(()=>{const x=p.onError.subscribe({next:P=>{I.handleError(P)}});T.onDestroy(()=>{zf(this._modules,T),x.unsubscribe()})}),function nc(a,l,u){try{const h=u();return Nm(h)?h.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(I,p,()=>{const x=T.injector.get(My);return x.runInitializers(),x.donePromise.then(()=>(function xk(a){ce(a,"Expected localeId to be defined"),"string"==typeof a&&(Sk=a.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Ay,Gm)||Gm),this._moduleDoBootstrap(T),T))})})}bootstrapModule(u,h=[]){const p=du({},h);return function MV(a,l,u){const h=new C0(u);return Promise.resolve(h)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,p))}_moduleDoBootstrap(u){const h=u.injector.get(dg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new xe(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(sI,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Vi(Xc))},a.\u0275prov=Re({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function du(a,l){return Array.isArray(l)?l.reduce(du,a):{...a,...l}}let dg=(()=>{class a{constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new N.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),v=new N.y(T=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{St.assertNotInAngularZone(),j0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{St.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{I.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ae.T)(g,v.pipe((0,fe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof B_;if(!this._injector.get(My).done)throw!p&&Te(u),new xe(405,false);let v;v=p?u:this._injector.get(lm).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const T=function Gf(a){return a.isBoundToModule}(v)?void 0:this._injector.get(Ff),x=v.create(Xc.NULL,[],h||v.selector,T),P=x.location.nativeElement,G=x.injector.get(XR,null);return G?.registerApplication(P),x.onDestroy(()=>{this.detachView(x.hostView),zf(this.components,x),G?.unregisterApplication(P)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;zf(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(H0,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>zf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new xe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(Vi(St),Vi(Cd),Vi(hi))},a.\u0275prov=Re({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function zf(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let a1=!0,l1=!1;function cI(){return l1=!0,a1}function RV(){if(l1)throw new Error("Cannot enable prod mode after platform setup.");a1=!1}let hg=(()=>{class a{}return a.__NG_ELEMENT_ID__=dI,a})();function dI(a){return function c1(a,l,u){if(gs(a)&&!u){const h=tr(a.index,l);return new nu(h,h)}return 47&a.type?new nu(l[16],l):null}(ci(),Pe(),16==(16&a))}class p1{constructor(){}supports(l){return wf(l)}create(l){return new fI(l)}}const LV=(a,l)=>l;class fI{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||LV}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,p=0,g=null;for(;u||h;){const v=!h||u&&u.currentIndex<pI(h,p,g)?u:h,T=pI(v,p,g),I=v.currentIndex;if(v===h)p--,h=h._nextRemoved;else if(u=u._next,null==v.previousIndex)p++;else{g||(g=[]);const x=T-p,P=I-p;if(x!=P){for(let Q=0;Q<x;Q++){const re=Q<g.length?g[Q]:g[Q]=0,Se=re+Q;P<=Se&&Se<x&&(g[Q]=re+1)}g[v.previousIndex]=P-x}}T!==I&&l(v,T,I)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!wf(l))throw new xe(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,g,v,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let T=0;T<this.length;T++)g=l[T],v=this._trackByFn(T,g),null!==u&&Object.is(u.trackById,v)?(h&&(u=this._verifyReinsertion(u,g,v,T)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,T),h=!0),u=u._next}else p=0,function QA(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[iu()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,T=>{v=this._trackByFn(p,T),null!==u&&Object.is(u.trackById,v)?(h&&(u=this._verifyReinsertion(u,T,v,p)),Object.is(u.item,T)||this._addIdentityChange(u,T)):(u=this._mismatch(u,T,v,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,p){let g;return null===l?g=this._itTail:(g=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,g,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,g,p)):l=this._addAfter(new m1(u,h),g,p),l}_verifyReinsertion(l,u,h,p){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==g?l=this._reinsertAfter(g,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,g=l._nextRemoved;return null===p?this._removalsHead=g:p._nextRemoved=g,null===g?this._removalsTail=p:g._prevRemoved=p,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const p=null===u?this._itHead:u._next;return l._next=p,l._prev=u,null===p?this._itTail=l:p._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new _1),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _1),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class m1{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class g1{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class _1{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new g1,this.map.set(u,h)),h.add(l)}get(l,u){const p=this.map.get(l);return p?p.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pI(a,l,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+l+p}class mI{constructor(){}supports(l){return l instanceof Map||Zb(l)}create(){return new y1}}class y1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Zb(l)))throw new xe(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,u);const g=p._prev,v=p._next;return g&&(g._next=v),v&&(v._prev=g),p._next=null,p._prev=null,p}const h=new co(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class co{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function v1(){return new $f([new p1])}let $f=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||v1()),deps:[[a,new Pa,new io]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new xe(901,!1)}}return a.\u0275prov=Re({token:a,providedIn:"root",factory:v1}),a})();function gI(){return new X0([new mI])}let X0=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||gI()),deps:[[a,new Pa,new io]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new xe(901,!1)}}return a.\u0275prov=Re({token:a,providedIn:"root",factory:gI}),a})();const C1=z0(null,"core",[]);let E1=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Vi(dg))},a.\u0275mod=Bi({type:a}),a.\u0275inj=Mt({}),a})();function T1(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},3942:(Ct,Oe,H)=>{H.d(Oe,{Z:()=>xe});var o=H(2090),z=H(4859),N=H(6881),ae=H(1877);class fe{constructor(Ee,ve){this._delegate=Ee,this.firebase=ve,(0,N._addComponent)(Ee,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ee,ve=N._DEFAULT_ENTRY_NAME){var wt;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(Ee);return!yt.isInitialized()&&"EXPLICIT"===(null===(wt=yt.getComponent())||void 0===wt?void 0:wt.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:ve})}_removeServiceInstance(Ee,ve=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(ve)}_addComponent(Ee){(0,N._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,N._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function Ce(){const rt=function be(rt){const Ee={},ve={__esModule:!0,initializeApp:function Ae(Ze,he={}){const Je=N.initializeApp(Ze,he);if((0,o.r3)(Ee,Je.name))return Ee[Je.name];const kt=new rt(Je,ve);return Ee[Je.name]=kt,kt},app:yt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function ke(Ze){const he=Ze.name,Je=he.replace("-compat","");if(N._registerComponent(Ze)&&"PUBLIC"===Ze.type){const kt=(vt=yt())=>{if("function"!=typeof vt[Je])throw se.create("invalid-app-argument",{appName:he});return vt[Je]()};void 0!==Ze.serviceProps&&(0,o.ZB)(kt,Ze.serviceProps),ve[Je]=kt,rt.prototype[Je]=function(...vt){return this._getService.bind(this,he).apply(this,Ze.multipleInstances?vt:[])}}return"PUBLIC"===Ze.type?ve[Je]:null},removeApp:function wt(Ze){delete Ee[Ze]},useAsService:function qe(Ze,he){return"serverAuth"===he?null:he},modularAPIs:N}};function yt(Ze){if(!(0,o.r3)(Ee,Ze=Ze||N._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Ze});return Ee[Ze]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Ie(){return Object.keys(Ee).map(Ze=>Ee[Ze])}}),yt.App=rt,ve}(fe);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function Ee(ve){(0,o.ZB)(rt,ve)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),rt}(),Z=new ae.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=Y;!function Fe(rt){(0,N.registerVersion)("@firebase/app-compat","0.2.13",rt)}()},6881:(Ct,Oe,H)=>{H.r(Oe),H.d(Oe,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ps,_DEFAULT_ENTRY_NAME:()=>_r,_addComponent:()=>ft,_addOrOverwriteComponent:()=>It,_apps:()=>Nn,_clearComponents:()=>gi,_components:()=>Yt,_getProvider:()=>yr,_registerComponent:()=>on,_removeServiceInstance:()=>Ii,deleteApp:()=>_i,getApp:()=>ti,getApps:()=>xn,initializeApp:()=>an,onLog:()=>yi,registerVersion:()=>vr,setLogLevel:()=>zr});var o=H(5861),z=H(4859),N=H(1877),ae=H(2090);let ye,se;const Y=new WeakMap,Z=new WeakMap,ne=new WeakMap,$e=new WeakMap,Fe=new WeakMap;let Ee={get(ue,oe,Ve){if(ue instanceof IDBTransaction){if("done"===oe)return Z.get(ue);if("objectStoreNames"===oe)return ue.objectStoreNames||ne.get(ue);if("store"===oe)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return Ae(ue[oe])},set:(ue,oe,Ve)=>(ue[oe]=Ve,!0),has:(ue,oe)=>ue instanceof IDBTransaction&&("done"===oe||"store"===oe)||oe in ue};function yt(ue){return"function"==typeof ue?function wt(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...oe){return ue.apply(Ie(this),oe),Ae(Y.get(this))}:function(...oe){return Ae(ue.apply(Ie(this),oe))}:function(oe,...Ve){const Ue=ue.call(Ie(this),oe,...Ve);return ne.set(Ue,oe.sort?oe.sort():[oe]),Ae(Ue)}}(ue):(ue instanceof IDBTransaction&&function rt(ue){if(Z.has(ue))return;const oe=new Promise((Ve,Ue)=>{const Pt=()=>{ue.removeEventListener("complete",$t),ue.removeEventListener("error",bn),ue.removeEventListener("abort",bn)},$t=()=>{Ve(),Pt()},bn=()=>{Ue(ue.error||new DOMException("AbortError","AbortError")),Pt()};ue.addEventListener("complete",$t),ue.addEventListener("error",bn),ue.addEventListener("abort",bn)});Z.set(ue,oe)}(ue),((ue,oe)=>oe.some(Ve=>ue instanceof Ve))(ue,function be(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Ee):ue)}function Ae(ue){if(ue instanceof IDBRequest)return function xe(ue){const oe=new Promise((Ve,Ue)=>{const Pt=()=>{ue.removeEventListener("success",$t),ue.removeEventListener("error",bn)},$t=()=>{Ve(Ae(ue.result)),Pt()},bn=()=>{Ue(ue.error),Pt()};ue.addEventListener("success",$t),ue.addEventListener("error",bn)});return oe.then(Ve=>{Ve instanceof IDBCursor&&Y.set(Ve,ue)}).catch(()=>{}),Fe.set(oe,ue),oe}(ue);if($e.has(ue))return $e.get(ue);const oe=yt(ue);return oe!==ue&&($e.set(ue,oe),Fe.set(oe,ue)),oe}const Ie=ue=>Fe.get(ue),Ze=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],Je=new Map;function kt(ue,oe){if(!(ue instanceof IDBDatabase)||oe in ue||"string"!=typeof oe)return;if(Je.get(oe))return Je.get(oe);const Ve=oe.replace(/FromIndex$/,""),Ue=oe!==Ve,Pt=he.includes(Ve);if(!(Ve in(Ue?IDBIndex:IDBObjectStore).prototype)||!Pt&&!Ze.includes(Ve))return;const $t=function(){var bn=(0,o.Z)(function*(ni,...nn){const cr=this.transaction(ni,Pt?"readwrite":"readonly");let ms=cr.store;return Ue&&(ms=ms.index(nn.shift())),(yield Promise.all([ms[Ve](...nn),Pt&&cr.done]))[0]});return function(nn){return bn.apply(this,arguments)}}();return Je.set(oe,$t),$t}!function ve(ue){Ee=ue(Ee)}(ue=>({...ue,get:(oe,Ve,Ue)=>kt(oe,Ve)||ue.get(oe,Ve,Ue),has:(oe,Ve)=>!!kt(oe,Ve)||ue.has(oe,Ve)}));class vt{constructor(oe){this.container=oe}getPlatformInfoString(){return this.container.getProviders().map(Ve=>{if(function Zt(ue){return"VERSION"===ue.getComponent()?.type}(Ve)){const Ue=Ve.getImmediate();return`${Ue.library}/${Ue.version}`}return null}).filter(Ve=>Ve).join(" ")}}const ht="@firebase/app",Fi=new N.Yd("@firebase/app"),_r="[DEFAULT]",Zn={[ht]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nn=new Map,Yt=new Map;function ft(ue,oe){try{ue.container.addComponent(oe)}catch(Ve){Fi.debug(`Component ${oe.name} failed to register with FirebaseApp ${ue.name}`,Ve)}}function It(ue,oe){ue.container.addOrOverwriteComponent(oe)}function on(ue){const oe=ue.name;if(Yt.has(oe))return Fi.debug(`There were multiple attempts to register component ${oe}.`),!1;Yt.set(oe,ue);for(const Ve of Nn.values())ft(Ve,ue);return!0}function yr(ue,oe){const Ve=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return Ve&&Ve.triggerHeartbeat(),ue.container.getProvider(oe)}function Ii(ue,oe,Ve=_r){yr(ue,oe).clearInstance(Ve)}function gi(){Yt.clear()}const ei=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wt{constructor(oe,Ve,Ue){this._isDeleted=!1,this._options=Object.assign({},oe),this._config=Object.assign({},Ve),this._name=Ve.name,this._automaticDataCollectionEnabled=Ve.automaticDataCollectionEnabled,this._container=Ue,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(oe){this._isDeleted=oe}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}const ps="9.23.0";function an(ue,oe={}){let Ve=ue;"object"!=typeof oe&&(oe={name:oe});const Ue=Object.assign({name:_r,automaticDataCollectionEnabled:!1},oe),Pt=Ue.name;if("string"!=typeof Pt||!Pt)throw ei.create("bad-app-name",{appName:String(Pt)});if(Ve||(Ve=(0,ae.aH)()),!Ve)throw ei.create("no-options");const $t=Nn.get(Pt);if($t){if((0,ae.vZ)(Ve,$t.options)&&(0,ae.vZ)(Ue,$t.config))return $t;throw ei.create("duplicate-app",{appName:Pt})}const bn=new z.H0(Pt);for(const nn of Yt.values())bn.addComponent(nn);const ni=new Wt(Ve,Ue,bn);return Nn.set(Pt,ni),ni}function ti(ue=_r){const oe=Nn.get(ue);if(!oe&&ue===_r&&(0,ae.aH)())return an();if(!oe)throw ei.create("no-app",{appName:ue});return oe}function xn(){return Array.from(Nn.values())}function _i(ue){return jn.apply(this,arguments)}function jn(){return(jn=(0,o.Z)(function*(ue){const oe=ue.name;Nn.has(oe)&&(Nn.delete(oe),yield Promise.all(ue.container.getProviders().map(Ve=>Ve.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function vr(ue,oe,Ve){var Ue;let Pt=null!==(Ue=Zn[ue])&&void 0!==Ue?Ue:ue;Ve&&(Pt+=`-${Ve}`);const $t=Pt.match(/\s|\//),bn=oe.match(/\s|\//);if($t||bn){const ni=[`Unable to register library "${Pt}" with version "${oe}":`];return $t&&ni.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),$t&&bn&&ni.push("and"),bn&&ni.push(`version name "${oe}" contains illegal characters (whitespace or "/")`),void Fi.warn(ni.join(" "))}on(new z.wA(`${Pt}-version`,()=>({library:Pt,version:oe}),"VERSION"))}function yi(ue,oe){if(null!==ue&&"function"!=typeof ue)throw ei.create("invalid-log-argument");(0,N.Am)(ue,oe)}function zr(ue){(0,N.Ub)(ue)}const W="firebase-heartbeat-store";let $=null;function B(){return $||($=function ke(ue,oe,{blocked:Ve,upgrade:Ue,blocking:Pt,terminated:$t}={}){const bn=indexedDB.open(ue,oe),ni=Ae(bn);return Ue&&bn.addEventListener("upgradeneeded",nn=>{Ue(Ae(bn.result),nn.oldVersion,nn.newVersion,Ae(bn.transaction),nn)}),Ve&&bn.addEventListener("blocked",nn=>Ve(nn.oldVersion,nn.newVersion,nn)),ni.then(nn=>{$t&&nn.addEventListener("close",()=>$t()),Pt&&nn.addEventListener("versionchange",cr=>Pt(cr.oldVersion,cr.newVersion,cr))}).catch(()=>{}),ni}("firebase-heartbeat-database",1,{upgrade:(ue,oe)=>{0===oe&&ue.createObjectStore(W)}}).catch(ue=>{throw ei.create("idb-open",{originalErrorMessage:ue.message})})),$}function O(){return(O=(0,o.Z)(function*(ue){try{return yield(yield B()).transaction(W).objectStore(W).get(Qe(ue))}catch(oe){if(oe instanceof ae.ZR)Fi.warn(oe.message);else{const Ve=ei.create("idb-get",{originalErrorMessage:oe?.message});Fi.warn(Ve.message)}}})).apply(this,arguments)}function ee(ue,oe){return Te.apply(this,arguments)}function Te(){return(Te=(0,o.Z)(function*(ue,oe){try{const Ue=(yield B()).transaction(W,"readwrite");yield Ue.objectStore(W).put(oe,Qe(ue)),yield Ue.done}catch(Ve){if(Ve instanceof ae.ZR)Fi.warn(Ve.message);else{const Ue=ei.create("idb-set",{originalErrorMessage:Ve?.message});Fi.warn(Ue.message)}}})).apply(this,arguments)}function Qe(ue){return`${ue.name}!${ue.options.appId}`}class nt{constructor(oe){this.container=oe,this._heartbeatsCache=null;const Ve=this.container.getProvider("app").getImmediate();this._storage=new Lt(Ve),this._heartbeatsCachePromise=this._storage.read().then(Ue=>(this._heartbeatsCache=Ue,Ue))}triggerHeartbeat(){var oe=this;return(0,o.Z)(function*(){const Ue=oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=lt();if(null===oe._heartbeatsCache&&(oe._heartbeatsCache=yield oe._heartbeatsCachePromise),oe._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!oe._heartbeatsCache.heartbeats.some($t=>$t.date===Pt))return oe._heartbeatsCache.heartbeats.push({date:Pt,agent:Ue}),oe._heartbeatsCache.heartbeats=oe._heartbeatsCache.heartbeats.filter($t=>{const bn=new Date($t.date).valueOf();return Date.now()-bn<=2592e6}),oe._storage.overwrite(oe._heartbeatsCache)})()}getHeartbeatsHeader(){var oe=this;return(0,o.Z)(function*(){if(null===oe._heartbeatsCache&&(yield oe._heartbeatsCachePromise),null===oe._heartbeatsCache||0===oe._heartbeatsCache.heartbeats.length)return"";const Ve=lt(),{heartbeatsToSend:Ue,unsentEntries:Pt}=function tn(ue,oe=1024){const Ve=[];let Ue=ue.slice();for(const Pt of ue){const $t=Ve.find(bn=>bn.agent===Pt.agent);if($t){if($t.dates.push(Pt.date),dn(Ve)>oe){$t.dates.pop();break}}else if(Ve.push({agent:Pt.agent,dates:[Pt.date]}),dn(Ve)>oe){Ve.pop();break}Ue=Ue.slice(1)}return{heartbeatsToSend:Ve,unsentEntries:Ue}}(oe._heartbeatsCache.heartbeats),$t=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ue}));return oe._heartbeatsCache.lastSentHeartbeatDate=Ve,Pt.length>0?(oe._heartbeatsCache.heartbeats=Pt,yield oe._storage.overwrite(oe._heartbeatsCache)):(oe._heartbeatsCache.heartbeats=[],oe._storage.overwrite(oe._heartbeatsCache)),$t})()}}function lt(){return(new Date).toISOString().substring(0,10)}class Lt{constructor(oe){this.app=oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var oe=this;return(0,o.Z)(function*(){return(yield oe._canUseIndexedDBPromise)&&(yield function L(ue){return O.apply(this,arguments)}(oe.app))||{heartbeats:[]}})()}overwrite(oe){var Ve=this;return(0,o.Z)(function*(){var Ue;if(yield Ve._canUseIndexedDBPromise){const $t=yield Ve.read();return ee(Ve.app,{lastSentHeartbeatDate:null!==(Ue=oe.lastSentHeartbeatDate)&&void 0!==Ue?Ue:$t.lastSentHeartbeatDate,heartbeats:oe.heartbeats})}})()}add(oe){var Ve=this;return(0,o.Z)(function*(){var Ue;if(yield Ve._canUseIndexedDBPromise){const $t=yield Ve.read();return ee(Ve.app,{lastSentHeartbeatDate:null!==(Ue=oe.lastSentHeartbeatDate)&&void 0!==Ue?Ue:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...oe.heartbeats]})}})()}}function dn(ue){return(0,ae.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function lr(ue){on(new z.wA("platform-logger",oe=>new vt(oe),"PRIVATE")),on(new z.wA("heartbeat",oe=>new nt(oe),"PRIVATE")),vr(ht,"0.9.13",ue),vr(ht,"0.9.13","esm2017"),vr("fire-js","")}("")},4859:(Ct,Oe,H)=>{H.d(Oe,{H0:()=>be,wA:()=>N,zt:()=>fe});var o=H(5861),z=H(2090);class N{constructor(Y,Z,ne){this.name=Y,this.instanceFactory=Z,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const ae="[DEFAULT]";class fe{constructor(Y,Z){this.name=Y,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const Z=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(Z)){const ne=new z.BH;if(this.instancesDeferred.set(Z,ne),this.isInitialized(Z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:Z});$e&&ne.resolve($e)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(Y){var Z;const ne=this.normalizeInstanceIdentifier(Y?.identifier),$e=null!==(Z=Y?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Fe){if($e)return null;throw Fe}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function se(Ce){return"EAGER"===Ce.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[Z,ne]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(Z);try{const Fe=this.getOrInitializeService({instanceIdentifier:$e});ne.resolve(Fe)}catch{}}}}clearInstance(Y=ae){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,o.Z)(function*(){const Z=Array.from(Y.instances.values());yield Promise.all([...Z.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...Z.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=ae){return this.instances.has(Y)}getOptions(Y=ae){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:Z={}}=Y,ne=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:ne,options:Z});for(const[Fe,xe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Fe)&&xe.resolve($e);return $e}onInit(Y,Z){var ne;const $e=this.normalizeInstanceIdentifier(Z),Fe=null!==(ne=this.onInitCallbacks.get($e))&&void 0!==ne?ne:new Set;Fe.add(Y),this.onInitCallbacks.set($e,Fe);const xe=this.instances.get($e);return xe&&Y(xe,$e),()=>{Fe.delete(Y)}}invokeOnInitCallbacks(Y,Z){const ne=this.onInitCallbacks.get(Z);if(ne)for(const $e of ne)try{$e(Y,Z)}catch{}}getOrInitializeService({instanceIdentifier:Y,options:Z={}}){let ne=this.instances.get(Y);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=Y,Ce===ae?void 0:Ce),options:Z}),this.instances.set(Y,ne),this.instancesOptions.set(Y,Z),this.invokeOnInitCallbacks(ne,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,ne)}catch{}var Ce;return ne||null}normalizeInstanceIdentifier(Y=ae){return this.component?this.component.multipleInstances?Y:ae:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const Z=this.getProvider(Y.name);if(Z.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);Z.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const Z=new fe(Y,this);return this.providers.set(Y,Z),Z}getProviders(){return Array.from(this.providers.values())}}},1877:(Ct,Oe,H)=>{H.d(Oe,{Am:()=>Ce,Ub:()=>be,Yd:()=>se,in:()=>z});const o=[];var z=(()=>{return(Y=z||(z={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",z;var Y})();const N={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},ae=z.INFO,fe={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},ye=(Y,Z,...ne)=>{if(Z<Y.logLevel)return;const $e=(new Date).toISOString(),Fe=fe[Z];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Fe](`[${$e}]  ${Y.name}:`,...ne)};class se{constructor(Z){this.name=Z,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in z))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?N[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...Z),this._logHandler(this,z.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...Z),this._logHandler(this,z.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,z.INFO,...Z),this._logHandler(this,z.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,z.WARN,...Z),this._logHandler(this,z.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...Z),this._logHandler(this,z.ERROR,...Z)}}function be(Y){o.forEach(Z=>{Z.setLogLevel(Y)})}function Ce(Y,Z){for(const ne of o){let $e=null;Z&&Z.level&&($e=N[Z.level]),ne.userLogHandler=null===Y?null:(Fe,xe,...rt)=>{const Ee=rt.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");xe>=($e??Fe.logLevel)&&Y({level:z[xe].toLowerCase(),message:Ee,args:rt,type:Fe.name})}}}},259:(Ct,Oe,H)=>{H.d(Oe,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=H(6881);(0,o.registerVersion)("firebase","9.23.0","app")},9260:(Ct,Oe,H)=>{H.d(Oe,{Z:()=>o.Z});var o=H(3942);o.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Ct,Oe,H)=>{H.r(Oe);var o=H(5861),z=H(3942),N=H(1389),ae=H(2090),se=(H(6881),H(1877),H(4859));function be(){return window}function Z(){return(Z=(0,o.Z)(function*(B,L,O){var ee;const{BuildInfo:Te}=be();(0,N.as)(L.sessionId,"AuthEvent did not contain a session ID");const Qe=yield ve(L.sessionId),bt={};return(0,N.at)()?bt.ibi=Te.packageName:(0,N.au)()?bt.apn=Te.packageName:(0,N.av)(B,"operation-not-supported-in-this-environment"),Te.displayName&&(bt.appDisplayName=Te.displayName),bt.sessionId=Qe,(0,N.aw)(B,O,L.type,void 0,null!==(ee=L.eventId)&&void 0!==ee?ee:void 0,bt)})).apply(this,arguments)}function $e(){return($e=(0,o.Z)(function*(B){const{BuildInfo:L}=be(),O={};(0,N.at)()?O.iosBundleId=L.packageName:(0,N.au)()?O.androidPackageName=L.packageName:(0,N.av)(B,"operation-not-supported-in-this-environment"),yield(0,N.ax)(B,O)})).apply(this,arguments)}function rt(){return(rt=(0,o.Z)(function*(B,L,O){const{cordova:ee}=be();let Te=()=>{};try{yield new Promise((Qe,bt)=>{let De=null;function nt(){var Lt;Qe();const dn=null===(Lt=ee.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof dn&&dn(),"function"==typeof O?.close&&O.close()}function lt(){De||(De=window.setTimeout(()=>{bt((0,N.az)(B,"redirect-cancelled-by-user"))},2e3))}function tn(){"visible"===document?.visibilityState&&lt()}L.addPassiveListener(nt),document.addEventListener("resume",lt,!1),(0,N.au)()&&document.addEventListener("visibilitychange",tn,!1),Te=()=>{L.removePassiveListener(nt),document.removeEventListener("resume",lt,!1),document.removeEventListener("visibilitychange",tn,!1),De&&window.clearTimeout(De)}})}finally{Te()}})).apply(this,arguments)}function ve(B){return wt.apply(this,arguments)}function wt(){return(wt=(0,o.Z)(function*(B){const L=yt(B),O=yield crypto.subtle.digest("SHA-256",L);return Array.from(new Uint8Array(O)).map(Te=>Te.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yt(B){if((0,N.as)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const L=new ArrayBuffer(B.length),O=new Uint8Array(L);for(let ee=0;ee<B.length;ee++)O[ee]=B.charCodeAt(ee);return O}class Ie extends N.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(L=>{this.resolveInialized=L})}addPassiveListener(L){this.passiveListeners.add(L)}removePassiveListener(L){this.passiveListeners.delete(L)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(L){return this.resolveInialized(),this.passiveListeners.forEach(O=>O(L)),super.onEvent(L)}initialized(){var L=this;return(0,o.Z)(function*(){yield L.initPromise})()}}function Ze(B){return he.apply(this,arguments)}function he(){return(he=(0,o.Z)(function*(B){const L=yield vt()._get(Zt(B));return L&&(yield vt()._remove(Zt(B))),L})).apply(this,arguments)}function kt(){const B=[],L="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let O=0;O<20;O++){const ee=Math.floor(Math.random()*L.length);B.push(L.charAt(ee))}return B.join("")}function vt(){return(0,N.aC)(N.b)}function Zt(B){return(0,N.aD)("authEvent",B.config.apiKey,B.name)}function Fi(B){if(!B?.includes("?"))return{};const[L,...O]=B.split("?");return(0,ae.zd)(O.join("?"))}function ie(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.az)("no-auth-event")}}function ut(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function en(B=(0,ae.z$)()){return!("file:"!==ut()&&"ionic:"!==ut()&&"capacitor:"!==ut()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function oi(){try{const B=self.localStorage,L=N.aL();if(B)return B.setItem(L,"1"),B.removeItem(L),!function vn(B=(0,ae.z$)()){return function un(){return(0,ae.w1)()&&11===document?.documentMode}()||function Hn(B=(0,ae.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,ae.hl)()}catch{return Pn()&&(0,ae.hl)()}return!1}function Pn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xn(){return(function Mt(){return"http:"===ut()||"https:"===ut()}()||(0,ae.ru)()||en())&&!function Rt(){return(0,ae.b$)()||(0,ae.UG)()}()&&oi()&&!Pn()}function Di(){return en()&&typeof document<"u"}function at(){return(at=(0,o.Z)(function*(){return!!Di()&&new Promise(B=>{const L=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(L),B(!0)})})})).apply(this,arguments)}const mi={LOCAL:"local",NONE:"none",SESSION:"session"},ai=N.aA,fs="persistence";function Zn(B){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,o.Z)(function*(B){yield B._initializationPromise;const L=ft(),O=N.aD(fs,B.config.apiKey,B.name);L&&L.setItem(O,B._getPersistence())})).apply(this,arguments)}function ft(){var B;try{return(null===(B=function Li(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const It=N.aA;class on{constructor(){this.browserResolver=N.aC(N.k),this.cordovaResolver=N.aC(class Ps{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(L){var O=this;return(0,o.Z)(function*(){const ee=L._key();let Te=O.eventManagers.get(ee);return Te||(Te=new Ie(L),O.eventManagers.set(ee,Te),O.attachCallbackListeners(L,Te)),Te})()}_openPopup(L){(0,N.av)(L,"operation-not-supported-in-this-environment")}_openRedirect(L,O,ee,Te){var Qe=this;return(0,o.Z)(function*(){!function Ee(B){var L,O,ee,Te,Qe,bt,De,nt,lt,tn;const Lt=be();(0,N.aA)("function"==typeof(null===(L=Lt?.universalLinks)||void 0===L?void 0:L.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aA)(typeof(null===(O=Lt?.BuildInfo)||void 0===O?void 0:O.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aA)("function"==typeof(null===(Qe=null===(Te=null===(ee=Lt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===Te?void 0:Te.browsertab)||void 0===Qe?void 0:Qe.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(nt=null===(De=null===(bt=Lt?.cordova)||void 0===bt?void 0:bt.plugins)||void 0===De?void 0:De.browsertab)||void 0===nt?void 0:nt.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(tn=null===(lt=Lt?.cordova)||void 0===lt?void 0:lt.InAppBrowser)||void 0===tn?void 0:tn.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(L);const bt=yield Qe._initialize(L);yield bt.initialized(),bt.resetRedirect(),(0,N.aG)(),yield Qe._originValidation(L);const De=function ke(B,L,O=null){return{type:L,eventId:O,urlResponse:null,sessionId:kt(),postBody:null,tenantId:B.tenantId,error:(0,N.az)(B,"no-auth-event")}}(L,ee,Te);yield function qe(B,L){return vt()._set(Zt(B),L)}(L,De);const nt=yield function Y(B,L,O){return Z.apply(this,arguments)}(L,De,O),lt=yield function Fe(B){const{cordova:L}=be();return new Promise(O=>{L.plugins.browsertab.isAvailable(ee=>{let Te=null;ee?L.plugins.browsertab.openUrl(B):Te=L.InAppBrowser.open(B,(0,N.ay)()?"_blank":"_system","location=yes"),O(Te)})})}(nt);return function xe(B,L,O){return rt.apply(this,arguments)}(L,bt,lt)})()}_isIframeWebStorageSupported(L,O){throw new Error("Method not implemented.")}_originValidation(L){const O=L._key();return this.originValidationPromises[O]||(this.originValidationPromises[O]=function ne(B){return $e.apply(this,arguments)}(L)),this.originValidationPromises[O]}attachCallbackListeners(L,O){const{universalLinks:ee,handleOpenURL:Te,BuildInfo:Qe}=be(),bt=setTimeout((0,o.Z)(function*(){yield Ze(L),O.onEvent(ie())}),500),De=function(){var tn=(0,o.Z)(function*(Lt){clearTimeout(bt);const dn=yield Ze(L);let lr=null;dn&&Lt?.url&&(lr=function Je(B,L){var O,ee;const Te=function Os(B){const L=Fi(B),O=L.link?decodeURIComponent(L.link):void 0,ee=Fi(O).link,Te=L.deep_link_id?decodeURIComponent(L.deep_link_id):void 0;return Fi(Te).link||Te||ee||O||B}(L);if(Te.includes("/__/auth/callback")){const Qe=Fi(Te),bt=Qe.firebaseError?function ht(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(Qe.firebaseError)):null,De=null===(ee=null===(O=bt?.code)||void 0===O?void 0:O.split("auth/"))||void 0===ee?void 0:ee[1],nt=De?(0,N.az)(De):null;return nt?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:nt,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:Te,postBody:null}}return null}(dn,Lt.url)),O.onEvent(lr||ie())});return function(dn){return tn.apply(this,arguments)}}();typeof ee<"u"&&"function"==typeof ee.subscribe&&ee.subscribe(null,De);const nt=Te,lt=`${Qe.packageName.toLowerCase()}://`;be().handleOpenURL=function(){var tn=(0,o.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(lt)&&De({url:Lt}),"function"==typeof nt)try{nt(Lt)}catch(dn){console.error(dn)}});return function(Lt){return tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(L){var O=this;return(0,o.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._initialize(L)})()}_openPopup(L,O,ee,Te){var Qe=this;return(0,o.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openPopup(L,O,ee,Te)})()}_openRedirect(L,O,ee,Te){var Qe=this;return(0,o.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openRedirect(L,O,ee,Te)})()}_isIframeWebStorageSupported(L,O){this.assertedUnderlyingResolver._isIframeWebStorageSupported(L,O)}_originValidation(L){return this.assertedUnderlyingResolver._originValidation(L)}get _shouldInitProactively(){return Di()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return It(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var L=this;return(0,o.Z)(function*(){if(L.underlyingResolver)return;const O=yield function Gr(){return at.apply(this,arguments)}();L.underlyingResolver=O?L.cordovaResolver:L.browserResolver})()}}function yr(B){return B.unwrap()}function gi(B){return ei(B)}function ei(B){const{_tokenResponse:L}=B instanceof ae.ZR?B.customData:B;if(!L)return null;if(!(B instanceof ae.ZR)&&"temporaryProof"in L&&"phoneNumber"in L)return N.P.credentialFromResult(B);const O=L.providerId;if(!O||O===N.p.PASSWORD)return null;let ee;switch(O){case N.p.GOOGLE:ee=N.V;break;case N.p.FACEBOOK:ee=N.U;break;case N.p.GITHUB:ee=N.W;break;case N.p.TWITTER:ee=N.Z;break;default:const{oauthIdToken:Te,oauthAccessToken:Qe,oauthTokenSecret:bt,pendingToken:De,nonce:nt}=L;return Qe||bt||Te||De?De?O.startsWith("saml.")?N.aO._create(O,De):N.L._fromParams({providerId:O,signInMethod:O,pendingToken:De,idToken:Te,accessToken:Qe}):new N.X(O).credential({idToken:Te,accessToken:Qe,rawNonce:nt}):null}return B instanceof ae.ZR?ee.credentialFromError(B):ee.credentialFromResult(B)}function Wt(B,L){return L.catch(O=>{throw O instanceof ae.ZR&&function Ot(B,L){var O;const ee=null===(O=L.customData)||void 0===O?void 0:O._tokenResponse;if("auth/multi-factor-auth-required"===L?.code)L.resolver=new ti(B,N.aq(B,L));else if(ee){const Te=ei(L),Qe=L;Te&&(Qe.credential=Te,Qe.tenantId=ee.tenantId||void 0,Qe.email=ee.email||void 0,Qe.phoneNumber=ee.phoneNumber||void 0)}}(B,O),O}).then(O=>{const Te=O.user;return{operationType:O.operationType,credential:gi(O),additionalUserInfo:N.ao(O),user:xn.getOrCreate(Te)}})}function ps(B,L){return an.apply(this,arguments)}function an(){return(an=(0,o.Z)(function*(B,L){const O=yield L;return{verificationId:O.verificationId,confirm:ee=>Wt(B,O.confirm(ee))}})).apply(this,arguments)}class ti{constructor(L,O){this.resolver=O,this.auth=function Ii(B){return B.wrapped()}(L)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(L){return Wt(yr(this.auth),this.resolver.resolveSignIn(L))}}class xn{constructor(L){this._delegate=L,this.multiFactor=N.ar(L)}static getOrCreate(L){return xn.USER_MAP.has(L)||xn.USER_MAP.set(L,new xn(L)),xn.USER_MAP.get(L)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(L){return this._delegate.getIdTokenResult(L)}getIdToken(L){return this._delegate.getIdToken(L)}linkAndRetrieveDataWithCredential(L){return this.linkWithCredential(L)}linkWithCredential(L){var O=this;return(0,o.Z)(function*(){return Wt(O.auth,N.a0(O._delegate,L))})()}linkWithPhoneNumber(L,O){var ee=this;return(0,o.Z)(function*(){return ps(ee.auth,N.l(ee._delegate,L,O))})()}linkWithPopup(L){var O=this;return(0,o.Z)(function*(){return Wt(O.auth,N.d(O._delegate,L,on))})()}linkWithRedirect(L){var O=this;return(0,o.Z)(function*(){return yield Zn(N.aH(O.auth)),N.g(O._delegate,L,on)})()}reauthenticateAndRetrieveDataWithCredential(L){return this.reauthenticateWithCredential(L)}reauthenticateWithCredential(L){var O=this;return(0,o.Z)(function*(){return Wt(O.auth,N.a1(O._delegate,L))})()}reauthenticateWithPhoneNumber(L,O){return ps(this.auth,N.r(this._delegate,L,O))}reauthenticateWithPopup(L){return Wt(this.auth,N.e(this._delegate,L,on))}reauthenticateWithRedirect(L){var O=this;return(0,o.Z)(function*(){return yield Zn(N.aH(O.auth)),N.h(O._delegate,L,on)})()}sendEmailVerification(L){return N.ae(this._delegate,L)}unlink(L){var O=this;return(0,o.Z)(function*(){return yield N.an(O._delegate,L),O})()}updateEmail(L){return N.aj(this._delegate,L)}updatePassword(L){return N.ak(this._delegate,L)}updatePhoneNumber(L){return N.u(this._delegate,L)}updateProfile(L){return N.ai(this._delegate,L)}verifyBeforeUpdateEmail(L,O){return N.af(this._delegate,L,O)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xn.USER_MAP=new WeakMap;const _i=N.aA;let jn=(()=>{class B{constructor(O,ee){if(this.app=O,ee.isInitialized())return this._delegate=ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Te}=O.options;_i(Te,"invalid-api-key",{appName:O.name}),_i(Te,"invalid-api-key",{appName:O.name});const Qe=typeof window<"u"?on:void 0;this._delegate=ee.initialize({options:{persistence:yi(Te,O.name),popupRedirectResolver:Qe}}),this._delegate._updateErrorMap(N.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(O){this._delegate.languageCode=O}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(O){this._delegate.tenantId=O}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(O,ee){N.I(this._delegate,O,ee)}applyActionCode(O){return N.a5(this._delegate,O)}checkActionCode(O){return N.a6(this._delegate,O)}confirmPasswordReset(O,ee){return N.a4(this._delegate,O,ee)}createUserWithEmailAndPassword(O,ee){var Te=this;return(0,o.Z)(function*(){return Wt(Te._delegate,N.a8(Te._delegate,O,ee))})()}fetchProvidersForEmail(O){return this.fetchSignInMethodsForEmail(O)}fetchSignInMethodsForEmail(O){return N.ad(this._delegate,O)}isSignInWithEmailLink(O){return N.ab(this._delegate,O)}getRedirectResult(){var O=this;return(0,o.Z)(function*(){_i(Xn(),O._delegate,"operation-not-supported-in-this-environment");const ee=yield N.j(O._delegate,on);return ee?Wt(O._delegate,Promise.resolve(ee)):{credential:null,user:null}})()}addFrameworkForLogging(O){!function Me(B,L){(0,N.aH)(B)._logFramework(L)}(this._delegate,O)}onAuthStateChanged(O,ee,Te){const{next:Qe,error:bt,complete:De}=vr(O,ee,Te);return this._delegate.onAuthStateChanged(Qe,bt,De)}onIdTokenChanged(O,ee,Te){const{next:Qe,error:bt,complete:De}=vr(O,ee,Te);return this._delegate.onIdTokenChanged(Qe,bt,De)}sendSignInLinkToEmail(O,ee){return N.aa(this._delegate,O,ee)}sendPasswordResetEmail(O,ee){return N.a3(this._delegate,O,ee||void 0)}setPersistence(O){var ee=this;return(0,o.Z)(function*(){let Te;switch(function _r(B,L){ai(Object.values(mi).includes(L),B,"invalid-persistence-type"),(0,ae.b$)()?ai(L!==mi.SESSION,B,"unsupported-persistence-type"):(0,ae.UG)()?ai(L===mi.NONE,B,"unsupported-persistence-type"):Pn()?ai(L===mi.NONE||L===mi.LOCAL&&(0,ae.hl)(),B,"unsupported-persistence-type"):ai(L===mi.NONE||oi(),B,"unsupported-persistence-type")}(ee._delegate,O),O){case mi.SESSION:Te=N.a;break;case mi.LOCAL:Te=(yield N.aC(N.i)._isAvailable())?N.i:N.b;break;case mi.NONE:Te=N.N;break;default:return N.av("argument-error",{appName:ee._delegate.name})}return ee._delegate.setPersistence(Te)})()}signInAndRetrieveDataWithCredential(O){return this.signInWithCredential(O)}signInAnonymously(){return Wt(this._delegate,N._(this._delegate))}signInWithCredential(O){return Wt(this._delegate,N.$(this._delegate,O))}signInWithCustomToken(O){return Wt(this._delegate,N.a2(this._delegate,O))}signInWithEmailAndPassword(O,ee){return Wt(this._delegate,N.a9(this._delegate,O,ee))}signInWithEmailLink(O,ee){return Wt(this._delegate,N.ac(this._delegate,O,ee))}signInWithPhoneNumber(O,ee){return ps(this._delegate,N.s(this._delegate,O,ee))}signInWithPopup(O){var ee=this;return(0,o.Z)(function*(){return _i(Xn(),ee._delegate,"operation-not-supported-in-this-environment"),Wt(ee._delegate,N.c(ee._delegate,O,on))})()}signInWithRedirect(O){var ee=this;return(0,o.Z)(function*(){return _i(Xn(),ee._delegate,"operation-not-supported-in-this-environment"),yield Zn(ee._delegate),N.f(ee._delegate,O,on)})()}updateCurrentUser(O){return this._delegate.updateCurrentUser(O)}verifyPasswordResetCode(O){return N.a7(this._delegate,O)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=mi,B})();function vr(B,L,O){let ee=B;"function"!=typeof B&&({next:ee,error:L,complete:O}=B);const Te=ee;return{next:bt=>Te(bt&&xn.getOrCreate(bt)),error:L,complete:O}}function yi(B,L){const O=function Yt(B,L){const O=ft();if(!O)return[];const ee=N.aD(fs,B,L);switch(O.getItem(ee)){case mi.NONE:return[N.N];case mi.LOCAL:return[N.i,N.a];case mi.SESSION:return[N.a];default:return[]}}(B,L);if(typeof self<"u"&&!O.includes(N.i)&&O.push(N.i),typeof window<"u")for(const ee of[N.b,N.a])O.includes(ee)||O.push(ee);return O.includes(N.N)||O.push(N.N),O}class zr{constructor(){this.providerId="phone",this._delegate=new N.P(yr(z.Z.auth()))}static credential(L,O){return N.P.credential(L,O)}verifyPhoneNumber(L,O){return this._delegate.verifyPhoneNumber(L,O)}unwrap(){return this._delegate}}zr.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,zr.PROVIDER_ID=N.P.PROVIDER_ID;const Bi=N.aA;class ar{constructor(L,O,ee=z.Z.app()){var Te;Bi(null===(Te=ee.options)||void 0===Te?void 0:Te.apiKey,"invalid-api-key",{appName:ee.name}),this._delegate=new N.R(L,O,ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(B){B.INTERNAL.registerComponent(new se.wA("auth-compat",L=>{const O=L.getProvider("app-compat").getImmediate(),ee=L.getProvider("auth");return new jn(O,ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.Q,FacebookAuthProvider:N.U,GithubAuthProvider:N.W,GoogleAuthProvider:N.V,OAuthProvider:N.X,SAMLAuthProvider:N.Y,PhoneAuthProvider:zr,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:ar,TwitterAuthProvider:N.Z,Auth:jn,AuthCredential:N.J,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.4.2")}(z.Z)},5861:(Ct,Oe,H)=>{function o(N,ae,fe,ye,se,be,Ce){try{var Y=N[be](Ce),Z=Y.value}catch(ne){return void fe(ne)}Y.done?ae(Z):Promise.resolve(Z).then(ye,se)}function z(N){return function(){var ae=this,fe=arguments;return new Promise(function(ye,se){var be=N.apply(ae,fe);function Ce(Z){o(be,ye,se,Ce,Y,"next",Z)}function Y(Z){o(be,ye,se,Ce,Y,"throw",Z)}Ce(void 0)})}}H.d(Oe,{Z:()=>z})},7582:(Ct,Oe,H)=>{function ae(ce,ie){var Me={};for(var me in ce)Object.prototype.hasOwnProperty.call(ce,me)&&ie.indexOf(me)<0&&(Me[me]=ce[me]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(me=Object.getOwnPropertySymbols(ce);Ne<me.length;Ne++)ie.indexOf(me[Ne])<0&&Object.prototype.propertyIsEnumerable.call(ce,me[Ne])&&(Me[me[Ne]]=ce[me[Ne]])}return Me}function ne(ce,ie,Me,me){return new(Me||(Me=Promise))(function(Re,ut){function Mt(un){try{Rt(me.next(un))}catch(Hn){ut(Hn)}}function en(un){try{Rt(me.throw(un))}catch(Hn){ut(Hn)}}function Rt(un){un.done?Re(un.value):function Ne(Re){return Re instanceof Me?Re:new Me(function(ut){ut(Re)})}(un.value).then(Mt,en)}Rt((me=me.apply(ce,ie||[])).next())})}function Ae(ce){return this instanceof Ae?(this.v=ce,this):new Ae(ce)}function Ie(ce,ie,Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,me=Me.apply(ce,ie||[]),Re=[];return Ne={},ut("next"),ut("throw"),ut("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function ut(vn){me[vn]&&(Ne[vn]=function(oi){return new Promise(function(Pn,Xn){Re.push([vn,oi,Pn,Xn])>1||Mt(vn,oi)})})}function Mt(vn,oi){try{!function en(vn){vn.value instanceof Ae?Promise.resolve(vn.value.v).then(Rt,un):Hn(Re[0][2],vn)}(me[vn](oi))}catch(Pn){Hn(Re[0][3],Pn)}}function Rt(vn){Mt("next",vn)}function un(vn){Mt("throw",vn)}function Hn(vn,oi){vn(oi),Re.shift(),Re.length&&Mt(Re[0][0],Re[0][1])}}function qe(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ie=ce[Symbol.asyncIterator];return ie?ie.call(ce):(ce=function rt(ce){var ie="function"==typeof Symbol&&Symbol.iterator,Me=ie&&ce[ie],me=0;if(Me)return Me.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&me>=ce.length&&(ce=void 0),{value:ce&&ce[me++],done:!ce}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),Me={},me("next"),me("throw"),me("return"),Me[Symbol.asyncIterator]=function(){return this},Me);function me(Re){Me[Re]=ce[Re]&&function(ut){return new Promise(function(Mt,en){!function Ne(Re,ut,Mt,en){Promise.resolve(en).then(function(Rt){Re({value:Rt,done:Mt})},ut)}(Mt,en,(ut=ce[Re](ut)).done,ut.value)})}}}H.d(Oe,{FC:()=>Ie,KL:()=>qe,_T:()=>ae,mG:()=>ne,qq:()=>Ae}),"function"==typeof SuppressedError&&SuppressedError}},Ct=>{Ct(Ct.s=8718)}]);